;/*FB_PKG_DELIM*/

__d("FxAuthenticationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("5227"),s=o("FalcoLoggerInternal").create("fx_authentication",e),u=s;l.default=u}),98);
__d("FXAuthenticationLogger",["FxAuthenticationFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.event,n=e.target_account_id,o=n===void 0?null:n,a=e.target_account_type,i=a===void 0?null:a,l={fx_auth_event:t,target_account_id:o,target_account_type:i};r("FxAuthenticationFalcoEvent").log(function(){return l})}l.logEvent=e}),98);
__d("IgtsDefaultsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4193"),s=o("FalcoLoggerInternal").create("igts_defaults",e),u=s;l.default=u}),98);
__d("PolarisAPIFXCALAuthLogin",["PolarisEncryptionHelper","PolarisInstapi","asyncToGeneratorRuntime","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i={requestUUID:r("uuidv4")()},l=babelHelpers.extends({},yield o("PolarisEncryptionHelper").getEncryptedParam("password",t,i),{etoken:a,username:e});return o("PolarisInstapi").apiPost("/api/v1/web/fxcal/auth/login/ajax/",{body:l}).then(function(e){return e.data})}),s.apply(this,arguments)}l.fxcalAuthLogin=e}),98);
__d("PolarisAPIFxcalAuthTwoFactorLogin",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a,i,l){var s={app_id:i,etoken:l,identifier:e,trust_signal:t,two_fac_code:r,username:n,verification_method:a};return o("PolarisInstapi").apiPost("/api/v1/web/fxcal/auth/two_fac_login/ajax/",{body:s}).then(function(e){return e.data})}l.fxcalAuthTwoFactorLogin=e}),98);
__d("PolarisAPILoginTwoFactor",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a,i,l){l===void 0&&(l=!1);var s={identifier:e,isPrivacyPortalReq:l,queryParams:i,trust_signal:t,username:n,verification_method:a,verificationCode:r};return o("PolarisInstapi").apiPost("/api/v1/web/accounts/login/ajax/two_factor/",{body:s}).then(function(e){return e.data})}l.loginTwoFactor=e}),98);
__d("PolarisAPISendAccountRecoveryEmail",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("PolarisInstapi").apiPost("/api/v1/web/accounts/send_account_recovery_email_ajax/",{body:{query:e}}).then(function(e){return e.data})}l.sendAccountRecoveryEmail=e}),98);
__d("PolarisAPISendTwoFactorLoginSms",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n={identifier:t,username:e};return o("PolarisInstapi").apiPost("/api/v1/web/accounts/send_two_factor_login_sms/",{body:n}).then(function(e){return e.data})}l.sendTwoFactorLoginSms=e}),98);
__d("PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="10060380564020189"}),null);
__d("PolarisAPISendTwoFactorLoginWhatsappMutation.graphql",["PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"request_data",variableName:"input"}],concreteType:"XDTSendTwoFactorLoginResponse",kind:"LinkedField",name:"xdt_send_two_factor_login_whatsapp",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTTwoFactorLoginInfo",kind:"LinkedField",name:"two_factor_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"obfuscated_phone_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_messenger_code_option",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_new_login_screen",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sms_not_allowed_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sms_two_factor_on",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totp_two_factor_on",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"two_factor_identifier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"whatsapp_two_factor_on",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"two_factor_required",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"PolarisAPISendTwoFactorLoginWhatsappMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"PolarisAPISendTwoFactorLoginWhatsappMutation",selections:t},params:{id:n("PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_send_two_factor_login_whatsapp"]},name:"PolarisAPISendTwoFactorLoginWhatsappMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("PolarisAPISendTwoFactorLoginWhatsapp",["CometRelay","PolarisAPISendTwoFactorLoginWhatsappMutation.graphql","PolarisRelayEnvironment","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e!==void 0?e:e=n("PolarisAPISendTwoFactorLoginWhatsappMutation.graphql");function c(e,t){return new(s||(s=n("Promise")))(function(n,a){o("CometRelay").commitMutation(r("PolarisRelayEnvironment"),{mutation:u,onCompleted:function(t,r){if(r&&r.length){a(r);return}n(t)},onError:function(t){a([t])},variables:{input:{identifier:t,username:e}}})})}l.sendTwoFactorLoginWhatsapp=c}),98);
__d("PolarisAPISetPrivateAccount",["PolarisInstapi"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a={is_private:e};return t&&(a.bypass_rate_limit_dialog="1"),n&&(a.privacy_nux_action=!0),r&&(a.using_confirmation_dialog=!0),o("PolarisInstapi").apiPost("/api/v1/web/accounts/set_private/",{body:a}).then(function(e){return babelHelpers.extends({},e.data,{status:e.status})})}l.setPrivateAccount=e}),98);
__d("PolarisAcceptTermsOfUseBody.react",["IGDSBox.react","IGDSCheckbox.react","IGDSDivider.react","IGDSListItem.react","IGDSText.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisExternalLink.react","PolarisGenericStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState,m="https://help.instagram.com/581066165581870",p="https://help.instagram.com/519522125107875",_="https://help.instagram.com/626057554667531",f=new Map([[o("PolarisAuthStrings").TERMS_OF_USE_REQUIRED,m],[o("PolarisAuthStrings").DATA_POLICY_REQUIRED,p],[o("PolarisAuthStrings").LOCATION_BASED_FEATURES_REQUIRED,_]]);function g(e){var t=o("react-compiler-runtime").c(12),n=e.onToggle,a=e.selected,i=e.subtitleHref,l=e.title,u;t[0]!==n||t[1]!==a?(u=s.jsx(r("IGDSCheckbox.react"),{checkboxShape:"circle",isChecked:a,name:"acceptTermsCheckbox",onChange:n}),t[0]=n,t[1]=a,t[2]=u):u=t[2];var c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",children:o("PolarisGenericStrings").LEARN_MORE}),t[3]=c):c=t[3];var d;t[4]!==i?(d=s.jsx(r("IGDSBox.react"),{marginBottom:1,children:s.jsx(r("PolarisExternalLink.react"),{href:i,children:c})}),t[4]=i,t[5]=d):d=t[5];var m;t[6]!==l?(m=s.jsx(r("IGDSBox.react"),{marginTop:3,children:s.jsx(r("IGDSText.react"),{maxLines:1,zeroMargin:!0,children:l})}),t[6]=l,t[7]=m):m=t[7];var p;return t[8]!==u||t[9]!==d||t[10]!==m?(p=s.jsx(r("IGDSListItem.react"),{addOnEnd:u,paddingX:0,paddingY:0,subtitle:d,title:m}),t[8]=u,t[9]=d,t[10]=m,t[11]=p):p=t[11],p}function h(e){var t=o("react-compiler-runtime").c(19),n=e.onAcceptAllTermsChange,a=f.size,i=d(!1),l=i[0],u=i[1],m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=new Set,t[0]=m):m=t[0];var p=d(m),_=p[0],h=p[1],y;t[1]!==l?(y=function(){h(l?new Set:new Set(f.keys())),u(!l)},t[1]=l,t[2]=y):y=t[2];var C=y,b,v;t[3]!==l||t[4]!==n?(b=function(){n(l)},v=[l,n],t[3]=l,t[4]=n,t[5]=b,t[6]=v):(b=t[5],v=t[6]),c(b,v);var S;t[7]!==C||t[8]!==l?(S=s.jsx(r("IGDSCheckbox.react"),{checkboxShape:"circle",isChecked:l,name:"acceptAllTermsCheckbox",onChange:C}),t[7]=C,t[8]=l,t[9]=S):S=t[9];var R;t[10]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(r("IGDSBox.react"),{paddingY:4,children:s.jsx(r("IGDSText.react"),{maxLines:1,children:o("PolarisAuthStrings").agreeToAllTermsText(a)})}),t[10]=R):R=t[10];var L;t[11]!==S?(L=s.jsx(r("IGDSListItem.react"),{addOnEnd:S,paddingX:0,paddingY:0,title:R}),t[11]=S,t[12]=L):L=t[12];var E;t[13]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(r("IGDSDivider.react"),{}),t[13]=E):E=t[13];var k;t[14]!==_?(k=Array.from(f.entries()).map(function(e){var t=e[0],n=e[1],r=_.has(t);return s.jsx(g,{onToggle:function(){var e=new Set(_);r?e.delete(t):e.add(t),h(e),u(e.size===a)},selected:r,subtitleHref:n,title:t},t.toString())}),t[14]=_,t[15]=k):k=t[15];var I;return t[16]!==L||t[17]!==k?(I=s.jsxs(r("IGDSBox.react"),{width:"100%",children:[L,E,k]}),t[16]=L,t[17]=k,t[18]=I):I=t[18],I}l.default=h}),98);
__d("PolarisAuthConstants",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e="IG_REG_MSITE",l="IG_REG_WEB",s="IG_REG_WEB",u="IG_REG_MSITE",c="IG_NUX_MSITE",d="IG_NUX_WEB",m="IG_REG_WEB_OIDC",p="ssfErrorAlert",_=n("$InternalEnum").Mirrored(["Login","Signup"]);i.FLOW_TYPE_REG_MOBILE=e,i.FLOW_TYPE_REG_DESKTOP=l,i.FLOW_TYPE_IG_WEB_REG_DESKTOP=s,i.FLOW_TYPE_IG_WEB_REG_MOBILE=u,i.FLOW_TYPE_IG_WEB_NUX_MOBILE=c,i.FLOW_TYPE_IG_WEB_NUX_DESKTOP=d,i.FLOW_TYPE_IG_REG_WEB_OIDC=m,i.SLIM_SIGNUP_FORM_ALERT_ID=p,i.AuthPageType=_}),66);
__d("PolarisSignupFormFields.react",["IGDSBox.react","IGDSDialogFooter.react","IGDSText.react","IGDSTextVariants.react","PolarisAuthConstants","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(38),n=e.children,a=e.handleGoBack,i=e.handleNext,l=e.header,u=e.icon,c=e.isNextActionDisabled,d=e.maxWidth,m=e.requestInFlight,p=e.shouldShowRedesignedSignup,_=e.signupNonSpecificError,f=e.style,g=e.subHeader,h=d===void 0?350:d,y=p===void 0?!1:p,C=y?0:2,b;t[0]!==l||t[1]!==y?(b=y?s.jsx(r("IGDSText.react"),{color:"primaryText",size:"title",textAlign:"center",weight:"bold",children:l}):s.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"center",children:l}),t[0]=l,t[1]=y,t[2]=b):b=t[2];var v;t[3]!==C||t[4]!==b?(v=s.jsx(r("IGDSBox.react"),{marginBottom:C,marginTop:4,position:"relative",children:b}),t[3]=C,t[4]=b,t[5]=v):v=t[5];var S;t[6]!==g?(S=s.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:4,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:g})}),t[6]=g,t[7]=S):S=t[7];var R;t[8]!==i||t[9]!==c||t[10]!==m||t[11]!==y||t[12]!==f?(R=f==="default"&&s.jsx(r("IGDSBox.react"),{marginTop:2,paddingX:2,paddingY:y===!0?2:4,position:"relative",width:"100%",children:s.jsx(r("PolarisIGCoreButton.react"),{disabled:c,fullWidth:!0,loading:m,onClick:i,children:o("PolarisGenericStrings").NEXT})}),t[8]=i,t[9]=c,t[10]=m,t[11]=y,t[12]=f,t[13]=R):R=t[13];var L;t[14]!==_?(L=_!=null&&s.jsx(r("IGDSBox.react"),{marginBottom:2,position:"relative",children:s.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 xkmlbd1 x78zum5 xdt5ytf x2lah0s xln7xf2 xvs91rp xd4r4e8 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:s.jsx("p",{"aria-atomic":"true",id:o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID,role:"alert",children:_})})}),t[14]=_,t[15]=L):L=t[15];var E;t[16]!==a||t[17]!==y||t[18]!==f?(E=f==="default"&&s.jsx(r("IGDSBox.react"),{marginBottom:2,position:"relative",width:"100%",children:y?s.jsx(r("IGDSBox.react"),{paddingX:2,position:"relative",width:"100%",children:s.jsx(r("PolarisIGCoreButton.react"),{borderless:!1,color:"ig-secondary-button",fullWidth:!0,onClick:a,children:o("PolarisGenericStrings").BACK_TEXT})}):s.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:o("PolarisGenericStrings").GO_BACK})}),t[16]=a,t[17]=y,t[18]=f,t[19]=E):E=t[19];var k;t[20]!==n||t[21]!==u||t[22]!==h||t[23]!==v||t[24]!==S||t[25]!==R||t[26]!==L||t[27]!==E?(k=s.jsxs(r("IGDSBox.react"),{alignItems:"center",maxWidth:h,paddingX:7,paddingY:2,position:"relative",children:[u,v,S,n,R,L,E]}),t[20]=n,t[21]=u,t[22]=h,t[23]=v,t[24]=S,t[25]=R,t[26]=L,t[27]=E,t[28]=k):k=t[28];var I;t[29]!==a||t[30]!==i||t[31]!==c||t[32]!==m||t[33]!==f?(I=f==="modal"&&s.jsx(r("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:s.jsx(r("IGDSDialogFooter.react"),{endAdornment:s.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,disabled:c,loading:m,onClick:i,children:o("PolarisAuthStrings").CONTINUE}),startAdornment:s.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:o("PolarisGenericStrings").BACK_TEXT})})}),t[29]=a,t[30]=i,t[31]=c,t[32]=m,t[33]=f,t[34]=I):I=t[34];var T;return t[35]!==k||t[36]!==I?(T=s.jsxs(s.Fragment,{children:[k,I]}),t[35]=k,t[36]=I,t[37]=T):T=t[37],T}l.default=u}),98);
__d("PolarisSignupTypesHelpers",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t={fullName:"",username:""};return(e==null?void 0:e.fields)!=null&&Object.keys(e.fields).forEach(function(n){var r;if(((r=e.fields[n])==null?void 0:r.value)!=null)switch(n){case"optIntoOneTap":t[n]=!!e.fields[n].value;break;default:t[n]=e.fields[n].value}}),t}i.convertSignupResultToSignupFields=e}),66);
__d("usePolarisEmailOrPhoneContactpointType",["PolarisReactRedux.react","polarisIsPhoneNumber"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=o("PolarisReactRedux.react").useSelector(s),n=t==null||(e=t.fields.emailOrPhone)==null?void 0:e.value;if(n==null)return null;var a=r("polarisIsPhoneNumber")(n);return a?"phone":"email"}function s(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}l.default=e}),98);
__d("PolarisAcceptTermsOfUseForm.react",["PolarisAcceptTermsOfUseBody.react","PolarisAuthStrings","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","react","react-compiler-runtime","usePolarisEmailOrPhoneContactpointType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(18),n=e.onSignup,a=e.requestInFlight,i=e.signupNonSpecificError,l=e.style,u=l===void 0?"default":l,m=o("PolarisReactRedux.react").useDispatch(),_=o("PolarisReactRedux.react").useSelector(p),f=r("usePolarisEmailOrPhoneContactpointType")(),g;t[0]!==f||t[1]!==m?(g=function(){m(o("PolarisSignupActions").returnToBaseSignupForm()),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:f,event_name:"back_button_clicked",step:"acceptTerms"})},t[0]=f,t[1]=m,t[2]=g):g=t[2];var h=g,y;t[3]!==f||t[4]!==n||t[5]!==_?(y=function(){n(o("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(_)),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:f,event_name:"accept_terms_form_next_clicked"})},t[3]=f,t[4]=n,t[5]=_,t[6]=y):y=t[6];var C=y,b,v;t[7]!==f?(b=function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:f,event_name:"form_load",step:"acceptTerms"})},v=[f],t[7]=f,t[8]=b,t[9]=v):(b=t[8],v=t[9]),c(b,v);var S=d(!0),R=S[0],L=S[1],E;t[10]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(r("PolarisAcceptTermsOfUseBody.react"),{onAcceptAllTermsChange:function(t){L(!t)}}),t[10]=E):E=t[10];var k;return t[11]!==h||t[12]!==C||t[13]!==R||t[14]!==a||t[15]!==i||t[16]!==u?(k=s.jsx(r("PolarisSignupFormFields.react"),{handleGoBack:h,handleNext:C,header:o("PolarisAuthStrings").AGREE_TO_TERMS,isNextActionDisabled:R,requestInFlight:a,signupNonSpecificError:i,style:u,subHeader:o("PolarisAuthStrings").PERSONAL_INFO_SECURE,children:E}),t[11]=h,t[12]=C,t[13]=R,t[14]=a,t[15]=i,t[16]=u,t[17]=k):k=t[17],k}function p(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}l.default=m}),98);
__d("PolarisAccountPrivacyHelpers",[],(function(t,n,r,o,a,i){"use strict";var e={PRIVATE:"private",PUBLIC:"public"},l={NUX_FORM_IMPRESSION:"web_pbd_nux_form_impression",NUX_FORM_NEXT_BUTTON_CLICK:"web_pbd_nux_form_next_button_click",NUX_FORM_SELECT_OPTION:"web_pbd_nux_form_select_option",NUX_FORM_SET_PRIVATE_FAILURE:"web_pbd_nux_form_set_private_failure",NUX_FORM_SET_PRIVATE_SUCCESS:"web_pbd_nux_form_set_private_success",NUX_PAGE_IMPRESSION:"web_pbd_nux_page_impression"};i.PrivacyOptionsEnum=e,i.PBDNuxEventsEnum=l}),66);
__d("PolarisAccountPrivacyBody.react",["IGDSBox.react","IGDSRadioButton.react","IGDSTextVariants.react","PolarisAccountPrivacyHelpers","PolarisAuthStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.selectedBodyOption,a=e.setSelectedBodyOption,i;if(t[0]===Symbol.for("react.memo_cache_sentinel")){var l;i=[{desc:(l=o("PolarisAuthStrings")).PRIVATE_ACCOUNT_DESCRIPTION,label:l.PRIVATE_ACCOUNT,value:o("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE},{desc:l.PUBLIC_ACCOUNT_DESCRIPTION,label:l.PUBLIC_ACCOUNT,value:o("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PUBLIC}],t[0]=i}else i=t[0];var u=i,c;return t[1]!==n||t[2]!==a?(c=s.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",children:u.map(function(e){return s.jsx(r("IGDSBox.react"),{marginBottom:4,marginTop:3,children:s.jsx(r("IGDSRadioButton.react"),{isChecked:e.value===n,label:s.jsxs(s.Fragment,{children:[s.jsx(r("IGDSBox.react"),{children:s.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"start",children:e.label})}),s.jsx(r("IGDSBox.react"),{marginTop:1,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"start",children:e.desc})})]}),onChange:function(){return a(e.value)},value:e.value})},e.value)})}),t[1]=n,t[2]=a,t[3]=c):c=t[3],c}l.default=u}),98);
__d("PolarisSettingsActionSetPrivateAccount",["FBLogger","InstagramGenericSettingStrings","PolarisAPISetPrivateAccount","PolarisGenericStrings","PolarisSentryFeedbackActions"],(function(t,n,r,o,a,i,l){"use strict";function e(t){var n=t.handleFailure,a=t.handleSuccess,i=t.isNuxAction,l=t.isUsingConfirmationDialog,s=t.privateAccount,u=t.publicToPrivateRateLimitOverride,c=t.setErrorMessage,d=t.setLoading;return function(t){return d!=null&&d(!0),c!=null&&c(null),t({privateAccount:s,type:"PRIVATE_ACCOUNT_UPDATE_REQUESTED"}),o("PolarisAPISetPrivateAccount").setPrivateAccount(s,u,i,l).then(function(r){if(s&&r.status==="ok"&&r.has_private_public_switch_restriction){var i=r.privacy_rate_limit_dialog_message;t({message:i,title:r.privacy_rate_limit_dialog_title,type:"ACCOUNT_PRIVACY_PUBLIC_TO_PRIVATE_SWITCH_RATE_LIMITED"}),d!=null&&d(!1),c!=null&&c(i),n!=null&&n();return}if(!s&&r.status==="ok"&&r.has_private_public_switch_restriction){var l=r.privacy_rate_limit_dialog_message;t({message:l,title:r.privacy_rate_limit_dialog_title,type:"ACCOUNT_PRIVACY_PRIVATE_TO_PUBLIC_SWITCH_RATE_LIMITED"}),d!=null&&d(!1),c!=null&&c(l),n!=null&&n();return}r.status==="ok"?(t({privateAccount:s,toast:{text:o("InstagramGenericSettingStrings").GENERIC_SETTINGS_SAVED},type:"PRIVATE_ACCOUNT_UPDATE_SUCCEEDED"}),a!=null&&a()):(t({privateAccount:!s,toast:{actionHandler:function(){return t(e({privateAccount:s}))},actionText:o("PolarisGenericStrings").RETRY_TEXT,text:o("InstagramGenericSettingStrings").GENERIC_SETTINGS_ERROR},type:"PRIVATE_ACCOUNT_UPDATE_FAILED"}),d!=null&&d(!1),c!=null&&c(o("PolarisGenericStrings").GENERIC_ERROR_MESSAGE),n!=null&&n())},function(a){var i,l;d!=null&&d(!1);var u=((i=a.responseObject)==null?void 0:i.spam)||!1;if(u){var m,p,_,f,g,h,y,C=(m=a.responseObject)==null?void 0:m.feedback_title,b=(p=a.responseObject)==null?void 0:p.feedback_message,v=(_=a.responseObject)==null?void 0:_.feedback_url,S=(f=a.responseObject)==null?void 0:f.feedback_action,R=(g=a.responseObject)==null?void 0:g.feedback_appeal_label,L=(h=a.responseObject)==null?void 0:h.restriction_enrollment_data,E=(y=a.responseObject)==null?void 0:y.enforcement_transparency_instance_identifier;t(o("PolarisSentryFeedbackActions").showSentryFeedback({action:S,enforcement_transparency_instance_identifier:E,feedback_appeal_label:R,message:b,restriction_enrollment_data:L,sourceOfAction:"set_private_account",title:C,url:v})),c!=null&&c(b),n!=null&&n()}var k=(l=a.responseObject)==null?void 0:l.message;t({privateAccount:!s,toast:u?void 0:{actionHandler:function(){return t(e({privateAccount:s}))},actionText:o("PolarisGenericStrings").RETRY_TEXT,text:k||o("InstagramGenericSettingStrings").GENERIC_SETTINGS_ERROR},type:"PRIVATE_ACCOUNT_UPDATE_FAILED"}),c!=null&&c(k||o("PolarisGenericStrings").GENERIC_ERROR_MESSAGE),n!=null&&n(),r("FBLogger")("ig_web").catching(a)})}}l.setPrivateAccount=e}),98);
__d("PolarisAccountPrivacyForm.react",["IGDSBox.react","IGDSLockOutline96Icon.react","IGDSTextVariants.react","IgtsDefaultsFalcoEvent","InstagramODS","PolarisAccountPrivacyBody.react","PolarisAccountPrivacyHelpers","PolarisAuthStrings","PolarisConfig","PolarisGenericOnboardingUnit.react","PolarisReactRedux.react","PolarisSettingsActionSetPrivateAccount","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(32),n=e.buttonLabel,a=e.defaultedToPrivate,i=e.handleNext,l=e.subtitle,u=a||r("gkx")("6489")||r("gkx")("25363"),m=d(u?o("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE:null),p=m[0],_=m[1],f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=o("PolarisConfig").getViewerId(),t[0]=f):f=t[0];var g=f,h=o("PolarisReactRedux.react").useDispatch(),y=d(!1),C=y[0],b=y[1],v=d(null),S=v[0],R=v[1],L,E;t[1]!==u?(L=function(){r("InstagramODS").incr("web.pbd.impression"),r("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:g,event_type:o("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_IMPRESSION,is_set_to_private:u}})},E=[u,g],t[1]=u,t[2]=L,t[3]=E):(L=t[2],E=t[3]),c(L,E);var k;t[4]!==i||t[5]!==p?(k=function(){r("InstagramODS").incr("web.pbd.set_private_success"),r("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:g,event_type:o("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SET_PRIVATE_SUCCESS,target_control_type:p}}),i()},t[4]=i,t[5]=p,t[6]=k):k=t[6];var I=k,T;t[7]!==p?(T=function(){r("InstagramODS").incr("web.pbd.set_private_failure"),r("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:g,event_type:o("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SET_PRIVATE_FAILURE,target_control_type:p}})},t[7]=p,t[8]=T):T=t[8];var D=T,x;t[9]!==h||t[10]!==D||t[11]!==I||t[12]!==p?(x=function(){r("InstagramODS").incr("web.pbd.next_button_click"),r("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:g,event_type:o("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_NEXT_BUTTON_CLICK,target_control_type:p}}),h(o("PolarisSettingsActionSetPrivateAccount").setPrivateAccount({handleFailure:D,handleSuccess:I,isNuxAction:!0,privateAccount:p===o("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE,publicToPrivateRateLimitOverride:!0,setErrorMessage:R,setLoading:b}))},t[9]=h,t[10]=D,t[11]=I,t[12]=p,t[13]=x):x=t[13];var $=x,P;t[14]===Symbol.for("react.memo_cache_sentinel")?(P=function(t){r("InstagramODS").incr("web.pbd.option_select"),r("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:g,event_type:o("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SELECT_OPTION,target_control_type:t}}),_(t)},t[14]=P):P=t[14];var N=P,M;t[15]!==l?(M=s.jsx(r("IGDSBox.react"),{marginBottom:4,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:l})}),t[15]=l,t[16]=M):M=t[16];var w;t[17]!==p?(w=s.jsx(r("PolarisAccountPrivacyBody.react"),{selectedBodyOption:p,setSelectedBodyOption:N}),t[17]=p,t[18]=w):w=t[18];var A;t[19]!==M||t[20]!==w?(A=s.jsxs(s.Fragment,{children:[M,w]}),t[19]=M,t[20]=w,t[21]=A):A=t[21];var F=p==null,O;t[22]!==S?(O=S!=null?s.jsx(r("IGDSBox.react"),{paddingX:1,paddingY:4,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:S})}):null,t[22]=S,t[23]=O):O=t[23];var B;t[24]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(r("IGDSLockOutline96Icon.react"),{alt:o("PolarisAuthStrings").ACCOUNT_PRIVACY_HEADER_TEXT,size:64}),t[24]=B):B=t[24];var W;return t[25]!==n||t[26]!==$||t[27]!==C||t[28]!==A||t[29]!==F||t[30]!==O?(W=s.jsx(r("PolarisGenericOnboardingUnit.react"),{bodyText:A,buttonDisabled:F,buttonText:n,footer:O,headerText:o("PolarisAuthStrings").ACCOUNT_PRIVACY_HEADER_TEXT,icon:B,isProcessing:C,onButtonClick:$}),t[25]=n,t[26]=$,t[27]=C,t[28]=A,t[29]=F,t[30]=O,t[31]=W):W=t[31],W}l.default=m}),98);
__d("PolarisAppsellUnit.react",["fbt","IGDSTextVariants.react","PolarisAppInstallLink.react","PolarisConfigConstants","gkx","polarisGetAppPlatform","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s._(/*BTDS*/"Get the app."),e[0]=t):t=e[0];var n=t,r;return e[1]===Symbol.for("react.memo_cache_sentinel")?(r=u.jsx("div",{className:"x1anpbxc x3aesyq xyorhqc xqsn43r",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:n})}),e[1]=r):r=e[1],r}function d(e){var t=o("react-compiler-runtime").c(21),n=e.appInstallCampaign,a=e.ctaTypeV2,i=e.hideText,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=o("polarisGetAppPlatform").isWindowsNT()&&r("gkx")("25364"),t[0]=l):l=t[0];var s=l,d;t[1]===Symbol.for("react.memo_cache_sentinel")?(d={className:"x78zum5 xdt5ytf"},t[1]=d):d=t[1];var m;t[2]!==i?(m=i!==!0&&u.jsx(c,{}),t[2]=i,t[3]=m):m=t[3];var p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p={className:"x78zum5 x1b7blni xl56j7k x1anpbxc x14z9mp xyorhqc x1lziwak"},t[4]=p):p=t[4];var _;t[5]!==n||t[6]!==a?(_=!o("polarisGetAppPlatform").isAndroid()&&!s&&u.jsx(r("PolarisAppInstallLink.react"),{campaign:n,ctaTypeV2:a,"data-testid":void 0,platform:o("PolarisConfigConstants").appPlatformTypes.IOS}),t[5]=n,t[6]=a,t[7]=_):_=t[7];var f;t[8]!==n||t[9]!==a?(f=!o("polarisGetAppPlatform").isIOS()&&u.jsx(r("PolarisAppInstallLink.react"),{campaign:n,ctaTypeV2:a,"data-testid":void 0,platform:o("PolarisConfigConstants").appPlatformTypes.ANDROID}),t[8]=n,t[9]=a,t[10]=f):f=t[10];var g;t[11]!==n||t[12]!==a?(g=s&&u.jsx(r("PolarisAppInstallLink.react"),{campaign:n,ctaTypeV2:a,"data-testid":void 0,platform:o("PolarisConfigConstants").appPlatformTypes.WINDOWSNT10}),t[11]=n,t[12]=a,t[13]=g):g=t[13];var h;t[14]!==_||t[15]!==f||t[16]!==g?(h=u.jsxs("div",babelHelpers.extends({},p,{children:[_,f,g]})),t[14]=_,t[15]=f,t[16]=g,t[17]=h):h=t[17];var y;return t[18]!==m||t[19]!==h?(y=u.jsxs("div",babelHelpers.extends({},d,{children:[m,h]})),t[18]=m,t[19]=h,t[20]=y):y=t[20],y}l.default=d}),226);
__d("PolarisTooManyAccountsDialog.react",["fbt","PolarisConfirmDialog.react","PolarisGenericStrings","PolarisOneTapLogin","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.onClose,a=e.onConfirm,i=d,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=i(),t[0]=l):l=t[0];var c;t[1]!==a?(c=a!=null?s._(/*BTDS*/"Edit Accounts"):void 0,t[1]=a,t[2]=c):c=t[2];var m=a!=null?a:void 0,p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=s._(/*BTDS*/"Can't Add Account"),t[3]=p):p=t[3];var _;return t[4]!==n||t[5]!==c||t[6]!==m?(_=u.jsx(r("PolarisConfirmDialog.react"),{body:l,cancelLabel:o("PolarisGenericStrings").OK_TEXT,confirmLabel:c,onClose:n,onConfirm:m,title:p}),t[4]=n,t[5]=c,t[6]=m,t[7]=_):_=t[7],_}function d(){return o("PolarisOneTapLogin").TOO_MANY_ACCOUNTS_TEXT}l.default=c}),226);
__d("XPolarisLoginControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/accounts/login/",Object.freeze({force_authentication:!1,enable_fb_login:!1,is_from_rle:!1,mtn:!1,flo:!1}),new Set(["force_authentication","enable_fb_login","is_from_rle","mtn"])),s=e;l.default=s}),98);
__d("usePolarisOneTapLoginEditModeStateQuery.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"XDTViewer",kind:"LinkedField",name:"xdt_viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,concreteType:"PolarisOneTapLogin",kind:"LinkedField",name:"one_tap_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"edit_mode",storageKey:null}],storageKey:null}]}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePolarisOneTapLoginEditModeStateQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"usePolarisOneTapLoginEditModeStateQuery",selections:e},params:{cacheID:"fded0f553435868ea14676d1156763b5",id:null,metadata:{is_distillery:!0,root_field_name:["xdt_viewer"]},name:"usePolarisOneTapLoginEditModeStateQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("usePolarisOneTapLoginEditModeState",["CometRelay","PolarisLoginLogger","react","react-compiler-runtime","usePolarisOneTapLoginEditModeStateQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(){var t,r,a=o("react-compiler-runtime").c(7),i=o("CometRelay").useRelayEnvironment(),l,s;a[0]===Symbol.for("react.memo_cache_sentinel")?(l=e!==void 0?e:e=n("usePolarisOneTapLoginEditModeStateQuery.graphql"),s={},a[0]=l,a[1]=s):(l=a[0],s=a[1]);var u=o("CometRelay").useClientQuery(l,s),c;a[2]!==i?(c=function(t){o("CometRelay").commitLocalUpdate(i,function(e){e.getRoot().getOrCreateLinkedRecord("xdt_viewer","XDTViewer").getOrCreateLinkedRecord("one_tap_login","PolarisOneTapLogin").setValue(t,"edit_mode")}),o("PolarisLoginLogger").logLoginEvent({event_name:t?"one_tap_login_done_editing_click":"one_tap_login_manage_accounts_click",login_type:"device_based_login"})},a[2]=i,a[3]=c):c=a[3];var d=c,m=(t=u==null||(r=u.xdt_viewer)==null||(r=r.one_tap_login)==null?void 0:r.edit_mode)!=null?t:!1,p;return a[4]!==m||a[5]!==d?(p=[m,d],a[4]=m,a[5]=d,a[6]=p):p=a[6],p}l.default=c}),98);
__d("PolarisAuthTypeSwitcher.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSTextVariants.react","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthConstants","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisFastLink.react","PolarisLinkBuilder","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutUpsellExposureV2","PolarisLoginLogger","PolarisMultiSignupTypes","PolarisOneTapLogin","PolarisOneTapLoginStorage","PolarisReactRedux.react","PolarisRoutes","PolarisSignupActions","PolarisTooManyAccountsDialog.react","PolarisUA","XPolarisLoginControllerRouteBuilder","XPolarisMultiStepSignupControllerRouteBuilder","react","react-compiler-runtime","usePolarisOneTapLoginEditModeState","usePolarisPageID"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useState,p=o("PolarisAuthLimitedRegistrationHelpers").hasRestrictedRegistration();function _(e){var t=o("react-compiler-runtime").c(17),n=e.className,a=e.fromLoggedOutDialog,i=e.onClick,l=a===void 0?!1:a,c=o("PolarisReactRedux.react").useDispatch(),d=r("usePolarisPageID")(),m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=u.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",children:s._(/*BTDS*/"Sign up")}),t[0]=m):m=t[0];var _=m,f;t[1]!==c||t[2]!==l||t[3]!==i||t[4]!==d?(f=function(){return o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("signup",l?"auth_form_dialog":"auth_form",d),o("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"sign_up_button_clicked"}),p&&c(o("PolarisSignupActions").setShowRegulatoryConsentModal()),i},t[1]=c,t[2]=l,t[3]=i,t[4]=d,t[5]=f):f=t[5];var g=f,h;t[6]!==d?(h=function(){if(o("PolarisUA").isMobile()&&!p)return r("XPolarisMultiStepSignupControllerRouteBuilder").buildUri({step_name:o("PolarisMultiSignupTypes").getFirstStep()}).toString();if(!o("PolarisUA").isMobile()&&!p||d!=="unifiedHome")return o("PolarisRoutes").EMAIL_SIGNUP_PATH},t[6]=d,t[7]=h):h=t[7];var y=h,C;t[8]===Symbol.for("react.memo_cache_sentinel")?(C=s._(/*BTDS*/"Don't have an account?"),t[8]=C):C=t[8];var b;t[9]!==y?(b=y(),t[9]=y,t[10]=b):b=t[10];var v;t[11]!==g||t[12]!==b?(v=u.jsx(r("PolarisFastLink.react"),{"data-testid":void 0,href:b,onClick:g,prefetchQueriesOnMount_I_KNOW_WHAT_IM_DOING:r("PolarisLoggedOutUpsellExposureV2").xplatform.enable_faster_nav_for_cta,preloadCodeOnMount:r("PolarisLoggedOutUpsellExposureV2").xplatform.enable_faster_nav_for_cta,children:_}),t[11]=g,t[12]=b,t[13]=v):v=t[13];var S;return t[14]!==n||t[15]!==v?(S=u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"auto",children:u.jsxs("p",{className:n,children:[C," ",v]})}),t[14]=n,t[15]=v,t[16]=S):S=t[16],S}function f(e){var t=o("react-compiler-runtime").c(10),n=e.className,a=e.fromLoggedOutDialog,i=e.onClick,l=a===void 0?!1:a,c=r("usePolarisPageID")(),d;t[0]!==l||t[1]!==i||t[2]!==c?(d=function(){return o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login",l?"auth_form_dialog":"auth_form",c),i},t[0]=l,t[1]=i,t[2]=c,t[3]=d):d=t[3];var m=d,p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p=u.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",children:s._(/*BTDS*/"Log in")}),t[4]=p):p=t[4];var _=p,f;t[5]!==m?(f=s._(/*BTDS*/"Have an account? {link that reads Log in}",[s._param("link that reads Log in",u.jsx(r("PolarisFastLink.react"),{"data-testid":void 0,href:o("PolarisLinkBuilder").buildLoginLink("",{source:"auth_switcher"}),onClick:m,children:_}))]),t[5]=m,t[6]=f):f=t[6];var g;return t[7]!==n||t[8]!==f?(g=u.jsx("p",{className:n,children:f}),t[7]=n,t[8]=f,t[9]=g):g=t[9],g}function g(e){var t=o("react-compiler-runtime").c(21),n=e.onSwitchAuthType,a=e.pageType,i=o("PolarisReactRedux.react").useDispatch(),l=r("usePolarisPageID")(),c=r("usePolarisOneTapLoginEditModeState")(),d=c[0],_=c[1],f=m(!1),g=f[0],h=f[1],y;t[0]!==n?(y=function(){o("PolarisOneTapLogin").hasMaxOneTapNonces()?(h(!0),o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_switch_account_too_many_accounts",login_type:"device_based_login"})):(n(o("PolarisAuthActionConstants").AUTH.login),o("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_switch_account_click",login_type:"device_based_login"}))},t[0]=n,t[1]=y):y=t[1];var C=y,b;t[2]!==d||t[3]!==_?(b=function(){_(!d)},t[2]=d,t[3]=_,t[4]=b):b=t[4];var v=b,S;t[5]!==l?(S=function(){if(!(p&&l==="unifiedHome"))return o("PolarisUA").isMobile()?r("XPolarisMultiStepSignupControllerRouteBuilder").buildUri({step_name:o("PolarisMultiSignupTypes").getFirstStep()}).toString():o("PolarisRoutes").EMAIL_SIGNUP_PATH},t[5]=l,t[6]=S):S=t[6];var R=S,L;if(t[7]!==i||t[8]!==R||t[9]!==C||t[10]!==n||t[11]!==a){var E;t[13]!==a?(E=o("PolarisOneTapLogin").hasMaxOneTapNonces()?void 0:a===o("PolarisAuthConstants").AuthPageType.Signup?r("XPolarisLoginControllerRouteBuilder").buildURL({}):void 0,t[13]=a,t[14]=E):E=t[14],L=u.jsx("div",{children:s._(/*BTDS*/"{link that reads Switch Accounts} or {link that reads sign up}",[s._param("link that reads Switch Accounts",u.jsx(r("IGDSButton.react"),{display:"block",href:E,label:s._(/*BTDS*/"Switch accounts"),onClick:C,variant:"primary_link"})),s._param("link that reads sign up",u.jsx(r("IGDSButton.react"),{display:"block",href:R(),label:s._(/*BTDS*/"Sign Up"),onClick:function(){if(p){i(o("PolarisSignupActions").setShowRegulatoryConsentModal());return}n(o("PolarisAuthActionConstants").AUTH.signup),o("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_signup_click",login_type:"device_based_login"})},variant:"primary_link"}))])}),t[7]=i,t[8]=R,t[9]=C,t[10]=n,t[11]=a,t[12]=L}else L=t[12];var k;t[15]!==v||t[16]!==g?(k=g&&u.jsx(r("PolarisTooManyAccountsDialog.react"),{onClose:function(){return h(!1)},onConfirm:function(){v(),h(!1)}}),t[15]=v,t[16]=g,t[17]=k):k=t[17];var I;return t[18]!==L||t[19]!==k?(I=u.jsxs(u.Fragment,{children:[L,k]}),t[18]=L,t[19]=k,t[20]=I):I=t[20],I}function h(e){var t=o("react-compiler-runtime").c(41),n=e.authType,a=e.className,i=e.fromLoggedOutDialog,l=e.loggedInFBUser,s=e.onNavigate,c=e.onSwitchAuthType,d=e.pageType,m=e.primary,p=i===void 0?!1:i;if(n===o("PolarisAuthActionConstants").AUTH.fbLogin||n===o("PolarisAuthActionConstants").AUTH.fbAccountPicker||n===o("PolarisAuthActionConstants").AUTH.oneTapLogin){var h,y;if(t[0]!==n||t[1]!==a){var C,b=o("PolarisOneTapLoginStorage").getLoginNonces();if(n===o("PolarisAuthActionConstants").AUTH.oneTapLogin&&Object.values(b).length===1){var v=Object.keys(b)[0];C=b[v].username}h=a,y=C!=null&&u.jsx(r("IGDSBox.react"),{alignItems:"center",marginBottom:1,position:"relative",children:o("PolarisAuthStrings").notUsernameText(C)}),t[0]=n,t[1]=a,t[2]=h,t[3]=y}else h=t[2],y=t[3];var S;t[4]!==c||t[5]!==d||t[6]!==m?(S=u.jsx(g,{onSwitchAuthType:c,pageType:d,primary:m}),t[4]=c,t[5]=d,t[6]=m,t[7]=S):S=t[7];var R;return t[8]!==h||t[9]!==y||t[10]!==S?(R=u.jsxs("div",{className:h,children:[y,S]}),t[8]=h,t[9]=y,t[10]=S,t[11]=R):R=t[11],R}else if(n===o("PolarisAuthActionConstants").AUTH.fbConnectV2&&l!=null&&l.profile_name!=null){var L;t[12]!==l.profile_name?(L=o("PolarisAuthStrings").notUsernameText(l.profile_name.split(" ")[0]),t[12]=l.profile_name,t[13]=L):L=t[13];var E;t[14]!==L?(E=u.jsx(r("IGDSBox.react"),{alignItems:"center",marginBottom:1,position:"relative",children:L}),t[14]=L,t[15]=E):E=t[15];var k;t[16]!==c||t[17]!==d||t[18]!==m?(k=u.jsx(g,{onSwitchAuthType:c,pageType:d,primary:m}),t[16]=c,t[17]=d,t[18]=m,t[19]=k):k=t[19];var I;return t[20]!==a||t[21]!==E||t[22]!==k?(I=u.jsxs("div",{className:a,children:[E,k]}),t[20]=a,t[21]=E,t[22]=k,t[23]=I):I=t[23],I}else if(n===o("PolarisAuthActionConstants").AUTH.login||n===o("PolarisAuthActionConstants").AUTH.none){var T;t[24]!==s?(T=function(){return s==null?void 0:s("signup")},t[24]=s,t[25]=T):T=t[25];var D;return t[26]!==a||t[27]!==p||t[28]!==T?(D=u.jsx(_,{className:a,fromLoggedOutDialog:p,onClick:T}),t[26]=a,t[27]=p,t[28]=T,t[29]=D):D=t[29],D}else if(n===o("PolarisAuthActionConstants").AUTH.signup){var x;t[30]!==s?(x=function(){return s==null?void 0:s("login")},t[30]=s,t[31]=x):x=t[31];var $;return t[32]!==a||t[33]!==p||t[34]!==x?($=u.jsx(f,{className:a,fromLoggedOutDialog:p,onClick:x}),t[32]=a,t[33]=p,t[34]=x,t[35]=$):$=t[35],$}else if(o("PolarisUA").isMobile()){var P;t[36]!==s?(P=function(){return s==null?void 0:s("signup")},t[36]=s,t[37]=P):P=t[37];var N;return t[38]!==a||t[39]!==P?(N=u.jsx(_,{className:a,onClick:P}),t[38]=a,t[39]=P,t[40]=N):N=t[40],N}return null}function y(e){var t=e.auth.authType;return{authType:t}}function C(e){return{onSwitchAuthType:function(n){e(o("PolarisAuthActions").switchAuthType(n))}}}var b=o("PolarisReactRedux.react").connect(y,C)(h);l.default=b}),226);
__d("PolarisBarcelonaAppSVGIcon.react",["react","react-compiler-runtime","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u="Threads";function c(e){var t=o("react-compiler-runtime").c(5),n=e.fill,a=e.size,i=n===void 0?"var(--barcelona-logo)":n,l=a===void 0?34:a;r("vulture")("7bQEAu-DlqjkZDNXRF9VX2XxyTI=");var c;t[0]!==i?(c=s.jsx("path",{d:"M141.537 88.9883C140.71 88.5919 139.87 88.2104 139.019 87.8451C137.537 60.5382 122.616 44.905 97.5619 44.745C97.4484 44.7443 97.3355 44.7443 97.222 44.7443C82.2364 44.7443 69.7731 51.1409 62.102 62.7807L75.881 72.2328C81.6116 63.5383 90.6052 61.6848 97.2286 61.6848C97.3051 61.6848 97.3819 61.6848 97.4576 61.6855C105.707 61.7381 111.932 64.1366 115.961 68.814C118.893 72.2193 120.854 76.925 121.825 82.8638C114.511 81.6207 106.601 81.2385 98.145 81.7233C74.3247 83.0954 59.0111 96.9879 60.0396 116.292C60.5615 126.084 65.4397 134.508 73.775 140.011C80.8224 144.663 89.899 146.938 99.3323 146.423C111.79 145.74 121.563 140.987 128.381 132.296C133.559 125.696 136.834 117.143 138.28 106.366C144.217 109.949 148.617 114.664 151.047 120.332C155.179 129.967 155.42 145.8 142.501 158.708C131.182 170.016 117.576 174.908 97.0135 175.059C74.2042 174.89 56.9538 167.575 45.7381 153.317C35.2355 139.966 29.8077 120.682 29.6052 96C29.8077 71.3178 35.2355 52.0336 45.7381 38.6827C56.9538 24.4249 74.2039 17.11 97.0132 16.9405C119.988 17.1113 137.539 24.4614 149.184 38.788C154.894 45.8136 159.199 54.6488 162.037 64.9503L178.184 60.6422C174.744 47.9622 169.331 37.0357 161.965 27.974C147.036 9.60668 125.202 0.195148 97.0695 0H96.9569C68.8816 0.19447 47.2921 9.6418 32.7883 28.0793C19.8819 44.4864 13.2244 67.3157 13.0007 95.9325L13 96L13.0007 96.0675C13.2244 124.684 19.8819 147.514 32.7883 163.921C47.2921 182.358 68.8816 191.806 96.9569 192H97.0695C122.03 191.827 139.624 185.292 154.118 170.811C173.081 151.866 172.51 128.119 166.26 113.541C161.776 103.087 153.227 94.5962 141.537 88.9883ZM98.4405 129.507C88.0005 130.095 77.1544 125.409 76.6196 115.372C76.2232 107.93 81.9158 99.626 99.0812 98.6368C101.047 98.5234 102.976 98.468 104.871 98.468C111.106 98.468 116.939 99.0737 122.242 100.233C120.264 124.935 108.662 128.946 98.4405 129.507Z",fill:i}),t[0]=i,t[1]=c):c=t[1];var d;return t[2]!==l||t[3]!==c?(d=s.jsx("svg",{"aria-label":u,height:l,role:"img",viewBox:"0 0 192 192",width:l,xmlns:"http://www.w3.org/2000/svg",children:c}),t[2]=l,t[3]=c,t[4]=d):d=t[4],d}l.default=c}),98);
__d("usePolarisLoggedInFBUserForHomepage",["PolarisLoggedInFBUserContext","PolarisLoggedOutUpsellExposureV2","PolarisUA","react","usePolarisPageID"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e,t=s(r("PolarisLoggedInFBUserContext")),n=r("usePolarisPageID")();if(o("PolarisUA").isDesktop()){if(n!=="unifiedHome")return null}else return null;return r("PolarisLoggedOutUpsellExposureV2").desktop.enable_fb_connect_v2!==!0?null:(e=t==null?void 0:t.user)!=null?e:null}l.default=u}),98);
__d("PolarisFBConnectV2LoginForm.react",["IGDSBox.react","IGDSButton.react","IGDSText.react","PolarisAuthStrings","PolarisFBConnectHelpers","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutLandingDialogStrings.react","PolarisNavigationReferrerUrlSession","PolarisUserAvatar.react","react","react-compiler-runtime","useCometRouterState","useCurrentRoute","usePolarisLoggedInFBUserForHomepage","usePolarisPageID"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={primaryButton:{borderStartStartRadius:"x6nl9eh",borderStartEndRadius:"x1a5l9x9",borderEndEndRadius:"x7vuprf",borderEndStartRadius:"x1mg3h75",height:"x5kalc8",paddingTop:"xz9dl7a",paddingInlineEnd:"x1xnnf8n",paddingBottom:"xsag5q8",paddingInlineStart:"x106a9eq",$$css:!0},root:{maxWidth:"x1tpxq4b",width:"xh8yej3",$$css:!0}},c=96;function d(){var e=o("react-compiler-runtime").c(15),t=r("usePolarisLoggedInFBUserForHomepage")(),n=r("usePolarisPageID")(),a=r("useCurrentRoute")(),i=r("useCometRouterState")();if(t==null||t.profile_name==null)return null;var l;e[0]!==t.profile_name||e[1]!==t.profile_pic_url?(l=s.jsx(r("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:t.profile_pic_url,size:c,username:t.profile_name}),e[0]=t.profile_name,e[1]=t.profile_pic_url,e[2]=l):l=e[2];var d=l,m;e[3]!==t.profile_name?(m=o("PolarisLoggedOutLandingDialogStrings.react").continueWithYourFacebookAccount(t.profile_name),e[3]=t.profile_name,e[4]=m):m=e[4];var p;e[5]!==m?(p=s.jsx(r("IGDSText.react"),{color:"primaryText",size:"headline3",textAlign:"center",weight:"bold",children:m}),e[5]=m,e[6]=p):p=e[6];var _=p,f;e[7]!==n||e[8]!==(a==null?void 0:a.url)||e[9]!==i?(f=s.jsx(r("IGDSButton.react"),{display:"block",label:o("PolarisAuthStrings").FB_CONTINUE_BUTTON_TEXT,onClick:function(t){var e;t&&t.preventDefault(),o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",n,{isDismissible:!0},"auth_form_fb_connect_v2"),o("PolarisNavigationReferrerUrlSession").setCurrentUrlInformation(i,n),o("PolarisFBConnectHelpers").redirectToFBOAuth((e=a==null?void 0:a.url)!=null?e:"",n)},variant:"primary",xstyle:u.primaryButton}),e[7]=n,e[8]=a==null?void 0:a.url,e[9]=i,e[10]=f):f=e[10];var g=f,h;return e[11]!==d||e[12]!==g||e[13]!==_?(h=s.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"column",justifyContent:"center",paddingX:8,paddingY:2,rowGap:4,xstyle:u.root,children:[d,_,g]}),e[11]=d,e[12]=g,e[13]=_,e[14]=h):h=e[14],h}l.default=d}),98);
__d("PolarisFacebookAccountPicker.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSText.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisAuthTypeSwitcher.react","PolarisIGCoreConstants","PolarisIGCorePressable.react","PolarisLoginLogger","PolarisReactRedux.react","PolarisUA","PolarisUserAvatar.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(7),n=e.fbConnectedIgProfiles,a=e.onRequestFBLogin,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={className:"x1qjc9v5 x1xp8e9x x5kv4kf xh05dso x13lttk3 x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a x1n2onr6 x11njtxf"},t[0]=i):i=t[0];var l;t[1]!==n||t[2]!==a?(l=u.jsx(r("IGDSBox.react"),{padding:4,position:"relative",children:u.jsx("div",babelHelpers.extends({},i,{children:u.jsx(d,{fbConnectedIgProfiles:n,onRequestFBLogin:a})}))}),t[1]=n,t[2]=a,t[3]=l):l=t[3];var s;t[4]===Symbol.for("react.memo_cache_sentinel")?(s=o("PolarisUA").isMobile()&&u.jsx(r("IGDSBox.react"),{alignItems:"center",position:"relative",children:u.jsx(r("PolarisAuthTypeSwitcher.react"),{primary:!0})}),t[4]=s):s=t[4];var c;return t[5]!==l?(c=u.jsxs("div",{children:[l,s]}),t[5]=l,t[6]=c):c=t[6],c}function d(e){var t=o("react-compiler-runtime").c(15),n=e.fbConnectedIgProfiles,a=e.onRequestFBLogin,i=o("PolarisReactRedux.react").useSelector(p),l=o("PolarisReactRedux.react").useSelector(m);if(!a||!n)return null;var s;t[0]!==i||t[1]!==l?(s=function(t){return i&&t!==l},t[0]=i,t[1]=l,t[2]=s):s=t[2];var c=s,d;t[3]!==i||t[4]!==l?(d=function(t){return i&&t===l},t[3]=i,t[4]=l,t[5]=d):d=t[5];var _=d,f;if(t[6]!==n||t[7]!==c||t[8]!==_||t[9]!==a){var g;t[11]!==c||t[12]!==_||t[13]!==a?(g=function(t){var e=t.username,n=c(e),i=_(e),l=function(){return a(e)};return u.jsxs(r("PolarisIGCorePressable.react"),{className:"x6s0dn4 x5n08af x1ypdohk x78zum5 x1q0g3np xwhw2v2 xsag5q8",onPress:n?r("emptyFunction"):l,role:"button",tabIndex:0,children:[u.jsx(r("IGDSBox.react"),{marginEnd:3,position:"relative",children:u.jsx(r("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:t.profilePictureUrl,size:r("PolarisIGCoreConstants").AVATAR_SIZES.small,username:e})}),u.jsx(r("IGDSBox.react"),{display:"block",flex:"grow",position:"relative",children:u.jsx(r("IGDSText.react"),{weight:"semibold",children:e})}),u.jsx(r("IGDSBox.react"),{position:"relative",children:u.jsx(r("IGDSButton.react"),{display:"block",isDisabled:n,isLoading:i,label:o("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:l})})]},e)},t[11]=c,t[12]=_,t[13]=a,t[14]=g):g=t[14],f=n.map(g),t[6]=n,t[7]=c,t[8]=_,t[9]=a,t[10]=f}else f=t[10];return f}function m(e){return e.auth.login.igUsername}function p(e){return e.auth.login.requestInFlight}function _(e){var t=o("react-compiler-runtime").c(5),n=e.fbConnectedIgProfiles,a=e.onRequestFBLogin;o("PolarisLoginLogger").logLoginEvent({event_name:"account_picker_multi_linked_user_form_load"});var i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=s._(/*BTDS*/"You can log into these accounts because they're in your Accounts Center."),t[0]=i):i=t[0];var l=i,d;t[1]===Symbol.for("react.memo_cache_sentinel")?(d=u.jsx(r("IGDSBox.react"),{marginBottom:4,marginTop:2,paddingX:3,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:l})}),t[1]=d):d=t[1];var m;return t[2]!==n||t[3]!==a?(m=u.jsxs(r("IGDSBox.react"),{position:"relative",width:"350px",children:[d,u.jsx(c,{fbConnectedIgProfiles:n,onRequestFBLogin:a})]}),t[2]=n,t[3]=a,t[4]=m):m=t[4],m}l.default=_}),226);
__d("XPolarisEmailSignupControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/accounts/emailsignup/",Object.freeze({hide_fb_signup:!1}),void 0),s=e;l.default=s}),98);
__d("PolarisFacebookLoginForm.react",["fbt","IGDSBox.react","IGDSButton.react","PolarisAuthActionConstants","PolarisAuthConstants","PolarisAuthStrings","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisLoggedOutCtaImpressionLogger","PolarisLoginActionConstants","PolarisLoginLogger","XPolarisEmailSignupControllerRouteBuilder","polarisLogAction","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$1=function(e,n){e.preventDefault(),t.props.onSwitchAccountsClick(n)},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){r("polarisLogAction")("facebookLoginFormDisplayed"),o("PolarisLoginLogger").logLoginEvent({event_name:"fb_login_form_load",fbconnect_status:this.props.fbConnectStatus,login_type:"fbconnect"}),o("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("auth_form",this.props.pageID)},n.$2=function(){var e,t;return this.props.errorMessage!=null&&this.props.errorMessage!==""&&(e=this.props.errorMessage,t="xkmlbd1 x1qoy3rc xdj266r xyu1916 xat24cr xbt2mb3 xexx8yu xf159sx xx6bls6 xe2zdcy xxymvpz"),e==null||e===""||e===o("PolarisLoginActionConstants").FB_SSO_DISABLED?null:u.jsx("div",{className:t,children:u.jsx("p",{"aria-atomic":"true",id:"errorAlert",role:"alert",children:e},"message")})},n.$3=function(){var e=this,t=this.props.accountInfo.profilePictureUrl,n=this.props.accountInfo.username,o=this.props.requestInFlight;return u.jsx(r("IGDSBox.react"),{alignItems:"center",justifyContent:"center",position:"relative",children:u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(r){return e.props.onRequestLogin(n,r)},children:u.jsx("img",babelHelpers.extends({alt:s._(/*BTDS*/"{username}'s profile picture",[s._param("username",n)])},{0:{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x1m2trrv xxy3q5o x119j0k9 x1ynp9ky x1lliihq xln7xf2 xk390pu xpyat2d x1anpbxc x11t971q xyorhqc xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1exxlbk"},1:{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x1m2trrv xxy3q5o x119j0k9 x1ynp9ky x1lliihq xln7xf2 xk390pu xpyat2d x1anpbxc x11t971q xyorhqc xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1exxlbk xz5rk10"}}[!!o<<0],{src:t}))})})},n.render=function(){var e=this,t=this.props.accountInfo,n=s._(/*BTDS*/"Continue as {username}",[s._param("username",t.username)]);return u.jsxs("div",{className:"x78zum5 xdt5ytf",children:[this.$2(),this.$3(),u.jsx(r("IGDSBox.react"),{marginBottom:4,marginEnd:"auto",marginStart:"auto",marginTop:4,maxWidth:"100%",minWidth:120,position:"relative",width:"intrinsic",children:u.jsx(r("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:function(r){return e.props.onRequestLogin(t.username,r)},children:u.jsx(r("IGDSBox.react"),{paddingX:4,position:"relative",children:u.jsx(r("PolarisIGCoreText").BodyEmphasized,{color:"web-always-white",display:"truncated",zeroMargin:!0,children:n})})})}),u.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x2lah0s xln7xf2 xk390pu xcxhlts x14z9mp x1fqp7bg x1lziwak xexx8yu xp48ta0 x18d9i69 xtssl2i x1n2onr6 x2b8uid x11njtxf",children:u.jsxs("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd x5n08af xt0psk2 xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:[o("PolarisAuthStrings").notUsernameText(t.username)," ",this.props.pageType===o("PolarisAuthConstants").AuthPageType.Signup?u.jsx(r("IGDSButton.react"),{display:"block",href:r("XPolarisEmailSignupControllerRouteBuilder").buildURL({}),label:s._(/*BTDS*/"Sign Up"),onClick:function(n){return e.$1(n,o("PolarisAuthActionConstants").AUTH.signup)},variant:"primary_link"}):u.jsx(r("IGDSButton.react"),{display:"block",label:s._(/*BTDS*/"Switch accounts"),onClick:function(n){return e.$1(n,o("PolarisAuthActionConstants").AUTH.login)},variant:"primary_link"})]})})]})},t})(u.Component);l.default=c}),226);
__d("PolarisLandingFormButtonGroup.react",["IGDSBox.react","IGDSText.react","PolarisAuthStrings","PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={brandForwardPrimaryButtonContainer:{paddingTop:"xexx8yu",paddingInlineEnd:"x64bnmy",paddingBottom:"x18d9i69",paddingInlineStart:"x13jy36j",width:"xh8yej3",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(6),n=e.button,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={__className:"x5yr21d"},t[0]=a):a=t[0];var i;t[1]!==n.label?(i=s.jsx(r("IGDSText.react"),{color:"primaryButton",weight:"semibold",children:n.label}),t[1]=n.label,t[2]=i):i=t[2];var l;return t[3]!==n.onClick||t[4]!==i?(l=s.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,dangerouslySetClassName:a,"data-testid":void 0,onClick:n.onClick,children:i}),t[3]=n.onClick,t[4]=i,t[5]=l):l=t[5],l}function d(e){var t=o("react-compiler-runtime").c(11),n=e.buttonEnd,a=e.buttonStart,i;t[0]!==a?(i=a&&s.jsx(c,{button:a}),t[0]=a,t[1]=i):i=t[1];var l;t[2]!==n||t[3]!==a?(l=a&&n&&s.jsx(r("IGDSBox.react"),{display:"inlineBlock",marginEnd:1,marginStart:1,position:"relative",children:s.jsx(r("IGDSText.react"),{color:"secondaryText",children:o("PolarisAuthStrings").OR})}),t[2]=n,t[3]=a,t[4]=l):l=t[4];var u;t[5]!==n?(u=n&&s.jsx(c,{button:n}),t[5]=n,t[6]=u):u=t[6];var d;return t[7]!==i||t[8]!==l||t[9]!==u?(d=s.jsxs(r("IGDSBox.react"),{alignSelf:"center",display:"inlineBlock",marginTop:5,position:"relative",children:[i,l,u]}),t[7]=i,t[8]=l,t[9]=u,t[10]=d):d=t[10],d}function m(e){var t=o("react-compiler-runtime").c(6),n=e.fullWidth,a=e.primaryButton,i=n===void 0?!1:n,l;t[0]!==a.label?(l=s.jsx(r("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",position:"relative",children:a.label}),t[0]=a.label,t[1]=l):l=t[1];var u;return t[2]!==i||t[3]!==a.onClick||t[4]!==l?(u=s.jsx(r("PolarisIGCoreButton.react"),{fullWidth:i,large:!0,onClick:a.onClick,children:l}),t[2]=i,t[3]=a.onClick,t[4]=l,t[5]=u):u=t[5],u}function p(e){var t=o("react-compiler-runtime").c(12),n=e.isBrandForwardStyle,a=e.primaryButton,i=e.secondaryButtonEnd,l=e.secondaryButtonStart,c=n===void 0?!1:n,p=c&&u.brandForwardPrimaryButtonContainer,_;t[0]!==c||t[1]!==a?(_=c?s.jsx("div",{className:"x1wmp3kr x15b4ht x11g16fi xkyum4 x6ikm8r x10wlt62",children:s.jsx(m,{fullWidth:!0,primaryButton:a})}):s.jsx(m,{primaryButton:a}),t[0]=c,t[1]=a,t[2]=_):_=t[2];var f;t[3]!==p||t[4]!==_?(f=s.jsx(r("IGDSBox.react"),{marginEnd:10,marginStart:10,marginTop:4,position:"relative",xstyle:p,children:_}),t[3]=p,t[4]=_,t[5]=f):f=t[5];var g;t[6]!==i||t[7]!==l?(g=s.jsx(d,{buttonEnd:i,buttonStart:l}),t[6]=i,t[7]=l,t[8]=g):g=t[8];var h;return t[9]!==f||t[10]!==g?(h=s.jsxs(s.Fragment,{children:[f,g]}),t[9]=f,t[10]=g,t[11]=h):h=t[11],h}l.default=p}),98);
__d("PolarisLoggedOutCarouselCard.react",["CometImage.react","IGDSBox.react","PolarisHSnapScroll.react","PolarisStepIndicator.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useState,c={image:{display:"x1lliihq",height:"x5yr21d",width:"x14atkfc",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(20),n=e.images,a=e.texts,i=u(0),l=i[0],d=i[1],p;t[0]!==l||t[1]!==n.length?(p=function(t){var e=t.startPct,r=Math.round(e),o=Math.max(0,Math.min(r,n.length-1));o!==l&&d(o)},t[0]=l,t[1]=n.length,t[2]=p):p=t[2];var _=p,f;if(t[3]!==n||t[4]!==a){var g;t[6]!==a?(g=function(t,n){return s.jsxs("div",{className:"x6s0dn4 x78zum5 xdt5ytf xl56j7k x1g81zrj xn9wirt",children:[s.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf x1vd4hg5 xl56j7k x6ikm8r x10wlt62 x14atkfc",children:s.jsx(r("CometImage.react"),{src:t,xstyle:c.image})}),s.jsx("div",{className:"x1qz8m4s xnh215r xddofbv x1j61x8r xo1l8bm xkds0cx x1ls015a xat24cr xotxm5o x11fxgd9 x2b8uid",children:a[n]||""})]},n)},t[6]=a,t[7]=g):g=t[7],f=n.map(g),t[3]=n,t[4]=a,t[5]=f}else f=t[5];var h=f,y;t[8]===Symbol.for("react.memo_cache_sentinel")?(y={className:"x16nrsnc xdj266r xpwdb9g xat24cr xefazk8 x1n2onr6 xh8yej3"},t[8]=y):y=t[8];var C;t[9]===Symbol.for("react.memo_cache_sentinel")?(C={next:!0,previous:!0},t[9]=C):C=t[9];var b;t[10]!==h||t[11]!==_||t[12]!==n.length?(b=s.jsx(r("PolarisHSnapScroll.react"),{animationDuration:150,enableMouseSwipe:!0,gutterWidth:0,itemCount:n.length,itemWidth:window.innerWidth,onInteract:m,onVisibilityChange:_,pagerDisabled:C,swipeSize:1,children:h}),t[10]=h,t[11]=_,t[12]=n.length,t[13]=b):b=t[13];var v;t[14]!==l||t[15]!==n.length?(v=n.length>1&&s.jsx(r("PolarisStepIndicator.react"),{className:"x6s0dn4 xxzp1fc x1f889gz xrr41r3 xl56j7k x10l6tqk",numSteps:n.length,selectedStep:l,style:"lightContrast"}),t[14]=l,t[15]=n.length,t[16]=v):v=t[16];var S;return t[17]!==b||t[18]!==v?(S=s.jsx(r("IGDSBox.react"),{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",children:s.jsxs("div",babelHelpers.extends({},y,{children:[b,v]}))}),t[17]=b,t[18]=v,t[19]=S):S=t[19],S}function m(){}l.default=d}),98);
__d("XPolarisStarterPackDirectoryControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/list/directory/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("usePolarisLOXMobileHomepageDesign",["react-compiler-runtime","usePolarisRouteConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(4),t=r("usePolarisRouteConfig")(),n=t.homepageDesignVariant,a=n==="mweb_branding",i=n!==void 0&&n!=="default",l=n==="mweb_starter_pack",s;return e[0]!==a||e[1]!==i||e[2]!==l?(s={isBrandingDesign:a,isLOXMobileHomepageDesign:i,isStarterPackDesign:l},e[0]=a,e[1]=i,e[2]=l,e[3]=s):s=e[3],s}l.default=e}),98);
__d("PolarisLoggedOutMobileHomeBrandingContent.react",["fbt","ix","IGCoreImage.react","IGDSBox.react","IGDSButton.react","IGDSIgLogoFilledIcon.react","IGDSListCell.react","IGDSText.react","PolarisLandingFormUtils","PolarisLoggedOutCarouselCard.react","PolarisLoggedOutCtaClickLogger","PolarisNavigationUtils","XPolarisStarterPackDirectoryControllerRouteBuilder","react","react-compiler-runtime","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXMobileHomepageDesign","usePolarisPageID","usePolarisRouteConfig"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d={joinButton:{paddingInlineEnd:"x64bnmy",paddingInlineStart:"x13jy36j",$$css:!0},starterPackHeader:{backgroundColor:"xvbhtw8",borderBottomColor:"x1bs97v6",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",marginTop:"xxhku1v",paddingBottom:"xsag5q8",paddingTop:"xz9dl7a",zIndex:"x1vjfegm",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(16),n=e.onLogoClick,a;if(t[0]===Symbol.for("react.memo_cache_sentinel")){var i;a=[{images:[u("914477"),u("914478"),u("914479")],texts:[(i=o("PolarisLandingFormUtils")).WATCH_SEND_SHORT_VIDEOS,i.SEE_FRIENDS_CREATORS_UPDATES,i.FIND_SHARE_INTERESTS]},{images:[u("914480"),u("914481"),u("914482")],texts:[i.COMMUNITY_Q_AND_A,i.MATCH_MUSIC_TO_MOMENTS,i.SAVE_CORE_MEMORIES]},{images:[u("914483"),u("914484"),u("914485")],texts:[i.SHARE_WITH_CLOSE_FRIENDS,i.SPARK_DM_CONVERSATIONS,i.DROP_QUICK_NOTES]}],t[0]=a}else a=t[0];var l=a,m=r("usePolarisLOXBrandForwardDeeplinkLogoUpsell")(),_=m.getBrandForwardDeeplinkLogoUpsellVariant,f=r("usePolarisLOXMobileHomepageDesign")(),g=f.isLOXMobileHomepageDesign,h=r("usePolarisLOXMobileHomepageDesign")(),y=h.isStarterPackDesign,C=r("usePolarisRouteConfig")(),b=C.showBrandingPageWithNav,v=_()==="mweb_deeplink_logo"||b===!0,S=r("usePolarisPageID")(),R;t[1]!==y||t[2]!==S?(R=y&&c.jsx(r("IGDSBox.react"),{direction:"row",justifyContent:"center",marginBottom:5,position:"sticky",top:!0,xstyle:d.starterPackHeader,children:c.jsx(r("IGDSListCell.react"),{addOnEnd:c.jsx(r("IGDSButton.react"),{display:"block",label:"Join",onClick:function(){o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("open_starter_pack_directory","full_page",S,{isDismissible:!1}),o("PolarisNavigationUtils").openURL(r("XPolarisStarterPackDirectoryControllerRouteBuilder").buildURL({}))},variant:"primary",xstyle:d.joinButton}),content:c.jsx(r("IGDSText.react"),{size:"body",weight:"semibold",children:"Customize a feed based on your interests when you join."})})}),t[1]=y,t[2]=S,t[3]=R):R=t[3];var L;t[4]!==v||t[5]!==g||t[6]!==n?(L=v||g?c.jsx(r("IGDSBox.react"),{alignItems:"baseline",marginBottom:5,marginTop:2,paddingX:2,children:c.jsx(r("IGDSButton.react"),{icon:c.jsx(r("IGDSIgLogoFilledIcon.react"),{alt:"ins",color:"ig-primary-text",size:47}),onClick:n,variant:"tertiary"})}):c.jsx(r("IGDSBox.react"),{alignItems:"baseline",marginBottom:3,paddingX:6,children:c.jsx(r("IGDSIgLogoFilledIcon.react"),{alt:"ins",color:"ig-primary-text",size:47})}),t[4]=v,t[5]=g,t[6]=n,t[7]=L):L=t[7];var E;t[8]===Symbol.for("react.memo_cache_sentinel")?(E=s._(/*BTDS*/"Landing image"),t[8]=E):E=t[8];var k;t[9]===Symbol.for("react.memo_cache_sentinel")?(k=c.jsxs(r("IGDSBox.react"),{alignItems:"center",marginBottom:13,marginTop:10,paddingX:6,children:[c.jsx(r("IGCoreImage.react"),{alt:E,"data-testid":void 0,src:{light:u("914486")}}),c.jsx("div",{className:"x1qz8m4s xnh215r x1j61x8r x2b8uid xcg35fi xo1l8bm xmx5zq6 x9d7mpn x14vqqas",children:o("PolarisLandingFormUtils").SHARE_EVERYDAY_MOMENTS_FBT})]}),t[9]=k):k=t[9];var I;t[10]!==R||t[11]!==L?(I=c.jsxs(c.Fragment,{children:[R,L,k]}),t[10]=R,t[11]=L,t[12]=I):I=t[12];var T=I,D;t[13]===Symbol.for("react.memo_cache_sentinel")?(D=l.map(p),t[13]=D):D=t[13];var x=D,$;return t[14]!==T?($=c.jsxs(c.Fragment,{children:[T,x]}),t[14]=T,t[15]=$):$=t[15],$}function p(e,t){return c.jsx("div",{className:"x1byr4rc xyri2b x1egpv2n x1c1uobl",children:c.jsx(r("PolarisLoggedOutCarouselCard.react"),{images:e.images,texts:e.texts},t)},t)}p.displayName=p.name+" [from "+i.id+"]",l.default=m}),226);
__d("PolarisLandingForm.react",["IGDSBox.react","InstagramODS","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisFooter.react","PolarisIGCoreText","PolarisIgLiteCarbonUpsellsUtils","PolarisLandingFormButtonGroup.react","PolarisLandingFormUtils","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutMobileHomeBrandingContent.react","PolarisLoggedOutUpsellUtils","PolarisReactRedux.react","PolarisRoutePropUtils","PolarisSignupActions","PolarisUA","XPolarisLoginControllerRouteBuilder","gkx","react","react-compiler-runtime","useCometRouterDispatcher","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXMobileHomepageDesign","usePolarisOpenApp","usePolarisPageID","usePolarisRouteConfig"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext;function m(e,t,n){return{primary:{label:n.buttonText,onClick:n.onClickFn},secondary:{end:{label:o("PolarisAuthStrings").SIGN_UP_BUTTON_TEXT_LOWER_CASE,onClick:t},start:{label:o("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:e}}}}function p(e){var t=o("react-compiler-runtime").c(28),n=e.ref,a=o("PolarisReactRedux.react").useDispatch(),i=r("usePolarisPageID")(),l=r("useCometRouterDispatcher")(),u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=o("PolarisIgLiteCarbonUpsellsUtils").isIgLiteCarbonUpsellsEligible(),t[0]=u):u=t[0];var c=u,p=r("usePolarisLOXBrandForwardDeeplinkLogoUpsell")(),_=p.isBrandForwardDeeplinkLogoUpsell,f=r("usePolarisLOXMobileHomepageDesign")(),g=f.isLOXMobileHomepageDesign,h=r("usePolarisRouteConfig")(),y=h.showBrandingPageWithNav,C=_||g||y===!0,b=d(o("PolarisRoutePropUtils").PolarisRoutePropContext),v;t[1]!==b.routePropQE?(v=b.routePropQE.getNumber("landing_page_value_prop_variant",0),t[1]=b.routePropQE,t[2]=v):v=t[2];var S=Number(v),R;t[3]!==a||t[4]!==i?(R=function(){o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("signup","full_page",i),o("PolarisAuthLimitedRegistrationHelpers").hasRestrictedRegistration()?a(o("PolarisSignupActions").setShowRegulatoryConsentModal()):a(o("PolarisAuthActions").switchAuthType(o("PolarisAuthActionConstants").AUTH.signup))},t[3]=a,t[4]=i,t[5]=R):R=t[5];var L=R,E;t[6]!==l||t[7]!==a||t[8]!==i?(E=function(){o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login","full_page",i),r("gkx")("18606")===!0?l==null||l.go(r("XPolarisLoginControllerRouteBuilder").buildUri({mtn:!0}).toString(),{}):a(o("PolarisAuthActions").switchAuthType(o("PolarisAuthActionConstants").AUTH.login))},t[6]=l,t[7]=a,t[8]=i,t[9]=E):E=t[9];var k=E,I=r("usePolarisOpenApp")(),T;t[10]!==I||t[11]!==i?(T=function(){o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("app_open","full_page",i),o("PolarisUA").isDesktop()&&r("InstagramODS").incr("web.desktop.app_open_click.PolarisLandingForm"),I(c?{utmCampaignDefault:"rootLandingPage",utmMedium:"installLink"}:void 0)},t[10]=I,t[11]=i,t[12]=T):T=t[12];var D=T,x=o("PolarisLoggedOutUpsellUtils").useGetUpsellTextAndAction(D,c),$;t[13]!==k||t[14]!==L||t[15]!==x?($=m(k,L,x),t[13]=k,t[14]=L,t[15]=x,t[16]=$):$=t[16];var P=$,N;t[17]!==P.primary||t[18]!==P.secondary.end||t[19]!==P.secondary.start||t[20]!==C||t[21]!==D||t[22]!==S||t[23]!==y?(N=C?s.jsxs(s.Fragment,{children:[s.jsx(r("PolarisLoggedOutMobileHomeBrandingContent.react"),{onLogoClick:D}),s.jsx(r("IGDSBox.react"),{marginTop:17,children:s.jsx(r("PolarisFooter.react"),{includeLanguageAndCopyright:!0,variant:"centered"})}),s.jsx("div",babelHelpers.extends({},{0:{className:"x6s0dn4 xm0mo6v xxux13n x1ey2m1c x78zum5 xdt5ytf xtijo5x x1o0tod xl84xjf xixxii4 xh8yej3 x1vjfegm"},1:{className:"x6s0dn4 xm0mo6v xxux13n x78zum5 xdt5ytf xtijo5x x1o0tod xl84xjf xixxii4 xh8yej3 x1vjfegm xvivwo0"}}[(y===!0)<<0],{children:s.jsx(r("PolarisLandingFormButtonGroup.react"),{isBrandForwardStyle:C,primaryButton:P.primary,secondaryButtonEnd:P.secondary.end,secondaryButtonStart:P.secondary.start})}))]}):s.jsxs(s.Fragment,{children:[s.jsx(r("IGDSBox.react"),{marginBottom:4,paddingX:7,position:"relative",children:s.jsx(r("PolarisIGCoreText"),{Element:"h1",size:"headline2",textAlign:"center",weight:"normal",children:o("PolarisLandingFormUtils").getLoginValuePropText(S)})}),s.jsx(r("PolarisLandingFormButtonGroup.react"),{primaryButton:P.primary,secondaryButtonEnd:P.secondary.end,secondaryButtonStart:P.secondary.start})]}),t[17]=P.primary,t[18]=P.secondary.end,t[19]=P.secondary.start,t[20]=C,t[21]=D,t[22]=S,t[23]=y,t[24]=N):N=t[24];var M;return t[25]!==n||t[26]!==N?(M=s.jsx(r("IGDSBox.react"),{containerRef:n,flex:"grow",marginTop:5,position:"relative",width:"100%",children:N}),t[25]=n,t[26]=N,t[27]=M):M=t[27],M}l.default=p}),98);
__d("PolarisLoggedOutContentWallDialogAuthCTAs.react",["IGDSText.react","PolarisAppInstallStrings","PolarisConsentStrings.react","PolarisLoggedOutLoginButton.react","PolarisLoggedOutSignupButton.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={button:{height:"xn3w4p2",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(5),t,n,a,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={className:"xkh2ocl x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x3pnbk8"},n=s.jsx(r("PolarisLoggedOutSignupButton.react"),{ctaTypeV2:"auth_form_dialog",isDismissible:!0,label:o("PolarisAppInstallStrings").SIGNUP_UP_FOR_INSTAGRAM_APP,loginSource:"logged_out_megaphone_signup",variant:"primary",xstyle:u.button}),a=s.jsx(r("PolarisLoggedOutLoginButton.react"),{ctaTypeV2:"auth_form_dialog",loginSource:"logged_out_megaphone_signup",variant:"secondary",xstyle:u.button}),i={className:"xz9dl7a xsag5q8"},e[0]=t,e[1]=n,e[2]=a,e[3]=i):(t=e[0],n=e[1],a=e[2],i=e[3]);var l;return e[4]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsxs("div",babelHelpers.extends({},t,{children:[n,a,s.jsx("div",babelHelpers.extends({},i,{children:s.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",textAlign:"center",children:o("PolarisConsentStrings.react").instagramTermsOfUseAndPrivacyPolicyText("secondaryText")})}))]})),e[4]=l):l=e[4],l}l.default=c}),98);
__d("PolarisLoginActionClearStopDeletionNonce",[],(function(t,n,r,o,a,i){"use strict";function e(){return function(e,t){e({deletionDate:null,deletionNonce:null,type:"ACCOUNT_DELETED"})}}i.clearStopDeletionNonce=e}),66);
__d("PolarisLoginActionOneTapLoginRemove",["PolarisAuthStrings","PolarisLoginLogger","PolarisOneTapLogin","PolarisToastActions"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(t,n){o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_account_remove_click",ig_userid:e,login_type:"device_based_login"});try{o("PolarisOneTapLogin").removeLoginNonce(e)}catch(e){o("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_account_remove_failed",login_type:"device_based_login"}),t(o("PolarisToastActions").showToast({persistOnNavigate:!0,text:o("PolarisAuthStrings").LOGIN_FAILED_TEXT}))}window.location.reload()}}l.oneTapLoginRemove=e}),98);
__d("PolarisOneTapLoginForm.react",["fbt","CometPressable.react","IGDSBox.react","IGDSButton.react","IGDSDivider.react","IGDSXPanoFilledIcon.react","PolarisAuthStrings","PolarisAuthTypeSwitcher.react","PolarisConfirmDialog.react","PolarisGenericStrings","PolarisIGCoreSVGIconButton.react","PolarisLoginActionOneTapLogin","PolarisLoginActionOneTapLoginRemove","PolarisLoginLogger","PolarisReactRedux.react","PolarisUA","PolarisUserAvatar.react","emptyFunction","react","react-compiler-runtime","stylex","usePolarisOneTapLoginEditModeState","useSingleSimpleImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useState,_=s._(/*BTDS*/"Manage Accounts"),f={account:{alignItems:"x6s0dn4",cursor:"x1ypdohk",display:"x78zum5",flexDirection:"x1q0g3np",flexGrow:"x1iyjqo2",fontWeight:"xwhw2v2",$$css:!0},multiContainer:{paddingBottom:"xx6bls6",paddingTop:"x7sb2j6",$$css:!0},profilePicture:{borderTopColor:"x1w6pcvv",borderInlineEndColor:"x1kr3336",borderBottomColor:"x1e5933n",borderInlineStartColor:"x8itksh",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",marginInlineEnd:"xbmvrgn",$$css:!0},profilePictureSingle:{borderTopColor:"x1w6pcvv",borderInlineEndColor:"x1kr3336",borderBottomColor:"x1e5933n",borderInlineStartColor:"x8itksh",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",marginTop:"x1xmf6yo",marginInlineEnd:"x11t971q",marginBottom:"x1yztbdb",marginInlineStart:"xvc5jky",$$css:!0},root:{fontSize:"xvs91rp",fontWeight:"xz5fbns",maxWidth:"x1dc814f",width:"xh8yej3",$$css:!0}};function g(e){var t=o("react-compiler-runtime").c(12),n=e.handleRemoveOneTapLoginDialogClose,a=e.handleRemoveOneTapLoginDialogConfirm,i=e.userId,l=e.username,u;t[0]!==l?(u=s._(/*BTDS*/"You'll need to enter your username and password the next time you log in as {username}",[s._param("username",l)]),t[0]=l,t[1]=u):u=t[1];var d,m;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Cancel"),m=s._(/*BTDS*/"Remove"),t[2]=d,t[3]=m):(d=t[2],m=t[3]);var p;t[4]!==a||t[5]!==i?(p=function(){return a(i)},t[4]=a,t[5]=i,t[6]=p):p=t[6];var _;t[7]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"Remove Account?"),t[7]=_):_=t[7];var f;return t[8]!==n||t[9]!==u||t[10]!==p?(f=c.jsx(r("PolarisConfirmDialog.react"),{body:u,cancelLabel:d,confirmLabel:m,onClose:n,onConfirm:p,title:_}),t[8]=n,t[9]=u,t[10]=p,t[11]=f):f=t[11],f}function h(e){var t=o("react-compiler-runtime").c(33),n=e.fbConnectedUser,a=e.isLoginButtonDisabled,i=e.isLoginButtonLoading,l=e.onRequestFBLogin;if(!n||!l)return null;var s=n.fbUserID,u=n.profilePictureUrl,d=n.username,m=String(s),p;t[0]!==m||t[1]!==a?(p=a(m),t[0]=m,t[1]=a,t[2]=p):p=t[2];var _=p,g;t[3]!==m||t[4]!==i?(g=i(m),t[3]=m,t[4]=i,t[5]=g):g=t[5];var h=g,C;t[6]!==_||t[7]!==l||t[8]!==d?(C=_?r("emptyFunction"):function(){l(d)},t[6]=_,t[7]=l,t[8]=d,t[9]=C):C=t[9];var b;t[10]===Symbol.for("react.memo_cache_sentinel")?(b="x1w6pcvv x1kr3336 x1e5933n x8itksh x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 xbmvrgn",t[10]=b):b=t[10];var v;t[11]!==l||t[12]!==d?(v=function(){return l(d)},t[11]=l,t[12]=d,t[13]=v):v=t[13];var S;t[14]!==u||t[15]!==v||t[16]!==d?(S=c.jsx(r("PolarisUserAvatar.react"),{className:b,isLink:!1,onClick:v,profilePictureUrl:u,size:y,username:d}),t[14]=u,t[15]=v,t[16]=d,t[17]=S):S=t[17];var R;t[18]===Symbol.for("react.memo_cache_sentinel")?(R={className:"x1qjc9v5 xdt5ytf x1iyjqo2 xs83m0k x6ikm8r x10wlt62 xlyipyv xuxw1ft"},t[18]=R):R=t[18];var L;t[19]!==d?(L=c.jsx("div",babelHelpers.extends({},R,{children:d})),t[19]=d,t[20]=L):L=t[20];var E;t[21]!==l||t[22]!==d?(E=function(){l(d)},t[21]=l,t[22]=d,t[23]=E):E=t[23];var k;t[24]!==_||t[25]!==h||t[26]!==E?(k=c.jsx(r("IGDSBox.react"),{justifyContent:"end",children:c.jsx(r("IGDSButton.react"),{display:"block",isDisabled:_,isLoading:h,label:o("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:E})}),t[24]=_,t[25]=h,t[26]=E,t[27]=k):k=t[27];var I;return t[28]!==k||t[29]!==C||t[30]!==S||t[31]!==L?(I=c.jsxs(r("CometPressable.react"),{onPress:C,role:"button",xstyle:f.account,children:[S,L,k]}),t[28]=k,t[29]=C,t[30]=S,t[31]=L,t[32]=I):I=t[32],I}var y=38,C=86;function b(t){var n=o("react-compiler-runtime").c(14),a=t.handleLoginClick,i=t.isSingleAccount,l=t.loginNonces,s=t.userId,u=l[s],d=u.nonce,m=u.profilePicUrl,p=u.username,_;n[0]===Symbol.for("react.memo_cache_sentinel")?(_={className:"x78zum5 xl56j7k"},n[0]=_):_=n[0];var g=i?f.profilePictureSingle:f.profilePicture,h;n[1]!==g?(h=(e||(e=r("stylex")))(g),n[1]=g,n[2]=h):h=n[2];var b;n[3]!==a||n[4]!==i||n[5]!==d||n[6]!==s?(b=i?function(){return a(s,d)}:void 0,n[3]=a,n[4]=i,n[5]=d,n[6]=s,n[7]=b):b=n[7];var v=i?C:y,S;return n[8]!==m||n[9]!==h||n[10]!==b||n[11]!==v||n[12]!==p?(S=c.jsx("div",babelHelpers.extends({},_,{children:c.jsx(r("PolarisUserAvatar.react"),{className:h,isLink:!1,onClick:b,profilePictureUrl:m,size:v,username:p})})),n[8]=m,n[9]=h,n[10]=b,n[11]=v,n[12]=p,n[13]=S):S=n[13],S}function v(e){var t=o("react-compiler-runtime").c(39),n=e.editMode,a=e.handleLoginClick,i=e.handleRemoveAccountClick,l=e.isLoginButtonDisabled,s=e.isLoginButtonLoading,u=e.loginNonces,d=e.userId,m=u[d].nonce,p=u[d].username,_;t[0]!==l||t[1]!==d?(_=l(d),t[0]=l,t[1]=d,t[2]=_):_=t[2];var g=_,h;t[3]!==s||t[4]!==d?(h=s(d),t[3]=s,t[4]=d,t[5]=h):h=t[5];var y=h,C;t[6]!==n||t[7]!==a||t[8]!==g||t[9]!==m||t[10]!==d?(C=n||g?r("emptyFunction"):function(){return a(d,m)},t[6]=n,t[7]=a,t[8]=g,t[9]=m,t[10]=d,t[11]=C):C=t[11];var v=C,S=g||y,R;t[12]!==i||t[13]!==d||t[14]!==p?(R=function(){return i(d,p)},t[12]=i,t[13]=d,t[14]=p,t[15]=R):R=t[15];var L;t[16]===Symbol.for("react.memo_cache_sentinel")?(L=c.jsx(r("IGDSXPanoFilledIcon.react"),{alt:o("PolarisGenericStrings").CLOSE_TEXT,size:12}),t[16]=L):L=t[16];var E;t[17]!==S||t[18]!==R?(E=c.jsx(r("PolarisIGCoreSVGIconButton.react"),{disabled:S,onClick:R,padding:0,children:L}),t[17]=S,t[18]=R,t[19]=E):E=t[19];var k=E,I;t[20]!==a||t[21]!==u||t[22]!==d?(I=c.jsx(b,{handleLoginClick:a,isSingleAccount:!1,loginNonces:u,userId:d}),t[20]=a,t[21]=u,t[22]=d,t[23]=I):I=t[23];var T;t[24]===Symbol.for("react.memo_cache_sentinel")?(T={className:"x1qjc9v5 xdt5ytf x1iyjqo2 xs83m0k x6ikm8r x10wlt62 xlyipyv xuxw1ft"},t[24]=T):T=t[24];var D;t[25]!==p?(D=c.jsx("div",babelHelpers.extends({},T,{children:p})),t[25]=p,t[26]=D):D=t[26];var x;t[27]!==n||t[28]!==v||t[29]!==g||t[30]!==y||t[31]!==k?(x=c.jsx(r("IGDSBox.react"),{justifyContent:"end",children:n?k:c.jsx(r("IGDSButton.react"),{display:"block",isDisabled:g,isLoading:y,label:o("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:v})}),t[27]=n,t[28]=v,t[29]=g,t[30]=y,t[31]=k,t[32]=x):x=t[32];var $;return t[33]!==v||t[34]!==D||t[35]!==x||t[36]!==I||t[37]!==d?($=c.jsx(r("IGDSBox.react"),{alignItems:"center",columnGap:2,direction:"row",flex:"grow",paddingY:2,children:c.jsxs(r("CometPressable.react"),{onPress:v,role:"button",xstyle:f.account,children:[I,D,x]},d)}),t[33]=v,t[34]=D,t[35]=x,t[36]=I,t[37]=d,t[38]=$):$=t[38],$}function S(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsx(r("IGDSBox.react"),{paddingX:9,paddingY:2,position:"relative",width:"100%",children:c.jsx(r("IGDSDivider.react"),{})}),e[0]=t):t=e[0];var n;return e[1]===Symbol.for("react.memo_cache_sentinel")?(n=c.jsxs(c.Fragment,{children:[t,c.jsx(r("IGDSBox.react"),{alignItems:"center",marginBottom:4,marginTop:4,position:"relative",children:c.jsx(r("PolarisAuthTypeSwitcher.react"),{primary:!0})})]}),e[1]=n):n=e[1],n}function R(e){var t=o("react-compiler-runtime").c(3),n=e.onRemoveClick,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s._(/*BTDS*/"Remove Account"),t[0]=a):a=t[0];var i;return t[1]!==n?(i=c.jsx(r("IGDSButton.react"),{display:"block",label:a,onClick:n,variant:"primary_link"}),t[1]=n,t[2]=i):i=t[2],i}function L(e){var t=o("react-compiler-runtime").c(29),n=e.handleLoginClick,a=e.handleRemoveAccountClick,i=e.isLoginButtonLoading,l=e.loginNonces,u=e.showSingleAccountProfilePicture,d;t[0]!==l?(d=Object.keys(l),t[0]=l,t[1]=d):d=t[1];var m=d[0],p=l[m],_=p.nonce,f=p.username,g;t[2]!==f?(g=s._(/*BTDS*/"Continue as {username}",[s._param("username",f)]),t[2]=f,t[3]=g):g=t[3];var h=g,y;t[4]!==n||t[5]!==l||t[6]!==u||t[7]!==m?(y=u&&c.jsx(b,{handleLoginClick:n,isSingleAccount:!0,loginNonces:l,userId:m}),t[4]=n,t[5]=l,t[6]=u,t[7]=m,t[8]=y):y=t[8];var C;t[9]!==i||t[10]!==m?(C=i(m),t[9]=i,t[10]=m,t[11]=C):C=t[11];var v;t[12]!==n||t[13]!==_||t[14]!==m?(v=function(){return n(m,_)},t[12]=n,t[13]=_,t[14]=m,t[15]=v):v=t[15];var L;t[16]!==h||t[17]!==C||t[18]!==v?(L=c.jsx(r("IGDSBox.react"),{marginBottom:5,marginEnd:"auto",marginStart:"auto",marginTop:4,minWidth:120,position:"relative",width:"intrinsic",children:c.jsx(r("IGDSButton.react"),{isLoading:C,label:h,onClick:v,size:"small",variant:"primary"})}),t[16]=h,t[17]=C,t[18]=v,t[19]=L):L=t[19];var E;t[20]!==a||t[21]!==m||t[22]!==f?(E=c.jsx(r("IGDSBox.react"),{alignItems:"center",marginBottom:5,position:"relative",children:c.jsx(R,{onRemoveClick:function(){return a(m,f)}})}),t[20]=a,t[21]=m,t[22]=f,t[23]=E):E=t[23];var k;t[24]===Symbol.for("react.memo_cache_sentinel")?(k=o("PolarisUA").isMobile()&&c.jsx(S,{}),t[24]=k):k=t[24];var I;return t[25]!==y||t[26]!==L||t[27]!==E?(I=c.jsxs(r("IGDSBox.react"),{direction:"column",flex:"grow",children:[y,L,E,k]}),t[25]=y,t[26]=L,t[27]=E,t[28]=I):I=t[28],I}function E(e){var t=o("react-compiler-runtime").c(27),n=e.editMode,a=e.fbConnectedUser,i=e.handleLoginClick,l=e.handleManageAccountsClick,u=e.handleRemoveAccountClick,d=e.isLoginButtonDisabled,m=e.isLoginButtonLoading,p=e.loginNonces,g=e.onRequestFBLogin,y;t[0]!==n?(y=n?s._(/*BTDS*/"Done Editing"):_,t[0]=n,t[1]=y):y=t[1];var C=y,b;t[2]!==p?(b=Object.keys(p),t[2]=p,t[3]=b):b=t[3];var S;t[4]!==n||t[5]!==i||t[6]!==u||t[7]!==d||t[8]!==m||t[9]!==p||t[10]!==b?(S=b.map(function(e){return c.jsx(v,{editMode:n,handleLoginClick:i,handleRemoveAccountClick:u,isLoginButtonDisabled:d,isLoginButtonLoading:m,loginNonces:p,userId:e},"account_"+e)}),t[4]=n,t[5]=i,t[6]=u,t[7]=d,t[8]=m,t[9]=p,t[10]=b,t[11]=S):S=t[11];var R=S,L;t[12]!==a||t[13]!==d||t[14]!==m||t[15]!==g?(L=c.jsx(h,{fbConnectedUser:a,isLoginButtonDisabled:d,isLoginButtonLoading:m,onRequestFBLogin:g}),t[12]=a,t[13]=d,t[14]=m,t[15]=g,t[16]=L):L=t[16];var E;t[17]!==R||t[18]!==L?(E=c.jsxs(r("IGDSBox.react"),{alignItems:"stretch",direction:"column",paddingX:4,xstyle:f.multiContainer,children:[R,L]}),t[17]=R,t[18]=L,t[19]=E):E=t[19];var k;t[20]!==l||t[21]!==C?(k=c.jsx(r("IGDSBox.react"),{marginBottom:6,position:"relative",children:c.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:c.jsx(r("IGDSButton.react"),{display:"block",label:C,onClick:l,variant:"primary_link"})})}),t[20]=l,t[21]=C,t[22]=k):k=t[22];var I;t[23]===Symbol.for("react.memo_cache_sentinel")?(I=o("PolarisUA").isMobile()&&c.jsx(r("IGDSBox.react"),{alignItems:"center",position:"relative",children:c.jsx(r("PolarisAuthTypeSwitcher.react"),{primary:!0})}),t[23]=I):I=t[23];var T;return t[24]!==E||t[25]!==k?(T=c.jsxs(r("IGDSBox.react"),{direction:"column",flex:"grow",children:[E,k,I]}),t[24]=E,t[25]=k,t[26]=T):T=t[26],T}function k(e){var t=e.fbConnectedUser,n=e.loginNonces,a=e.onLoginClick,i=e.onRemoveClick,l=e.onRequestFBLogin,s=e.requestInFlight,u=e.requestUserId,d=e.showSingleAccountProfilePicture,_=d===void 0?!0:d,h=p({id:"",username:""}),y=h[0],C=h[1],b=p(!1),v=b[0],S=b[1],R=r("usePolarisOneTapLoginEditModeState")(),k=R[0],I=R[1];r("useSingleSimpleImpression")(function(){Object.keys(n).length===1?o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_single_user_form_load",login_type:"device_based_login"}):o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_multi_user_form_load",login_type:"device_based_login"}),o("PolarisLoginLogger").logLoginEvent({event_category:"aymh_home_page_init",event_flow:"aymh",event_name:"aymh_step_view_loaded",event_step:"home_page",extra_client_data:{total_count:Object.keys(n).length.toString()}})});var T=m(function(e,t){a(e,t,function(){return T(e,t)}),o("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_login_click",extra_client_data:{credential_type:"nonce"},login_type:"device_based_login"})},[a]),D=m(function(e,t){C({id:e,username:t}),S(!0),o("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_remove_account_prompt_show",login_type:"device_based_login"})},[]),x=m(function(e){i(e)},[i]),$=m(function(){C({id:"",username:""}),S(!1),o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_remove_account_prompt_hide",login_type:"device_based_login"})},[]),P=m(function(){I(!k)},[k,I]),N=function(t){return s&&t!==u},M=function(t){return s&&t===u},w=Object.keys(n).length===1&&!t;return c.jsxs(r("IGDSBox.react"),{alignItems:"stretch",direction:"column",xstyle:f.root,children:[w?c.jsx(L,{handleLoginClick:T,handleRemoveAccountClick:D,isLoginButtonLoading:M,loginNonces:n,showSingleAccountProfilePicture:_}):c.jsx(E,{editMode:k,fbConnectedUser:t,handleLoginClick:T,handleManageAccountsClick:P,handleRemoveAccountClick:D,isLoginButtonDisabled:N,isLoginButtonLoading:M,loginNonces:n,onRequestFBLogin:l}),v&&y.id&&y.username&&c.jsx(g,{handleRemoveOneTapLoginDialogClose:$,handleRemoveOneTapLoginDialogConfirm:x,userId:y.id,username:y.username})]})}k.displayName=k.name+" [from "+i.id+"]";function I(e){var t,n,r=e.auth;return{requestInFlight:(r==null||(t=r.login)==null?void 0:t.requestInFlight)===!0,requestUserId:r==null||(n=r.login)==null?void 0:n.userId}}function T(e){return{onLoginClick:function(n,r,a){e(o("PolarisLoginActionOneTapLogin").oneTapLogin({loginNonce:r,retry:a,userId:n}))},onRemoveClick:function(n){e(o("PolarisLoginActionOneTapLoginRemove").oneTapLoginRemove(n))}}}var D=o("PolarisReactRedux.react").connect(I,T)(k);l.default=D}),226);
__d("PolarisBirthdaySignupForm.react",["ix","IGCoreImage.react","IGDSBox.react","IGDSTextVariants.react","PolarisAgeCollectionHelpers","PolarisAuthStrings","PolarisBirthdayFormInput.react","PolarisBirthdaysAdditionalInfoModal.react","PolarisDateHelpers","PolarisDateStrings","PolarisExternalLink.react","PolarisIGCoreButton.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","gkx","react","usePolarisEmailOrPhoneContactpointType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useState;function p(e){var t,n=e.onBirthdayEntered,a=e.onSignup,i=e.pageIdentifier,l=e.requestInFlight,c=e.shouldShowBirthdayTransparency,p=c===void 0?!1:c,_=e.shouldShowRedesignedSignup,f=_===void 0?!1:_,g=e.signupNonSpecificError,h=e.style,y=h===void 0?"default":h,C=o("PolarisReactRedux.react").useDispatch(),b=m(!1),v=b[0],S=b[1],R=o("PolarisReactRedux.react").useSelector(function(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}),L=m((R==null||(t=R.fields.birthday)==null?void 0:t.value)!=null?o("PolarisDateHelpers").dateToDateType(new Date(R.fields.birthday.value)):o("PolarisDateHelpers").getOneYearAgoDateType()),E=L[0],k=L[1],I=r("usePolarisEmailOrPhoneContactpointType")(),T=function(){C(o("PolarisSignupActions").returnToBaseSignupForm()),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:I,event_name:"back_button_clicked",step:"birthday"})},D=o("PolarisAgeCollectionHelpers").isDOBInputAttemptDisabled(E),x=function(){var e=o("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(R);e.birthday=o("PolarisDateHelpers").dateTypeToString(E),r("gkx")("14029")===!0&&n(),a(e)},$=function(t){o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:i,event_name:"birthday_interaction"}),k(t)};return d(function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:I,event_name:"form_load",step:"birthday"})},[I]),u.jsxs(u.Fragment,{children:[u.jsx(r("PolarisSignupFormFields.react"),{handleGoBack:T,handleNext:x,header:o("PolarisAuthStrings").BIRTHDAY_HEADER_TEXT,icon:f?null:u.jsx(r("IGCoreImage.react"),{alt:o("PolarisAgeCollectionHelpers").BIRTHDAY_ICON_ALT_TEXT,src:{dark:s("877412"),light:s("877413")}}),isNextActionDisabled:D,maxWidth:400,requestInFlight:l,shouldShowRedesignedSignup:f,signupNonSpecificError:g,style:y,subHeader:o("PolarisAuthStrings").BIRTHDAY_SUBHEADER_TEXT,children:u.jsxs(u.Fragment,{children:[u.jsx(r("IGDSBox.react"),{marginBottom:f?5:2,position:"relative",children:u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){return S(!0)},children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",children:o("PolarisAuthStrings").BIRTHDAY_WHY_LINK_TEXT})})}),u.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:u.jsx(r("PolarisBirthdayFormInput.react"),{birthday:o("PolarisDateHelpers").dateTypeToString(E),onBirthdayChange:$,shouldShowRedesignedSignup:f})}),u.jsxs(r("IGDSBox.react"),{position:"relative",width:"100%",children:[u.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",textAlign:"center",children:o("PolarisDateStrings").getBirthdayDisclaimerText()})}),p&&u.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:u.jsxs(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",textAlign:"center",children:[o("PolarisDateStrings").getBirthdayTransparencyText(),u.jsx(r("PolarisExternalLink.react"),{href:o("PolarisDateStrings").PRIVACY_POLICY_LINK,rel:"noopener noreferrer",target:"_blank",children:u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",children:o("PolarisDateStrings").getPrivacyPolicyText()})})})]})})]})]})}),v&&u.jsx(r("PolarisBirthdaysAdditionalInfoModal.react"),{onClose:function(){return S(!1)}})]})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("PolarisCaptchaSignupForm.react",["IGDSBox.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisReactRedux.react","PolarisRecaptcha","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","react","usePolarisEmailOrPhoneContactpointType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=e.onSignup,n=e.requestInFlight,a=e.signupNonSpecificError,i=e.style,l=i===void 0?"default":i,u=o("PolarisReactRedux.react").useDispatch(),m=d(function(){return""}),p=m[0],_=m[1],f=o("PolarisReactRedux.react").useSelector(function(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}),g=r("usePolarisEmailOrPhoneContactpointType")();c(function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:g,event_name:"form_load",step:"captcha"})},[g]);var h=function(){u(o("PolarisSignupActions").returnToBaseSignupForm()),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:g,event_name:"back_button_clicked",step:"captcha"})},y=p==="",C=function(){var e=o("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(f);e.captcha=p,t(e)},b=function(t){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:g,event_name:"captcha_solved"}),_(t)};return s.jsxs(r("PolarisSignupFormFields.react"),{handleGoBack:h,handleNext:C,header:o("PolarisAuthStrings").SIGN_UP_BUTTON_TEXT,isNextActionDisabled:y,requestInFlight:n,style:l,subHeader:o("PolarisAuthStrings").SIGN_UP_PHONE_LINK_TEXT,children:[s.jsx(r("IGDSBox.react"),{alignItems:"center",justifyContent:"center",position:"relative",children:s.jsx(r("PolarisRecaptcha"),{onChange:b})}),a!=null&&s.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:s.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:a})})]})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("PolarisEmailConfirmationForm.react",["fbt","ix","IGCoreImage.react","IGDSBox.react","IGDSButton.react","IGDSDialogFooter.react","IGDSText.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisIGCoreTextInput.react","PolarisLabeledTextInput.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","qex","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useEffect,_=d.useState,f=6,g=s._(/*BTDS*/"Email confirmation"),h=350;function y(e){var t,n,a=o("react-compiler-runtime").c(75),i=e.onSubmit,l=e.pageIdentifier,s=e.requestInFlight,d=e.shouldShowRedesignedSignup,m=e.signupNonSpecificError,y=e.style,b=d===void 0?!1:d,v=y===void 0?"default":y,S=o("PolarisReactRedux.react").useDispatch(),R=o("PolarisReactRedux.react").useSelector(C),L=(t=R==null||(n=R.fields.emailOrPhone)==null?void 0:n.value)!=null?t:"",E=_(""),k=E[0],I=E[1],T=_(!1),D=T[0],x=T[1],$=_(!1),P=$[0],N=$[1],M=k.length<f||s,w=m;if(w==null&&(R==null?void 0:R.fields)!=null){var A=R.fields,F=Object.keys(A).some(function(e){var t;return((t=A[e])==null?void 0:t.error)!=null});F&&(w=o("PolarisAuthStrings").ERROR_SIGNUP_UNKNOWN)}var O;a[0]===Symbol.for("react.memo_cache_sentinel")?(O=function(t){I(t.target.value)},a[0]=O):O=a[0];var B=O,W;a[1]!==S?(W=function(){S(o("PolarisSignupActions").returnToBaseSignupForm()),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",event_name:"back_button_clicked",step:"emailConfirmation"})},a[1]=S,a[2]=W):W=a[2];var q=W,U;a[3]!==S||a[4]!==L?(U=function(){S(o("PolarisSignupActions").requestConfirmationEmailWithLogging(L,null,!0))},a[3]=S,a[4]=L,a[5]=U):U=a[5];var V=U,H;a[6]!==k||a[7]!==M||a[8]!==i||a[9]!==R?(H=function(){if(!M&&R!=null){var e=Object.keys(R.fields).reduce(function(e,t){var n,r=(n=R.fields[t])==null?void 0:n.value;return r!=null&&t!=="optIntoOneTap"&&(e[t]=r),e},{});e.emailConfirmationCode=k,i(e)}},a[6]=k,a[7]=M,a[8]=i,a[9]=R,a[10]=H):H=a[10];var G=H,z,j;a[11]!==l?(z=function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",containermodule:l,event_name:"form_load",step:"emailConfirmation"})},j=[l],a[11]=l,a[12]=z,a[13]=j):(z=a[12],j=a[13]),p(z,j);var K;a[14]!==k.length||a[15]!==G||a[16]!==D?(K=function(){D||k.length===f&&r("qex")._("2155")===!0&&(x(!0),G())},a[14]=k.length,a[15]=G,a[16]=D,a[17]=K):K=a[17];var Q;a[18]!==k||a[19]!==G||a[20]!==D?(Q=[k,G,D],a[18]=k,a[19]=G,a[20]=D,a[21]=Q):Q=a[21],p(K,Q);var X;a[22]!==b?(X=b!==!0&&c.jsx(r("IGCoreImage.react"),{alt:g,src:{dark:u("148908"),light:u("835354")}}),a[22]=b,a[23]=X):X=a[23];var Y;a[24]!==b?(Y=c.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:4,position:"relative",children:b===!0?c.jsx(r("IGDSText.react"),{color:"primaryText",size:"title",textAlign:"center",weight:"bold",children:o("PolarisAuthStrings").JUST_ONE_MORE_STEP_HEADER}):c.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"center",children:o("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE_HEADER})}),a[24]=b,a[25]=Y):Y=a[25];var J=b?2:4,Z;a[26]!==L?(Z=o("PolarisAuthStrings").emailConfirmationCodeSubheader(L),a[26]=L,a[27]=Z):Z=a[27];var ee;a[28]!==V?(ee=c.jsx(r("IGDSButton.react"),{display:"block",label:o("PolarisAuthStrings").EMAIL_CONFIRMATION_RESEND_CODE,onClick:V,variant:"primary_link"}),a[28]=V,a[29]=ee):ee=a[29];var te;a[30]!==Z||a[31]!==ee?(te=c.jsxs(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:[Z," ",ee]}),a[30]=Z,a[31]=ee,a[32]=te):te=a[32];var ne;a[33]!==J||a[34]!==te?(ne=c.jsx(r("IGDSBox.react"),{display:"inlineBlock",marginBottom:4,marginTop:J,position:"relative",children:te}),a[33]=J,a[34]=te,a[35]=ne):ne=a[35];var re;a[36]!==X||a[37]!==Y||a[38]!==ne?(re=c.jsxs(r("IGDSBox.react"),{alignItems:"center",maxWidth:h,paddingX:7,paddingY:2,position:"relative",children:[X,Y,ne]}),a[36]=X,a[37]=Y,a[38]=ne,a[39]=re):re=a[39];var oe;a[40]!==G?(oe=function(t){t.preventDefault(),G()},a[40]=G,a[41]=oe):oe=a[41];var ae;a[42]===Symbol.for("react.memo_cache_sentinel")?(ae=c.jsx("input",{className:"x1s85apg",type:"submit"}),a[42]=ae):ae=a[42];var ie=b?7:10,le;a[43]!==k||a[44]!==P||a[45]!==l||a[46]!==b?(le=c.jsx(r("IGDSBox.react"),{position:"relative",width:"100%",children:b===!0?c.jsx("div",babelHelpers.extends({},{0:{className:"x6s0dn4 x7r02ix x1yvgwvq xjd31um x1ixjvfu xwt6s21 x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x5n08af x78zum5 x1q0g3np xvs91rp x1n2onr6 xh8yej3"},1:{className:"x6s0dn4 x7r02ix x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x5n08af x78zum5 x1q0g3np xvs91rp x1n2onr6 xh8yej3 x19gtwsn xhpglom x1xp9za0 x1fqc88y"}}[!!P<<0],{children:c.jsx(r("PolarisLabeledTextInput.react"),{"aria-label":o("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,autoComplete:"off",isRedesignedSignupFieldInput:!0,maxLength:8,name:"email_confirmation_code",onBlur:function(){return N(!1)},onChange:B,onFocus:function(){N(!0),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",containermodule:l,event_name:"confirmation_interaction"})},placeholder:o("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,slimTextInputCol:!0,type:"text",value:k})})):c.jsx(r("PolarisIGCoreTextInput.react"),{"aria-label":o("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,autoComplete:"off",backgroundColor:"ig-secondary-background",maxLength:8,name:"email_confirmation_code",onChange:B,onFocus:function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",containermodule:l,event_name:"confirmation_interaction"})},placeholder:o("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,value:k})}),a[43]=k,a[44]=P,a[45]=l,a[46]=b,a[47]=le):le=a[47];var se;a[48]!==M||a[49]!==q||a[50]!==G||a[51]!==s||a[52]!==b||a[53]!==v?(se=v==="default"&&c.jsxs(c.Fragment,{children:[c.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",width:"100%",children:c.jsx(r("IGDSButton.react"),{fullWidth:!0,isDisabled:M,isLoading:s,label:b===!0?o("PolarisGenericStrings").FINISH:o("PolarisGenericStrings").NEXT,onClick:G})}),b===!0?c.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",width:"100%",children:c.jsx(r("PolarisIGCoreButton.react"),{borderless:!1,color:"ig-secondary-button",fullWidth:!0,onClick:q,children:o("PolarisGenericStrings").BACK_TEXT})}):c.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:c.jsx(r("IGDSButton.react"),{display:"block",isDisabled:s,label:o("PolarisGenericStrings").GO_BACK,onClick:q,variant:"primary_link"})})]}),a[48]=M,a[49]=q,a[50]=G,a[51]=s,a[52]=b,a[53]=v,a[54]=se):se=a[54];var ue;a[55]!==w?(ue=w!=null&&c.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:c.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:w})}),a[55]=w,a[56]=ue):ue=a[56];var ce;a[57]!==ie||a[58]!==le||a[59]!==se||a[60]!==ue?(ce=c.jsxs(r("IGDSBox.react"),{alignItems:"center",margin:"auto",marginBottom:2,marginTop:2,maxWidth:h,paddingX:ie,position:"relative",children:[le,se,ue]}),a[57]=ie,a[58]=le,a[59]=se,a[60]=ue,a[61]=ce):ce=a[61];var de;a[62]!==M||a[63]!==q||a[64]!==G||a[65]!==s||a[66]!==v?(de=v==="modal"&&c.jsx(r("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:c.jsx(r("IGDSDialogFooter.react"),{endAdornment:c.jsx(r("IGDSButton.react"),{display:"block",isDisabled:M,isLoading:s,label:o("PolarisAuthStrings").CONTINUE,onClick:G,variant:"primary_link"}),startAdornment:c.jsx(r("IGDSButton.react"),{display:"block",label:o("PolarisGenericStrings").BACK_TEXT,onClick:q,variant:"primary_link"})})}),a[62]=M,a[63]=q,a[64]=G,a[65]=s,a[66]=v,a[67]=de):de=a[67];var me;a[68]!==oe||a[69]!==ce||a[70]!==de?(me=c.jsx(r("IGDSBox.react"),{position:"relative",width:"100%",children:c.jsxs("form",{method:"POST",noValidate:!1,onSubmit:oe,children:[ae,ce,de]})}),a[68]=oe,a[69]=ce,a[70]=de,a[71]=me):me=a[71];var pe;return a[72]!==re||a[73]!==me?(pe=c.jsxs(c.Fragment,{children:[re,me]}),a[72]=re,a[73]=me,a[74]=pe):pe=a[74],pe}function C(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}l.default=y}),226);
__d("PolarisPhoneSignupChangeNumberForm.react",["fbt","IGDSBox.react","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisSlimTextInput.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useRef,p=c.useState,_="phoneSignupConfirmErrorAlert",f=s._(/*BTDS*/"New phone number");function g(e){var t=o("react-compiler-runtime").c(35),n=e.errorMessage,a=e.initialPhoneNumber,i=e.onGoBackClick,l=e.onSubmit,c=e.requestInFlight,g=m(null),h=p(""),y=h[0],C=h[1],b,v;t[0]===Symbol.for("react.memo_cache_sentinel")?(b=function(){var e;(e=g.current)==null||e.focus()},v=[],t[0]=b,t[1]=v):(b=t[0],v=t[1]),d(b,v);var S;t[2]!==y||t[3]!==l?(S=function(t){t.preventDefault(),l(y)},t[2]=y,t[3]=l,t[4]=S):S=t[4];var R=S,L;t[5]===Symbol.for("react.memo_cache_sentinel")?(L=function(t){C(t.target.value)},t[5]=L):L=t[5];var E=L,k,I,T,D,x,$;t[6]===Symbol.for("react.memo_cache_sentinel")?(I={className:"x889kno xyri2b x1a8lsjc x1c1uobl"},T=u.jsx("h2",{className:"x972fbf x10w94by x1qhh985 x14e42zd x1lliihq xln7xf2 x1jchvi3 x1s688f xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x2b8uid x11njtxf",children:s._(/*BTDS*/"Change phone number")}),D={className:"x972fbf x10w94by x1qhh985 x14e42zd x1lliihq xln7xf2 x1f6kntn x1fcty0u xd4r4e8 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x2b8uid x11njtxf"},x=u.jsx("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd x5n08af xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:s._(/*BTDS*/"Current phone number:")}),$=u.jsx("br",{}),k={className:"x972fbf x10w94by x1qhh985 x14e42zd x1roi4f4 xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},t[6]=k,t[7]=I,t[8]=T,t[9]=D,t[10]=x,t[11]=$):(k=t[6],I=t[7],T=t[8],D=t[9],x=t[10],$=t[11]);var P;t[12]!==a?(P=u.jsxs("p",babelHelpers.extends({},D,{children:[x,$,u.jsx("span",babelHelpers.extends({},k,{children:a}))]})),t[12]=a,t[13]=P):P=t[13];var N;t[14]===Symbol.for("react.memo_cache_sentinel")?(N={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp x1lziwak x1yztbdb xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},t[14]=N):N=t[14];var M;t[15]===Symbol.for("react.memo_cache_sentinel")?(M="xdj266r x11gldyt x1iymm2a x11hdunq",t[15]=M):M=t[15];var w;t[16]!==y?(w=u.jsx(r("PolarisSlimTextInput.react"),{"aria-label":f,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:M,name:"newPhoneNumber",onChange:E,placeholder:f,ref:g,type:"tel",value:y}),t[16]=y,t[17]=w):w=t[17];var A;t[18]===Symbol.for("react.memo_cache_sentinel")?(A=s._(/*BTDS*/"Change"),t[18]=A):A=t[18];var F;t[19]!==R||t[20]!==c?(F=u.jsx(r("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,position:"relative",children:u.jsx(r("PolarisIGCoreButton.react"),{loading:c,onClick:R,children:A})}),t[19]=R,t[20]=c,t[21]=F):F=t[21];var O;t[22]!==R||t[23]!==w||t[24]!==F?(O=u.jsxs("form",babelHelpers.extends({},N,{method:"POST",onSubmit:R,children:[w,F]})),t[22]=R,t[23]=w,t[24]=F,t[25]=O):O=t[25];var B;t[26]!==n?(B=!r("isStringNullOrEmpty")(n)&&u.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 xkmlbd1 x78zum5 xdt5ytf x2lah0s xln7xf2 x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:u.jsx("p",{"aria-atomic":"true",id:_,role:"alert",children:n})}),t[26]=n,t[27]=B):B=t[27];var W;t[28]!==i?(W=u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:i,children:o("PolarisGenericStrings").GO_BACK}),t[28]=i,t[29]=W):W=t[29];var q;return t[30]!==P||t[31]!==O||t[32]!==B||t[33]!==W?(q=u.jsxs("div",babelHelpers.extends({},I,{children:[T,P,O,B,W]})),t[30]=P,t[31]=O,t[32]=B,t[33]=W,t[34]=q):q=t[34],q}l.default=g}),226);
__d("PolarisPhoneSignupConfirmForm.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSText.react","IGDSTextVariants.react","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisLabeledTextInput.react","PolarisMultiSignupConstants","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSlimTextInput.react","qex","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useEffect,p=c.useRef,_=c.useState,f="phoneSignupConfirmErrorAlert",g="confirmationCodeDescription",h=s._(/*BTDS*/"Just one more step");function y(e){return s._(/*BTDS*/"Enter the 6-digit code we sent to: {phone number}",[s._param("phone number",e)])}function C(e){return s._(/*BTDS*/"Enter the 6-digit code we sent to {phone number}.",[s._param("phone number",e)])}var b=s._(/*BTDS*/"Resend code"),v=s._(/*BTDS*/"Change number"),S=s._(/*BTDS*/"Confirmation code"),R="######",L=s._(/*BTDS*/"Confirm");function E(e,t){return u.jsx("div",{className:t,children:u.jsx("p",{"aria-atomic":"true",id:f,role:"alert",children:e})})}E.displayName=E.name+" [from "+i.id+"]";function k(e){var t=o("react-compiler-runtime").c(70),n=e.errorMessage,a=e.onChangeNumberClick,i=e.onResendClick,l=e.onSubmit,c=e.pageIdentifier,d=e.phoneNumber,f=e.requestInFlight,E=e.shouldShowRedesignedSignup,k=e.successMessage,x=E===void 0?!1:E,$=_(""),P=$[0],N=$[1],M=_(!1),w=M[0],A=M[1],F=p(null),O=_(!1),B=O[0],W=O[1],q,U;t[0]===Symbol.for("react.memo_cache_sentinel")?(q=function(){(F==null?void 0:F.current)!=null&&F.current.focus()},U=[],t[0]=q,t[1]=U):(q=t[0],U=t[1]),m(q,U);var V=D,H=T,G=o("PolarisReactRedux.react").useSelector(I),z;t[2]!==P||t[3]!==l||t[4]!==G?(z=function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",event_name:"twofac_form_next_clicked"});var e=P.replace(/\s+/g,"");if((G==null?void 0:G.fields)!=null){var t=Object.keys(G.fields).reduce(function(e,t){var n,r=(n=G.fields[t])==null?void 0:n.value;return r!=null&&t!=="optIntoOneTap"&&(e[t]=r),e},{});t.twofac=e,l(t)}},t[2]=P,t[3]=l,t[4]=G,t[5]=z):z=t[5];var j=z,K;t[6]===Symbol.for("react.memo_cache_sentinel")?(K=function(t){var e=t.target.value;e.match(/^[0-9 ]*$/)&&N(e)},t[6]=K):K=t[6];var Q=K,X;t[7]!==P.length||t[8]!==j||t[9]!==w?(X=function(){w||P.length===o("PolarisMultiSignupConstants").TWO_FAC_CODE_MIN_LENGTH&&r("qex")._("2156")===!0&&(A(!0),j())},t[7]=P.length,t[8]=j,t[9]=w,t[10]=X):X=t[10];var Y;t[11]!==P||t[12]!==j||t[13]!==w?(Y=[P,j,w],t[11]=P,t[12]=j,t[13]=w,t[14]=Y):Y=t[14],m(X,Y);var J;t[15]===Symbol.for("react.memo_cache_sentinel")?(J={className:"x889kno xyri2b x1a8lsjc x1c1uobl"},t[15]=J):J=t[15];var Z;t[16]!==x?(Z=u.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:x?u.jsx(r("IGDSText.react"),{color:"primaryText",size:"title",textAlign:"center",weight:"bold",children:h}):u.jsx(r("IGDSText.react"),{size:"label",textAlign:"center",weight:"semibold",children:h})}),t[16]=x,t[17]=Z):Z=t[17];var ee=x?1:4,te=x?2:4,ne;t[18]!==d||t[19]!==x?(ne=x?C(d):y(d),t[18]=d,t[19]=x,t[20]=ne):ne=t[20];var re;t[21]!==ne?(re=u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:ne}),t[21]=ne,t[22]=re):re=t[22];var oe;t[23]!==ee||t[24]!==te||t[25]!==re?(oe=u.jsx(r("IGDSBox.react"),{marginBottom:ee,marginTop:te,position:"relative",children:re}),t[23]=ee,t[24]=te,t[25]=re,t[26]=oe):oe=t[26];var ae;t[27]!==i||t[28]!==x?(ae=x===!0&&u.jsx(r("IGDSBox.react"),{display:"inlineBlock",marginBottom:5,position:"relative",children:u.jsx(r("IGDSButton.react"),{display:"block",label:b,onClick:function(t){i(t)},variant:"primary_link"})}),t[27]=i,t[28]=x,t[29]=ae):ae=t[29];var ie;t[30]!==oe||t[31]!==ae||t[32]!==Z?(ie=u.jsxs(r("IGDSBox.react"),{alignItems:"center",id:g,paddingX:7,position:"relative",children:[Z,oe,ae]}),t[30]=oe,t[31]=ae,t[32]=Z,t[33]=ie):ie=t[33];var le;t[34]===Symbol.for("react.memo_cache_sentinel")?(le={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp x1lziwak x1yztbdb xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},t[34]=le):le=t[34];var se;t[35]!==j?(se=function(t){t.preventDefault(),j()},t[35]=j,t[36]=se):se=t[36];var ue;t[37]!==P||t[38]!==B||t[39]!==c||t[40]!==x?(ue=x===!0?u.jsx(r("IGDSBox.react"),{marginBottom:4,paddingX:7,children:u.jsx("div",babelHelpers.extends({},{0:{className:"x6s0dn4 x7r02ix x1yvgwvq xjd31um x1ixjvfu xwt6s21 x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x5n08af x78zum5 x1q0g3np xvs91rp x1n2onr6 xh8yej3"},1:{className:"x6s0dn4 x7r02ix x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x5n08af x78zum5 x1q0g3np xvs91rp x1n2onr6 xh8yej3 x19gtwsn xhpglom x1xp9za0 x1fqc88y"}}[!!B<<0],{children:u.jsx(r("PolarisLabeledTextInput.react"),{"aria-label":S,autoComplete:"off",isRedesignedSignupFieldInput:!0,maxLength:8,name:"phone_confirmation_code",onBlur:function(){return W(!1)},onChange:Q,onFocus:function(){W(!0),o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",containermodule:c,event_name:"confirmation_interaction"})},placeholder:S,slimTextInputCol:!0,type:"text",value:P})}))}):u.jsx(r("PolarisSlimTextInput.react"),{"aria-describedby":g,"aria-label":R,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:"xdj266r x11gldyt x1iymm2a x11hdunq",maxLength:6,name:"confirmationCode",onChange:Q,onFocus:function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",containermodule:c,event_name:"confirmation_interaction"})},placeholder:R,ref:F,type:"tel",value:P}),t[37]=P,t[38]=B,t[39]=c,t[40]=x,t[41]=ue):ue=t[41];var ce;t[42]!==P.length||t[43]!==n||t[44]!==j||t[45]!==a||t[46]!==f||t[47]!==x||t[48]!==k?(ce=x===!0?u.jsxs(u.Fragment,{children:[u.jsx(r("IGDSBox.react"),{paddingX:4,position:"relative",width:"100%",children:u.jsx(r("IGDSButton.react"),{fullWidth:!0,isDisabled:P.length<o("PolarisMultiSignupConstants").TWO_FAC_CODE_MIN_LENGTH||f,isLoading:f,label:o("PolarisGenericStrings").FINISH,onClick:j})}),u.jsx(r("IGDSBox.react"),{marginTop:2,paddingX:4,position:"relative",width:"100%",children:u.jsx(r("PolarisIGCoreButton.react"),{borderless:!1,color:"ig-secondary-button",fullWidth:!0,onClick:a,children:v})}),n!=null&&n!==""&&u.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:n})}),k!=null&&k!==""&&u.jsx(r("IGDSBox.react"),{marginTop:4,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:k})})]}):u.jsx(r("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,position:"relative",children:u.jsx(r("PolarisIGCoreButton.react"),{loading:f,onClick:j,children:L})}),t[42]=P.length,t[43]=n,t[44]=j,t[45]=a,t[46]=f,t[47]=x,t[48]=k,t[49]=ce):ce=t[49];var de;t[50]!==se||t[51]!==ue||t[52]!==ce?(de=u.jsxs("form",babelHelpers.extends({},le,{method:"POST",onSubmit:se,children:[ue,ce]})),t[50]=se,t[51]=ue,t[52]=ce,t[53]=de):de=t[53];var me;t[54]!==n||t[55]!==x?(me=!x&&n!=null&&n!==""&&V(n),t[54]=n,t[55]=x,t[56]=me):me=t[56];var pe;t[57]!==x||t[58]!==k?(pe=!x&&k!=null&&k!==""&&H(k),t[57]=x,t[58]=k,t[59]=pe):pe=t[59];var _e;t[60]!==a||t[61]!==i||t[62]!==x?(_e=!x&&u.jsxs("div",{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt x1yztbdb x11hdunq x2b8uid",children:[u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:s._(/*BTDS*/"Change Number")})," | ",u.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:i,children:s._(/*BTDS*/"Request New Code")})]}),t[60]=a,t[61]=i,t[62]=x,t[63]=_e):_e=t[63];var fe;return t[64]!==ie||t[65]!==de||t[66]!==me||t[67]!==pe||t[68]!==_e?(fe=u.jsxs("div",babelHelpers.extends({},J,{children:[ie,de,me,pe,_e]})),t[64]=ie,t[65]=de,t[66]=me,t[67]=pe,t[68]=_e,t[69]=fe):fe=t[69],fe}function I(e){var t;return(t=e.auth.signup)==null?void 0:t.signupResult}function T(e){return E(e,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x5n08af")}function D(e){return E(e,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid xkmlbd1")}l.default=k}),226);
__d("PolarisPhoneSignupForm.react",["fbt","invariant","FBLogger","IGDSBox.react","PolarisAssetManagerGlyphMapping","PolarisIGCoreIcon.react","PolarisPhoneSignupChangeNumberForm.react","PolarisPhoneSignupConfirmForm.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","isStringNullOrEmpty","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useEffect,m=s._(/*BTDS*/"Phone confirmation");function p(e){var t=o("react-compiler-runtime").c(37),n=e.onSubmit,a=e.pageIdentifier,i=e.requestInFlight,l=e.shouldShowRedesignedSignup,p=l===void 0?!1:l,y=o("PolarisReactRedux.react").useSelector(h),C=o("PolarisReactRedux.react").useSelector(g),b=o("PolarisReactRedux.react").useSelector(f),v=o("PolarisReactRedux.react").useSelector(_),S=o("PolarisReactRedux.react").useDispatch(),R;t[0]!==S?(R=function(){return S(o("PolarisSignupActions").switchPhoneSignupStep("changePhoneNumber"))},t[0]=S,t[1]=R):R=t[1];var L=R,E;t[2]!==S?(E=function(){return S(o("PolarisSignupActions").switchPhoneSignupStep("enterCode"))},t[2]=S,t[3]=E):E=t[3];var k=E,I;t[4]!==S?(I=function(t){return S(o("PolarisSignupActions").rerequestSMSCode(t))},t[4]=S,t[5]=I):I=t[5];var T=I,D;t[6]!==S?(D=function(){return S(o("PolarisSignupActions").rerequestSMSCode())},t[6]=S,t[7]=D):D=t[7];var x=D;!r("isStringNullOrEmpty")(C)||u(0,51615);var $,P;t[8]!==a?($=function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",containermodule:a,event_name:"form_load",step:"twofac"})},P=[a],t[8]=a,t[9]=$,t[10]=P):($=t[9],P=t[10]),d($,P);var N;if(b==="enterCode"){var M;t[11]!==v?(M=v&&c.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x5n08af x78zum5 xdt5ytf x2lah0s xln7xf2 x1f6kntn xd4r4e8 x1anpbxc x3aesyq xyorhqc xqsn43r xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:s._(/*BTDS*/"Your code was resent.")}),t[11]=v,t[12]=M):M=t[12];var w;t[13]!==L||t[14]!==x||t[15]!==n||t[16]!==a||t[17]!==C||t[18]!==i||t[19]!==p||t[20]!==y?(w=c.jsx(r("PolarisPhoneSignupConfirmForm.react"),{errorMessage:y,onChangeNumberClick:L,onResendClick:x,onSubmit:n,pageIdentifier:a,phoneNumber:C,requestInFlight:i,shouldShowRedesignedSignup:p,successMessage:null}),t[13]=L,t[14]=x,t[15]=n,t[16]=a,t[17]=C,t[18]=i,t[19]=p,t[20]=y,t[21]=w):w=t[21];var A;t[22]!==M||t[23]!==w?(A=c.jsxs("div",{children:[M,w]}),t[22]=M,t[23]=w,t[24]=A):A=t[24],N=A}else if(b==="changePhoneNumber"){var F;t[25]!==T||t[26]!==k||t[27]!==C||t[28]!==i||t[29]!==y?(F=c.jsx(r("PolarisPhoneSignupChangeNumberForm.react"),{errorMessage:y,initialPhoneNumber:C,onGoBackClick:k,onSubmit:T,requestInFlight:i}),t[25]=T,t[26]=k,t[27]=C,t[28]=i,t[29]=y,t[30]=F):F=t[30],N=F}else return r("FBLogger")("ig_web").mustfix("Unexpected phone signup step"),null;var O;t[31]!==b||t[32]!==p?(O=(!p||b==="changePhoneNumber")&&c.jsx(r("PolarisIGCoreIcon.react"),{alt:m,icon:o("PolarisAssetManagerGlyphMapping").ICONS.PHONE_CONFIRM}),t[31]=b,t[32]=p,t[33]=O):O=t[33];var B;return t[34]!==N||t[35]!==O?(B=c.jsxs(r("IGDSBox.react"),{alignItems:"center",position:"relative",children:[O,N]}),t[34]=N,t[35]=O,t[36]=B):B=t[36],B}function _(e){var t;return((t=e.auth.signup)==null?void 0:t.resentResetCode)||!1}function f(e){var t;return(t=e.auth.signup)==null?void 0:t.phoneSignupConfirmStep}function g(e){var t;return(t=e.auth.signup)==null||(t=t.signupCredentials)==null?void 0:t.phoneNumber}function h(e){var t;return(t=e.auth.signup)==null?void 0:t.signupNonSpecificError}l.default=p}),226);
__d("PolarisEmailDomainHelpers",["PolarisConfig","memoize"],(function(t,n,r,o,a,i,l){"use strict";var e={"aol.com":{initialSuggestion:!1},"bk.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"gmail.com":{initialSuggestion:!0},"gmx.de":{countryCodeFilter:"DE",initialSuggestion:!1},"hotmail.com":{initialSuggestion:!0},"icloud.com":{initialSuggestion:!1},"inbox.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"list.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"live.com":{initialSuggestion:!1},"mail.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"msn.com":{initialSuggestion:!1},"naver.com":{initialSuggestion:!1},"onet.pl":{countryCodeFilter:"PL",initialSuggestion:!1},"outlook.com":{initialSuggestion:!0},"qq.com":{initialSuggestion:!1},"rambler.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"web.de":{countryCodeFilter:"DE",initialSuggestion:!1},"yahoo.co.jp":{countryCodeFilter:"JP",initialSuggestion:!1},"yahoo.com":{initialSuggestion:!0},"yandex.com":{initialSuggestion:!1},"yandex.ru":{countryCodeFilter:"RU",initialSuggestion:!1}},s=r("memoize")(function(){return Object.keys(e).filter(function(t){var n=e[t];return"countryCodeFilter"in n?n.countryCodeFilter===o("PolarisConfig").getCountryCode():!0})}),u=r("memoize")(function(){return s().reduce(function(t,n){var r=e[n];return r.initialSuggestion?[].concat(t,[n]):t},[])}),c={"gail.com":"gmail.com","gamel.com":"gmail.com","gamil.com":"gmail.com","gamli.com":"gmail.com","gemil.com":"gmail.com","gma.com":"gmail.com","gmail.co":"gmail.com","gmaile.com":"gmail.com","gmali.com":"gmail.com","gmall.com":"gmail.com","gmel.com":"gmail.com","gmeli.com":"gmail.com","gmile.com":"gmail.com"};function d(e){var t=e.split("@"),n=t[0],r=t[1];return r&&Object.prototype.hasOwnProperty.call(c,r)?n+"@"+c[r]:null}l.getPopularDomainList=s,l.getInitialSuggestedPopularDomains=u,l.getSuggestedEmail=d}),98);
__d("PolarisMultiSignupEmailSuggestionDialog.react",["fbt","IGCoreDialog.react","PolarisRegistrationLogger","memoizeStringOnly","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=(function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,t.handleSuggestionClick=function(e){e===t.props.emailSuggestion?o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint:e,contactpoint_type:"email",event_name:"typo_fix_accept"}):o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint:e,contactpoint_type:"email",event_name:"typo_fix_skip"}),t.props.onSelection(e)},t.$1=r("memoizeStringOnly")(function(e){return t.handleSuggestionClick.bind(babelHelpers.assertThisInitialized(t),e)}),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getEmailDomain=function(t){return t.split("@")[1]},n.render=function(){var e=this.props,t=e.emailSuggestion,n=e.originalEmail;return u.jsxs(o("IGCoreDialog.react").IGCoreDialog,{body:s._(/*BTDS*/"It looks like you misspelled your email address. Did you mean to use {filled email domain} ?",[s._param("filled email domain",u.jsx("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd xln7xf2 xk390pu xl7tqy7 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:"@"+this.getEmailDomain(n)}))]),onModalClose:this.props.onClose,title:s._(/*BTDS*/"Typo?"),children:[u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-primary-button",onClick:this.$1(t),children:s._(/*BTDS*/"Use {email suggestion} instead",[s._param("email suggestion","@"+this.getEmailDomain(t))])}),u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:this.$1(n),children:s._(/*BTDS*/"Keep as is")})]})},t})(u.Component);l.default=c}),226);
__d("PolarisSlimSignupUsernameSuggestions.react",["IGDSBox.react","IGDSButton.react","PolarisRegistrationLogger","gkx","isEmail","polarisIsPhoneNumber","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState,m=38,p=134;function _(e){return e==null||e===""?null:r("isEmail")(e)?"email":r("polarisIsPhoneNumber")(e)?"phone":null}function f(e){var t=o("react-compiler-runtime").c(28),n=e.emailOrPhone,a=e.onUsernameUpdate,i=e.pageIdentifier,l=e.shouldShowUsername,u=e.username,f=e.usernameSuggestions,h=l===void 0?!0:l,y;t[0]!==f?(y=f.filter(g),t[0]=f,t[1]=y):y=t[1];var C=y,b=d(C),v=b[0],S=b[1],R=d(!1),L=R[0],E=R[1],k,I;t[2]!==C||t[3]!==i?(k=function(){C.length>0&&o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:i,event_name:"username_suggestion_fetch_success"}),S(C)},I=[C,i],t[2]=C,t[3]=i,t[4]=k,t[5]=I):(k=t[4],I=t[5]),c(k,I);var T;t[6]!==C[0]||t[7]!==C.length||t[8]!==L||t[9]!==a||t[10]!==h||t[11]!==u?(T=function(){if(!L){if(u!=null&&u!=="")E(!0);else if(C.length>0){var e,t=!h||((e=r("gkx")("3317"))!=null?e:!1);t&&a(C[0]),E(!0)}}},t[6]=C[0],t[7]=C.length,t[8]=L,t[9]=a,t[10]=h,t[11]=u,t[12]=T):T=t[12];var D;if(t[13]!==C||t[14]!==L||t[15]!==a||t[16]!==h||t[17]!==u?(D=[u,C,L,a,h],t[13]=C,t[14]=L,t[15]=a,t[16]=h,t[17]=u,t[18]=D):D=t[18],c(T,D),C.length===0||!h)return null;var x;if(t[19]!==n||t[20]!==a||t[21]!==v){var $;t[23]!==n||t[24]!==a?($=function(t){return s.jsx("div",{className:"x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x6ikm8r x10wlt62 x1n2onr6",style:{height:m,width:p},children:s.jsx(r("IGDSBox.react"),{marginBottom:2,marginEnd:1,position:"relative",children:s.jsx(r("IGDSButton.react"),{label:t,onClick:function(){o("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:_(n),event_name:"click_username_suggestions"}),a(t)},variant:"secondary"})})},t)},t[23]=n,t[24]=a,t[25]=$):$=t[25],x=v.slice(0,2).map($),t[19]=n,t[20]=a,t[21]=v,t[22]=x}else x=t[22];var P;return t[26]!==x?(P=s.jsx(r("IGDSBox.react"),{direction:"row",height:m,marginEnd:10,marginStart:10,position:"relative",children:x}),t[26]=x,t[27]=P):P=t[27],P}function g(e){return e.length<14}l.default=f}),98);
__d("PolarisTermsPrivacyPolicyBlurb.react",["fbt","IGDSTextVariants.react","PolarisConsentTypes","PolarisExternalRoutes","PolarisFastLink.react","PolarisReactRedux.react","PolarisRoutes","URI","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react"));function d(t,n){return new(e||(e=r("URI")))(t).addQueryData({entry_point:n}).toString()}var m="ig_polaris_email_signup_eu_terms",p="ig_polaris_email_signup_eu_privacy_policy",_="ig_polaris_email_signup_eu_cookies_policy",f="ig_polaris_email_signup_row_terms",g="ig_polaris_email_signup_row_privacy_policy",h="ig_polaris_email_signup_row_cookies_policy";function y(){return r("gkx")("25366")===!0}function C(e){var t=o("react-compiler-runtime").c(3),n=e.className,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:s._(/*BTDS*/"By signing up, you agree to our {=Terms} & {=Privacy Policy} .",[s._param("=Terms",c.jsx(r("PolarisFastLink.react"),{href:"/legal/terms/",target:"_blank",children:s._(/*BTDS*/"Terms")})),s._param("=Privacy Policy",c.jsx(r("PolarisFastLink.react"),{href:"/legal/privacy/",target:"_blank",children:s._(/*BTDS*/"Privacy Policy")}))])}),t[0]=a):a=t[0];var i;return t[1]!==n?(i=c.jsx("p",{className:n,children:a}),t[1]=n,t[2]=i):i=t[2],i}function b(e){return e===void 0&&(e=!0),c.jsxs(c.Fragment,{children:[c.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:s._(/*BTDS*/"People who use our service may have uploaded your contact information to Instagram. {Contact uploading for non-users privacy policy}",[s._param("Contact uploading for non-users privacy policy",c.jsx(r("PolarisFastLink.react"),{href:o("PolarisExternalRoutes").FACEBOOK_CONTACT_UPLOADING_AND_NON_USERS,target:"_blank",children:s._(/*BTDS*/"Learn More")}))])}),e&&c.jsxs(c.Fragment,{children:[c.jsx("br",{}),c.jsx("br",{})]})]})}function v(e){var t=o("react-compiler-runtime").c(7),n=e.className,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsxs(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:[b(),s._(/*BTDS*/"By signing up, you agree to our {=Terms}. Learn how we collect, use and share your data in our {Privacy Policy} and how we use cookies and similar technology in our {Cookies Policy}.",[s._param("=Terms",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,m),target:"_blank",children:s._(/*BTDS*/"Terms")})),s._param("Privacy Policy",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisExternalRoutes").NEW_PRIVACY_POLICY_PATH,p),target:"_blank",children:s._(/*BTDS*/"Privacy Policy")})),s._param("Cookies Policy",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisRoutes").NEW_COOKIE_POLICY_PATH,_),target:"_blank",children:s._(/*BTDS*/"Cookies Policy")}))])]}),t[0]=a):a=t[0];var i,l;t[1]!==n?(i=c.jsx("p",{className:n,children:a}),l=y()&&c.jsx("p",{className:n,children:c.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:s._(/*BTDS*/"We {=fund our services} by using your personal data to show ads.",[s._param("=fund our services",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,m),target:"_blank",children:s._(/*BTDS*/"fund our services")}))])})}),t[1]=n,t[2]=i,t[3]=l):(i=t[2],l=t[3]);var u;return t[4]!==i||t[5]!==l?(u=c.jsxs(c.Fragment,{children:[i,l]}),t[4]=i,t[5]=l,t[6]=u):u=t[6],u}function S(e){var t=o("react-compiler-runtime").c(3),n=e.className,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsxs(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:[b(),s._(/*BTDS*/"By signing up, you agree to our {=Terms} , {Privacy Policy} and {Cookies Policy} .",[s._param("=Terms",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,f),target:"_blank",children:s._(/*BTDS*/"Terms")})),s._param("Privacy Policy",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisExternalRoutes").NEW_PRIVACY_POLICY_PATH,g),target:"_blank",children:s._(/*BTDS*/"Privacy Policy")})),s._param("Cookies Policy",c.jsx(r("PolarisFastLink.react"),{href:d(o("PolarisRoutes").NEW_COOKIE_POLICY_PATH,h),target:"_blank",children:s._(/*BTDS*/"Cookies Policy")}))])]}),t[0]=a):a=t[0];var i;return t[1]!==n?(i=c.jsx("p",{className:n,children:a}),t[1]=n,t[2]=i):i=t[2],i}function R(e){var t=o("react-compiler-runtime").c(3),n=e.className,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=b(!1),t[0]=r):r=t[0];var a;return t[1]!==n?(a=c.jsx("p",{className:n,children:r}),t[1]=n,t[2]=a):a=t[2],a}function L(e){var t=o("react-compiler-runtime").c(8),n=e.className,r=e.cpeOnly,a=e.tosVersion,i=r===void 0?!1:r;if(i){var l;return t[0]!==n?(l=c.jsx(R,{className:n}),t[0]=n,t[1]=l):l=t[1],l}switch(a){case o("PolarisConsentTypes").TosVersion.EU:{var s;return t[2]!==n?(s=c.jsx(v,{className:n}),t[2]=n,t[3]=s):s=t[3],s}case o("PolarisConsentTypes").TosVersion.ROW:{var u;return t[4]!==n?(u=c.jsx(S,{className:n}),t[4]=n,t[5]=u):u=t[5],u}case o("PolarisConsentTypes").TosVersion.DEFAULT:default:{var d;return t[6]!==n?(d=c.jsx(C,{className:n}),t[6]=n,t[7]=d):d=t[7],d}}}function E(e){return{tosVersion:e.signup.tosVersion}}var k=o("PolarisReactRedux.react").connect(E)(L);l.default=k}),226);
__d("whitelistObjectKeys",[],(function(t,n,r,o,a,i){function e(e,t){for(var n={},r=Array.isArray(t)?t:Object.keys(t),o=0;o<r.length;o++)typeof e[r[o]]!="undefined"&&(n[r[o]]=e[r[o]]);return n}i.default=e}),66);
__d("PolarisSlimSignupForm.react",["cx","fbt","IGDSBox.react","IGDSSpinner.react","IGDSText.react","IGDSTextVariants.react","PolarisAgeCollectionHelpers","PolarisAuthConstants","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisBirthdaysAdditionalInfoModal.react","PolarisDOBFieldSelect.react","PolarisDateHelpers","PolarisDateStrings","PolarisEmailDomainHelpers","PolarisFastLink.react","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisLinkBuilder","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutUpsellStrings","PolarisMultiSignupEmailSuggestionDialog.react","PolarisOrBar.react","PolarisRegistrationLogger","PolarisRelayEnvironment","PolarisSlimSignupUsernameSuggestions.react","PolarisSlimTextInput.react","PolarisTermsPrivacyPolicyBlurb.react","PolarisUA","PolarisWebStorage","fetchPolarisLoggedOutExperiment","gkx","joinClasses","nullthrows","polarisIsPhoneNumber","polarisSignupSelectors","promiseDone","react","whitelistObjectKeys"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=["username","password","emailOrPhone","fullName","optIntoOneTap"],m=(function(e){function t(t){var n,a,i,l,s,u,c;c=e.call(this,t)||this,c.$5=function(){c.setState({emailSuggestion:null})},c.$6=function(e){c.setState({emailOrPhone:e,emailSuggestion:null},function(){c.$7()})},c.$8=function(){var e,t=c.props.usernameSuggestions.indexOf((e=c.state.username)!=null?e:"");c.setState({username:c.props.usernameSuggestions[++t]||c.props.usernameSuggestions[0]}),o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:"suggested_username_refreshed"})},c.$9=function(e){var t,n=e.target,r=n.name,o=n.value;c.setState((t={},t[r]=o,t))},c.$10=function(){var e=c.state.isPasswordHidden;c.setState({isPasswordHidden:!e}),e?o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:"show_password_clicked"}):o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:"hide_password_clicked"})},c.$11=function(e){e.relatedTarget instanceof HTMLElement&&c.$1&&c.$1.contains(e.relatedTarget)||c.$4(c.state,null)},c.$12=function(e,t){var n=e.target.name;c.$4(c.state,n),t&&o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:t})},c.$14=function(e){var t;e.preventDefault();var n=c.state.emailOrPhone;if(o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:"base_form_next_clicked"}),n!=null&&!r("polarisIsPhoneNumber")(n)){var a=o("PolarisEmailDomainHelpers").getSuggestedEmail(n);if(a!=null){c.setState({emailSuggestion:a});return}}var i=(t=c.props.signupResult)==null||(t=t.fields)==null||(t=t.username)==null?void 0:t.error;if(i!==void 0||c.state.username==null||c.state.username===""){c.setState({shouldShowUsername:!0});return}c.$7()},c.$15=function(e){e.keyCode===13&&c.$14(e)},c.$22=function(e){c.setState({username:e})},c.$23=function(){var e=c.props.pageIdentifier;o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login","auth_form",e)},c.$25=function(e){c.setState({birthday:e}),o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:c.props.pageIdentifier,event_name:"birthday_interaction"})},c.$26=function(){c.setState({showBirthdayAdditionalInfo:!0})},c.$27=function(){c.setState({showBirthdayAdditionalInfo:!1})};var d={birthday:((n=t.signupResult)==null||(n=n.fields)==null||(n=n.birthday)==null?void 0:n.value)!=null?o("PolarisDateHelpers").dateToDateType(new Date(t.signupResult.fields.birthday.value)):o("PolarisDateHelpers").getOneYearAgoDateType(),emailOrPhone:((a=t.signupResult)==null||(a=a.fields)==null||(a=a.emailOrPhone)==null?void 0:a.value)||"",emailSuggestion:null,fullName:(i=(l=(s=t.signupResult)==null||(s=s.fields)==null||(s=s.fullName)==null?void 0:s.value)!=null?l:t.initialFullName)!=null?i:"",isPasswordHidden:!0,optIntoOneTap:!1,shouldShowUsername:t.shouldAutoPickUsername!==!0,showBirthdayAdditionalInfo:!1,username:((u=t.signupResult)==null||(u=u.fields)==null||(u=u.username)==null?void 0:u.value)||""};if(c.props.needEmailOrPhone){var m,p,_;d.emailOrPhone=(m=(p=(_=t.signupResult)==null||(_=_.fields)==null||(_=_.emailOrPhone)==null?void 0:_.value)!=null?p:c.props.prefillPhoneNumber)!=null?m:""}return c.props.needPassword&&(d.password=""),c.state=d,c.$2={},c.$3=!1,c}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.pageIdentifier==="fbSignupPage"?"fb_signup_form_load":"form_load";o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:this.props.pageIdentifier,event_name:e,fb_userid:this.props.fbUserID,fbconnect_status:this.props.fbConnectedStatus})},n.componentDidUpdate=function(t,n){var e,r=this.props;((e=this.state.username)!=null?e:"").length===0&&this.props.usernameSuggestions.length===0&&r.usernameSuggestions.length>=1&&this.setState({username:r.usernameSuggestions[0]});var o=this.state;t.usernameSuggestions.length===0&&r.usernameSuggestions.length>=1&&n.username!==o.username&&this.$4(o,"username")},n.focusUsername=function(){r("nullthrows")(this.$2.username).focus()},n.$4=function(t,n){var e=this.props.onSignupFocusChange;if(e){var o=r("whitelistObjectKeys")(t,d);e(o,n)}},n.$13=function(){var e,t,n,a,i;if(this.props.requestInFlight||this.props.shouldShowBirthdayStepInBaseForm===!0&&o("PolarisAgeCollectionHelpers").isDOBInputAttemptDisabled(this.state.birthday))return!0;var l=(e=this.props.signupResult)==null?void 0:e.fields,s=l==null||(t=l.emailOrPhone)==null?void 0:t.error,u=l==null||(n=l.username)==null?void 0:n.error,c=l==null||(a=l.password)==null?void 0:a.error,d=l==null||(i=l.fullName)==null?void 0:i.error;if(s!==void 0||this.state.shouldShowUsername&&u!==void 0||c!==void 0||d!==void 0){r("promiseDone")(r("fetchPolarisLoggedOutExperiment")(r("PolarisRelayEnvironment"),{name:"ig_web_desktop_signup_disable_next_button_on_error"}));var m=r("gkx")("16475")===!0;return m}var p=this.props,_=p.needEmailOrPhone,f=p.needPassword,g=this.state,h=g.emailOrPhone,y=g.password,C=g.username;return o("polarisSignupSelectors").getSubmitDisabled({needEmailOrPhone:_,needPassword:f},{emailOrPhone:h,password:y,username:C},this.state.shouldShowUsername)},n.$7=function(){var e,t=r("whitelistObjectKeys")(this.state,d);this.props.shouldShowBirthdayStepInBaseForm===!0&&(t.birthday=o("PolarisDateHelpers").dateTypeToString(this.state.birthday),this.props.onBirthdayEntered&&this.props.onBirthdayEntered()),(e=r("PolarisWebStorage").getSessionStorage())==null||e.setItem("nux_username",String(!this.state.shouldShowUsername)),this.$3=!0,this.props.onSubmit(t)},n.$16=function(t){var e;return!!(this.props.signupResult&&(e=this.props.signupResult.fields[t])!=null&&e.validated)},n.$17=function(t){var e,n=(e=this.props.signupResult)==null?void 0:e.fields;if(t==="emailOrPhone"){var r;return(n==null||(r=n.emailOrPhone)==null?void 0:r.value)!==this.state.emailOrPhone}else if(t==="username"){var o;return(n==null||(o=n.username)==null?void 0:o.value)!==this.state.username}else if(t==="password"){var a;return(n==null||(a=n.password)==null?void 0:a.value)!==this.state.password}return!1},n.$18=function(t){var e=this.props,n=e.focusedFields,r=e.signupResult,o=r==null?void 0:r.wasDryRun,a=!o;if(n){var i=n.current===t,l=n.previous.indexOf(t)>-1,s=!i&&l,u=this.$17(t)===!1;a=(s||i)&&u}if(a){var c;return r==null||(c=r.fields)==null||(c=c[t])==null?void 0:c.error}return null},n.$19=function(t){return c.jsx("div",{className:"_aaht",children:c.jsx("p",{"aria-atomic":"true",id:o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID,role:"alert",children:t})})},n.$20=function(){return o("PolarisUA").isMobile()?o("PolarisAuthStrings").FB_CONTINUE_BUTTON_TEXT:o("PolarisAuthStrings").FB_LOGIN_BUTTON_TEXT},n.$21=function(t){var e=this.props.hideHeader;if(e)return null;var n=t===!0?o("PolarisLoggedOutUpsellStrings").DEFAULT_TITLE_SIGN_UP:o("PolarisAuthStrings").SIGN_UP_VALUE_PROP_WITHOUT_GRADIENT;return o("PolarisUA").isMobile()?c.jsx("div",{className:"_aahx",children:c.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:n})}):c.jsx("div",{className:"_aahw",children:t===!0?c.jsx(r("IGDSBox.react"),{marginBottom:2,marginTop:1,children:c.jsx(r("IGDSText.react"),{color:"primaryText",size:"headline2",textAlign:"center",weight:"semibold",children:n})}):c.jsx(o("IGDSTextVariants.react").IGDSTextSection,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:n})})},n.$24=function(){return this.props.shouldShowRedesignedSignup!==!0?null:c.jsx(r("PolarisFastLink.react"),{href:o("PolarisLinkBuilder").buildLoginLink("",{source:"auth_switcher"}),onClick:this.$23,children:c.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",textAlign:"center",children:u._(/*BTDS*/"Log in with existing account")})})},n.$28=function(){return this.props.shouldShowBirthdayStepInBaseForm!==!0?null:c.jsxs(c.Fragment,{children:[c.jsx(r("IGDSBox.react"),{marginBottom:2,marginStart:11,marginTop:3,position:"relative",children:c.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryText",textAlign:"start",children:o("PolarisAuthStrings").BIRTHDAY_TEXT})}),c.jsx(r("IGDSBox.react"),{marginBottom:2,marginStart:11,marginTop:2,position:"relative",children:c.jsx(r("PolarisDOBFieldSelect.react"),{align:"start",date:this.state.birthday,onDateChange:this.$25,shouldShowRedesignedSignup:!0})}),c.jsx(r("IGDSBox.react"),{position:"relative",children:c.jsx(r("IGDSBox.react"),{marginBottom:2,marginStart:2,paddingX:7,position:"relative",children:c.jsxs(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",textAlign:"center",children:[o("PolarisDateStrings").BIRTHDAY_DISCLAIMER_TEXT,c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:this.$26,children:c.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"primaryButton",children:o("PolarisGenericStrings").LEARN_MORE})})]})})})]})},n.render=function(){var e,t,n=this,a=this.props,i=a.canUsePhone,l=a.shouldShowRedesignedSignup,s=a.signupNonSpecificError,d=a.signupResult,m=this.state.shouldShowUsername,p=!!(this.props.usernameSuggestions.length&&(!this.props.needEmailOrPhone||this.state.emailOrPhone)),_=d==null?void 0:d.otherError;s!=null&&(_=s);var f=_!=null&&(d==null?void 0:d.wasDryRun)===!0,g=this.$18("emailOrPhone"),h=this.$18("fullName"),y=this.$18("username"),C=this.$18("password"),b=l===!0?"_aueq":o("PolarisUA").isMobile()?"_aahv":"_aahy",v=(d==null||(e=d.fields.username)==null?void 0:e.errorCode)==null||(d==null||(t=d.fields.username)==null?void 0:t.errorCode)==="username_is_taken";return c.jsxs("div",{className:r("joinClasses")(this.props.className,"_aahz"),"data-testid":void 0,children:[this.state.emailSuggestion!=null?c.jsx(r("PolarisMultiSignupEmailSuggestionDialog.react"),{emailSuggestion:this.state.emailSuggestion,onClose:this.$5,onSelection:this.$6,originalEmail:r("nullthrows")(this.state.emailOrPhone)}):null,c.jsxs("form",{className:r("joinClasses")("_aah-",l===!0?"_auep":null),method:"post",onBlur:this.$11,onSubmit:this.$14,ref:function(t){return n.$1=t},children:[this.$21(l===!0),!this.props.hideFBOption&&c.jsxs(c.Fragment,{children:[c.jsx(r("IGDSBox.react"),{marginBottom:2,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:c.jsxs(r("PolarisIGCoreButton.react"),{onClick:this.props.onSignupWithFBClick,showLegacyPrimaryColor:l===!0,children:[c.jsx("span",{className:(l!==!0?"_9zlu":"")+" _aah_"}),this.$20()]})}),c.jsx("div",{className:(l!==!0?"_aai0":"")+(l===!0?" _aueu":""),children:c.jsx(r("PolarisOrBar.react"),{shouldShowRedesignedSignup:l===!0})})]}),this.props.needEmailOrPhone&&c.jsx(r("PolarisSlimTextInput.react"),{accepted:this.$16("emailOrPhone"),"aria-describedby":g!=null&&!f?o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":i?o("PolarisAuthStrings").EMAIL_OR_PHONE:o("PolarisAuthStrings").EMAIL,"aria-required":"true",autoCapitalize:"off",autoComplete:"tel",autoCorrect:"off",className:b,errorMessage:g,hasError:!!g,isInputFocused:!0,isRedesignedSignupFieldInput:l,name:"emailOrPhone",onChange:this.$9,onFocus:function(t){return n.$12(t,"contactpoint_interaction")},onKeyDown:this.$15,placeholder:i?o("PolarisAuthStrings").EMAIL_OR_PHONE:o("PolarisAuthStrings").EMAIL,ref:function(t){return n.$2.emailOrPhone=t},value:this.state.emailOrPhone}),this.props.needPassword&&c.jsx(r("PolarisSlimTextInput.react"),{accepted:this.$16("password"),"aria-describedby":C!=null&&!f?o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":o("PolarisAuthStrings").PASSWORD,"aria-required":"true",autoCapitalize:"off",autoComplete:"new-password",autoCorrect:"off",className:b,errorMessage:C,hasError:!!C,isInputFocused:!0,isPasswordHidden:this.state.isPasswordHidden,isRedesignedSignupFieldInput:l,name:"password",onChange:this.$9,onFocus:function(t){return n.$12(t,"password_interaction")},onKeyDown:this.$15,onPasswordToggle:this.$10,placeholder:o("PolarisAuthStrings").PASSWORD,ref:function(t){return n.$2.password=t},showPasswordToggleLink:!!this.state.password,type:this.state.isPasswordHidden?"password":"text",value:this.state.password}),this.props.shouldEnableShortFirstStep===!0?null:c.jsx(r("PolarisSlimTextInput.react"),{accepted:this.$16("fullName"),"aria-describedby":h!=null&&!f?o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":o("PolarisAuthStrings").FULL_NAME,"aria-required":"false",autoCapitalize:"sentences",autoCorrect:"off",className:b,errorMessage:h,hasError:!!h,isInputFocused:!0,isRedesignedSignupFieldInput:l,name:"fullName",onChange:this.$9,onFocus:function(t){return n.$12(t,"name_interaction_full_name")},onKeyDown:this.$15,placeholder:o("PolarisAuthStrings").FULL_NAME,ref:function(t){return n.$2.fullName=t},value:this.state.fullName}),m&&c.jsx(r("PolarisSlimTextInput.react"),{accepted:this.$16("username"),"aria-describedby":y!=null&&!f?o("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":o("PolarisAuthStrings").USERNAME,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",canRefresh:p,className:b,errorMessage:y,hasError:!!y,isInputFocused:!0,isRedesignedSignupFieldInput:l,maxLength:30,name:"username",omitErrorMarginBottom:v,onChange:this.$9,onFocus:function(t){return n.$12(t,"username_interaction")},onKeyDown:this.$15,onRefresh:this.$8,placeholder:o("PolarisAuthStrings").USERNAME,ref:function(t){return n.$2.username=t},value:this.state.username}),v&&c.jsx(r("IGDSBox.react"),{alignContent:"center",marginStart:1,children:c.jsx(r("PolarisSlimSignupUsernameSuggestions.react"),{emailOrPhone:this.state.emailOrPhone,onUsernameUpdate:this.$22,pageIdentifier:this.props.pageIdentifier,shouldShowUsername:m,username:this.state.username,usernameSuggestions:this.props.usernameSuggestions})}),this.$28(),o("PolarisUA").isDesktop()&&c.jsx(r("PolarisTermsPrivacyPolicyBlurb.react"),{className:"_aai1",cpeOnly:o("PolarisAuthLimitedRegistrationHelpers").shouldShowSouthKoreaTOS()}),c.jsxs("div",{children:[c.jsx(r("IGDSBox.react"),{marginBottom:l===!0?3:2,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:c.jsx(r("PolarisIGCoreButton.react"),{disabled:this.$13(),onClick:this.$14,type:"submit",children:!this.props.gdprRequired&&o("PolarisUA").isDesktop()?u._(/*BTDS*/"Sign up"):u._(/*BTDS*/"Next")})}),this.props.requestInFlight?c.jsx(r("IGDSSpinner.react"),{position:"absolute"}):null]}),this.$24(),_&&!f&&this.$19(_)]}),this.state.showBirthdayAdditionalInfo&&c.jsx(r("PolarisBirthdaysAdditionalInfoModal.react"),{onClose:this.$27})]})},t})(c.Component);m.defaultProps={hideFBOption:!1,hideHeader:!1,needPassword:!0},l.default=m}),226);
__d("polarisIsEligibleForFacebookLogin",["PolarisConfig","PolarisQueryParams"],(function(t,n,r,o,a,i,l){"use strict";var e={CN:!0,CU:!0,IR:!0,KP:!0},s=/^((preprod|business|www)\.)?([a-z0-9-]+\.){0,}instagram\.com$/;function u(t){return!!e[t]}function c(e){return s.test(e)}function d(){return c(window.location.hostname)&&!u(o("PolarisConfig").getCountryCode()||"")&&(!o("PolarisQueryParams").hasForceAuthenticationParam()||o("PolarisQueryParams").hasEnableFBLoginParam())}l.default=d}),98);
__d("PolarisSignupForm.react",["invariant","CometRouteURL","IGCoreDialog.react","PolarisAcceptTermsOfUseForm.react","PolarisAccountPrivacyForm.react","PolarisAgeCollectionHelpers","PolarisAuthStrings","PolarisBirthdaySignupForm.react","PolarisCaptchaSignupForm.react","PolarisEmailConfirmationForm.react","PolarisFBConnectHelpers","PolarisFBConnectStatus","PolarisGenericStrings","PolarisLoggedOutCtaClickLogger","PolarisPhoneSignupForm.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisRoutes","PolarisSignupActions","PolarisSignupTypes","PolarisSlimSignupForm.react","PolarisUA","polarisIsEligibleForFacebookLogin","react","vulture"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$1=function(){o("PolarisRegistrationLogger").logRegistrationEvent({containermodule:n.props.pageIdentifier,event_name:"fbconnect_click",fb_userid:n.props.fbUserID,fbconnect_status:n.props.fbConnectedStatus});var e=o("PolarisRoutes").FXCAL_DISCLOSURE_PATH;o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",n.props.pageIdentifier),o("PolarisFBConnectHelpers").redirectToFBOAuth(e,"signupPage")},n.state={showFacebookLogin:r("polarisIsEligibleForFacebookLogin")()},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=o("CometRouteURL").getWindowURLParams()||{},t=e.hide_fb_signup;t&&this.setState({showFacebookLogin:!1})},n.$2=function(){return o("PolarisUA").isDesktop()&&!1},n.render=function(){switch(this.props.step){case o("PolarisSignupTypes").STEP.emailConfirmation:return u.jsx(r("PolarisEmailConfirmationForm.react"),{onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,shouldShowRedesignedSignup:this.props.shouldShowRedesignedSignup,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case o("PolarisSignupTypes").STEP.phoneConfirmation:return u.jsx(r("PolarisPhoneSignupForm.react"),{onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,shouldShowRedesignedSignup:this.props.shouldShowRedesignedSignup,signupResult:this.props.signupResult,usernameSuggestions:this.props.usernameSuggestions});case o("PolarisSignupTypes").STEP.birthday:return u.jsxs(u.Fragment,{children:[u.jsx(r("PolarisBirthdaySignupForm.react"),{onBirthdayEntered:this.props.onBirthdayEntered,onSignup:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,shouldShowBirthdayTransparency:this.props.shouldShowBirthdayTransparency,shouldShowRedesignedSignup:this.props.shouldShowRedesignedSignup,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style}),this.props.signupAgeSpecificError!=null&&u.jsx(o("IGCoreDialog.react").IGCoreDialog,{onModalClose:this.props.onClearAgeError,title:o("PolarisAgeCollectionHelpers").WE_COULDNT_CREATE_AN_ACC,children:u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:this.props.onClearAgeError,children:o("PolarisGenericStrings").OK_TEXT})})]});case o("PolarisSignupTypes").STEP.accountPrivacy:return r("vulture")("CSF1e4Q94Qx1U5d393aPFU3T8yY="),u.jsx(r("PolarisAccountPrivacyForm.react"),{buttonLabel:o("PolarisGenericStrings").NEXT,defaultedToPrivate:!1,handleNext:function(){},subtitle:o("PolarisAuthStrings").ACCOUNT_PRIVACY_SUBHEADER_TEXT});case o("PolarisSignupTypes").STEP.acceptTerms:return u.jsx(r("PolarisAcceptTermsOfUseForm.react"),{onSignup:this.props.onSignup,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case o("PolarisSignupTypes").STEP.captcha:return u.jsx(r("PolarisCaptchaSignupForm.react"),{onSignup:this.props.onSignup,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case o("PolarisSignupTypes").STEP.base:default:{var e=this.$2()||!this.state.showFacebookLogin;return u.jsxs(u.Fragment,{children:[u.jsx(r("PolarisSlimSignupForm.react"),{canUsePhone:!0,errorNonce:this.props.errorNonce,fbConnectedStatus:this.props.fbConnectedStatus,fbUserID:this.props.fbUserID,focusedFields:this.props.focusedFields,gdprRequired:this.props.gdprRequired,hideFBOption:e,hideHeader:this.props.hideHeader,needEmailOrPhone:!0,onBirthdayEntered:this.props.onBirthdayEntered,onSignupFocusChange:this.props.onSignupFocusChange,onSignupWithFBClick:this.$1,onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,shouldAutoPickUsername:this.props.shouldAutoPickUsername,shouldEnableShortFirstStep:this.props.shouldEnableShortFirstStep,shouldShowBirthdayStepInBaseForm:this.props.shouldShowBirthdayStepInBaseForm,shouldShowRedesignedSignup:this.props.shouldShowRedesignedSignup,signupNonSpecificError:this.props.signupNonSpecificError,signupResult:this.props.signupResult,usernameSuggestions:this.props.usernameSuggestions}),this.props.signupAgeSpecificError!=null&&this.props.shouldShowBirthdayStepInBaseForm===!0&&u.jsx(o("IGCoreDialog.react").IGCoreDialog,{onModalClose:this.props.onClearAgeError,title:o("PolarisAgeCollectionHelpers").WE_COULDNT_CREATE_AN_ACC,children:u.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:this.props.onClearAgeError,children:o("PolarisGenericStrings").OK_TEXT})})]})}}},t})(u.Component);function d(e,t){var n,r=e.auth,a=r.login&&r.login.submissionCount||r.signup&&r.signup.submissionCount||0,i=r.signup&&r.signup.requestInFlight||t.requestInFlight;return{errorNonce:a,fbConnectedStatus:e.fb.status,fbEligible:e.fb.status!==o("PolarisFBConnectStatus").STATUS.ineligible,fbUserID:e==null||(n=e.fb)==null||(n=n.authResponse)==null?void 0:n.userID,focusedFields:r.signup&&r.signup.signupFocusedField,gdprRequired:e.signup.gdprRequired,requestInFlight:i,signupAgeSpecificError:r.signup&&r.signup.signupAgeSpecificError,signupNonSpecificError:r.signup&&r.signup.signupNonSpecificError,signupResult:r.signup&&r.signup.signupResult,step:r.signup&&r.signup.step||o("PolarisSignupTypes").STEP.base,usernameSuggestions:r.signup&&r.signup.usernameSuggestions||[]}}function m(e,t){return{onBirthdayEntered:function(){e(o("PolarisSignupActions").processBirthday())},onClearAgeError:function(){e({errorMessage:void 0,type:"SIGNUP_ERROR"})},onSignup:function(r){r.emailOrPhone!=null||s(0,51567),e(o("PolarisSignupActions").validateFormAndContinue(r,t.pageIdentifier))},onSignupFocusChange:function(n,r){e(o("PolarisSignupActions").changeSignupFormFocus(n,r)),e(o("PolarisSignupActions").performDryRun(n))}}}var p=o("PolarisReactRedux.react").connect(d,m)(c);l.default=p}),98);
__d("PolarisAuthTestIDs",[],(function(t,n,r,o,a,i){"use strict";var e="login-error-message",l="login-info-message",s="login-success-message",u="auth-message-modal";i.DESKTOP_AUTH_ERROR_MESSAGE=e,i.DESKTOP_AUTH_INFO_MESSAGE=l,i.DESKTOP_AUTH_SUCCESS_MESSAGE=s,i.MOBILE_AUTH_MESSAGE_MODAL=u}),66);
__d("PolarisStopDeletionDialogStrings",["fbt","PolarisExternalLink.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=u.jsx(r("PolarisExternalLink.react"),{href:"https://help.instagram.com/370452623149242",children:s._(/*BTDS*/"Learn more")});function d(e,t){return s._(/*BTDS*/"You requested to delete {username}. If you want to keep it, you have until {date} to let us know. Otherwise, all your posts and information will be deleted. {Learn More}",[s._param("username",e),s._param("date",t),s._param("Learn More",c)])}var m=s._(/*BTDS*/"Want to keep using this account?"),p=s._(/*BTDS*/"Keep account"),_=s._(/*BTDS*/"Back to log in");l.getDeletionBodyText=d,l.DELETION_TITLE=m,l.DELETION_KEEP_ACCOUNT=p,l.DELETION_BACK_TO_LOGIN=_}),226);
__d("PolarisThirdPartyAuthHelpers",["InstagramQueryParamsHelper","PolarisFBConnectHelpers","PolarisRoutes"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){if(n||r){t();return}var a=o("PolarisRoutes").FXCAL_DISCLOSURE_PATH,i=e!=null?o("InstagramQueryParamsHelper").appendQueryParams(a,{next:e}):a;o("PolarisFBConnectHelpers").redirectToFBOAuth(i,"loginPage")}l.handleLoginOrFacebookAuth=e}),98);
__d("usePolarisSendAccountRecoveryEmailForBoost",["PolarisAPISendAccountRecoveryEmail","PolarisAuthStrings","PolarisInstajax","PolarisLoginLogger","PolarisReactRedux.react","nullthrows","react-compiler-runtime","useIGDSToaster"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e instanceof o("PolarisInstajax").AjaxError&&e.message?e.message:o("PolarisAuthStrings").SEND_ACCOUNT_RECOVERY_LINK_FAILED_TEXT}function s(){var t=o("react-compiler-runtime").c(6),n=r("useIGDSToaster")(),a=n.add,i=o("PolarisReactRedux.react").useDispatch(),l=o("PolarisReactRedux.react").useSelector(u),s;t[0]!==a?(s=function(t){a({message:t,target:"bottom"},{duration:1e4})},t[0]=a,t[1]=s):s=t[1];var c=s,d;t[2]!==c||t[3]!==i||t[4]!==l?(d=function(){i({type:"ACCOUNT_RECOVERY_MODAL_DISMISSED"});var t=l.accountRecovery,n=t==null?void 0:t.targetUsername,a=n!=null?n:t==null?void 0:t.query,s={event_flow:"account_recovery",login_identifier:a!=null?a:void 0};o("PolarisLoginLogger").logLoginEvent(babelHelpers.extends({event_name:"boost_account_recovery_send_email_submit"},s)),o("PolarisAPISendAccountRecoveryEmail").sendAccountRecoveryEmail(r("nullthrows")(a)).then(function(e){c(e.toast_message),o("PolarisLoginLogger").logLoginEvent(babelHelpers.extends({event_name:"boost_account_recovery_send_email_success"},s))}).catch(function(t){c(e(t)),o("PolarisLoginLogger").logLoginEvent(babelHelpers.extends({event_name:"boost_account_recovery_send_email_error",extra_client_data:{error_message:t.message}},s))})},t[2]=c,t[3]=i,t[4]=l,t[5]=d):d=t[5];var m=d;return m}function u(e){return e.auth}l.default=s}),98);
__d("PolarisSlimLoginForm.react",["fbt","CometImage.react","CometRouteParams","IGDSBox.react","IGDSButton.react","IGDSCheckbox.react","IGDSIconButton.react","IGDSInfoPanoFilledIcon.react","IGDSText.react","IGDSTextVariants.react","InstagramQueryParamsHelper","PolarisAccountSwitcherActions","PolarisAuthStrings","PolarisAuthTestIDs","PolarisAuthTypeSwitcher.react","PolarisConsentQEHelpers","PolarisConsentStrings.react","PolarisFacebookLoginButtonRevamped","PolarisFastLink.react","PolarisIGCoreButton.react","PolarisIsLoggedIn","PolarisLoggedOutCtaClickLogger","PolarisLoginLogger","PolarisLoginQPL","PolarisMultiSignupTypes","PolarisMultiStepSignupQEHelpers","PolarisOneTapLogin","PolarisOrBar.react","PolarisQueryParams","PolarisReactRedux.react","PolarisRoutes","PolarisSlimTextInput.react","PolarisStopDeletionDialog.react","PolarisThirdPartyAuthHelpers","PolarisTooManyAccountsDialog.react","PolarisUA","XPolarisMultiStepSignupControllerRouteBuilder","gkx","justknobx","qex","react","react-compiler-runtime","usePolarisPageID","usePolarisSendAccountRecoveryEmailForBoost"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useMemo,p=c.useRef,_=c.useState,f="slfErrorAlert",g=6,h={profilePicture:{maxWidth:"x193iq5w",$$css:!0}};function y(e){var t=o("react-compiler-runtime").c(12),n=e.checkboxId,a=e.checkboxOnChange,i=e.checkboxState,l=e.checkboxText,s=e.disabled,c=o("PolarisReactRedux.react").useSelector(C),d=o("PolarisUA").isMobile()&&c&&o("PolarisIsLoggedIn").isLoggedIn()?4:10,m=s?"secondaryText":"primaryText",p;t[0]!==l||t[1]!==m?(p=u.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:m,children:l}),t[0]=l,t[1]=m,t[2]=p):p=t[2];var _;t[3]!==a||t[4]!==i||t[5]!==s||t[6]!==p?(_=u.jsx(r("IGDSCheckbox.react"),{checkboxShape:"square",isChecked:i,isDisabled:s,name:"LoginCheckbox",onChange:a,size:16,zeroPadding:!0,children:p}),t[3]=a,t[4]=i,t[5]=s,t[6]=p,t[7]=_):_=t[7];var f;return t[8]!==n||t[9]!==d||t[10]!==_?(f=u.jsx(r("IGDSBox.react"),{id:n,marginBottom:3,marginEnd:2,marginStart:d,marginTop:3,position:"relative",children:_}),t[8]=n,t[9]=d,t[10]=_,t[11]=f):f=t[11],f}function C(e){return e.navigation.isAccountSwitcherOpen}function b(e){var t=o("react-compiler-runtime").c(23),n=e.fromLoggedOutDialog,a=e.hideForgotPassword,i=e.isThreadsRequest,l=e.newAuthDesign,c=e.onClick,d=n===void 0?!1:n,m=i===void 0?!1:i,p=l===void 0?!1:l,_=o("PolarisReactRedux.react").useDispatch(),f;t[0]!==_?(f=function(){return _(o("PolarisAccountSwitcherActions").closeAccountSwitcher())},t[0]=_,t[1]=f):f=t[1];var g=f,h=o("PolarisReactRedux.react").useSelector(v),y=m?"center":"end";if(a===!0)return null;var C;t[2]!==p?(C=p?s._(/*BTDS*/"Forgot?"):s._(/*BTDS*/"Forgot password?"),t[2]=p,t[3]=C):C=t[3];var b=C,S=o("PolarisRoutes").PASSWORD_RESET_PATH;if(o("PolarisQueryParams").isFromLoginForAPI()){var R;t[4]===Symbol.for("react.memo_cache_sentinel")?(R=o("InstagramQueryParamsHelper").appendQueryParams(o("PolarisRoutes").PASSWORD_RESET_PATH,{source:"api-login"}),t[4]=R):R=t[4],S=R}else if(o("PolarisQueryParams").isFromFxcal()){var L;t[5]===Symbol.for("react.memo_cache_sentinel")?(L=o("InstagramQueryParamsHelper").appendQueryParams(o("PolarisRoutes").PASSWORD_RESET_PATH,{source:"fxcal"}),t[5]=L):L=t[5],S=L}var E;t[6]!==b||t[7]!==m||t[8]!==p?(E=m?u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:b}):p?u.jsx(o("IGDSTextVariants.react").IGDSTextFootnote,{color:"link",maxLines:1,textAlign:"center",children:b}):o("PolarisUA").isMobile()?u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",textAlign:"center",children:b}):u.jsx(r("IGDSText.react"),{color:"link",zeroMargin:!0,children:b}),t[6]=b,t[7]=m,t[8]=p,t[9]=E):E=t[9];var k=E,I;t[10]!==d||t[11]!==h||t[12]!==c||t[13]!==g?(I=function(t){c==null||c(),o("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"forgot_password_click"}),o("PolarisLoginLogger").logLoginEvent({event_category:"search",event_flow:"account_recovery_start",event_name:"account_recovery_start",event_step:"search",extra_client_data:d?{event_source:"login_logged_out_dialog_forgot"}:null}),h&&g()},t[10]=d,t[11]=h,t[12]=c,t[13]=g,t[14]=I):I=t[14];var T=I,D;return t[15]!==b||t[16]!==T||t[17]!==h||t[18]!==m||t[19]!==y||t[20]!==p||t[21]!==k?(D=o("PolarisUA").isMobile()&&!(h&&o("PolarisIsLoggedIn").isLoggedIn())||m?u.jsx(r("IGDSBox.react"),{direction:"row",justifyContent:y,marginBottom:p?0:2,marginEnd:p?0:10,marginStart:10,paddingY:3,position:"relative",children:u.jsx(r("PolarisFastLink.react"),{href:S,onClick:T,children:k},"reset")}):u.jsx(r("IGDSBox.react"),{alignContent:"center",alignSelf:"center",display:"flex",marginTop:3,children:u.jsx(r("IGDSButton.react"),{href:S,label:b,onClick:T,variant:o("PolarisUA").isMobile()&&h?"primary_link":"secondary_link"},"reset")}),t[15]=b,t[16]=T,t[17]=h,t[18]=m,t[19]=y,t[20]=p,t[21]=k,t[22]=D):D=t[22],D}function v(e){return e.navigation.isAccountSwitcherOpen}function S(e){var t=o("react-compiler-runtime").c(20),n=e.fromLoggedOutDialog,a=e.hideForgotPassword,i=e.isThreadsRequest,l=e.onForgotPasswordClick,s=e.onNavigate,c=n===void 0?!1:n,d=i===void 0?!1:i,m=o("PolarisReactRedux.react").useSelector(R);if(d)return null;if(o("PolarisUA").isMobile()&&!(m&&o("PolarisIsLoggedIn").isLoggedIn())){if(o("PolarisQueryParams").isFromFxcal()||o("PolarisQueryParams").hasDisableSignupParam())return null;var p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=o("PolarisConsentQEHelpers").shouldShowIPFingerPrintingDisclosure(),t[0]=p):p=t[0];var _=p,f;t[1]!==s?(f=u.jsx(r("PolarisAuthTypeSwitcher.react"),{onNavigate:s}),t[1]=s,t[2]=f):f=t[2];var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g=_&&u.jsx(r("IGDSBox.react"),{paddingY:9,width:"80%",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:o("PolarisConsentStrings.react").INSTAGRAM_TERMS_OF_USE_AND_PRIVACY_POLICY_TEXT})}),t[3]=g):g=t[3];var h;return t[4]!==f?(h=u.jsxs(r("IGDSBox.react"),{alignItems:"center",marginTop:4,position:"relative",children:[f,g]}),t[4]=f,t[5]=h):h=t[5],h}if(o("PolarisUA").isDesktop()&&!(m&&o("PolarisIsLoggedIn").isLoggedIn())&&o("PolarisQueryParams").hasEnableSignupWeb()){var y;t[6]!==c||t[7]!==a||t[8]!==l?(y=u.jsx(b,{fromLoggedOutDialog:c,hideForgotPassword:a,onClick:l}),t[6]=c,t[7]=a,t[8]=l,t[9]=y):y=t[9];var C;t[10]!==c||t[11]!==s?(C=u.jsx(r("IGDSBox.react"),{alignItems:"center",marginTop:4,position:"relative",children:u.jsx(r("PolarisAuthTypeSwitcher.react"),{fromLoggedOutDialog:c,onNavigate:s})}),t[10]=c,t[11]=s,t[12]=C):C=t[12];var v;return t[13]!==y||t[14]!==C?(v=u.jsxs(u.Fragment,{children:[y,C]}),t[13]=y,t[14]=C,t[15]=v):v=t[15],v}var S;return t[16]!==c||t[17]!==a||t[18]!==l?(S=u.jsx(b,{fromLoggedOutDialog:c,hideForgotPassword:a,onClick:l}),t[16]=c,t[17]=a,t[18]=l,t[19]=S):S=t[19],S}function R(e){return e.navigation.isAccountSwitcherOpen}function L(e){var t=o("react-compiler-runtime").c(6),n=e.className,a=e.message,i=e.testid,l;t[0]!==n||t[1]!==a?(l=u.jsx("div",{className:n,children:a}),t[0]=n,t[1]=a,t[2]=l):l=t[2];var s;return t[3]!==l||t[4]!==i?(s=u.jsx(r("IGDSText.react"),{testid:void 0,children:l}),t[3]=l,t[4]=i,t[5]=s):s=t[5],s}function E(e){var t,n=o("react-compiler-runtime").c(18),a=e.errorMessage,i;n[0]===Symbol.for("react.memo_cache_sentinel")?(i="xkmlbd1 xvs91rp xd4r4e8 x1anpbxc x11gldyt xyorhqc x11hdunq x2b8uid",n[0]=i):i=n[0];var l;n[1]!==a?(l=u.jsx(L,{className:i,message:a,testid:void 0}),n[1]=a,n[2]=l):l=n[2];var s=l,c=r("usePolarisSendAccountRecoveryEmailForBoost")(),m=_(!1),p=m[0],f=m[1],g=a===o("PolarisAuthStrings").ERROR_LOGIN_PASSWORD_BOOST_ACCOUNT_RECOVERY||a===o("PolarisAuthStrings").ERROR_LOGIN_USERNAME_BOOST_ACCOUNT_RECOVERY,h=o("PolarisReactRedux.react").useSelector(k),y=h==null||(t=h.accountRecovery)==null||(t=t.options)==null?void 0:t.is_boost_user_eligible_for_account_recovery,C;n[3]!==p||n[4]!==c?(C=function(){p||(f(!0),c(),o("PolarisLoginLogger").logLoginEvent({event_flow:"account_recovery",event_name:"boost_account_recovery_error_message_click"}))},n[3]=p,n[4]=c,n[5]=C):C=n[5];var b=C,v;n[6]!==g?(v=function(){g&&o("PolarisLoginLogger").logLoginEvent({event_flow:"account_recovery",event_name:"boost_account_recovery_error_message_view"})},n[6]=g,n[7]=v):v=n[7];var S;if(n[8]!==a||n[9]!==g?(S=[g,a],n[8]=a,n[9]=g,n[10]=S):S=n[10],d(v,S),g&&y===!0){var R;n[11]===Symbol.for("react.memo_cache_sentinel")?(R=u.jsx(r("IGDSText.react"),{color:"link",maxLines:1,textAlign:"center",zeroMargin:!0,children:o("PolarisAuthStrings").ERROR_LOGIN_BOOST_ACCOUNT_RECOVERY_EMAIL_LINK}),n[11]=R):R=n[11];var E;n[12]!==p||n[13]!==b?(E=u.jsx(r("IGDSBox.react"),{margin:"auto",children:u.jsx(r("PolarisFastLink.react"),{disabled:p,onClick:b,children:R})}),n[12]=p,n[13]=b,n[14]=E):E=n[14];var I;return n[15]!==s||n[16]!==E?(I=u.jsxs(r("IGDSBox.react"),{children:[s,E]}),n[15]=s,n[16]=E,n[17]=I):I=n[17],I}return s}function k(e){return e.auth}function I(e){var t,n=o("react-compiler-runtime").c(150),a=e.dialogSource,i=e.errorMessage,l=e.fbConnectStatus,c=e.forceLoginIgId,m=e.forceLoginProfilePicUrl,C=e.forceLoginUsername,v=e.fromLoggedOutDialog,R=e.hideFBLogin,k=e.hideForgotPassword,I=e.infoMessage,M=e.isFBLoggedIn,w=e.isIGSSODisabled,A=e.isThreadsRequest,F=e.nextUrl,O=e.onClearStopDeletionNonce,B=e.onLoginWithFBClick,W=e.onStopAccountDeletion,q=e.onSubmit,U=e.requestInFlight,V=e.stopDeletionDate,H=e.stopDeletionNonce,G=e.style,z=e.successMessage,j=e.usernameHint,K=v===void 0?!1:v,Q=A===void 0?!1:A,X=_((t=C!=null?C:j)!=null?t:""),Y=X[0],J=X[1],Z=_(""),ee=Z[0],te=Z[1],ne=_(!1),re=ne[0],oe=ne[1],ae,ie;n[0]===Symbol.for("react.memo_cache_sentinel")?(ie=o("PolarisOneTapLogin").hasMaxOneTapNonces(),n[0]=ie):ie=n[0],ae=ie;var le=ae,se=r("usePolarisPageID")(),ue=o("PolarisReactRedux.react").useSelector(N),ce=o("CometRouteParams").useRouteParams(),de;n[1]!==M||n[2]!==w||n[3]!==F||n[4]!==B||n[5]!==se?(de=function(){o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",se),o("PolarisThirdPartyAuthHelpers").handleLoginOrFacebookAuth(F!=null?F:void 0,B,M,w)},n[1]=M,n[2]=w,n[3]=F,n[4]=B,n[5]=se,n[6]=de):de=n[6];var me=de,pe;n[7]!==K||n[8]!==q||n[9]!==re||n[10]!==ee||n[11]!==Y?(pe=function(t){o("PolarisLoginLogger").logLoginEvent({event_category:K?"logged_out_dialog_interaction":null,event_flow:"login_manual",event_name:"login_button_clicked",event_step:K?"logged_out_dialog":null}),t.preventDefault(),re===!0?o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_optin"}):o("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_optout"}),r("PolarisLoginQPL").addPointLoginButtonClick(),q(Y,ee,re)},n[7]=K,n[8]=q,n[9]=re,n[10]=ee,n[11]=Y,n[12]=pe):pe=n[12];var _e=pe,fe,ge;n[13]===Symbol.for("react.memo_cache_sentinel")?(fe=function(){var e=r("qex")._("871")===!0;oe(e)},ge=[],n[13]=fe,n[14]=ge):(fe=n[13],ge=n[14]),d(fe,ge);var he;e:{if(o("PolarisQueryParams").isFromFxcal()||o("PolarisIsLoggedIn").isLoggedIn()||Q||o("PolarisQueryParams").isFromBizappIGBoostMsite()||o("PolarisQueryParams").isFromIGBoostSteering()){he=!1;break e}he=!R&&r("gkx")("5230")===!1}var ye=he,Ce=_(!1),be=Ce[0],ve=Ce[1],Se=_(!0),Re=Se[0],Le=Se[1],Ee=p(null),ke=o("PolarisAuthStrings").PHONE_USERNAME_OR_EMAIL,Ie;e:{if(o("PolarisUA").isMobile()){var Te;n[15]!==ue?(Te=ue&&o("PolarisIsLoggedIn").isLoggedIn()?"xdj266r x1ys307a xzueoph xyqm7xq":"xdj266r x11gldyt xzueoph x11hdunq",n[15]=ue,n[16]=Te):Te=n[16],Ie=Te;break e}var De;n[17]===Symbol.for("react.memo_cache_sentinel")?(De="xdj266r x11gldyt xzueoph x11hdunq",n[17]=De):De=n[17],Ie=De}var xe=Ie,$e,Pe;n[18]!==a||n[19]!==l||n[20]!==K?($e=function(){o("PolarisLoginLogger").logLoginEvent({event_name:"login_form_load",fbconnect_status:l}),K?o("PolarisLoginLogger").logLoginEvent({event_category:"logged_out_dialog_init",event_flow:"login_manual",event_name:"login_step_view_loaded",event_step:"logged_out_dialog",extra_client_data:{dialog_source:a!=null?a:""}}):o("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"login_step_view_loaded"}),o("PolarisQueryParams").hasForceAuthenticationParam()&&Ee.current!=null&&Ee.current.focus()},Pe=[a,l,K],n[18]=a,n[19]=l,n[20]=K,n[21]=$e,n[22]=Pe):($e=n[21],Pe=n[22]),d($e,Pe);var Ne=_(!1),Me=Ne[0],we=Ne[1],Ae;n[23]===Symbol.for("react.memo_cache_sentinel")?(Ae=r("justknobx")._("912"),n[23]=Ae):Ae=n[23];var Fe=Ae,Oe,Be;n[24]===Symbol.for("react.memo_cache_sentinel")?(Oe=function(){var e=function(){if(Fe){var e,t=!!((e=document.querySelector("input[name=username]"))!=null&&e.matches("*:-webkit-autofill"));we(t)}};e(),window.setTimeout(e,200)},Be=[Fe],n[24]=Oe,n[25]=Be):(Oe=n[24],Be=n[25]),d(Oe,Be);var We;n[26]!==Re?(We=function(t){Le(!Re),t.preventDefault()},n[26]=Re,n[27]=We):We=n[27];var qe=We,Ue;n[28]!==re?(Ue=function(){le?ve(!0):oe(!re)},n[28]=re,n[29]=Ue):Ue=n[29];var Ve=Ue,He=P,Ge=$,ze;n[30]!==Me?(ze=function(){Me&&we(!1)},n[30]=Me,n[31]=ze):ze=n[31];var je=ze,Ke=x,Qe;n[32]!==ue?(Qe=o("PolarisUA").isMobile()&&ue&&o("PolarisIsLoggedIn").isLoggedIn(),n[32]=ue,n[33]=Qe):Qe=n[33];var Xe=Qe,Ye;n[34]!==ue?(Ye=o("PolarisUA").isMobile()&&!(ue&&o("PolarisIsLoggedIn").isLoggedIn()),n[34]=ue,n[35]=Ye):Ye=n[35];var Je=Ye,Ze=!Y&&!ee&&!Me&&Fe,et=!Y||!ee||ee.length<g||Ze,tt;n[36]!==ue?(tt=ue&&o("PolarisIsLoggedIn").isLoggedIn(),n[36]=ue,n[37]=tt):tt=n[37];var nt=tt,rt=nt,ot,at=i==null||i===""?void 0:f,it;n[38]!==at||n[39]!==c||n[40]!==m||n[41]!==C||n[42]!==je||n[43]!==xe||n[44]!==Y?(it=u.jsx(u.Fragment,{children:c!=null&&C!=null&&m!=null?u.jsxs("div",{className:"x6s0dn4 x78zum5 x1q0g3np xdj266r x11gldyt x1fqp7bg x11hdunq",children:[u.jsx("div",{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x972fbf x10w94by x1qhh985 x14e42zd xj87blo xln7xf2 xk390pu xc9qbxq xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x14qfxbe",children:u.jsx(r("CometImage.react"),{alt:s._(/*BTDS*/"{username}'s profile picture",[s._param("username",C)]),src:m,xstyle:h.profilePicture})}),u.jsx("div",{className:"xj87blo x13fj5qh",children:u.jsx(r("IGDSText.react"),{size:"label",textAlign:"start",weight:"normal",children:C})})]}):u.jsx(r("PolarisSlimTextInput.react"),{"aria-describedby":at,"aria-label":ke,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:xe,"data-testid":void 0,isInputFocused:Ke(),maxLength:75,name:"username",onChange:function(t){var e=t.target,n=e.value;J(n),je()},onFocus:D,placeholder:ke,ref:Ee,value:Y})}),n[38]=at,n[39]=c,n[40]=m,n[41]=C,n[42]=je,n[43]=xe,n[44]=Y,n[45]=it):it=n[45];var lt=it,st=o("PolarisAuthStrings").PASSWORD,ut=o("PolarisAuthStrings").ONE_TAP_CHECKBOX_TEXT,ct;n[46]!==c||n[47]!==je||n[48]!==ee.length?(ct=function(t){var e=t.target,n=e.value;ee.length===0&&n.length>=6&&o("PolarisLoginLogger").logLoginEvent({event_name:"login_form_autofill",ig_userid:c!=null?c:void 0}),te(n),je()},n[46]=c,n[47]=je,n[48]=ee.length,n[49]=ct):ct=n[49];var dt=!!ee,mt=Re?"password":"text",pt;n[50]!==at||n[51]!==qe||n[52]!==xe||n[53]!==Re||n[54]!==ee||n[55]!==ct||n[56]!==dt||n[57]!==mt?(pt=u.jsx(r("PolarisSlimTextInput.react"),{"aria-describedby":at,"aria-label":st,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:xe,"data-testid":void 0,isInputFocused:Ke(),isPasswordHidden:Re,name:"password",onChange:ct,onFocus:T,onPasswordToggle:qe,placeholder:st,showPasswordToggleLink:dt,type:mt,value:ee}),n[50]=at,n[51]=qe,n[52]=xe,n[53]=Re,n[54]=ee,n[55]=ct,n[56]=dt,n[57]=mt,n[58]=pt):pt=n[58];var _t;n[59]!==Ve||n[60]!==re||n[61]!==rt||n[62]!==be?(_t=rt&&u.jsxs(u.Fragment,{children:[u.jsxs(r("IGDSBox.react"),{direction:"row",position:"relative",children:[u.jsx(y,{checkboxId:"optIntoOneTap",checkboxOnChange:Ve,checkboxState:re,checkboxText:ut,disabled:le}),le&&u.jsx(r("IGDSIconButton.react"),{onClick:Ve,padding:0,children:u.jsx(r("IGDSInfoPanoFilledIcon.react"),{alt:ut,color:"ig-secondary-text",size:16})})]}),be&&u.jsx(r("PolarisTooManyAccountsDialog.react"),{onClose:function(){ve(!1)}})]}),n[59]=Ve,n[60]=re,n[61]=rt,n[62]=be,n[63]=_t):_t=n[63];var ft;n[64]!==k||n[65]!==Je||n[66]!==Q?(ft=Je&&!Q&&u.jsx(b,{hideForgotPassword:k,onClick:He}),n[64]=k,n[65]=Je,n[66]=Q,n[67]=ft):ft=n[67];var gt;n[68]!==pt||n[69]!==_t||n[70]!==ft?(gt=u.jsxs(u.Fragment,{children:[pt,_t,ft]}),n[68]=pt,n[69]=_t,n[70]=ft,n[71]=gt):gt=n[71];var ht=gt,yt;n[72]!==ce?(yt=function(t){if(t in ce){var e=ce[t];return typeof e=="string"?e:null}return null},n[72]=ce,n[73]=yt):yt=n[73];var Ct=yt,bt;if(n[74]!==Ct){var vt=Ct("source_of_flow"),St=Ct("is_in_reg_entrypoint_qe_test");bt=o("PolarisMultiStepSignupQEHelpers").shouldShowCreateAccountButtonOnLoginFB(vt,St),n[74]=Ct,n[75]=bt}else bt=n[75];var Rt=bt,Lt=Xe?4:10,Et=Xe?4:10,kt=Xe?3:2,It=Q?"barcelona-primary-button":"ig-primary-button",Tt;n[76]===Symbol.for("react.memo_cache_sentinel")?(Tt=u.jsx(r("IGDSBox.react"),{position:"relative",children:s._(/*BTDS*/"Log in")}),n[76]=Tt):Tt=n[76];var Dt;n[77]!==_e||n[78]!==et||n[79]!==U||n[80]!==It?(Dt=u.jsx(r("PolarisIGCoreButton.react"),{color:It,"data-testid":void 0,disabled:et,loading:U,onClick:_e,type:"submit",children:Tt}),n[77]=_e,n[78]=et,n[79]=U,n[80]=It,n[81]=Dt):Dt=n[81];var xt;n[82]!==Lt||n[83]!==Et||n[84]!==kt||n[85]!==Dt?(xt=u.jsx(r("IGDSBox.react"),{marginBottom:2,marginEnd:Lt,marginStart:Et,marginTop:kt,position:"relative",children:Dt}),n[82]=Lt,n[83]=Et,n[84]=kt,n[85]=Dt,n[86]=xt):xt=n[86];var $t;n[87]!==Xe||n[88]!==Rt?($t=Rt&&u.jsx(r("IGDSBox.react"),{alignItems:"center",marginBottom:2,marginEnd:Xe?4:10,marginStart:Xe?4:10,marginTop:1,position:"relative",children:u.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:u.jsxs("p",{"data-testid":void 0,children:[s._(/*BTDS*/"Don't have an account?")," ",u.jsx(r("PolarisFastLink.react"),{"data-testid":void 0,href:o("PolarisUA").isMobile()?r("XPolarisMultiStepSignupControllerRouteBuilder").buildUri({step_name:o("PolarisMultiSignupTypes").getFirstStep()}).toString():o("PolarisRoutes").EMAIL_SIGNUP_PATH,onClick:function(){return Ge("signup")},children:u.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",children:s._(/*BTDS*/"Sign up")})})]})})}),n[87]=Xe,n[88]=Rt,n[89]=$t):$t=n[89];var Pt;n[90]!==k||n[91]!==Q?(Pt=Q&&u.jsx(b,{hideForgotPassword:k,isThreadsRequest:Q,onClick:He}),n[90]=k,n[91]=Q,n[92]=Pt):Pt=n[92];var Nt;n[93]!==xt||n[94]!==$t||n[95]!==Pt?(Nt=u.jsxs(u.Fragment,{children:[xt,$t,Pt]}),n[93]=xt,n[94]=$t,n[95]=Pt,n[96]=Nt):Nt=n[96];var Mt=Nt,wt;n[97]!==lt||n[98]!==ht||n[99]!==Mt?(wt=u.jsxs(u.Fragment,{children:[lt,ht,Mt]}),n[97]=lt,n[98]=ht,n[99]=Mt,n[100]=wt):wt=n[100];var At=wt,Ft;n[101]===Symbol.for("react.memo_cache_sentinel")?(Ft=u.jsx("div",{className:"x1hmvnq2 x11gldyt x91k8ka x11hdunq",children:u.jsx(r("PolarisOrBar.react"),{})}),n[101]=Ft):Ft=n[101];var Ot=Ft;if(!ye)ot=At;else if(o("PolarisUA").isMobile()||ue){var Bt;n[102]!==ue||n[103]!==me?(Bt=u.jsx(r("PolarisFacebookLoginButtonRevamped"),{isAccountSwitcherOpen:ue,onClick:me}),n[102]=ue,n[103]=me,n[104]=Bt):Bt=n[104];var Wt;n[105]!==At||n[106]!==Bt?(Wt=u.jsxs(u.Fragment,{children:[Bt,Ot,At]}),n[105]=At,n[106]=Bt,n[107]=Wt):Wt=n[107],ot=Wt}else{var qt;n[108]!==ue||n[109]!==me?(qt=u.jsx(r("PolarisFacebookLoginButtonRevamped"),{isAccountSwitcherOpen:ue,onClick:me}),n[108]=ue,n[109]=me,n[110]=qt):qt=n[110];var Ut;n[111]!==At||n[112]!==qt?(Ut=u.jsxs(u.Fragment,{children:[At,Ot,qt]}),n[111]=At,n[112]=qt,n[113]=Ut):Ut=n[113],ot=Ut}var Vt;n[114]!==I?(Vt=I!=null&&I!==""&&u.jsx(L,{className:"x1roi4f4 xvs91rp xd4r4e8 x1anpbxc x11gldyt x4n8cb0 x11hdunq x2b8uid",message:I,testid:void 0}),n[114]=I,n[115]=Vt):Vt=n[115];var Ht;n[116]!==z?(Ht=z!=null&&z!==""&&u.jsx(L,{className:"x5n08af xvs91rp xd4r4e8 x1anpbxc x11gldyt x4n8cb0 x11hdunq x2b8uid",message:z,testid:void 0}),n[116]=z,n[117]=Ht):Ht=n[117];var Gt;n[118]===Symbol.for("react.memo_cache_sentinel")?(Gt={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},n[118]=Gt):Gt=n[118];var zt=Xe?3:6,jt;n[119]!==ot||n[120]!==zt?(jt=u.jsx(r("IGDSBox.react"),{marginTop:zt,position:"relative",children:ot}),n[119]=ot,n[120]=zt,n[121]=jt):jt=n[121];var Kt;n[122]!==i?(Kt=i!=null&&i!==""&&u.jsx(E,{errorMessage:i}),n[122]=i,n[123]=Kt):Kt=n[123];var Qt;n[124]!==K||n[125]!==k||n[126]!==Q?(Qt=u.jsx(S,{fromLoggedOutDialog:K,hideForgotPassword:k,isThreadsRequest:Q,onForgotPasswordClick:He,onNavigate:Ge}),n[124]=K,n[125]=k,n[126]=Q,n[127]=Qt):Qt=n[127];var Xt;n[128]!==O||n[129]!==W||n[130]!==re||n[131]!==ee||n[132]!==V||n[133]!==H||n[134]!==Y?(Xt=H!=null&&V!=null&&u.jsx(r("PolarisStopDeletionDialog.react"),{onClose:O,onStopDeletion:function(t){return W(Y,ee,re,t)},stopDeletionDate:V,stopDeletionNonce:H,username:Y}),n[128]=O,n[129]=W,n[130]=re,n[131]=ee,n[132]=V,n[133]=H,n[134]=Y,n[135]=Xt):Xt=n[135];var Yt;n[136]!==Xe||n[137]!==G?(Yt=G==="modal"&&!Xe&&u.jsx(r("IGDSBox.react"),{marginBottom:6,position:"relative"}),n[136]=Xe,n[137]=G,n[138]=Yt):Yt=n[138];var Jt;n[139]!==_e||n[140]!==jt||n[141]!==Kt||n[142]!==Qt||n[143]!==Xt||n[144]!==Yt?(Jt=u.jsxs("form",babelHelpers.extends({},Gt,{"data-testid":void 0,id:"loginForm",method:"post",onSubmit:_e,children:[jt,Kt,Qt,Xt,Yt]})),n[139]=_e,n[140]=jt,n[141]=Kt,n[142]=Qt,n[143]=Xt,n[144]=Yt,n[145]=Jt):Jt=n[145];var Zt;return n[146]!==Vt||n[147]!==Ht||n[148]!==Jt?(Zt=u.jsxs("div",{children:[Vt,Ht,Jt]}),n[146]=Vt,n[147]=Ht,n[148]=Jt,n[149]=Zt):Zt=n[149],Zt}function T(){return r("PolarisLoginQPL").addPointPasswordFocus()}function D(){return r("PolarisLoginQPL").addPointUsernameFocus()}function x(){return!o("PolarisIsLoggedIn").isLoggedIn()&&!o("PolarisUA").isMobile()}function $(e){e==="signup"&&r("PolarisLoginQPL").endCancelNavigateToSignup()}function P(){r("PolarisLoginQPL").endCancelNavigateToForgotPassword()}function N(e){return e.navigation.isAccountSwitcherOpen}l.default=I}),226);
__d("PolarisStrategicWebTraffic",["ExecutionEnvironment","PolarisConfig","PolarisDismissEntry","PolarisQueryParams","PolarisUA","memoize"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("memoize")(function(){return(e||(e=r("ExecutionEnvironment"))).canUseDOM&&o("PolarisDismissEntry").isDismissed(o("PolarisDismissEntry").PROMOTED_TRAFFIC_TYPE)?!0:(e||(e=r("ExecutionEnvironment"))).canUseDOM&&o("PolarisUA").isMobile()&&o("PolarisQueryParams").parseQueryParams().utm_source&&o("PolarisQueryParams").parseQueryParams().utm_source.includes("_sd")?(o("PolarisDismissEntry").setDismissEntry(o("PolarisDismissEntry").PROMOTED_TRAFFIC_TYPE),!0):!1}),u=r("memoize")(function(){return o("PolarisConfig").isProgressiveWebApp()||s()});l.isStrategicTraffic=u}),98);
__d("PolarisFXAuthActions",["FXAuthenticationLogger","PolarisAPIExtractTwoFactorChallengeIfPresent","PolarisAPIFXCALAuthLogin","PolarisAuthStrings","PolarisNavigationUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){return function(a,i){return a({appId:n,etoken:r,type:"FX_AUTH_LOGIN_ATTEMPTED"}),o("PolarisAPIFXCALAuthLogin").fxcalAuthLogin(e.replace(/\s+$/,""),t,n,r).then(function(e){e.authenticated?c(String(e.username),String(e.profile_pic_url),String(e.blob),String(e.token))(a,i):a({errorDescription:o("PolarisAuthStrings").ERROR_LOGIN_PASSWORD,type:"FX_AUTH_LOGIN_FAILED"})},function(e){var t=o("PolarisAPIExtractTwoFactorChallengeIfPresent").extractTwoFactorChallengeIfPresent(e);if(t){a(babelHelpers.extends({fromFB:!1,fromFxAuth:!0,timeReceived:Date.now(),type:"TWO_FACTOR_CHALLENGE_RECEIVED"},t)),a({type:"FX_AUTH_TWO_FACTOR_REQUIRED"});return}a({errorDescription:o("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN,type:"FX_AUTH_LOGIN_FAILED"})}).catch()}}function s(){return function(e){e({type:"FX_AUTH_LOGOUT"}),o("FXAuthenticationLogger").logEvent({event:"web_auth_force_logout",target_account_type:1})}}function u(e,t,n){return function(r){if(!(e==null||t==null||n==null)){var a=new URL(e);a.searchParams.append("blob",t),a.searchParams.append("token",n),r({redirectUrl:a.toString(),type:"FX_AUTH_CONFIRMED"}),o("FXAuthenticationLogger").logEvent({event:"web_auth_confirmed_redirect",target_account_type:1});var i=a.toString();o("PolarisNavigationUtils").openURLWithFullPageReload(i),i.startsWith("accountscenter://")&&window.close()}}}function c(e,t,n,r){return function(a){a({blob:n,profilePicUrl:t,token:r,type:"FX_AUTH_LOGIN_SUCCEEDED",username:e}),o("FXAuthenticationLogger").logEvent({event:"web_auth_confirm_page_view",target_account_type:1})}}l.fxAuthLoginAction=e,l.fxAuthLogoutAction=s,l.fxAuthConfirmedAction=u,l.fxAuthSucceededAction=c}),98);
__d("polarisUpdateTwoFactorLoginNoncesFromResponse",["PolarisOneTapLogin","PolarisTrustedDevicesUtils","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.loginNonce,n=e.trustedDeviceNonce,a=e.userId;a!=null&&(r("isStringNullOrEmpty")(n)||o("PolarisTrustedDevicesUtils").addTrustedDevicesNonce(a,n),r("isStringNullOrEmpty")(t)||o("PolarisOneTapLogin").updateLoginNonce(a,t))}l.default=e}),98);
__d("PolarisTwoFactorActions",["invariant","CAAWebLoginLoggingUtils","PolarisAPIFxcalAuthTwoFactorLogin","PolarisAPILoginTwoFactor","PolarisAPISendTwoFactorLoginSms","PolarisAPISendTwoFactorLoginWhatsapp","PolarisAuthStrings","PolarisFXAuthActions","PolarisInstajax","PolarisLoginQPL","PolarisOneTapLogin","PolarisQueryParams","PolarisRedirectHelper","polarisGetAppPlatform","polarisLogAction","polarisUpdateTwoFactorLoginNoncesFromResponse"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e,t,n,a,i){return i===void 0&&(i=!1),function(l,u){var c=u(),d=c.auth,m=d.dyiJobID,p=d.next,_=d.showOneTap,f=c.auth.twoFactor;f||s(0,51503);var g=f.fromFB,h=f.fromFxAuth,y=f.identifier,C=f.username,b=c.fxAuth,v=b.appId,S=b.etoken;l({type:"TWO_FACTOR_VERIFY_ATTEMPTED"});var R={fb:g,platform:o("polarisGetAppPlatform").getAppPlatform(),source:e},L=h?{}:o("PolarisQueryParams").parseQueryParams(),E=h?o("PolarisAPIFxcalAuthTwoFactorLogin").fxcalAuthTwoFactorLogin(y,t,C,n,a,v!=null?v:"0",S!=null?S:""):o("PolarisAPILoginTwoFactor").loginTwoFactor(y,t,C,n,a,o("PolarisOneTapLogin").queryParamStringWithOneTapInfo(L),i);r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointTwoFactorFormSubmit(a),r("polarisLogAction")("twoFacLoginAttempt",R),E.then(function(e){if(e.authenticated)if(l({type:"TWO_FACTOR_VERIFY_SUCCEEDED"}),r("polarisLogAction")("loginSuccess",babelHelpers.extends({},R,{twoFac:!0})),o("CAAWebLoginLoggingUtils").logLoginResult("two_fac_redirect","two_fac",1,!0,null,null,!1,e.cryptedUid),r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").endSuccess(),r("polarisUpdateTwoFactorLoginNoncesFromResponse")(e),h&&e.blob!==null)l(o("PolarisFXAuthActions").fxAuthSucceededAction(C,String(e.profile_pic_url),String(e.blob),String(e.token)));else{var t,n=(t=L.dyi_job_id)!=null?t:"";o("PolarisRedirectHelper").redirectAfterLogin(p,!!e.reactivated,_&&!!e.oneTapPrompt,e.nonce!=null&&e.nonce!==""?e.nonce:"",m||n)}else{var a=o("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN;l({message:a,type:"TWO_FACTOR_VERIFY_FAILED"}),r("polarisLogAction")("loginFailure",babelHelpers.extends({},R,{twoFac:!0})),r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointUserError("two_factor_failed")}},function(e){var t,n=e instanceof o("PolarisInstajax").AjaxError&&((t=e.responseObject)==null?void 0:t.message)||o("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN;l({message:n,type:"TWO_FACTOR_VERIFY_FAILED"}),r("polarisLogAction")("loginFailure",babelHelpers.extends({},R,{twoFac:!0})),o("CAAWebLoginLoggingUtils").logLoginResult("two_fac_redirect","two_fac",1,!1),r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointUserError("two_factor_failed")})}}function u(){return{type:"TWO_FACTOR_CODE_REQUESTED"}}function c(e){return{message:e,type:"TWO_FACTOR_CODE_REQUEST_FAILED"}}function d(e,t){return{identifier:e,timeSent:Date.now(),type:"TWO_FACTOR_CODE_SENT",verificationMethod:t}}function m(){return _("SMS")}function p(){return _("WHATSAPP")}function _(e){return function(t,n){t(u());var a=n().auth.twoFactor;a||s(0,51504);var i=a.identifier,l=a.username;return r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointTwoFactorRequestNewSMSCode(),e==="SMS"?o("PolarisAPISendTwoFactorLoginSms").sendTwoFactorLoginSms(l,i).then(function(e){t(d(e.two_factor_info.two_factor_identifier,"SMS"))},function(e){var n,a=e instanceof o("PolarisInstajax").AjaxError&&((n=e.responseObject)==null?void 0:n.message)||o("PolarisAuthStrings").TWOFAC_CODE_RESEND_FAILED_TEXT;t(c(a)),r("polarisLogAction")("newCodeSentFailure",{platform:o("polarisGetAppPlatform").getAppPlatform()}),r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").markError("request_new_sms_code_failed",e)}):o("PolarisAPISendTwoFactorLoginWhatsapp").sendTwoFactorLoginWhatsapp(l,i).then(function(e){t(d(e.xdt_send_two_factor_login_whatsapp.two_factor_info.two_factor_identifier,"WHATSAPP"))},function(e){var n,a=e instanceof o("PolarisInstajax").AjaxError&&((n=e.responseObject)==null?void 0:n.message)||o("PolarisAuthStrings").TWOFAC_CODE_RESEND_FAILED_TEXT;t(c(a)),r("polarisLogAction")("newCodeSentFailure",{platform:o("polarisGetAppPlatform").getAppPlatform()}),r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").markError("request_new_whatsapp_code_failed",e)})}}function f(e){return{eligibleForMultipleTotp:!1,fromFB:!1,fromFxAuth:!1,identifier:e.identifier||"",isInSowaExperience:e.isInSowaExperience,lastFourDigits:e.lastFourDigits||"",maskedPhoneNumber:e.maskedPhoneNumber||"",showTrustedDevice:!1,smsTwoFactorOn:e.smsTwoFactorOn||!1,timeReceived:Date.now(),totpTwoFactorOn:e.totpTwoFactorOn||!1,type:"TWO_FACTOR_CHALLENGE_RECEIVED",username:e.username||""}}l.submitVerificationCode=e,l.requestSMSCode=m,l.requestWhatsappCode=p,l.loadTwoFactorAuthenticationData=f}),98);
__d("PolarisTwoFactorForm.react",["fbt","invariant","IGDSBox.react","IGDSCheckbox.react","IGDSDialogFooter.react","IGDSText.react","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisIsLoggedIn","PolarisLoginQPL","PolarisNavigationUtils","PolarisReactRedux.react","PolarisSlimTextInput.react","PolarisTwoFactorActions","PolarisUA","react","react-compiler-runtime","vulture"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d="twoFactorErrorAlert",m=s._(/*BTDS*/"backup codes"),p=s._(/*BTDS*/"text message"),_=s._(/*BTDS*/"authentication app"),f=s._(/*BTDS*/"resend it"),g=s._(/*BTDS*/"Send code via SMS instead"),h=s._(/*BTDS*/"Send code via WhatsApp instead"),y=s._(/*BTDS*/"Trust this device"),C=s._(/*BTDS*/"We won't ask for a code next time"),b=s._(/*BTDS*/"Security Code"),v=s._(/*BTDS*/"Confirm"),S=s._(/*BTDS*/"Enter login code"),R=s._(/*BTDS*/"Enter the 6-digit code generated by your authentication app."),L=s._(/*BTDS*/"Enter a 6-digit login code generated by an authentication app."),E=s._(/*BTDS*/"Enter one of the 8-digit codes provided when you set up two-factor authentication.");function k(e){var t=o("react-compiler-runtime").c(9),n=e.onClickAuthAppCode,a=e.onClickBackupCode,i=e.verificationMethod,l=o("PolarisReactRedux.react").useSelector(I),u;t[0]!==l?(u={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&l&&o("PolarisIsLoggedIn").isLoggedIn())<<0],t[0]=l,t[1]=u):u=t[1];var d;t[2]!==n||t[3]!==a||t[4]!==i?(d=i==="TOTP"?s._(/*BTDS*/"If you're unable to receive a login code from an authentication app, you can use one of your {=backup codes}.",[s._param("=backup codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):s._(/*BTDS*/"If you're unable to use one of your backup codes, you can get one from your {=auth app codes}",[s._param("=auth app codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:_}))]),t[2]=n,t[3]=a,t[4]=i,t[5]=d):d=t[5];var p;return t[6]!==u||t[7]!==d?(p=c.jsx("div",babelHelpers.extends({},u,{children:d})),t[6]=u,t[7]=d,t[8]=p):p=t[8],p}function I(e){return e.navigation.isAccountSwitcherOpen}function T(e){var t=o("react-compiler-runtime").c(9),n=e.onClickBackupCode,a=e.onClickSmsCode,i=e.verificationMethod,l=o("PolarisReactRedux.react").useSelector(D),u;t[0]!==l?(u={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&l&&o("PolarisIsLoggedIn").isLoggedIn())<<0],t[0]=l,t[1]=u):u=t[1];var d;t[2]!==n||t[3]!==a||t[4]!==i?(d=i==="SMS"||i==="WHATSAPP"?s._(/*BTDS*/"If you're unable to receive a security code, use one of your {=backup codes}.",[s._param("=backup codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):s._(/*BTDS*/"If you're unable to use a security code from your backup codes, you can get one by {=resend it}",[s._param("=resend it",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:p}))]),t[2]=n,t[3]=a,t[4]=i,t[5]=d):d=t[5];var _;return t[6]!==u||t[7]!==d?(_=c.jsx("div",babelHelpers.extends({},u,{children:d})),t[6]=u,t[7]=d,t[8]=_):_=t[8],_}function D(e){return e.navigation.isAccountSwitcherOpen}function x(e){var t=o("react-compiler-runtime").c(10),n=e.onClickAuthAppCode,a=e.onClickBackupCode,i=e.onClickSmsCode,l=e.verificationMethod,u=o("PolarisReactRedux.react").useSelector($),d;t[0]!==u?(d={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&u&&o("PolarisIsLoggedIn").isLoggedIn())<<0],t[0]=u,t[1]=d):d=t[1];var f;t[2]!==n||t[3]!==a||t[4]!==i||t[5]!==l?(f=l==="TOTP"?s._(/*BTDS*/"If you're unable to use a login code from an authentication app, you can get one by {=sms code} or use one of your {=backup codes}.",[s._param("=sms code",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:i,children:p})),s._param("=backup codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):l==="SMS"?s._(/*BTDS*/"If you're unable to receive a security code by text message, you can get one from your {=auth app codes} or use one of your {=backup codes}.",[s._param("=auth app codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:_})),s._param("=backup codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):s._(/*BTDS*/"If you're unable to use a security code from your backup codes, you can get one by {=resend it} or use one from your {=auth app codes}",[s._param("=resend it",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:i,children:p})),s._param("=auth app codes",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:_}))]),t[2]=n,t[3]=a,t[4]=i,t[5]=l,t[6]=f):f=t[6];var g;return t[7]!==d||t[8]!==f?(g=c.jsx("div",babelHelpers.extends({},d,{children:f})),t[7]=d,t[8]=f,t[9]=g):g=t[9],g}function $(e){return e.navigation.isAccountSwitcherOpen}function P(e){var t=o("react-compiler-runtime").c(7),n=e.onNewCodeClicked,a=o("PolarisReactRedux.react").useSelector(N),i;t[0]!==a?(i={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&a&&o("PolarisIsLoggedIn").isLoggedIn())<<0],t[0]=a,t[1]=i):i=t[1];var l;t[2]!==n?(l=s._(/*BTDS*/"Didn't get a security code? We can {=resend it}.",[s._param("=resend it",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:f})}))]),t[2]=n,t[3]=l):l=t[3];var u;return t[4]!==i||t[5]!==l?(u=c.jsx("div",babelHelpers.extends({},i,{children:l})),t[4]=i,t[5]=l,t[6]=u):u=t[6],u}function N(e){return e.navigation.isAccountSwitcherOpen}function M(e){var t=o("react-compiler-runtime").c(13),n=e.onNewCodeClicked,a=e.onOtherMethodCodeClicked,i=e.verificationMethod,l=o("PolarisReactRedux.react").useSelector(w),u;t[0]!==l?(u={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&l&&o("PolarisIsLoggedIn").isLoggedIn())<<0],t[0]=l,t[1]=u):u=t[1];var d;t[2]!==n||t[3]!==a||t[4]!==i?(d=i==="SMS"&&s._(/*BTDS*/"Didn't get a security code? We can {=resend it}. {=send WhatsApp instead}",[s._param("=resend it",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:n,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:f})})),s._param("=send WhatsApp instead",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:h})}))]),t[2]=n,t[3]=a,t[4]=i,t[5]=d):d=t[5];var m;t[6]!==a||t[7]!==i?(m=i==="WHATSAPP"&&s._(/*BTDS*/"Didn't get a security code? {=send sms instead}",[s._param("=send sms instead",c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:c.jsx(r("PolarisIGCoreText").Body,{color:"ig-primary-action",children:g})}))]),t[6]=a,t[7]=i,t[8]=m):m=t[8];var p;return t[9]!==u||t[10]!==d||t[11]!==m?(p=c.jsxs("div",babelHelpers.extends({},u,{children:[d,m]})),t[9]=u,t[10]=d,t[11]=m,t[12]=p):p=t[12],p}function w(e){return e.navigation.isAccountSwitcherOpen}var A="verificationCodeDescription";function F(e){switch(e){case"SMS":return 1;case"BACKUP_CODE":return 2;case"TOTP":return 3;case"WHATSAPP":return 6;default:return r("vulture")("yhGvsyGQ7jRu4D6I_6RGJXqrpD8="),0}}var O=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$3=function(){r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointTwoFactorCodeFocus()},n.$4=function(e){r("PolarisLoginQPL").isActive()&&r("PolarisLoginQPL").addPointTwoFactorSubmitButtonClick(),n.$5(e)},n.$5=function(e){e.preventDefault();var t=n.state,r=t.currentVerificationMethod,o=t.trustSignal,a=t.verificationCode,i=a.replace(/\s+/g,""),l=F(r).toString();n.props.onSubmit(o,i,l)},n.$6=function(e){var t=e.target.value;t.match(/^[0-9 ]*$/)&&n.setState({verificationCode:t})},n.state={currentVerificationMethod:t.totpTwoFactorOn?"TOTP":t.isInSowaExperience?"WHATSAPP":"SMS",trustSignal:t.showTrustedDevice,verificationCode:""},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){this.$1&&this.$1.focus(),this.$2()},n.componentDidUpdate=function(){this.$2()},n.$2=function(){this.props.hasTwoFactorState||o("PolarisNavigationUtils").openURL("/")},n.$7=function(t){return this.$8(t,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x1atzwio")},n.$9=function(t){return this.$8(t,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x5n08af")},n.$8=function(t,n){return c.jsx("div",{className:n,children:c.jsx("p",{"aria-atomic":"true",id:d,role:"alert",size:"footnote",children:t})})},n.getSubTextIndex=function(){var e=this.state.currentVerificationMethod,t=this.props,n=t.eligibleForMultipleTotp,r=t.isInSowaExperience;switch(e){case"TOTP":return n===!0?0:1;case"BACKUP_CODE":return 2;case"WHATSAPP":return 3;case"SMS":return r?4:5}},n.render=function(){var e=this,t=this.props,n=t.errorMessage,a=t.isAccountSwitcherOpen,i=t.showTrustedDevice,l=t.smsTwoFactorOn,d=t.successMessage,m=t.totpTwoFactorOn,p=this.state.currentVerificationMethod;l||m||u(0,51594);var _=s._(/*BTDS*/"Enter the code we sent via WhatsApp to your mobile number: {maskedPhoneNumber}.",[s._param("maskedPhoneNumber",this.props.maskedPhoneNumber)]),f=s._(/*BTDS*/"Enter the code we sent via SMS to your mobile number: {maskedPhoneNumber}.",[s._param("maskedPhoneNumber",this.props.maskedPhoneNumber)]),g=s._(/*BTDS*/"Enter the code we sent to your number ending in {lastFourDigits}.",[s._param("lastFourDigits",this.props.lastFourDigits)]),h=[L,R,E,_,f,g];return c.jsxs("div",babelHelpers.extends({},{0:{className:"x889kno xyri2b x1a8lsjc x1c1uobl"},1:{className:"x889kno xyri2b x18d9i69 x1c1uobl"}}[(this.props.style==="modal")<<0],{children:[c.jsx("div",babelHelpers.extends({},{0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(o("PolarisUA").isMobile()&&a&&o("PolarisIsLoggedIn").isLoggedIn())<<0],{id:A,children:h[this.getSubTextIndex()]})),c.jsxs("form",{className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",method:"POST",onSubmit:this.$5,children:[c.jsx(r("PolarisSlimTextInput.react"),{"aria-describedby":A,"aria-label":b,"aria-required":"true",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:{0:"xdj266r x11gldyt xzueoph x11hdunq",1:"x14vqqas x1ys307a x1hq5gj4 xyqm7xq"}[!!(o("PolarisUA").isMobile()&&a&&o("PolarisIsLoggedIn").isLoggedIn())<<0],"data-testid":void 0,maxLength:8,name:"verificationCode",onChange:this.$6,onFocus:this.$3,placeholder:b,ref:function(n){return e.$1=n},type:"tel",value:this.state.verificationCode}),this.props.style==="default"&&c.jsx(r("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,marginTop:1,position:"relative",children:c.jsx(r("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:this.$4,children:v})}),n!=null&&n!==""&&this.$7(n),d!=null&&d!==""&&this.$9(d),i?c.jsx(r("IGDSBox.react"),{marginBottom:6,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:c.jsx(r("IGDSCheckbox.react"),{isChecked:this.state.trustSignal,onChange:function(){var t=e.state.trustSignal;e.setState({trustSignal:!t})},size:16,children:c.jsxs(r("IGDSBox.react"),{direction:"column",display:"flex",position:"relative",children:[c.jsx(r("IGDSText.react"),{size:"footnote",weight:"semibold",children:y}),c.jsx(r("IGDSBox.react"),{marginTop:2,position:"relative",children:c.jsx(r("IGDSText.react"),{size:"footnote",children:C})})]})})}):null,m&&l&&c.jsx(x,{onClickAuthAppCode:function(){e.setState({currentVerificationMethod:"TOTP"})},onClickBackupCode:function(){e.setState({currentVerificationMethod:"BACKUP_CODE"})},onClickSmsCode:function(n){e.props.onNewCodeClicked(n),e.setState({currentVerificationMethod:"SMS"})},verificationMethod:p}),m&&!l&&c.jsx(k,{onClickAuthAppCode:function(){e.setState({currentVerificationMethod:"TOTP"})},onClickBackupCode:function(){e.setState({currentVerificationMethod:"BACKUP_CODE"})},verificationMethod:p}),!m&&p==="WHATSAPP"&&c.jsx(M,{onOtherMethodCodeClicked:function(n){e.props.onNewCodeClicked(n),e.setState({currentVerificationMethod:"SMS"})},verificationMethod:"WHATSAPP"}),!m&&p==="SMS"&&this.props.isInSowaExperience&&c.jsx(M,{onNewCodeClicked:function(n){e.props.onNewCodeClicked(n),e.setState({currentVerificationMethod:"SMS"})},onOtherMethodCodeClicked:function(n){e.props.onNewWhatsappCodeClicked(n),e.setState({currentVerificationMethod:"WHATSAPP"})},verificationMethod:"SMS"}),!m&&p==="SMS"&&!this.props.isInSowaExperience&&c.jsx(P,{onNewCodeClicked:this.props.onNewCodeClicked}),!m&&c.jsx(T,{onClickBackupCode:function(){e.setState({currentVerificationMethod:"BACKUP_CODE"})},onClickSmsCode:function(n){e.props.onNewCodeClicked(n),e.setState({currentVerificationMethod:"SMS"})},verificationMethod:p}),this.props.style==="modal"&&(o("PolarisUA").isMobile()?c.jsx(r("IGDSBox.react"),{marginBottom:8,marginEnd:4,marginStart:3,marginTop:3,position:"relative",children:c.jsx(r("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:this.$5,children:o("PolarisAuthStrings").CONTINUE})}):c.jsx(r("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:c.jsx(r("IGDSDialogFooter.react"),{endAdornment:c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,loading:this.props.requestInFlight,onClick:this.$5,children:o("PolarisAuthStrings").CONTINUE}),startAdornment:this.props.onBackClick!=null?c.jsx(r("IGDSBox.react"),{alignItems:"start",justifyContent:"center",paddingX:3,position:"relative",children:c.jsx(r("PolarisIGCoreButton.react"),{borderless:!0,onClick:this.props.onBackClick,children:o("PolarisGenericStrings").BACK_TEXT})}):null})}))]})]}))},t})(c.Component);O.defaultProps={style:"default"};function B(e,t){var n,r=e.twoFactor,o=r==null?void 0:r.message;return{eligibleForMultipleTotp:(r==null?void 0:r.eligibleForMultipleTotp)||!1,errorMessage:o&&o.isError&&o.text||((n=t.errorMessage)!=null?n:null),hasTwoFactorState:!!r,isAccountSwitcherOpen:e.navigation.isAccountSwitcherOpen,isInSowaExperience:(r==null?void 0:r.isInSowaExperience)||!1,lastFourDigits:r==null?void 0:r.lastFourDigits,maskedPhoneNumber:r==null?void 0:r.maskedPhoneNumber,requestInFlight:(r==null?void 0:r.requestInFlight)||t.requestInFlight,showTrustedDevice:(r==null?void 0:r.showTrustedDevice)||!1,smsTwoFactorOn:(r==null?void 0:r.smsTwoFactorOn)||!1,successMessage:o&&!o.isError?o.text:"",totpTwoFactorOn:(r==null?void 0:r.totpTwoFactorOn)||!1}}function W(e,t){return{onNewCodeClicked:function(n){e(o("PolarisTwoFactorActions").requestSMSCode())},onNewWhatsappCodeClicked:function(n){e(o("PolarisTwoFactorActions").requestWhatsappCode())},onSubmit:function(r,a,i){var n;e(o("PolarisTwoFactorActions").submitVerificationCode(t.pageIdentifier,r,a,i,(n=t.isPrivacyPortalReq)!=null?n:!1))}}}var q=o("PolarisReactRedux.react").connect(B,W)(O);l.default=q}),226);
__d("XPolarisLoginControllerParamsRefineValidator",["coerceRouteParams","refine"],(function(t,n,r,o,a,i,l){var e,s=(e=o("refine")).or(e.literal(null),e.string()),u=e.object({dyi_job_id:s,e_un:s,enable_fb_login:e.bool(),flo:e.bool(),force_authentication:e.bool(),force_login_igid:s,hl:s,is_from_rle:e.bool(),is_in_reg_entrypoint_qe_test:s,is_initiator_feta:s,logged_out_reporting_url:s,mtn:e.bool(),next:s,platform_app_id:s,request_id:s,source:s,source_of_flow:s,target_user_id:s}),c=e.coercion(u),d=Object.freeze({force_authentication:{legacyNames:[],default:!1,coercibleType:"EXISTS"},target_user_id:{legacyNames:[],default:null,coercibleType:"STRING"},force_login_igid:{legacyNames:[],default:null,coercibleType:"STRING"},platform_app_id:{legacyNames:[],default:null,coercibleType:"STRING"},logged_out_reporting_url:{legacyNames:[],default:null,coercibleType:"STRING"},next:{legacyNames:[],default:null,coercibleType:"STRING"},dyi_job_id:{legacyNames:[],default:null,coercibleType:"STRING"},source:{legacyNames:[],default:null,coercibleType:"STRING"},hl:{legacyNames:[],default:null,coercibleType:"STRING"},e_un:{legacyNames:[],default:null,coercibleType:"STRING"},enable_fb_login:{legacyNames:[],default:!1,coercibleType:"EXISTS"},request_id:{legacyNames:[],default:null,coercibleType:"STRING"},is_from_rle:{legacyNames:[],default:!1,coercibleType:"EXISTS"},mtn:{legacyNames:[],default:!1,coercibleType:"EXISTS"},flo:{legacyNames:[],default:!1,coercibleType:"BOOL"},source_of_flow:{legacyNames:[],default:null,coercibleType:"STRING"},is_in_reg_entrypoint_qe_test:{legacyNames:[],default:null,coercibleType:"STRING"},is_initiator_feta:{legacyNames:[],default:null,coercibleType:"STRING"}});function m(e){return c(r("coerceRouteParams")(e,d))}l.refineXPolarisLoginControllerParams=m}),98);
__d("PolarisAuthFormCard.react",["fbt","invariant","ix","CometRouteParams","FBLogger","IGCoreImage.react","IGDSBox.react","IGDSDivider.react","IGDSIgLogoFilledIcon.react","IGDSSpinner.react","IGDSText.react","IGDSTextVariants.react","InstagramQueryParamsHelper","PolarisAppsellUnit.react","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthTypeSwitcher.react","PolarisBarcelonaAppSVGIcon.react","PolarisConfig","PolarisConsentModal.react","PolarisExternalLink.react","PolarisFBConnectActions","PolarisFBConnectHelpers","PolarisFBConnectV2LoginForm.react","PolarisFacebookAccountPicker.react","PolarisFacebookLoginForm.react","PolarisIsLoggedIn","PolarisLandingForm.react","PolarisLoggedOutContentWallDialogAuthCTAs.react","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutCtaImpressionLogger","PolarisLoggedOutNetzDGReportLink.react","PolarisLoggedOutUpsellStrings","PolarisLoginActionClearStopDeletionNonce","PolarisLoginActionLogin","PolarisLoginActionLoginWithFBAccessToken","PolarisLoginActionLoginWithFBJSSDK","PolarisLoginLogger","PolarisLoginQPL","PolarisOneTapLogin","PolarisOneTapLoginForm.react","PolarisOneTapLoginStorage","PolarisQueryParams","PolarisReactRedux.react","PolarisSenderNameHelpers","PolarisSignupForm.react","PolarisSignupTypes","PolarisSlimLoginForm.react","PolarisStrategicWebTraffic","PolarisTwoFactorForm.react","PolarisUA","PolarisUserAvatar.react","URI","XPolarisLoginControllerParamsRefineValidator","nullthrows","polarisIsEligibleForFacebookLogin","polarisUserSelectors","react","react-compiler-runtime","stylex","usePolarisCentralizedUpsellState","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXMobileHomepageDesign","usePolarisLoggedInFBUserForHomepage","usePolarisPageID","usePolarisRouteConfig","usePrevious","useSinglePartialViewImpression","warning"],(function(t,n,r,o,a,i,l,s,u,c){"use strict";var e,d,m,p=m||(m=o("react")),_=m.useEffect,f=s._(/*BTDS*/"Continue without login."),g=s._(/*BTDS*/"Your password has been reset. Please try logging in again."),h=s._(/*BTDS*/"Log in to follow people on Instagram."),y=s._(/*BTDS*/"Two factor authentication lock icon"),C={mobileBrandingForwardPadding:{paddingTop:"xexx8yu",$$css:!0},mobileBrandPadding:{paddingTop:"xnk5j39",$$css:!0},mobileFooterPadding:{paddingBottom:"xefzj8c",$$css:!0},redesignedRoot:{maxWidth:"x1k7vjkh xusnbm3",$$css:!0},root:{color:"x5n08af",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k x7qam4e",marginTop:"x14vqqas x15lw1kp",maxWidth:"x1dc814f x1owpceq",width:"xh8yej3",$$css:!0},rootModal:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",maxWidth:"x1319t99",width:"xh8yej3",$$css:!0}};function b(t){var n=o("react-compiler-runtime").c(90),a=t.authTypeOverride,i=t.dialogSource,l=t.forceLoginIgId,s=t.forceLoginProfilePicUrl,c=t.forceLoginUsername,d=t.fromLoggedOutDialog,m=t.hideAppUpsells,f=t.hideBorder,g=t.hideForgotPassword,h=t.intentSource,y=t.isPrivacyPortalReq,b=t.pageIdentifier,S=t.pageType,R=t.shouldAutoPickUsername,L=t.shouldEnableShortFirstStep,E=t.shouldShowBirthdayStepInBaseForm,k=t.shouldShowBirthdayTransparency,I=t.shouldShowRedesignedSignupPage,T=t.showNetzDGReportLink,D=t.style,x=t.useMobileBrandPadding,$=t.useMobileFooterPadding,M=t.usernameHint,w=t.xstyle,F=d===void 0?!1:d,B=m===void 0?!1:m,W=g===void 0?!1:g,q=y===void 0?!1:y,U=E===void 0?!1:E,V=T===void 0?!1:T,H=D===void 0?"default":D,G=x===void 0?!0:x,z=$===void 0?!0:$,j=r("usePolarisPageID")(),K=b!=null?b:j,Q=r("usePolarisLoggedInFBUserForHomepage")(),Y=N();Q=!Y&&o("PolarisUA").isDesktop()?Q:null;var J=o("PolarisReactRedux.react").useSelector(v),Z=J.auth,ee=Z.authType,te=a!=null?a:ee;te!=null||u(0,51551);var oe=I===!0&&te===o("PolarisAuthActionConstants").AUTH.signup,ie=r("usePolarisLOXBrandForwardDeeplinkLogoUpsell")(),le=ie.isBrandForwardDeeplinkLogoUpsell,se=r("usePolarisLOXMobileHomepageDesign")(),ue=se.isLOXMobileHomepageDesign,ce=r("usePolarisRouteConfig")(),de=ce.showBrandingPageWithNav,me=le||ue||de===!0,pe=r("usePrevious")(te),_e,fe;n[0]!==te||n[1]!==pe?(_e=function(){!r("PolarisLoginQPL").isActive()&&pe!==o("PolarisAuthActionConstants").AUTH.login&&te===o("PolarisAuthActionConstants").AUTH.login&&r("PolarisLoginQPL").start()},fe=[pe,te],n[0]=te,n[1]=pe,n[2]=_e,n[3]=fe):(_e=n[2],fe=n[3]),_(_e,fe);var ge=o("PolarisReactRedux.react").useStore(),he,ye;n[4]!==te||n[5]!==ge?(he=function(){if(te===o("PolarisAuthActionConstants").AUTH.login||te===o("PolarisAuthActionConstants").AUTH.twoFactor)return function(){var e=ge.getState().auth.authType===o("PolarisAuthActionConstants").AUTH.twoFactor;r("PolarisLoginQPL").isActive()&&!e&&r("PolarisLoginQPL").endCancel()}},ye=[te,ge],n[4]=te,n[5]=ge,n[6]=he,n[7]=ye):(he=n[6],ye=n[7]),_(he,ye);var Ce=o("PolarisReactRedux.react").useDispatch(),be=P(),ve;n[8]!==te||n[9]!==Y||n[10]!==Q||n[11]!==be?(ve=function(){var e;Q!=null&&((e=Q)==null?void 0:e.profile_name)!=null&&o("PolarisUA").isDesktop()&&!Y&&te!==o("PolarisAuthActionConstants").AUTH.fbLogin&&te!==o("PolarisAuthActionConstants").AUTH.fbAccountPicker&&te!==o("PolarisAuthActionConstants").AUTH.oneTapLogin&&be(o("PolarisAuthActionConstants").AUTH.fbConnectV2)},n[8]=te,n[9]=Y,n[10]=Q,n[11]=be,n[12]=ve):ve=n[12];var Se;n[13]!==te||n[14]!==Ce||n[15]!==Y||n[16]!==Q||n[17]!==be||n[18]!==pe?(Se=[pe,te,Q,Y,Ce,be],n[13]=te,n[14]=Ce,n[15]=Y,n[16]=Q,n[17]=be,n[18]=pe,n[19]=Se):Se=n[19],_(ve,Se);var Re;if(n[20]!==te||n[21]!==me||n[22]!==oe||n[23]!==H||n[24]!==G||n[25]!==z||n[26]!==w){var Le;n[28]!==te||n[29]!==me||n[30]!==G?(Le=o("PolarisUA").isMobile()&&te===o("PolarisAuthActionConstants").AUTH.none&&G&&(me?C.mobileBrandingForwardPadding:C.mobileBrandPadding),n[28]=te,n[29]=me,n[30]=G,n[31]=Le):Le=n[31],Re=(e||(e=r("stylex"))).props(C.root,H==="modal"&&C.rootModal,oe&&C.redesignedRoot,o("PolarisUA").isMobile()&&!!z&&C.mobileFooterPadding,Le,w),n[20]=te,n[21]=me,n[22]=oe,n[23]=H,n[24]=G,n[25]=z,n[26]=w,n[27]=Re}else Re=n[27];var Ee;n[32]!==te||n[33]!==f||n[34]!==oe||n[35]!==H?(Ee={0:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf"},4:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a xh8yej3"},2:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},6:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},1:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},5:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xh8yej3 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},3:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},7:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"}}[(H==="modal")<<2|!!(f===!0||oe)<<1|(te===o("PolarisAuthActionConstants").AUTH.fbConnectV2&&H!=="modal")<<0],n[32]=te,n[33]=f,n[34]=oe,n[35]=H,n[36]=Ee):Ee=n[36];var ke;n[37]!==te||n[38]!==K||n[39]!==me||n[40]!==oe?(ke=!me&&p.jsx(X,{authType:te,pageID:K,shouldShowRedesignedSignup:oe}),n[37]=te,n[38]=K,n[39]=me,n[40]=oe,n[41]=ke):ke=n[41];var Ie;n[42]!==te||n[43]!==i||n[44]!==l||n[45]!==s||n[46]!==c||n[47]!==F||n[48]!==W||n[49]!==h||n[50]!==q||n[51]!==Q||n[52]!==K||n[53]!==S||n[54]!==R||n[55]!==L||n[56]!==U||n[57]!==k||n[58]!==oe||n[59]!==H||n[60]!==M?(Ie=p.jsx(O,{authType:te,dialogSource:i,forceLoginIgId:l,forceLoginProfilePicUrl:s,forceLoginUsername:c,fromLoggedOutDialog:F,hideForgotPassword:W,intentSource:h,isPrivacyPortalReq:q,loggedInFBUser:Q,pageID:K,pageType:S,shouldAutoPickUsername:R,shouldEnableShortFirstStep:L,shouldShowBirthdayStepInBaseForm:U,shouldShowBirthdayTransparency:k,shouldShowRedesignedSignup:oe,style:H,usernameHint:M}),n[42]=te,n[43]=i,n[44]=l,n[45]=s,n[46]=c,n[47]=F,n[48]=W,n[49]=h,n[50]=q,n[51]=Q,n[52]=K,n[53]=S,n[54]=R,n[55]=L,n[56]=U,n[57]=k,n[58]=oe,n[59]=H,n[60]=M,n[61]=Ie):Ie=n[61];var Te;n[62]!==te||n[63]!==Ie?(Te=p.jsx(A,{authType:te,children:Ie}),n[62]=te,n[63]=Ie,n[64]=Te):Te=n[64];var De;n[65]!==K||n[66]!==V?(De=p.jsx(ne,{pageID:K,showNetzDGReportLink:V}),n[65]=K,n[66]=V,n[67]=De):De=n[67];var xe;n[68]===Symbol.for("react.memo_cache_sentinel")?(xe=p.jsx(re,{}),n[68]=xe):xe=n[68];var $e;n[69]!==Ee||n[70]!==ke||n[71]!==Te||n[72]!==De?($e=p.jsxs("div",babelHelpers.extends({},Ee,{"data-testid":void 0,children:[ke,Te,De,xe]})),n[69]=Ee,n[70]=ke,n[71]=Te,n[72]=De,n[73]=$e):$e=n[73];var Pe;n[74]===Symbol.for("react.memo_cache_sentinel")?(Pe=p.jsx(r("PolarisConsentModal.react"),{}),n[74]=Pe):Pe=n[74];var Ne;n[75]!==te||n[76]!==l||n[77]!==F||n[78]!==B||n[79]!==f||n[80]!==Q||n[81]!==K||n[82]!==S||n[83]!==oe||n[84]!==H?(Ne=oe!==!0&&p.jsx(ae,{authType:te,forceLoginIgId:l,fromLoggedOutDialog:F,hideAppUpsells:B,hideBorder:f,loggedInFBUser:Q,pageId:K,pageType:S,style:H}),n[75]=te,n[76]=l,n[77]=F,n[78]=B,n[79]=f,n[80]=Q,n[81]=K,n[82]=S,n[83]=oe,n[84]=H,n[85]=Ne):Ne=n[85];var Me;return n[86]!==Re||n[87]!==$e||n[88]!==Ne?(Me=p.jsxs("div",babelHelpers.extends({},Re,{children:[$e,Pe,Ne]})),n[86]=Re,n[87]=$e,n[88]=Ne,n[89]=Me):Me=n[89],Me}function v(e){return e}function S(e,t,n){var a=o("react-compiler-runtime").c(4),i;return a[0]!==e||a[1]!==t||a[2]!==n?(i={onImpressionStart:function(){e||o("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("auth_form",n,{},t!=null?t:void 0)}},a[0]=e,a[1]=t,a[2]=n,a[3]=i):i=a[3],r("useSinglePartialViewImpression")(i)}function R(e){var t=r("usePolarisCentralizedUpsellState")(),n=t[0],a=n.isProfileOrPostPage;return e===o("PolarisAuthActionConstants").AUTH.signup&&a}function L(e){var t=o("react-compiler-runtime").c(4),n=o("PolarisReactRedux.react").useSelector(E),a=n.auth,i=a.signup,l=r("usePolarisCentralizedUpsellState")(),s=l[0],u=s.isProfileOrPostPage,c;return t[0]!==e||t[1]!==u||t[2]!==(i==null?void 0:i.step)?(c=!o("PolarisIsLoggedIn").isLoggedIn()&&o("PolarisUA").isDesktop()&&u&&e!==o("PolarisAuthActionConstants").AUTH.fbConnectV2&&(e===o("PolarisAuthActionConstants").AUTH.signup?(i==null?void 0:i.step)===o("PolarisSignupTypes").STEP.base:!0),t[0]=e,t[1]=u,t[2]=i==null?void 0:i.step,t[3]=c):c=t[3],c}function E(e){return e}function k(){var e=o("react-compiler-runtime").c(6),t=o("PolarisReactRedux.react").useSelector(I),n=t.fb,r=n.authResponse,a=n.igProfile,i=n.igProfiles,l=n.igSSODisabled;if(a==null)return null;var s=r==null?void 0:r.userID,u;return e[0]!==a.profilePictureUrl||e[1]!==a.username||e[2]!==i||e[3]!==l||e[4]!==s?(u={fbUserID:s,igSSODisabled:l,linkedIGProfiles:i,profilePictureUrl:a.profilePictureUrl,username:a.username},e[0]=a.profilePictureUrl,e[1]=a.username,e[2]=i,e[3]=l,e[4]=s,e[5]=u):u=e[5],u}function I(e){return e}function T(){var e,t,n=o("PolarisReactRedux.react").useSelector(D),r=n.auth,a=r.login,i=r.twoFactor;return(a==null?void 0:a.errorMessage)!=null?a.errorMessage:(i==null||(e=i.message)==null?void 0:e.isError)===!0&&(i==null||(t=i.message)==null?void 0:t.text)!=null?i.message.text:null}function D(e){return e}function x(){var e,t,n,r=o("PolarisReactRedux.react").useSelector($),a=r.auth,i=a.login,l=a.signup,s=a.twoFactor;return(e=(t=(n=i==null?void 0:i.requestInFlight)!=null?n:l==null?void 0:l.requestInFlight)!=null?t:s==null?void 0:s.requestInFlight)!=null?e:!1}function $(e){return e}function P(){var e=o("react-compiler-runtime").c(2),t=o("PolarisReactRedux.react").useDispatch(),n;return e[0]!==t?(n=function(n){t(o("PolarisAuthActions").switchAuthType(n))},e[0]=t,e[1]=n):n=e[1],n}function N(){var e=o("react-compiler-runtime").c(2),t=o("PolarisReactRedux.react").useSelector(w),n=t.auth,a=n.next,i;if(e[0]!==a){i=Symbol.for("react.early_return_sentinel");e:{var l=new(d||(d=r("URI")))(a),s=l.getPath(),u=l.getDomain();if(u===""&&s==="/oauth/authorize"){var c,m=l.getQueryData(),p=(c=m.scope)==null?void 0:c.split(",");i=(p==null?void 0:p.every(M))===!0;break e}}e[0]=a,e[1]=i}else i=e[1];return i!==Symbol.for("react.early_return_sentinel")?i:!1}function M(e){return e.startsWith("threads_")}function w(e){return e}function A(e){var t=o("react-compiler-runtime").c(1),n=e.authType,a=e.children,i=o("PolarisReactRedux.react").useSelector(F),l=i.auth,s=l.isFBLoggedIn;if((n===o("PolarisAuthActionConstants").AUTH.fbLogin||n===o("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&s==null){var u;return t[0]===Symbol.for("react.memo_cache_sentinel")?(u=p.jsx(r("IGDSBox.react"),{alignItems:"center",justifyContent:"center",minHeight:160,position:"relative",children:p.jsx(r("IGDSSpinner.react"),{size:"small"})}),t[0]=u):u=t[0],u}return a}function F(e){return e}function O(e){var t=o("react-compiler-runtime").c(36),n=e.authType,a=e.dialogSource,i=e.forceLoginIgId,l=e.forceLoginProfilePicUrl,s=e.forceLoginUsername,u=e.fromLoggedOutDialog,c=e.hideForgotPassword,d=e.intentSource,m=e.isPrivacyPortalReq,_=e.loggedInFBUser,f=e.pageID,g=e.pageType,h=e.shouldAutoPickUsername,y=e.shouldEnableShortFirstStep,C=e.shouldShowBirthdayStepInBaseForm,b=e.shouldShowBirthdayTransparency,v=e.shouldShowRedesignedSignup,S=e.style,R=e.usernameHint,L=m===void 0?!1:m,E=h===void 0?!1:h,I=y===void 0?!1:y,T=C===void 0?!1:C,D=v===void 0?!1:v,x=o("PolarisReactRedux.react").useSelector(B),$=x.auth,P=$.isFBLoggedIn,M=k(),w=N(),A=i!=null,F=(n===o("PolarisAuthActionConstants").AUTH.fbLogin||n===o("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&P===!0&&!!M;if(n===o("PolarisAuthActionConstants").AUTH.fbConnectV2&&_!=null&&_.profile_name!=null){var O;return t[0]===Symbol.for("react.memo_cache_sentinel")?(O=p.jsx(z,{}),t[0]=O):O=t[0],O}else if(n===o("PolarisAuthActionConstants").AUTH.signup&&!o("PolarisUA").isMobile()){var V;return t[1]!==n||t[2]!==u||t[3]!==d||t[4]!==f||t[5]!==E||t[6]!==I||t[7]!==T||t[8]!==b||t[9]!==D||t[10]!==S?(V=p.jsx(W,{authType:n,fromLoggedOutDialog:u,intentSource:d,pageID:f,shouldAutoPickUsername:E,shouldEnableShortFirstStep:I,shouldShowBirthdayStepInBaseForm:T,shouldShowBirthdayTransparency:b,shouldShowRedesignedSignup:D,style:S}),t[1]=n,t[2]=u,t[3]=d,t[4]=f,t[5]=E,t[6]=I,t[7]=T,t[8]=b,t[9]=D,t[10]=S,t[11]=V):V=t[11],V}else if(n===o("PolarisAuthActionConstants").AUTH.twoFactor){var H;return t[12]!==L||t[13]!==f||t[14]!==S?(H=p.jsx(q,{isPrivacyPortalReq:L,pageID:f,style:S}),t[12]=L,t[13]=f,t[14]=S,t[15]=H):H=t[15],H}else if(!A&&F&&!w&&(M==null?void 0:M.igSSODisabled)!==!0){var Q;return t[16]!==n||t[17]!==f||t[18]!==g?(Q=p.jsx(U,{authType:n,pageID:f,pageType:g}),t[16]=n,t[17]=f,t[18]=g,t[19]=Q):Q=t[19],Q}else if(!A&&o("PolarisOneTapLogin").isOneTapLoginEligible()&&n===o("PolarisAuthActionConstants").AUTH.oneTapLogin){var X;return t[20]!==n?(X=p.jsx(G,{authType:n}),t[20]=n,t[21]=X):X=t[21],X}else if(o("PolarisUA").isMobile()&&n===o("PolarisAuthActionConstants").AUTH.none){var Y;return t[22]!==f?(Y=p.jsx(j,{pageID:f}),t[22]=f,t[23]=Y):Y=t[23],Y}r("warning")(n===o("PolarisAuthActionConstants").AUTH.login||n===o("PolarisAuthActionConstants").AUTH.oneTapLogin||n===o("PolarisAuthActionConstants").AUTH.multiStepSignup,'Expected authType to be "login or oneTapLogin"; got "%s"',n);var J;return t[24]!==a||t[25]!==i||t[26]!==l||t[27]!==s||t[28]!==u||t[29]!==c||t[30]!==d||t[31]!==L||t[32]!==f||t[33]!==S||t[34]!==R?(J=p.jsx(K,{dialogSource:a,forceLoginIgId:i,forceLoginProfilePicUrl:l,forceLoginUsername:s,fromLoggedOutDialog:u,hideForgotPassword:c,intentSource:d,isPrivacyPortalReq:L,pageID:f,style:S,usernameHint:R}),t[24]=a,t[25]=i,t[26]=l,t[27]=s,t[28]=u,t[29]=c,t[30]=d,t[31]=L,t[32]=f,t[33]=S,t[34]=R,t[35]=J):J=t[35],J}function B(e){return e}function W(e){var t=o("react-compiler-runtime").c(14),n=e.authType,a=e.fromLoggedOutDialog,i=e.intentSource,l=e.pageID,s=e.shouldAutoPickUsername,u=e.shouldEnableShortFirstStep,c=e.shouldShowBirthdayStepInBaseForm,d=e.shouldShowBirthdayTransparency,m=e.shouldShowRedesignedSignup,_=e.style,f=s===void 0?!1:s,g=u===void 0?!1:u,h=c===void 0?!1:c,y=m===void 0?!1:m,C=S(a,i,l),b=x(),v=R(n),L=r("usePolarisCentralizedUpsellState")(),E=L[0],k=E.isProfileOrPostPage;if(v){var I;return t[0]===Symbol.for("react.memo_cache_sentinel")?(I=p.jsx(r("PolarisLoggedOutContentWallDialogAuthCTAs.react"),{}),t[0]=I):I=t[0],I}var T;t[1]!==k||t[2]!==l||t[3]!==b||t[4]!==f||t[5]!==g||t[6]!==h||t[7]!==d||t[8]!==y||t[9]!==_?(T=p.jsx(r("PolarisSignupForm.react"),{hideHeader:k,pageIdentifier:l,requestInFlight:b,shouldAutoPickUsername:f,shouldEnableShortFirstStep:g,shouldShowBirthdayStepInBaseForm:h,shouldShowBirthdayTransparency:d,shouldShowRedesignedSignup:y,style:_}),t[1]=k,t[2]=l,t[3]=b,t[4]=f,t[5]=g,t[6]=h,t[7]=d,t[8]=y,t[9]=_,t[10]=T):T=t[10];var D;return t[11]!==C||t[12]!==T?(D=p.jsx("div",{ref:C,children:T}),t[11]=C,t[12]=T,t[13]=D):D=t[13],D}function q(e){var t=o("react-compiler-runtime").c(6),n=e.isPrivacyPortalReq,a=e.pageID,i=e.style,l=n===void 0?!1:n,s=T(),u=x(),c=s||"",d;return t[0]!==l||t[1]!==a||t[2]!==u||t[3]!==i||t[4]!==c?(d=p.jsx(r("PolarisTwoFactorForm.react"),{errorMessage:c,isPrivacyPortalReq:l,pageIdentifier:a,requestInFlight:u,style:i}),t[0]=l,t[1]=a,t[2]=u,t[3]=i,t[4]=c,t[5]=d):d=t[5],d}function U(e){var t=o("react-compiler-runtime").c(36),n=e.authType,a=e.pageID,i=e.pageType,l=o("PolarisReactRedux.react").useSelector(H),s=l.auth,u=l.fb,c=s.login,d=u.status,m=o("PolarisReactRedux.react").useDispatch(),_=k(),f=T(),g=P(),h=x(),y=L(n),C;if(t[0]!==(_==null?void 0:_.linkedIGProfiles)){var b;C=(b=_==null?void 0:_.linkedIGProfiles)!=null?b:[],t[0]=_==null?void 0:_.linkedIGProfiles,t[1]=C}else C=t[1];var v=C,S;t[2]!==m||t[3]!==a?(S=function(t){t!=null?(o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login_with_fb","auth_form",a),m(o("PolarisLoginActionLoginWithFBJSSDK").loginWithFBJSSDK({pageID:a,source:a},t))):(o("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",a),o("PolarisFBConnectHelpers").redirectToFBOAuth("/",a).catch(V))},t[2]=m,t[3]=a,t[4]=S):S=t[4];var R=S,E;t[5]!==_?(E=!!_&&o("PolarisFBConnectHelpers").isFBCUnique(_.username),t[5]=_,t[6]=E):E=t[6];var I=E,D=v.length<=1,$=o("PolarisQueryParams").getShouldRefreshFBCookie();if(o("PolarisOneTapLogin").isOneTapLoginEligible()&&n!==o("PolarisAuthActionConstants").AUTH.fbAccountPicker&&(!$||D)){var N,M;if(t[7]!==I?(N=o("PolarisOneTapLoginStorage").getLoginNonces(),M=Object.values(N).length>=1||I,t[7]=I,t[8]=N,t[9]=M):(N=t[8],M=t[9]),M){var w=I&&D?_:null,A=I&&D?R:void 0,F=!y,O;return t[10]!==N||t[11]!==w||t[12]!==A||t[13]!==F?(O=p.jsx(r("PolarisOneTapLoginForm.react"),{fbConnectedUser:w,loginNonces:N,onRequestFBLogin:A,showSingleAccountProfilePicture:F}),t[10]=N,t[11]=w,t[12]=A,t[13]=F,t[14]=O):O=t[14],O}}else if(v.length>1&&I){var B;t[15]!==(c==null?void 0:c.deletionNonce)||t[16]!==m||t[17]!==a?(B=function(t){m(o("PolarisLoginActionLoginWithFBAccessToken").loginWithFBAccessToken({pageID:a,skipped:!1,source:"fbSignupPage"},t,c==null?void 0:c.deletionNonce))},t[15]=c==null?void 0:c.deletionNonce,t[16]=m,t[17]=a,t[18]=B):B=t[18];var W=B,q;return t[19]!==v||t[20]!==W?(q=p.jsx(r("PolarisFacebookAccountPicker.react"),{fbConnectedIgProfiles:v,onRequestFBLogin:W}),t[19]=v,t[20]=W,t[21]=q):q=t[21],q}var U;t[22]!==d||t[23]!==g?(U=function(t){o("PolarisLoginLogger").logLoginEvent({event_name:"fb_switch_accounts_click",fbconnect_status:d}),g(t)},t[22]=d,t[23]=g,t[24]=U):U=t[24];var G=U,z;t[25]!==_?(z=r("nullthrows")(_),t[25]=_,t[26]=z):z=t[26];var j=i!=null?i:void 0,K;return t[27]!==d||t[28]!==G||t[29]!==f||t[30]!==R||t[31]!==a||t[32]!==h||t[33]!==z||t[34]!==j?(K=p.jsx(r("PolarisFacebookLoginForm.react"),{accountInfo:z,errorMessage:f,fbConnectStatus:d,onRequestLogin:R,onSwitchAccountsClick:G,pageID:a,pageType:j,requestInFlight:h}),t[27]=d,t[28]=G,t[29]=f,t[30]=R,t[31]=a,t[32]=h,t[33]=z,t[34]=j,t[35]=K):K=t[35],K}function V(e){return r("FBLogger")("ig_web").catching(e).mustfix("unexpected")}function H(e){return e}function G(e){var t=o("react-compiler-runtime").c(3),n=e.authType,a=L(n),i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=o("PolarisOneTapLoginStorage").getLoginNonces(),t[0]=i):i=t[0];var l=!a,s;return t[1]!==l?(s=p.jsx(r("PolarisOneTapLoginForm.react"),{loginNonces:i,showSingleAccountProfilePicture:l}),t[1]=l,t[2]=s):s=t[2],s}function z(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx(r("PolarisFBConnectV2LoginForm.react"),{}),e[0]=t):t=e[0],t}function j(e){var t=o("react-compiler-runtime").c(4),n=e.pageID,a;t[0]!==n?(a={onImpressionStart:function(){o("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("full_page",n)}},t[0]=n,t[1]=a):a=t[1];var i=r("useSinglePartialViewImpression")(a),l;return t[2]!==i?(l=p.jsx(r("PolarisLandingForm.react"),{ref:i}),t[2]=i,t[3]=l):l=t[3],l}function K(e){var t=o("react-compiler-runtime").c(47),n=e.dialogSource,a=e.forceLoginIgId,i=e.forceLoginProfilePicUrl,l=e.forceLoginUsername,s=e.fromLoggedOutDialog,u=e.hideForgotPassword,c=e.intentSource,d=e.isPrivacyPortalReq,m=e.pageID,_=e.style,f=e.usernameHint,y=d===void 0?!1:d,C=o("PolarisReactRedux.react").useSelector(Q),b=C.auth,v=C.fb,R=b.isFBLoggedIn,L=b.login,E=b.next,I=v.status,D=o("PolarisReactRedux.react").useDispatch(),$=P(),M=S(s,c,m),w=N(),A=k(),F=L&&L.source==="follow"?h:"",O=T(),B=x(),W=L&&L.wasPasswordJustReset?g:"",q;t[0]!==D||t[1]!==s||t[2]!==y||t[3]!==m?(q=function(t,n,r){D(o("PolarisLoginActionLogin").login(t,n,{source:m},r,!1,null,s,y))},t[0]=D,t[1]=s,t[2]=y,t[3]=m,t[4]=q):q=t[4];var U=q,V;t[5]!==D?(V=function(t){D(o("PolarisFBConnectActions").setShowSSODisabledModal(t))},t[5]=D,t[6]=V):V=t[6];var H=V,G;t[7]!==D||t[8]!==s||t[9]!==m?(G=function(t,n,r,a){D(o("PolarisLoginActionLogin").login(t,n,{source:m},r,!1,a,s))},t[7]=D,t[8]=s,t[9]=m,t[10]=G):G=t[10];var z=G,j;t[11]!==D?(j=function(){D(o("PolarisLoginActionClearStopDeletionNonce").clearStopDeletionNonce())},t[11]=D,t[12]=j):j=t[12];var K=j,X;t[13]!==(A==null?void 0:A.igSSODisabled)||t[14]!==(A==null?void 0:A.linkedIGProfiles)||t[15]!==(A==null?void 0:A.username)||t[16]!==H||t[17]!==$?(X=function(){var e,t=(e=A==null?void 0:A.linkedIGProfiles)!=null?e:[];(A==null?void 0:A.igSSODisabled)===!0?($(o("PolarisAuthActionConstants").AUTH.login),H(A==null?void 0:A.username)):t.length>1?$(o("PolarisAuthActionConstants").AUTH.fbAccountPicker):$(o("PolarisAuthActionConstants").AUTH.fbLogin)},t[13]=A==null?void 0:A.igSSODisabled,t[14]=A==null?void 0:A.linkedIGProfiles,t[15]=A==null?void 0:A.username,t[16]=H,t[17]=$,t[18]=X):X=t[18];var Y=X,J;t[19]===Symbol.for("react.memo_cache_sentinel")?(J={className:"xod5an3 x1dc814f xh8yej3"},t[19]=J):J=t[19];var Z=!!R,ee=(A==null?void 0:A.igSSODisabled)===!0,te=L==null?void 0:L.deletionDate,ne=L==null?void 0:L.deletionNonce,re=f!=null?f:void 0,oe;t[20]!==n||t[21]!==I||t[22]!==a||t[23]!==i||t[24]!==l||t[25]!==s||t[26]!==Y||t[27]!==u||t[28]!==F||t[29]!==w||t[30]!==O||t[31]!==E||t[32]!==K||t[33]!==U||t[34]!==z||t[35]!==B||t[36]!==_||t[37]!==W||t[38]!==Z||t[39]!==ee||t[40]!==te||t[41]!==ne||t[42]!==re?(oe=p.jsx(r("PolarisSlimLoginForm.react"),{dialogSource:n,errorMessage:O,fbConnectStatus:I,forceLoginIgId:a,forceLoginProfilePicUrl:i,forceLoginUsername:l,fromLoggedOutDialog:s,hideFBLogin:!r("polarisIsEligibleForFacebookLogin")(),hideForgotPassword:u,infoMessage:F,isFBLoggedIn:Z,isIGSSODisabled:ee,isThreadsRequest:w,nextUrl:E,onClearStopDeletionNonce:K,onLoginWithFBClick:Y,onStopAccountDeletion:z,onSubmit:U,requestInFlight:B,stopDeletionDate:te,stopDeletionNonce:ne,style:_,successMessage:W,usernameHint:re}),t[20]=n,t[21]=I,t[22]=a,t[23]=i,t[24]=l,t[25]=s,t[26]=Y,t[27]=u,t[28]=F,t[29]=w,t[30]=O,t[31]=E,t[32]=K,t[33]=U,t[34]=z,t[35]=B,t[36]=_,t[37]=W,t[38]=Z,t[39]=ee,t[40]=te,t[41]=ne,t[42]=re,t[43]=oe):oe=t[43];var ae;return t[44]!==M||t[45]!==oe?(ae=p.jsx("div",babelHelpers.extends({},J,{ref:M,children:oe})),t[44]=M,t[45]=oe,t[46]=ae):ae=t[46],ae}function Q(e){return e}function X(e){var t=o("react-compiler-runtime").c(9),n=e.authType,a=e.pageID,i=e.shouldShowRedesignedSignup,l=o("PolarisReactRedux.react").useSelector(Y),s=l.auth,u=s.signup,c=L(n),d=r("usePolarisCentralizedUpsellState")(),m=d[0],_=m.isProfileOrPostPage,f=m.lastViewedOwnerID,g;t[0]!==_||t[1]!==f?(g=function(t){var e;return _&&f!=null?(e=o("polarisUserSelectors").maybeGetUserById(t,f))!=null?e:{}:{}},t[0]=_,t[1]=f,t[2]=g):g=t[2];var h=o("PolarisReactRedux.react").useSelector(g),y=!c&&o("PolarisUA").isDesktop()&&n===o("PolarisAuthActionConstants").AUTH.signup?(u==null?void 0:u.step)===o("PolarisSignupTypes").STEP.base:!0;if(c&&(h==null?void 0:h.username)!=null){var C;return t[3]!==a||t[4]!==h?(C=p.jsx(ee,{pageID:a,user:h}),t[3]=a,t[4]=h,t[5]=C):C=t[5],C}else if(y){var b;return t[6]!==n||t[7]!==i?(b=p.jsx(J,{authType:n,shouldShowRedesignedSignup:i}),t[6]=n,t[7]=i,t[8]=b):b=t[8],b}return null}function Y(e){return e}function J(e){var t=o("react-compiler-runtime").c(8),n=e.authType,a=e.shouldShowRedesignedSignup,i=N(),l=n===o("PolarisAuthActionConstants").AUTH.fbConnectV2?2:3,u=n===o("PolarisAuthActionConstants").AUTH.fbConnectV2||a===!0?2:9,d;t[0]!==n||t[1]!==i||t[2]!==a?(d=i?p.jsx(r("PolarisBarcelonaAppSVGIcon.react"),{fill:"var(--barcelona-logo)",size:34}):n===o("PolarisAuthActionConstants").AUTH.twoFactor?p.jsx(r("IGCoreImage.react"),{alt:y,src:{light:c("222729")}}):a===!0?p.jsx(r("IGDSIgLogoFilledIcon.react"),{alt:s._(/*BTDS*/"Instagram"),size:50}):p.jsx(r("IGCoreImage.react"),{alt:s._(/*BTDS*/"Instagram"),src:{dark:c("222731"),light:c("222730")}}),t[0]=n,t[1]=i,t[2]=a,t[3]=d):d=t[3];var m;return t[4]!==l||t[5]!==u||t[6]!==d?(m=p.jsx(r("IGDSBox.react"),{marginBottom:l,marginTop:u,position:"relative",children:d}),t[4]=l,t[5]=u,t[6]=d,t[7]=m):m=t[7],m}var Z={container:{borderTopColor:"x1yhmmig",borderInlineEndColor:"xpcrz0c",borderBottomColor:"xyb01ml",borderInlineStartColor:"x1vpptxl",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"xmn4e3e",borderInlineEndWidth:"x1if355w",borderBottomWidth:"x2x41l1",borderInlineStartWidth:"xct1zlm",position:"x1n2onr6",$$css:!0}};function ee(e){var t,n,a,i,l=o("react-compiler-runtime").c(15),s=e.pageID,u=e.user,c=u.fullName,d=u.profilePictureUrl,m=u.username,_=r("nullthrows")(m),f=o("PolarisReactRedux.react").useSelector(te),g=f.sharerInformation,h=o("PolarisSenderNameHelpers").shouldShowSenderName(s),y=g!=null&&h?o("PolarisLoggedOutUpsellStrings").seePhotosFromFullNameBodyText((t=g.fullName)!=null?t:g.username):o("PolarisLoggedOutUpsellStrings").seePhotosFromFullNameBodyText(c!=null?c:_),C=g!=null&&h?o("PolarisLoggedOutUpsellStrings").joinSharerHeaderText((n=g.fullName)!=null?n:g.username):o("PolarisLoggedOutUpsellStrings").getSeeMoreFrom(_),b=g!=null&&h&&(a=g.profilePicUrl)!=null?a:d,v;l[0]!==y||l[1]!==C||l[2]!==b?(v={body:y,header:C,sharerProfilePictureUrl:b},l[0]=y,l[1]=C,l[2]=b,l[3]=v):v=l[3];var S=v,R=S.body,L=S.header,E=S.sharerProfilePictureUrl,k=E!=null?E:d,I=(i=g==null?void 0:g.username)!=null?i:_,T;l[4]!==k||l[5]!==I?(T=p.jsx(r("IGDSBox.react"),{height:104,justifyContent:"center",marginBottom:4,marginTop:8,shape:"circle",width:104,xstyle:Z.container,children:p.jsx(r("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:k,size:96,username:I})}),l[4]=k,l[5]=I,l[6]=T):T=l[6];var D;l[7]!==L?(D=p.jsx(r("IGDSBox.react"),{marginBottom:5,width:"100%",children:p.jsx(r("IGDSText.react"),{color:"primaryText",size:"title",textAlign:"center",weight:"semibold",children:L})}),l[7]=L,l[8]=D):D=l[8];var x;l[9]!==R?(x=p.jsx(r("IGDSBox.react"),{paddingX:10,children:p.jsx(o("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:R})}),l[9]=R,l[10]=x):x=l[10];var $;return l[11]!==T||l[12]!==D||l[13]!==x?($=p.jsxs(r("IGDSBox.react"),{alignItems:"center",marginBottom:4,children:[T,D,x]}),l[11]=T,l[12]=D,l[13]=x,l[14]=$):$=l[14],$}function te(e){return e.upsell}function ne(e){var t,n=o("react-compiler-runtime").c(3),a=e.pageID,i=e.showNetzDGReportLink;if(i!==!0||!o("PolarisConfig").isLoggedOutFRXEligible())return null;var l=(t=o("InstagramQueryParamsHelper").getQueryParams(window.location.search))==null?void 0:t.next,s=l!=null?""+window.location.origin+l:a==="StoriesPage"?window.location.href:null,u;n[0]===Symbol.for("react.memo_cache_sentinel")?(u=o("PolarisUA").isMobile()&&p.jsx(r("IGDSBox.react"),{marginBottom:6,position:"relative",children:p.jsx(r("IGDSDivider.react"),{})}),n[0]=u):u=n[0];var c;return n[1]!==s?(c=p.jsxs(r("IGDSBox.react"),{marginEnd:o("PolarisUA").isMobile()?1:0,marginStart:o("PolarisUA").isMobile()?1:0,paddingX:o("PolarisUA").isMobile()?12:8,paddingY:o("PolarisUA").isMobile()?8:4,position:"relative",children:[u,p.jsx(r("PolarisLoggedOutNetzDGReportLink.react"),{reportedUrlOrContentId:s,textSize:"footnote"})]}),n[1]=s,n[2]=c):c=n[2],c}function re(){var e=o("react-compiler-runtime").c(3),t=o("CometRouteParams").useCometRefinedRouteParams(o("XPolarisLoginControllerParamsRefineValidator").refineXPolarisLoginControllerParams),n=t==null?void 0:t.logged_out_reporting_url;if(n==null)return null;var a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=o("PolarisUA").isMobile()&&p.jsx(r("IGDSBox.react"),{marginBottom:6,position:"relative",width:"100%",children:p.jsx(r("IGDSDivider.react"),{})}),e[0]=a):a=e[0];var i;return e[1]!==n?(i=p.jsxs(r("IGDSBox.react"),{marginEnd:o("PolarisUA").isMobile()?1:0,marginStart:o("PolarisUA").isMobile()?1:0,paddingX:o("PolarisUA").isMobile()?12:8,paddingY:o("PolarisUA").isMobile()?8:4,position:"relative",children:[a,p.jsx(r("IGDSText.react"),{color:"secondaryText",size:"footnote",textAlign:"center",children:p.jsx(r("PolarisExternalLink.react"),{href:n,children:f})})]}),e[1]=n,e[2]=i):i=e[2],i}var oe={oneTap:{color:"x1roi4f4",$$css:!0},root:{color:"x5n08af",fontSize:"x1f6kntn",marginTop:"xcxhlts",marginInlineEnd:"xjx09e3",marginBottom:"x1fqp7bg",marginInlineStart:"xx6jrq6",textAlign:"x2b8uid",$$css:!0}};function ae(t){var n,a=o("react-compiler-runtime").c(20),i=t.authType,l=t.forceLoginIgId,s=t.fromLoggedOutDialog,u=t.hideAppUpsells,c=t.hideBorder,d=t.loggedInFBUser,m=t.pageId,_=t.pageType,f=t.style,g=o("PolarisReactRedux.react").useSelector(le),h=g.auth,y=g.navigation,C=h.isFBLoggedIn,b=y.isAccountSwitcherOpen,v=N(),S=R(i),L=k(),E=l!=null,I=(n=L==null?void 0:L.linkedIGProfiles)!=null?n:[],T=(i===o("PolarisAuthActionConstants").AUTH.fbLogin||i===o("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&C===!0&&!!L,D=function(){var e=I.length>1,t=!E&&T&&e;return!v&&o("PolarisUA").isDesktop()&&!o("PolarisQueryParams").hasForceAuthenticationParam()&&(!(i===o("PolarisAuthActionConstants").AUTH.fbLogin&&!o("PolarisOneTapLogin").isOneTapLoginEligible())||t)&&!S};if(!D()||b)return null;var x=ie,$=!(u==null||u)&&!o("PolarisStrategicWebTraffic").isStrategicTraffic(),P;a[0]!==i||a[1]!==c||a[2]!==f?(P={0:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf"},4:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x7r02ix"},2:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},6:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x7r02ix x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},1:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},5:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},3:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"},7:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl"}}[(f==="modal")<<2|(c===!0)<<1|(i===o("PolarisAuthActionConstants").AUTH.fbConnectV2&&f!=="modal")<<0],a[0]=i,a[1]=c,a[2]=f,a[3]=P):P=a[3];var M=i===o("PolarisAuthActionConstants").AUTH.oneTapLogin&&oe.oneTap,w;a[4]!==M?(w=(e||(e=r("stylex")))(oe.root,M),a[4]=M,a[5]=w):w=a[5];var A=_!=null?_:void 0,F;a[6]!==s||a[7]!==d||a[8]!==w||a[9]!==A?(F=p.jsx(r("PolarisAuthTypeSwitcher.react"),{className:w,fromLoggedOutDialog:s,loggedInFBUser:d,onNavigate:x,pageType:A,primary:!0}),a[6]=s,a[7]=d,a[8]=w,a[9]=A,a[10]=F):F=a[10];var O;a[11]!==P||a[12]!==F?(O=p.jsx("div",babelHelpers.extends({},P,{children:F})),a[11]=P,a[12]=F,a[13]=O):O=a[13];var B;a[14]!==$||a[15]!==m?(B=$?p.jsx(r("PolarisAppsellUnit.react"),{appInstallCampaign:m,ctaTypeV2:"auth_form"}):null,a[14]=$,a[15]=m,a[16]=B):B=a[16];var W;return a[17]!==O||a[18]!==B?(W=p.jsxs(p.Fragment,{children:[O,B]}),a[17]=O,a[18]=B,a[19]=W):W=a[19],W}function ie(e){r("PolarisLoginQPL").isActive()&&e==="signup"&&r("PolarisLoginQPL").endCancelNavigateToSignup()}function le(e){return e}l.default=b}),226);/*FB_PKG_DELIM*/
__d("ACSCipherSuiteModule",[],(function(t,n,r,o,a,i){"use strict";var e={hash:"SHA-512",name:"HMAC"},l={curveName:"RISTRETTO",macAlgorithm:e,value:1},s=new Map([[l.value,l]]);function u(e){return s.has(e)?s.get(e):null}i.VOPRF_RISTRETTO_HMACSHA512=l,i.getACSCipherSuiteByValue=u}),66);
__d("ACSTokenHmacUtil",["XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return s(e,t).then(function(e){return c(e,n)})}function s(e,t){return o("XPlatReactCrypto").subtleImportKey("raw",t,e,!1,["sign"]).then(function(t){return{algo:e,key:t}})}function u(e){return typeof e.hash=="string"?e.hash:e.hash.name}function c(e,t){var n=e.algo,r=e.key,a={hash:u(n),name:"HMAC"};return o("XPlatReactCrypto").subtleSign(a,r,t).then(function(e){return new Uint8Array(e)})}l.hmac=e}),98);
__d("ArmadilloDataTraceType",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("13");l.armadilloMessageSend=s}),98);
__d("LSMaxInt32",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_int32(2147483647);l.default=s}),98);
__d("CreateDerivedKeys",["CryptoLogger","I64","LSMaxInt32","LSVec","Promise","RetUtil","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,i,l){var u=o("CryptoLogger").CryptoLogger("create_derived_keys");if(l.length<1||l.some(function(e){return(s||(s=o("I64"))).gt(e,r("LSMaxInt32"))}))return u.mustfix("Invalid key lengths for derive keys"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(void 0));var c=l.map((s||(s=o("I64"))).to_int32),d=l.map(s.to_int32).reduce(function(e,t){return e+t},0),m=function(t){for(var e=[],n=0,a=0,i=c.length;a<i;++a){var l=n+c[a];e.push(t.slice(n,l).buffer),n=l}return o("RetUtil").getNullableRetResult(r("LSVec").ofArray(e))};return o("XPlatReactCrypto").subtleImportKey("raw",i,"HKDF",!1,["deriveBits"]).then(function(e){return o("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:t,name:"HKDF",salt:a!=null?a:new Uint8Array(10).buffer},e,d*8)}).then(function(e){var t=new Uint8Array(e);return m(t)}).catch(function(e){return u.catching(e).mustfix("Failed to create derived keys"),o("RetUtil").getNullableRetResult()})}l.CreateDerivedKeys=u}),98);
__d("DoubleKeyMap",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.set=function(t,n,r){var e=this.$1.get(t);e||this.$1.set(t,e=new Map),e.set(n,r)},t.get=function(t,n){var e;return(e=this.$1.get(t))==null?void 0:e.get(n)},t.delete=function(t,n){var e=this.$1.get(t);e&&(e.delete(n),e.size===0&&this.$1.delete(t))},t.getAll=function(t){return this.$1.get(t)},t.deleteAll=function(t){this.$1.delete(t)},e})();i.DoubleKeyMap=e}),66);
__d("EBBase64Encode",["Base64Utils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("Base64Utils").fromArrayBuffer(e)}l.default=e}),98);
__d("EncryptedBackupsSymmetricEncryptionUtils",[],(function(t,n,r,o,a,i){"use strict";var e=16,l=28,s=16,u=128;i.hChaCha20SubKeyNonceLengthInBytes=e,i.totalNonceLengthInBytes=l,i.aesGcmTagLengthInBytes=s,i.aesGcmTagLength=u}),66);
__d("GetBlobFromInt64BE",["I64","LSResult","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var a=new Uint8Array(8);return a.reduceRight(function(e,t,n){var r=(s||(s=o("I64"))).to_int32(s.mod_(e,s.of_string("256")));return a[n]=r,s.div(e,s.of_string("256"))},t),(e||(e=n("Promise"))).resolve(r("LSResult")(a.buffer))}l.GetBlobFromInt64BE=u}),98);
__d("HChaCha20",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}e.fromHexString=function(t){var e=t.match(/[A-Fa-f0-9]{1,2}/g);if(t.length===0||t.length%2!==0||e==null)throw r("err")('The string "'+t+'" is not valid hex.');return new Uint8Array(e.map(function(e){return parseInt(e,16)}))},e.bufferToUint32Array=function(t){for(var e=new DataView(t),n=[],r=t.byteLength/4,o=0;o<r;o++)n.push(new DataView(e.buffer.slice(o*4,o*4+4)).getInt32(0));return Uint32Array.from(n)},e.rotate=function(t,n){var e=t&4294967295,r=n&31;return(e<<r|e>>>32-r)>>>0},e.quarterRound=function(n,r,o,a){var t=n,i=r,l=o,s=a;return t=t+i&4294967295,s=e.rotate(s^t,16),l=l+s&4294967295,i=e.rotate(i^l,12),t=t+i&4294967295,s=e.rotate(s^t,8),l=l+s&4294967295,i=e.rotate(i^l,7),[t>>>0,i>>>0,l>>>0,s>>>0]};var t=e.prototype;return t.createHCtx=function(n,o){var t=new Uint32Array(16),a=e.fromHexString("657870616e642033322d62797465206b");if(a.byteLength!==16)throw r("err")("Could not create context. Invalid constant buffer length of "+a.byteLength+". Expected a length of 16");if(n.byteLength!==32)throw r("err")("Could not create context. Invalid key buffer length of "+n.byteLength+". Expected a length of 32");if(o.byteLength!==16)throw r("err")("Could not create context. Invalid nonce buffer length of "+o.byteLength+". Expected a length of 16");var i=e.bufferToUint32Array(a.buffer),l=e.bufferToUint32Array(n),s=e.bufferToUint32Array(o);return t.set(i),t.set(l,i.length),t.set(s,i.length+l.length),t.buffer},t.hChaCha20Bytes=function(n,r){for(var t=new DataView(this.createHCtx(r,n)),o=t.getInt32(0),a=t.getInt32(4),i=t.getInt32(8),l=t.getInt32(12),s=t.getInt32(16),u=t.getInt32(20),c=t.getInt32(24),d=t.getInt32(28),m=t.getInt32(32),p=t.getInt32(36),_=t.getInt32(40),f=t.getInt32(44),g=t.getInt32(48),h=t.getInt32(52),y=t.getInt32(56),C=t.getInt32(60),b=0;b<10;b++){var v=e.quarterRound(o,s,m,g);o=v[0],s=v[1],m=v[2],g=v[3];var S=e.quarterRound(a,u,p,h);a=S[0],u=S[1],p=S[2],h=S[3];var R=e.quarterRound(i,c,_,y);i=R[0],c=R[1],_=R[2],y=R[3];var L=e.quarterRound(l,d,f,C);l=L[0],d=L[1],f=L[2],C=L[3];var E=e.quarterRound(o,u,_,C);o=E[0],u=E[1],_=E[2],C=E[3];var k=e.quarterRound(a,c,f,g);a=k[0],c=k[1],f=k[2],g=k[3];var I=e.quarterRound(i,d,m,h);i=I[0],d=I[1],m=I[2],h=I[3];var T=e.quarterRound(l,s,p,y);l=T[0],s=T[1],p=T[2],y=T[3]}return Uint32Array.from([o,a,i,l,g,h,y,C]).buffer},e})();l.HChaCha20=e}),98);
__d("PakeCpaceUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}function l(e,t){var n=new e.VectorInt;return t.forEach(function(e){n.push_back(e)}),n}i.typedArrayToBuffer=e,i.uint8ArrayToVectorInt=l}),66);
__d("Hmac_v2",["CryptoLogger","LSResult","PakeCpaceUtils","Promise","WACryptoSha256HmacBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i){try{var t=new(o("WACryptoSha256HmacBuilder")).Sha256HMacBuilder(new Uint8Array(a)).update(new Uint8Array(i)).finish();return(e||(e=n("Promise"))).resolve(r("LSResult")(o("PakeCpaceUtils").typedArrayToBuffer(t)))}catch(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("hmac_v2"),e).mustfix("Crypto signing failed: data length: %s, was_timeout: %s",i==null?void 0:i.byteLength,!1),e}};l.default=s}),98);
__d("IIGDAPI",["MAWBridge"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o("MAWBridge").getBridge().sendAndReceive("backend","igdapi",{args:n,type:e})}}l.makeBridgedApi=e}),98);
__d("IGDBridgedAPI",["IIGDAPI"],(function(t,n,r,o,a,i,l){"use strict";var e,s={33:(e=o("IIGDAPI")).makeBridgedApi("33"),46:e.makeBridgedApi("46"),sendEditMessage:e.makeBridgedApi("sendEditMessage"),sendMediaMessage:e.makeBridgedApi("sendMediaMessage"),sendOrRemoveReaction:e.makeBridgedApi("sendOrRemoveReaction"),sendXmaReceiverFetch:e.makeBridgedApi("sendXmaReceiverFetch")},u=s;l.default=u}),98);
__d("MAWUnsafeCoerce",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}i.unsafeCoerce=e}),66);
__d("InstamadilloMessageIdUtils",["FBLogger","I64","MAWUnsafeCoerce","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var r;return(e||(e=o("I64"))).isI64(t)?r=(e||(e=o("I64"))).to_string(t):r=t,r+":"+n}function u(e){var t=e.split(":");if(t.length!==2)throw r("FBLogger")("igd_web").mustfixThrow("Invalid instamadillo message id format. Format is <threadKey>:<stanzaId>.");return{stanzaId:t[1],threadKey:t[0]}}function c(e){var t=e.split(":");return t.length!==2?(r("FBLogger")("igd_web").warn("Invalid instamadillo message id format. Format is <threadKey>:<stanzaId>."),null):{stanzaId:t[1],threadKey:t[0]}}function d(e){var t=e.message.decrypted.id;return m(t)}function m(e){var t=e.externalId,n=o("WAJids").threadIdForChatJid(e.chat);return s(n,t)}function p(t,n,r){return{author:o("WAJids").toMsgrUserJid(r),chat:o("WAJids").toMsgrUserJid((e||(e=o("I64"))).to_string(t)),externalId:o("MAWUnsafeCoerce").unsafeCoerce(n)}}l.toInstamadilloMessageId=s,l.fromInstamadilloMessageId=u,l.maybeFromInstamadilloMessageId=c,l.getInstamadilloMessageIdFromStanza=d,l.getInstamadilloMessageIdFromProtocolMsgId=m,l.toProtocolMsgId=p}),98);
__d("LSACSExperimentCapability",[],(function(t,n,r,o,a,i){var e=Object.freeze({RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:0,BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:1,INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:2});i.default=e}),66);
__d("LSBase64Encode.nop",["EBBase64Encode","LSResult","LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(a?r("EBBase64Encode")(a):void 0))};e.__nop_name__="LSBase64Encode",l.default=e}),98);
__d("LSBeginHandlingFireForgetTasksForQueue",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return n[0]=t.createArray(),t.forEach(t.filter(t.db.table(5).fetch(),function(t){return t.queueName===e[0]}),function(e){var r=e.item;return n[3]=new t.Map,n[3].set("label",r.context),n[3].set("payload",r.taskValue),n[3].set("queue_name",r.queueName),n[3].set("task_id",r.taskId),n[3].set("failure_count",t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))?void 0:t.i64.cast([0,0])),n[4]=(n[0].push(n[3]),n[0])})},function(o){return n[1]=new t.Map,n[1].set("tasks",n[0]),n[1].set("epoch_id",void 0),n[2]=new t.Map,n[2].set("queue_name",e[0]),n[2].set("next_sync_ms",void 0),n[2].set("work_item_type",t.i64.cast([0,5])),n[2].set("network_payload",n[1]),n[2].set("http_url_override",void 0),n[2].set("skip_realtime_gateway",!1),r[0]=n[2]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreBeginHandlingFireForgetTasksForQueueStoredProcedure",e.__tables__=["pending_fire_and_forget_tasks"],a.exports=e}),null);
__d("LSBeginHandlingFireForgetTasksForQueueStoredProcedure",["LSBeginHandlingFireForgetTasksForQueue","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBeginHandlingFireForgetTasksForQueue"),a.queueName);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSForceTaskExecutionImmediately",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?0:(o=i.item,n[1]=t.i64.of_float(Date.now()),t.i64.lt(n[1],o.minTimeToSyncTimestampMs)?t.forEach(t.db.table(2).fetch([[[e[0]]]]),function(e){var n=e.update,r=e.item;return n({minTimeToSyncTimestampMs:t.i64.cast([0,0]),failureCount:t.i64.add(r.failureCount,t.i64.cast([0,1]))})}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreForceTaskExecutionImmediatelyStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSRemoveUsedTokens",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(309).fetch(),function(e){return t.i64.le(e.redeemLimit,t.i64.cast([0,0]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSAnonymousCredentialsRemoveUsedTokensStoredProcedure",e.__tables__=["secure_acs_tokens"],a.exports=e}),null);
__d("LSGetCurrentTokenPoolState",["LSArrayGetObjectAt","LSRemoveBlindedTokens","LSRemoveUsedTokens"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),r[1]=t.createArray(),t.count(t.filter(t.db.table(307).fetch(),function(t){return t.projectName===e[0]})).then(function(e){return r[2]=e})},function(n){return t.forEach(t.filter(t.db.table(307).fetch(),function(t){return t.projectName===e[0]}),function(e){var n=e.item;return r[7]=n.configId,t.i64.gt(r[0],n.expirationTimestampMs)?t.forEach(t.db.table(307).fetch([[[r[7]]]]),function(e){return e.delete()}):t.resolve(r[8]=(r[1].push(r[7]),r[1]))})},function(e){return t.storedProcedure(n("LSRemoveUsedTokens"))},function(e){return r[3]=t.i64.cast([0,0]),r[4]=t.i64.of_int32(r[1].length),t.i64.gt(r[4],t.i64.cast([0,0]))?t.loopAsync(r[4],function(e){return r[7]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[1],r[7]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],t})},function(e){return t.count(t.filter(t.db.table(309).fetch(),function(e){return e.configId===r[8]})).then(function(e){return r[10]=e})},function(e){return r[3]=t.i64.add(r[10],r[3]),t.storedProcedure(n("LSRemoveBlindedTokens"),r[8])}])}):t.resolve()},function(e){var n;return t.i64.gt(r[2],t.i64.cast([0,0]))?(r[7]=t.i64.of_int32(r[1].length),r[5]=t.i64.ge(r[7],t.i64.cast([0,1]))):r[5]=void 0,r[5]!==void 0?(r[5]?(t.i64.gt(r[3],t.i64.cast([0,0]))?r[8]=t.i64.cast([0,3]):r[8]=t.i64.cast([0,2]),r[7]=r[8]):r[7]=t.i64.cast([0,1]),r[6]=r[7]):r[6]=t.i64.cast([0,0]),n=[r[6],r[3]],o[0]=n[0],o[1]=n[1]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsGetCurrentTokenPoolStateStoredProcedure",e.__tables__=["secure_acs_configurations","secure_acs_tokens"],a.exports=e}),null);
__d("LSVoprfBlind.nop",["XPlatReactVoprf","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("XPlatReactVoprf").loadXPlatReactVoprf(),a=r.voprfInstance,i=a.voprfInfo,l=a.voprfWasm;try{var s=l.blind(i,new Uint8Array(n));return[s.blindedElement.buffer,s.blindingFactor.buffer]}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(a)}});function t(t,n,r){return e.apply(this,arguments)}return t})();e.__nop_name__="LSVoprfBlind",l.default=e}),98);
__d("LSVoprfCreateNonce.nop",["LSSynchronousPromise","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e=32,s=function(n,r){var t=e,a=new Uint8Array(t);return o("XPlatReactCrypto").getRandomValues(a),o("LSSynchronousPromise").makeSynchronousPromise([a.buffer])};s.__nop_name__="LSVoprfCreateNonce",l.default=s}),98);
__d("LSTaskSerializerAcsIssueNextSync",["LSBase64Encode.nop","LSGetCurrentTokenPoolState","LSIssueNextSync","LSVoprfBlind.nop","LSVoprfCreateNonce.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.db.table(310).fetch([[[e[0]]]]).next().then(function(e,o){var a,i=e.done,l=e.value;return i?((function(e){t.logger(e).mustfix(e)})("Request context for the passed task_id was not found"),a=[void 0,void 0,void 0],r[0]=a[0],r[1]=a[1],r[2]=a[2]):(o=l.item,t.sequence([function(e){return r[9]=o.projectName,r[10]=o.maxClientTokenPoolSize,t.storedProcedure(n("LSGetCurrentTokenPoolState"),r[9]).then(function(e){var t;return t=e,r[4]=t[0],r[5]=t[1],t})},function(e){var o;return t.i64.eq(r[4],t.i64.cast([0,0]))||t.i64.eq(r[4],t.i64.cast([0,1]))?t.resolve((r[11]=new t.Map,r[11].set("project_name",r[9]),r[12]=t.toJSON(r[11]),o=[r[12],t.i64.cast([0,351]),void 0],r[6]=o[0],r[7]=o[1],r[8]=o[2])):t.sequence([function(e){return r[11]=t.i64.of_float(Date.now()),t.islc(t.sortBy(t.filter(t.db.table(307).fetch(),function(e){return e.projectName===r[9]&&t.i64.gt(e.expirationTimestampMs,r[11])}),[["expirationTimestampMs","DESC"]]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?((function(e){t.logger(e).mustfix(e)})("A config for the passed project name was not found"),r[16]=new t.Map,r[16].set("project_name",r[9]),r[16].set("max_client_token_pool_size",r[10]),r[17]=t.toJSON(r[16]),a=[r[17],t.i64.cast([0,362]),void 0],r[12]=a[0],r[13]=a[1],r[14]=a[2]):(o=l.item,t.sequence([function(e){return r[24]=o.configId,r[16]=o.maxEvals,r[26]=o.tokenPollFrequencyMs,r[25]=o.maxClientTokenPoolSize,r[17]=t.i64.sub(r[10],r[5]),r[23]=t.i64.lt(r[16],r[17])?r[16]:r[17],r[18]=t.createArray(),t.i64.gt(r[23],t.i64.cast([0,0]))?t.loopAsync(r[23],function(e){return r[27]=e,t.sequence([function(e){return t.nativeOperation(n("LSVoprfCreateNonce.nop")).then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return t.blobs.neq(r[28],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSVoprfBlind.nop"),r[28]).then(function(e){var t;return t=e,r[29]=t[0],r[30]=t[1],t})},function(e){return t.blobs.neq(r[29],void 0)&&t.blobs.neq(r[30],void 0)?t.sequence([function(e){return r[31]=t.i64.cast([-1,4294967295]),t.db.table(308).peekNextAutoIncrementId().then(function(e){return r[31]=e})},function(e){return t.db.table(308).add({tokenId:void 0,blindedNonce:r[29],blindingFactor:r[30],nonce:r[28],configId:r[24]})},function(e){return t.db.table(308).fetch([[[r[31]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[32]=t.i64.cast([-1,4294967295]):(n=a.item,r[32]=n.tokenId)})},function(e){return t.i64.eq(r[32],t.i64.cast([-1,4294967295]))?t.sequence([function(e){return t.islc(t.db.table(308).fetchDesc([[[{gt:t.i64.cast([0,0])}]]]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o=e.done,a=e.value;return o?r[37]=t.i64.cast([-1,4294967295]):(n=a.item,r[37]=n.tokenId)})},function(e){return r[34]=r[37]}]):t.resolve(r[34]=r[32])},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[29]).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[36]=new t.Map,r[36].set("id",r[34]),r[36].set("data",r[35]==null?"":r[35]),r[37]=(r[18].push(r[36]),r[18])}]):t.resolve()}]):t.resolve()}])}):t.resolve()},function(e){var o;return r[19]=t.i64.of_int32(r[18].length),t.i64.gt(r[19],t.i64.cast([0,0]))?t.resolve((r[27]=new t.Map,r[27].set("project_name",r[9]),r[27].set("config_id",r[24]),r[27].set("blinded_nonces",r[18]),r[28]=t.toJSON(r[27]),o=[r[28],t.i64.cast([0,354]),void 0],r[20]=o[0],r[21]=o[1],r[22]=o[2])):t.sequence([function(e){var o;return t.i64.neq(r[26],void 0)?t.sequence([function(e){var o;return t.i64.neq(r[25],void 0)?t.sequence([function(e){return(function(e){t.logger(e).info(e)})(["Already have the max number of tokens. Scheduling next ACS token sync locally for project: ",r[9]].join("")),t.storedProcedure(n("LSIssueNextSync"),r[25],r[9],r[26],!1)},function(e){var t;return t=[void 0,void 0,void 0],r[30]=t[0],r[31]=t[1],r[32]=t[2],t}]):t.resolve(((function(e){t.logger(e).info(e)})(["token_poll_frequency is nonnull but max_client_token_pool_size is null. Already have the max number of tokens. Scheduling the next ACS token sync for project: ",r[9]].join("")),r[33]=new t.Map,r[33].set("project_name",r[9]),r[33].set("max_client_token_pool_size",r[10]),r[34]=t.toJSON(r[33]),o=[r[34],t.i64.cast([0,362]),void 0],r[30]=o[0],r[31]=o[1],r[32]=o[2]))},function(e){var t;return t=[r[30],r[31],r[32]],r[27]=t[0],r[28]=t[1],r[29]=t[2],t}]):t.resolve(((function(e){t.logger(e).info(e)})(["Already have the max number of tokens. Scheduling the next ACS token sync for project: ",r[9]].join("")),r[30]=new t.Map,r[30].set("project_name",r[9]),r[30].set("max_client_token_pool_size",r[10]),r[31]=t.toJSON(r[30]),o=[r[31],t.i64.cast([0,362]),void 0],r[27]=o[0],r[28]=o[1],r[29]=o[2]))},function(e){var t;return t=[r[27],r[28],r[29]],r[20]=t[0],r[21]=t[1],r[22]=t[2],t}])},function(e){var t;return t=[r[20],r[21],r[22]],r[12]=t[0],r[13]=t[1],r[14]=t[2],t}]))})},function(e){var t;return t=[r[12],r[13],r[14]],r[6]=t[0],r[7]=t[1],r[8]=t[2],t}])},function(e){var t;return t=[r[6],r[7],r[8]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}]))})},function(e){var t;return t=[r[0],r[1],r[2]],o[0]=t[0],o[1]=t[1],o[2]=t[2],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsTaskSerializerAcsIssueNextSyncStoredProcedure",e.__tables__=["acs_request_context","secure_acs_configurations","secure_acs_blinded_tokens"],a.exports=e}),null);
__d("LSTaskSerializerDeleteChatHistory",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i=r.done,l=r.value;return i?(n[4]=t.createArray(),n[5]=(n[4].push("taskSerializerDeleteChatHistory: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=l.item,t.sequence([function(e){return n[8]=o.threadKey,t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o,a=e.done,i=e.value;return a?(n[9]=t.createArray(),n[10]=(n[9].push("taskSerializerDeleteChatHistory: Thread not found"),n[9]),n[11]=(n[9].push(n[8]),n[9]),n[12]=t.toJSON(n[9]),(function(e){t.logger(e).mustfix(e)})(n[12]),o=[void 0,void 0,void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]):(r=i.item,t.sequence([function(e){return t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[9]=t.i64.cast([0,1]):(r=a.item,n[14]=r.syncGroup,t.i64.neq(n[14],void 0)?n[13]=n[14]:n[13]=t.i64.cast([0,1]),n[9]=n[13])})},function(e){var r;return n[11]=new t.Map,n[11].set("thread_key",n[8]),n[11].set("sync_group",n[9]),n[12]=t.toJSON(n[11]),r=[n[12],t.i64.cast([0,903]),void 0],n[4]=r[0],n[5]=r[1],n[6]=r[2]}]))})},function(e){var t;return t=[n[4],n[5],n[6]],n[0]=t[0],n[1]=t[1],n[2]=t[2],t}]))})},function(e){var t;return t=[n[0],n[1],n[2]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerDeleteChatHistoryStoredProcedure",e.__tables__=["threads_optimistic_context","threads"],a.exports=e}),null);
__d("LSTaskSerializerE2eeMessageIntegrityCheckV2",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,n.i64.cast([0,705]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerE2eeMessageIntegrityCheckV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerE2eeMetadataThreadIntegrityCheck",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,n.i64.cast([0,700]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTaskSerializerE2eeMetadataThreadIntegrityCheckStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupAction",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,n.i64.cast([0,319]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupActionStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsLoopingUpload",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] Beginning execution."),r[1]=t.i64.of_float(Date.now()),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] LSEncryptedBackupsLoopingUploadPayloadsTable table not found"),r[3]="LSEncryptedBackupsLoopingUploadPayloadsTable table not found",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] ","",r[3]].join("")),r[2]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure",r[3],r[2],t.i64.cast([0,3]))},function(e){return r[4]=t.i64.of_float(Date.now()),r[5]=t.i64.random(),r[7]="Finishing execution. Execution time: ",r[8]=t.i64.to_string(t.i64.sub(r[4],r[0])),r[9]=" ms",r[6]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] ",r[6],r[7],r[6],r[8],r[6],r[9]].join("")),t.i64.eq(t.i64.mod_(r[5],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[10]=",",r[11]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsLoopingUpload",[r[7],r[10],r[8],r[10],r[9]].join(""),r[11],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=['{"request_id":"unknown","upload_type":"FBN","payload":{"error_code":2,"operation":"","error_message":"","__typename":"MPSUploadFailurePayload"}}',t.i64.cast([0,50043]),void 0],o[0]=n[0],o[1]=n[1],o[2]=n[2],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSGetBlobFromString.nop",["CryptoLogger","LSResult","LSSynchronousPromise","XPlatReactTextEncoder","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){var e=new(o("XPlatReactTextEncoder")).TextEncoder;try{var i=e.encode(a).buffer;return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(i))}catch(e){var l=r("getErrorSafe")(e),s=o("CryptoLogger").CryptoLogger("get_blob_from_string");throw s.catching(l).mustfix(l.message),l}};e.__nop_name__="LSGetBlobFromString",l.default=e}),98);
__d("LSQueryLocalPersistenceStoreForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i){var l=yield o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.local_message_persistence_store).filter(function(e){var t=e.offlineThreadingId,n=e.threadId;return n===a&&i===t}));if(l.length===0)return(e||(e=n("Promise"))).resolve([void 0,void 0,!1]);var s=l[0];return(e||(e=n("Promise"))).resolve([s.messagePayload,s.messageTimestampMs,!1])});function r(e,n,r,o){return t.apply(this,arguments)}return r})();s.__nop_name__="LSQueryLocalPersistenceStoreForBackup",l.default=s}),98);
__d("LSQueryLocalPersistenceStoreSupplementalForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i,l){var s=yield o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.local_message_persistence_store_supplemental).filter(function(e){var t=e.supplementalKey,n=e.threadId,r=e.toplevelOfflineThreadingId;return n===a&&r===i&&t===l}));return s==null?(e||(e=n("Promise"))).resolve([void 0,void 0]):(e||(e=n("Promise"))).resolve([s.messagePayload,s.messageTimestampMs])});function r(e,n,r,o,a){return t.apply(this,arguments)}return r})();s.__nop_name__="LSQueryLocalPersistenceStoreSupplementalForBackup",l.default=s}),98);
__d("LSQueryLocalPersistenceStoreTagsForBackup.nop",["LSVec","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=":",u=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l){var u=yield o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.local_message_persistence_store_tag_index.index("offlineThreadingId")).getKeyRange(l,i));if(u==null)return(e||(e=n("Promise"))).resolve([r("LSVec").ofArray([])]);var c=u.tag;return(e||(e=n("Promise"))).resolve([r("LSVec").ofArray(c.split(s))])});function a(e,n,r,o){return t.apply(this,arguments)}return a})();u.__nop_name__="LSQueryLocalPersistenceStoreTagsForBackup",l.default=u}),98);
__d("LSLoadUnencryptedProtobufWithInputs",["LSBase64Encode.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadUnencryptedProtobufWithInputs] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.i64.eq(e[0],t.i64.cast([0,1]))?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[10]=t[0],r[11]=t[1],r[12]=t[2],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(o){var a,i,l;return t.blobs.neq(r[10],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[10]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(n){var o,a,i;return r[16]!==void 0?(r[13]!==void 0?(r[21]=new t.Map,r[21].set("message_tags",r[13]),r[22]=t.toJSON(r[21]),r[19]=r[22]):r[19]=void 0,r[20]=new t.Map,r[20].set("backup_action",e[0]),r[20].set("protobuf_encrypted",r[16]),r[20].set("supplemental_data_encrypted",void 0),r[20].set("timestamp_ms",e[4]),r[20].set("message_tags",r[19]),o=[r[20],void 0],r[17]=o[0],r[18]=o[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,68])),r[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[19].set("error_message",""),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]),i=[r[17],r[18]],r[14]=i[0],r[15]=i[1]}]):t.resolve((r[12]?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),r[18]=new t.Map,r[18].set("error_code",t.i64.cast([0,70])),r[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[18].set("error_message",""),a=[void 0,r[18]],r[16]=a[0],r[17]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),r[18]=new t.Map,r[18].set("error_code",t.i64.cast([0,63])),r[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[18].set("error_message",""),i=[void 0,r[18]],r[16]=i[0],r[17]=i[1]),l=[r[16],r[17]],r[14]=l[0],r[15]=l[1]))},function(e){var t;return t=[r[14],r[15]],r[2]=t[0],r[3]=t[1],t}]):t.sequence([function(o){var a,i,l;return t.i64.eq(e[0],t.i64.cast([0,2]))?t.sequence([function(o){var a;return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),e[1],e[2],e[3]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){var a;return t.blobs.neq(r[14],void 0)?t.sequence([function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[3]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(o){var a;return t.blobs.neq(r[19],void 0)?t.sequence([function(e){return r[22]=new t.Map,r[22].set("sk_ciphertext",r[19]),r[22].set("sk_hash",r[19]),t.nativeOperation(n("LSBase64Encode.nop"),r[14]).then(function(e){var t;return t=e,r[23]=t[0],t})},function(n){var o,a,i;return r[23]!==void 0?(r[16]!==void 0?(r[28]=new t.Map,r[28].set("message_tags",r[16]),r[29]=t.toJSON(r[28]),r[26]=r[29]):r[26]=void 0,r[27]=new t.Map,r[27].set("backup_action",e[0]),r[27].set("protobuf_encrypted",r[23]),r[27].set("supplemental_data_encrypted",r[22]),r[27].set("timestamp_ms",e[4]),r[27].set("message_tags",r[26]),o=[r[27],void 0],r[24]=o[0],r[25]=o[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),r[26]=new t.Map,r[26].set("error_code",t.i64.cast([0,68])),r[26].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[26].set("error_message",""),a=[void 0,r[26]],r[24]=a[0],r[25]=a[1]),i=[r[24],r[25]],r[20]=i[0],r[21]=i[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_FORMATTING_FAILED"),r[22]=new t.Map,r[22].set("error_code",t.i64.cast([0,69])),r[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[22].set("error_message",""),a=[void 0,r[22]],r[20]=a[0],r[21]=a[1]))},function(e){var t;return t=[r[20],r[21]],r[17]=t[0],r[18]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,64])),r[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[19].set("error_message",""),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]))},function(e){var t;return t=[r[17],r[18]],r[12]=t[0],r[13]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),r[14]=new t.Map,r[14].set("error_code",t.i64.cast([0,65])),r[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[14].set("error_message",""),a=[void 0,r[14]],r[12]=a[0],r[13]=a[1]))},function(e){var t;return t=[r[12],r[13]],r[10]=t[0],r[11]=t[1],t}]):t.resolve((t.i64.eq(e[0],t.i64.cast([0,3]))?(r[14]=new t.Map,r[14].set("backup_action",e[0]),r[14].set("protobuf_encrypted",void 0),r[14].set("supplemental_data_encrypted",void 0),r[14].set("timestamp_ms",e[4]),r[14].set("message_tags",void 0),a=[r[14],void 0],r[12]=a[0],r[13]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error INVALID_BACKUP_OPERATION"),r[14]=new t.Map,r[14].set("error_code",t.i64.cast([-1,4294967289])),r[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[14].set("error_message",""),i=[void 0,r[14]],r[12]=i[0],r[13]=i[1]),l=[r[12],r[13]],r[10]=l[0],r[11]=l[1]))},function(e){var t;return t=[r[10],r[11]],r[2]=t[0],r[3]=t[1],t}])},function(e){return r[4]=t.i64.of_float(Date.now()),r[5]=t.i64.random(),r[7]="Finishing execution. Execution time: ",r[8]=t.i64.to_string(t.i64.sub(r[4],r[0])),r[9]=" ms",r[6]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadUnencryptedProtobufWithInputs] ",r[6],r[7],r[6],r[8],r[6],r[9]].join("")),t.i64.eq(t.i64.mod_(r[5],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[10]=",",r[11]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufWithInputs",[r[7],r[10],r[8],r[10],r[9]].join(""),r[11],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[2],r[3]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSLoadUnencryptedProtobufBackupSerializedPayloadData",["LSLoadUnencryptedProtobufWithInputs","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){var o;return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[18]=t.i64.mul(r[1],t.i64.cast([0,1e6])),t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,o){var a,i,l=n.done,s=n.value;return l?(r[30]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(r[30],t.i64.cast([0,1e6])),r[18]),void 0],r[22]=a[0],r[23]=a[1],r[24]=a[2],r[25]=a[3],r[26]=a[4],r[27]=a[5],r[28]=a[6]):(o=s.item,r[30]=t.i64.of_float(Date.now()),i=[e[0],o.queueName,o.enqueueTimestampMs,o.priority,o.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(r[30],t.i64.cast([0,1e6])),r[18]),void 0],r[22]=i[0],r[23]=i[1],r[24]=i[2],r[25]=i[3],r[26]=i[4],r[27]=i[5],r[28]=i[6])})},function(e){var t;return t=[r[22],r[23],r[24],r[25],r[26],r[27],r[28]],r[2]=t[0],r[3]=t[1],r[4]=t[2],r[5]=t[3],r[6]=t[4],r[7]=t[5],r[8]=t[6],t}])},function(o){return r[9]=new t.Map,r[9].set("task_id",r[2]),r[9].set("queue_name",r[3]),r[9].set("enqueue_timestamp_ms",r[4]),r[9].set("priority",r[5]),r[9].set("first_executed_timestamp_ms",r[6]),r[9].set("execution_time_ns",r[7]),r[9].set("echo_encoding_execution_time_ns",r[8]),r[10]=new t.Map,r[10].set("task_metadata",r[9]),r[10].set("action_type",void 0),r[10].set("content_type",void 0),r[10].set("identifiers",void 0),r[10].set("identifiers_v2",void 0),r[10].set("task_creation_source",void 0),r[10].set("message_payload_source",t.i64.cast([0,2])),t.filter(t.db.table(305).fetch(),function(n){return t.i64.eq(n.pendingBackupTaskId,e[0])}).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(r[22]=new t.Map,r[22].set("error_code",t.i64.cast([0,5])),r[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure"),r[22].set("error_message",""),i=[void 0,r[22],r[10]],r[11]=i[0],r[12]=i[1],r[13]=i[2]):(a=s.item,t.sequence([function(n){var o;return r[39]=a.actThreadId,r[40]=a.toplevelOfflineThreadingId,r[23]=a.messageTimestampMs,r[22]=new t.Map,r[22].set("backup_id","openEbUploadGenericBackupId"),r[22].set("act_thread_id",r[39]),r[22].set("server_thread_id",r[39]),r[22].set("timestamp",t.i64.to_string(r[23])),r[22].set("otid",r[40]),r[24]=new t.Map,r[24].set("backup_id","openEbUploadGenericBackupId"),r[24].set("act_thread_id",r[39]),r[24].set("timestamp",t.i64.to_string(r[23])),r[24].set("otid",r[40]),t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,o){var a,i,l=n.done,s=n.value;return l?(r[49]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(r[49],t.i64.cast([0,1e6])),r[18]),void 0],r[41]=a[0],r[42]=a[1],r[43]=a[2],r[44]=a[3],r[45]=a[4],r[46]=a[5],r[47]=a[6]):(o=s.item,r[49]=t.i64.of_float(Date.now()),i=[e[0],o.queueName,o.enqueueTimestampMs,o.priority,o.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(r[49],t.i64.cast([0,1e6])),r[18]),void 0],r[41]=i[0],r[42]=i[1],r[43]=i[2],r[44]=i[3],r[45]=i[4],r[46]=i[5],r[47]=i[6])})},function(e){var t;return t=[r[41],r[42],r[43],r[44],r[45],r[46],r[47]],r[25]=t[0],r[26]=t[1],r[27]=t[2],r[28]=t[3],r[29]=t[4],r[30]=t[5],r[31]=t[6],t}])},function(e){return r[32]=new t.Map,r[32].set("task_id",r[25]),r[32].set("queue_name",r[26]),r[32].set("enqueue_timestamp_ms",r[27]),r[32].set("priority",r[28]),r[32].set("first_executed_timestamp_ms",r[29]),r[32].set("execution_time_ns",r[30]),r[32].set("echo_encoding_execution_time_ns",r[31]),r[33]=new t.Map,r[33].set("task_metadata",r[32]),r[33].set("action_type",void 0),r[33].set("content_type",void 0),r[33].set("identifiers",void 0),r[33].set("identifiers_v2",r[24]),r[33].set("task_creation_source",void 0),r[33].set("message_payload_source",t.i64.cast([0,2])),t.storedProcedure(n("LSLoadUnencryptedProtobufWithInputs"),a.backupAction,r[39],r[40],a.supplementalKey,r[23],r[22]).then(function(e){var t;return t=e,r[34]=t[0],r[35]=t[1],t})},function(e){var n,o,i;return r[34]!==void 0?(r[41]=new t.Map,r[41].set("unencrypted_protobuf_backup_payload",r[34]),r[41].set("message_identifiers",r[22]),r[41].set("attachment_backup_payload",a.attachmentPayload),r[41].set("sender_id",a.senderId),r[41].set("extra_data_for_eb_upload",void 0),n=[r[41],void 0,r[33]],r[36]=n[0],r[37]=n[1],r[38]=n[2]):(o=[void 0,r[35],r[33]],r[36]=o[0],r[37]=o[1],r[38]=o[2]),i=[r[36],r[37],r[38]],r[11]=i[0],r[12]=i[1],r[13]=i[2]}]))})},function(e){return r[15]=t.i64.of_float(Date.now()),r[16]=t.i64.random(),r[19]="Finishing execution. Execution time: ",r[20]=t.i64.to_string(t.i64.sub(r[15],r[0])),r[21]=" ms",r[17]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] ",r[17],r[19],r[17],r[20],r[17],r[21]].join("")),t.i64.eq(t.i64.mod_(r[16],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[22]=",",r[23]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufBackupSerializedPayloadData",[r[19],r[22],r[20],r[22],r[21]].join(""),r[23],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[11],r[12],r[13]],o[0]=t[0],o[1]=t[1],o[2]=t[2],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure",e.__tables__=["pending_tasks","pending_protobuf_backups_context"],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsOpenUpload",["LSArrayGetObjectAt","LSBase64Encode.nop","LSDeserializeFromJsonIntoDictionaryV2.nop","LSLoadUnencryptedProtobufBackupSerializedPayloadData","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSLoadUnencryptedProtobufBackupSerializedPayloadData"),e[0]).then(function(e){var t;return t=e,r[2]=t[0],r[3]=t[1],r[4]=t[2],t})},function(e){var o,a,i;return r[2]!==void 0?t.sequence([function(e){return r[15]=r[2].get("message_identifiers"),r[16]=r[2].get("unencrypted_protobuf_backup_payload"),r[17]=r[15].get("server_thread_id"),r[18]=r[15].get("timestamp"),r[19]=r[15].get("otid"),r[20]=r[15].get("act_thread_id"),r[21]=new t.Map,r[21].set("server_thread_key",r[17]),r[21].set("timestamp",r[18]),r[21].set("otid",r[19]),r[21].set("wa_thread_id",t.i64.from_string(r[20])),r[22]=new t.Map,r[22].set("message_identifiers",r[21]),r[23]=r[2].get("extra_data_for_eb_upload"),r[23]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[23]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return r[33]=new t.Map,r[34]=r[32].keys(),r[35]=t.i64.of_int32(r[34].length),t.i64.gt(r[35],t.i64.cast([0,0]))?t.loopAsync(r[35],function(e){return r[36]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[34],r[36]).then(function(e){var t;return t=e,r[37]=t[0],r[38]=t[1],t})},function(e){return r[39]=r[32].get(r[37]),r[33].set(r[37],r[39])}])}):t.resolve()},function(e){return r[24]=r[33]}]):t.resolve(r[24]=void 0)},function(e){return r[24]!==void 0?t.sequence([function(e){return r[32]=r[24].get("mt"),r[32]?r[33]=!1:r[33]=!0,r[33]?t.resolve(r[34]=void 0):t.sequence([function(e){return r[36]=new t.Map,r[37]=r[32].keys(),r[38]=t.i64.of_int32(r[37].length),t.i64.gt(r[38],t.i64.cast([0,0]))?t.loopAsync(r[38],function(e){return r[39]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[39]).then(function(e){var t;return t=e,r[40]=t[0],r[41]=t[1],t})},function(e){return r[42]=r[32].get(r[40]),r[36].set(r[40],r[42])}])}):t.resolve()},function(e){return r[34]=r[36]}])},function(e){return r[34]!==void 0?(r[36]=t.toJSON(r[34]),r[35]=r[36]):r[35]=void 0,r[25]=r[35]}]):t.resolve(r[25]=void 0)},function(e){return r[26]=r[16].get("supplemental_data_encrypted"),r[26]!==void 0?t.sequence([function(e){return r[32]=r[16].get("protobuf_encrypted"),r[33]=r[16].get("backup_action"),r[34]=r[16].get("timestamp_ms"),r[35]=r[26].get("sk_ciphertext"),t.nativeOperation(n("LSBase64Encode.nop"),r[35]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[37]=r[26].get("sk_hash"),t.nativeOperation(n("LSBase64Encode.nop"),r[37]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[39]=new t.Map,r[39].set("supplementary_data_key",void 0),r[39].set("encrypted_protobuf",r[32]),r[39].set("key_value_backup_action",r[33]),r[39].set("protobuf_ts_ms",r[34]),r[39].set("supplemental_key_ciphertext",r[36]),r[39].set("supplemental_key_hash",r[38]),r[39].set("message_tags",r[25]),r[27]=r[39]}]):t.resolve((r[32]=r[16].get("protobuf_encrypted"),r[33]=r[16].get("backup_action"),r[34]=r[16].get("timestamp_ms"),r[35]=new t.Map,r[35].set("supplementary_data_key",void 0),r[35].set("encrypted_protobuf",r[32]),r[35].set("key_value_backup_action",r[33]),r[35].set("protobuf_ts_ms",r[34]),r[35].set("message_tags",r[25]),r[27]=r[35]))},function(e){return r[22].set("key_value_backup_unencrypted_payload",r[27]),r[28]=r[2].get("sender_id"),r[22].set("sender_id",r[28]),r[29]=r[2].get("attachment_backup_payload"),r[29]!==void 0&&r[22].set("attachment_backup_payload",r[29]),r[24]!==void 0?t.sequence([function(e){return r[32]=r[24].get("ttd"),r[32]?r[33]=!1:r[33]=!0,r[33]?t.resolve(r[34]=void 0):t.sequence([function(e){return r[36]=new t.Map,r[37]=r[32].keys(),r[38]=t.i64.of_int32(r[37].length),t.i64.gt(r[38],t.i64.cast([0,0]))?t.loopAsync(r[38],function(e){return r[39]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[39]).then(function(e){var t;return t=e,r[40]=t[0],r[41]=t[1],t})},function(e){return r[42]=r[32].get(r[40]),r[36].set(r[40],r[42])}])}):t.resolve()},function(e){return r[34]=r[36]}])},function(e){return r[34]!==void 0?(r[36]=t.toJSON(r[34]),r[35]=r[36]):r[35]=void 0,r[30]=r[35]}]):t.resolve(r[30]=void 0)},function(e){var n;return r[30]!==void 0&&r[22].set("tags_to_delete",r[30]),r[31]=t.toJSON(r[22]),n=[r[31],void 0,r[4]],r[5]=n[0],r[6]=n[1],r[7]=n[2]}]):t.resolve((r[3]?r[15]=!1:r[15]=!0,r[15]?(a=[void 0,void 0,r[4]],r[16]=a[0],r[17]=a[1],r[18]=a[2]):(o=[void 0,r[3],r[4]],r[16]=o[0],r[17]=o[1],r[18]=o[2]),i=[r[16],r[17],r[18]],r[5]=i[0],r[6]=i[1],r[7]=i[2]))},function(e){return r[15]=new t.Map,r[16]=r[15].set("success",r[5]),r[17]=r[15].set("failure",r[6]),r[18]=r[15].set("context",r[7]),r[19]=t.toJSON(r[15]),r[8]=r[19],r[9]=t.i64.of_float(Date.now()),r[10]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[9],r[0])),r[14]=" ms",r[11]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] ",r[11],r[12],r[11],r[13],r[11],r[14]].join("")),t.i64.eq(t.i64.mod_(r[10],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsOpenUpload",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=[r[8],t.i64.cast([0,50048])],o[0]=n[0],o[1]=n[1],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsOpenUploadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsRestoreWithSerializer",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,void 0,void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSCreateDerivedKeys.nop",["CreateDerivedKeys","LSVec"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a,i,l,s){return o("CreateDerivedKeys").CreateDerivedKeys(a,i,l,r("LSVec").toArray(s))};e.__nop_name__="LSCreateDerivedKeys",l.default=e}),98);
__d("LSDeriveValueSecretRefV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][deriveValueSecretRefV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]=e[2].get("message_payload_encryption_keys"),r[3]=r[2].get("encryption_version"),r[4]=r[2].get("epoch_anon_id"),r[5]=r[2].get("epoch_root_key"),r[6]=r[2].get("payload_key"),r[7]=t.createArray(),r[41]=(r[7].push(t.i64.cast([0,6])),r[7]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(e){var t;return t=e,r[8]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[8],void 0,r[4],r[7]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return r[9]?r[10]=!1:r[10]=!0,r[10]?t.resolve(r[11]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[9],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[11]=r[43]==null?"":r[43]}])},function(e){return r[12]=t.createArray(),r[41]=(r[12].push(t.i64.cast([0,6])),r[12]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(e){var t;return t=e,r[13]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[13],void 0,r[5],r[12]).then(function(e){var t;return t=e,r[14]=t[0],t})},function(e){return r[14]?r[15]=!1:r[15]=!0,r[15]?t.resolve(r[16]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[14],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[16]=r[43]==null?"":r[43]}])},function(e){return r[17]=t.createArray(),r[41]=(r[17].push(t.i64.cast([0,6])),r[17]),t.nativeOperation(n("LSGetBlobFromString.nop"),"message_key_debug").then(function(e){var t;return t=e,r[18]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[18],void 0,r[6],r[17]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[19]?r[20]=!1:r[20]=!0,r[20]?t.resolve(r[21]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[19],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[21]=r[43]==null?"":r[43]}])},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[5]).then(function(e){var t;return t=e,r[22]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),[r[22]==null?"":r[22],e[0]].join("")).then(function(e){var t;return t=e,r[23]=t[0],t})},function(e){return r[24]=t.createArray(),r[41]=(r[24].push(t.i64.cast([0,6])),r[24]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(e){var t;return t=e,r[25]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[25],void 0,r[23],r[24]).then(function(e){var t;return t=e,r[26]=t[0],t})},function(e){return r[26]?r[27]=!1:r[27]=!0,r[27]?t.resolve(r[28]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[26],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[28]=r[43]==null?"":r[43]}])},function(e){return r[29]=":",t.blobs.neq(r[5],void 0)?t.sequence([function(e){return r[41]=t.createArray(),r[47]=(r[41].push(t.i64.cast([0,18])),r[41]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,r[5],r[41]).then(function(e){var t;return t=e,r[42]=t[0],t})},function(e){return r[42]!==void 0?t.sequence([function(e){return r[47]=t.i64.of_int32(r[42].length),t.i64.ge(r[47],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[42],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[49]=t[0],r[50]=t[1],t})},function(e){return r[48]=r[49]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[50]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[50]].join("")),r[49]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[50],r[49],t.i64.cast([0,3]))},function(e){return r[48]=void 0}])},function(e){return r[43]=r[48]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[48]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[48]].join("")),r[47]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[48],r[47],t.i64.cast([0,3]))},function(e){return r[43]=void 0}])},function(e){return t.blobs.neq(r[43],void 0)?r[44]=!0:r[44]=!1,r[44]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),t.nativeOperation(n("LSBase64Encode.nop"),r[43]).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return r[45]!==void 0?r[46]=r[45]:r[46]="encodingfailed",r[30]=r[46]}]):t.resolve(r[30]="null")},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[4]).then(function(e){var t;return t=e,r[31]=t[0],t})},function(o){return r[32]=new t.Map,r[32].set("encryption_version",r[3]),r[32].set("epoch_anon_id",r[31]==null?"":r[31]),r[32].set("message_encryption_values",[r[11],r[29],r[16],r[29],r[21],r[29],r[28]].join("")),r[32].set("root_key_fingerprint",r[30]),r[32].set("backup_id",e[1]),r[33]=t.toJSON(r[32]),r[34]=new t.Map,r[34].set("value_secret_ref",r[33]),r[35]=t.i64.of_float(Date.now()),r[36]=t.i64.random(),r[38]="Finishing execution. Execution time: ",r[39]=t.i64.to_string(t.i64.sub(r[35],r[0])),r[40]=" ms",r[37]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deriveValueSecretRefV2] ",r[37],r[38],r[37],r[39],r[37],r[40]].join("")),t.i64.eq(t.i64.mod_(r[36],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[41]=",",r[42]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deriveValueSecretRefV2",[r[38],r[41],r[39],r[41],r[40]].join(""),r[42],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[34],void 0],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsDeriveValueSecretRefV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(o,a,i){var t=Array.from(new Uint8Array(i)),l=t.map(function(e){return e.toString(16).padStart(2,"0")}),s=l.join("").toUpperCase();return(e||(e=n("Promise"))).resolve(r("LSResult")(s))};s.__nop_name__="LSBinaryToHex",l.default=s}),98);
__d("LSGetBlobFromInt64BE.nop",["GetBlobFromInt64BE"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r){return o("GetBlobFromInt64BE").GetBlobFromInt64BE(r)};e.__nop_name__="LSGetBlobFromInt64BE",l.default=e}),98);
__d("LSHmac_v2.nop",["Hmac_v2"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a){return r("Hmac_v2")(o,a)};e.__nop_name__="LSHmac_v2",l.default=e}),98);
__d("LSCryptoUtils",["FBLogger","XPlatReactTextDecoder","XPlatReactTextEncoder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return new Uint8Array(e)}function s(e){var t=new(o("XPlatReactTextEncoder")).TextEncoder;return t.encode(e)}function u(e){var t=new(o("XPlatReactTextDecoder")).TextDecoder;return t.decode(e)}function c(e){return u(new Uint8Array(e))}function d(e){return s(e).buffer}function m(e,t){var n=e.byteLength,o=t.byteLength;if(n!==o)throw r("FBLogger")("messenger_web").mustfixThrow("[LS] Mismatched lengths for modAdd, %d != %d",n,o);var a=new Uint8Array(n);return new Uint8Array(n).reduceRight(function(n,r,o){var i=e[o],l=t[o],s=i+l+n,u=s>255?[s-256,1]:[s,0];return a[o]=u[0],u[1]},0),a}l.bufToUint8=e,l.strToUint8=s,l.uint8ToStr=u,l.bufToStr=c,l.strToBuf=d,l.modAddBytes=m}),98);
__d("OcmfClientMap",["CryptoLogger","LSCryptoUtils","Promise","requireDeferred","tweetnacl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("ristretto255").__setRef("OcmfClientMap"),u=function(r,a){var t=o("tweetnacl").hash(o("LSCryptoUtils").bufToUint8(a));return(e||(e=n("Promise"))).all([t,s.load()]).then(function(e){var t=e[0],n=e[1],o=n.fromHash(new Uint8Array(t)),a=n.scalarMult(new Uint8Array(r),o);return a.buffer}).catch(function(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("ocmf_client_map"),e).mustfix("Failed OcmfClientMap."),e})};l.default=u}),98);
__d("LSOcmfClientMap.nop",["LSResult","OcmfClientMap"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a){return r("OcmfClientMap")(o,a).then(function(e){return r("LSResult")(e)})};e.__nop_name__="LSOcmfClientMap",l.default=e}),98);
__d("UInt8Array",["XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.length;if(t>0&&t%2===0&&/^[\da-f]+$/gi.test(e)){for(var n=[],r=0,o=t/2|0;r<o;++r){var a=parseInt(e.substring(r<<1,(r<<1)+2|0),16);n.push(a)}return new Uint8Array(n)}}function s(e){return o("XPlatReactCrypto").getRandomValues(new Uint8Array(e)).buffer}function u(e){var t=e.filter(function(e){return e.byteLength!==0}),n=t.reduce(function(e,t){return e+t.byteLength|0},0),r=new Uint8Array(n);return t.reduce(function(e,t){return r.set(t,e),e+t.byteLength|0},0),r}l.fromHexString=e,l.getBufferWithRandomValuesFromLength=s,l.concatBytes=u}),98);
__d("OrderPreservingEncryption",["FBLogger","LSCryptoUtils","Promise","UInt8Array","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return o("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer}function u(e){var t=e.length;return t%2!==0?"0"+e:e}function c(e){for(var t=BigInt(e),n=u(t.toString(16)),r=n.length,o=r/2,a=[],i=0;i<o;++i)a.push(i*2);return new Uint8Array(a.map(function(e){var t=e+2;return n.slice(e,t)}).map(function(e){return parseInt(e,16)}))}function d(e){var t=e.map(function(e){return e._0});return{_0:o("UInt8Array").concatBytes(t)}}function m(e){return"OPE key has length "+String(e)+", expected  "+String(32)}function p(e,t,n){var r=new ArrayBuffer(0);return o("XPlatReactCrypto").subtleImportKey("raw",e.buffer,"HKDF",!1,["deriveKey","deriveBits"]).then(function(e){return o("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:t.buffer,name:"HKDF",salt:r},e,n*8)}).then(function(e){return{_0:new Uint8Array(e)}})}function _(e,t){return{_0:o("LSCryptoUtils").modAddBytes(e._0,t)}}function f(t,a,i,l){var s=i.byteLength;if(s!==32)throw r("FBLogger")("wmi_eb").mustfixThrow(m(s));var u=l.byteLength,c=function(t,n){var e=new Uint8Array(1+u),r=new Uint8Array(u-n).fill(0);return e.set([n]),e.set(t.subarray(0,n),1),e.set(r,n+1),e};if(u>=255)throw r("FBLogger")("wmi_eb").mustfixThrow("Input is too large");var f=Array.from(l).map(function(e,n){var r=c(l,n),o=new Uint8Array(t);o[t-1]=e;var a=new Uint8Array(i);return p(a,r,t).then(function(e){return _(e,o)})});return(e||(e=n("Promise"))).all(f).then(function(e){return o("UInt8Array").concatBytes([new Uint8Array([a]),d(e)._0])})}function g(e,t,n,r){var o=c(r);return f(e,t,n,o)}l.keyGen=s,l.intStringToBEBytes=c,l.buildKeyLengthErrorMsg=m,l.encryptBigEndianBytes=f,l.encryptIntString=g}),98);
__d("OpeEncrypt",["CryptoLogger","I64","LSResult","OrderPreservingEncryption"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i=o("CryptoLogger").CryptoLogger("ope_encrypt");return o("OrderPreservingEncryption").encryptBigEndianBytes((e||(e=o("I64"))).to_int32(a),1,t,new Uint8Array(n)).then(function(e){return r("LSResult")(e.buffer)},function(e){throw o("CryptoLogger").captureError(i,e).mustfix("OpeEncrypt_impl failed"),e})}l.OpeEncrypt=s}),98);
__d("LSOpeEncrypt.nop",["OpeEncrypt"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r,a,i){return o("OpeEncrypt").OpeEncrypt(r,a,i)};e.__nop_name__="LSOpeEncrypt",l.default=e}),98);
__d("TruncateSortKey",["CryptoLogger","LSResult","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("CryptoLogger").CryptoLogger("truncate_sort_key");function u(t){if(t.byteLength!==8)throw s.mustfixThrow("Bad length on sort key for truncation");var o=new Uint8Array(t),a=o.subarray(0,2);if(a.some(function(e){return e!==0}))throw s.mustfixThrow("Bad prefix on sort key for truncation");return(e||(e=n("Promise"))).resolve(r("LSResult")(t.slice(2)))}l.TruncateSortKey=u}),98);
__d("LSTruncateSortKey.nop",["TruncateSortKey"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r){return o("TruncateSortKey").TruncateSortKey(r)};e.__nop_name__="LSTruncateSortKey",l.default=e}),98);
__d("LSEncryptIdentifiersV2",["LSBase64Encode.nop","LSBinaryToHex.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][encryptIdentifiersV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]=e[6].get("ocmf_shared_key"),t.nativeOperation(n("LSGetBlobFromString.nop"),e[2]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWFpbGJveF9pZF9zY29wZQ=="),r[3]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[2],r[4]).then(function(e){var t;return t=e,r[5]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[5]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(o){return t.i64.eq(e[0],t.i64.cast([0,2]))&&t.i64.eq(e[1],t.i64.cast([0,2]))?r[7]=e[5]:r[7]=e[3],r[8]=e[6].get("ocmf_shared_key"),t.nativeOperation(n("LSGetBlobFromString.nop"),r[7]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("dGhyZWFkX2lkX3Njb3Bl"),r[9]).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[8],r[10]).then(function(e){var t;return t=e,r[11]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[11]).then(function(e){var t;return t=e,r[12]=t[0],t})},function(o){return r[13]=e[6].get("ope_key"),t.nativeOperation(n("LSGetBlobFromInt64BE.nop"),e[4]).then(function(e){var t;return t=e,r[14]=t[0],t})},function(e){return t.nativeOperation(n("LSTruncateSortKey.nop"),r[14]).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.nativeOperation(n("LSOpeEncrypt.nop"),r[13],r[15],t.i64.cast([0,16])).then(function(e){var t;return t=e,r[16]=t[0],t})},function(e){return t.nativeOperation(n("LSBinaryToHex.nop"),r[16]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(o){return r[18]=e[6].get("ocmf_shared_key"),t.nativeOperation(n("LSGetBlobFromString.nop"),e[5]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWVzc2FnZV9pZF9zY29wZQ=="),r[19]).then(function(e){var t;return t=e,r[20]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[18],r[20]).then(function(e){var t;return t=e,r[21]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[21]).then(function(e){var t;return t=e,r[22]=t[0],t})},function(e){return r[23]=new t.Map,r[23].set("backup_id_ocmf_partial",r[6]==null?"":r[6]),r[23].set("act_thread_id_ocmf_partial",r[12]==null?"":r[12]),r[23].set("timestamp_encrypted",r[17]==null?"":r[17]),r[23].set("otid_ocmf_partial",r[22]==null?"":r[22]),r[24]=t.i64.of_float(Date.now()),r[25]=t.i64.random(),r[27]="Finishing execution. Execution time: ",r[28]=t.i64.to_string(t.i64.sub(r[24],r[0])),r[29]=" ms",r[26]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][encryptIdentifiersV2] ",r[26],r[27],r[26],r[28],r[26],r[29]].join("")),t.i64.eq(t.i64.mod_(r[25],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[30]=",",r[31]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"encryptIdentifiersV2",[r[27],r[30],r[28],r[30],r[29]].join(""),r[31],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[23],void 0],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsEncryptIdentifiersV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("SymmetricEncryptionPaddingUtils",["XPlatReactTextEncoder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e<10)return 10-e;var t=Math.floor(Math.log2(e)),n=Math.floor(Math.log2(t))+1,r=t-n,o=(1<<r)-1,a=e+o&(o^-1);return a-e}function s(t){var n=Uint32Array.BYTES_PER_ELEMENT,r=t.byteLength,o=e(r),a=n+r+o,i=new DataView(new ArrayBuffer(a));i.setUint32(0,r);var l=new Uint8Array(i.buffer);return l.set(new Uint8Array(t),n),l.buffer}function u(e){var t=new(o("XPlatReactTextEncoder")).TextEncoder,n=t.encode(e).buffer;return s(n)}function c(e){var t=Uint32Array.BYTES_PER_ELEMENT,n=new DataView(e);if(!(n.byteLength<t)){var r=e.byteLength,o=n.getUint32(0),a=r-t;if(o>=0&&o<=a)return e.slice(t,t+o)}}l.getPaddingLength=e,l.padData=s,l.pad=u,l.stripPadding=c}),98);
__d("SymmetricEncryptionCreateEncryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a,i){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_data"),l=o("SymmetricEncryptionPaddingUtils").padData(i),s=o("XPlatReactCrypto").getRandomValues(new Uint8Array(o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes)),u=new(o("HChaCha20")).HChaCha20,c=u.hChaCha20Bytes(s.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,r);return o("XPlatReactCrypto").subtleImportKey("raw",c,"AES-GCM",!1,["encrypt"]).then(function(e){return o("XPlatReactCrypto").subtleEncrypt({additionalData:a,iv:new Uint8Array(s.slice(o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},e,l)}).then(function(t){var r=s.byteLength+t.byteLength,a=new Uint8Array(r);return a.set(s),a.set(new Uint8Array(t),o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(a.buffer))}).catch(function(r){return o("CryptoLogger").captureError(t,r).mustfix("symmetric data encryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};l.default=s}),98);
__d("LSSymmetricEncryptionCreateEncryptedData.nop",["SymmetricEncryptionCreateEncryptedData"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a,i){return r("SymmetricEncryptionCreateEncryptedData")(o,a,i)};e.__nop_name__="LSSymmetricEncryptionCreateEncryptedData",l.default=e}),98);
__d("LSSymmetricEncryptionCreateEncryptedString.nop",["Base64Utils","CryptoLogger","LSCryptoUtils","LSSymmetricEncryptionCreateEncryptedData.nop","Promise","RetUtil"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_string");return r("LSSymmetricEncryptionCreateEncryptedData.nop")(a,i,l,s,o("LSCryptoUtils").strToBuf(u)).then(function(e){return e[0]}).then(function(t){return(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(t?o("Base64Utils").fromArrayBuffer(t):void 0))}).catch(function(r){return o("CryptoLogger").captureError(t,r).mustfix("symmetric string encryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};s.__nop_name__="LSSymmetricEncryptionCreateEncryptedString",l.default=s}),98);
__d("LSEncryptMessagePayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][encryptMessagePayloadV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]=e[2].get("message_payload_encryption_keys"),r[3]=r[2].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedString.nop"),r[3],t.blobs.of_string(["message_thread","_",e[1]].join("")),e[3]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(o){var a;return r[4]!==void 0?t.sequence([function(e){return r[13]=r[2].get("encryption_version"),r[14]=r[2].get("epoch_anon_id"),r[15]=r[2].get("epoch_root_key"),r[16]=r[2].get("payload_key"),r[17]=t.createArray(),r[45]=(r[17].push(t.i64.cast([0,6])),r[17]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(e){var t;return t=e,r[18]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[18],void 0,r[14],r[17]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[19]?r[20]=!1:r[20]=!0,r[20]?t.resolve(r[21]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[19],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[21]=r[47]==null?"":r[47]}])},function(e){return r[22]=t.createArray(),r[45]=(r[22].push(t.i64.cast([0,6])),r[22]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(e){var t;return t=e,r[23]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[23],void 0,r[15],r[22]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(e){return r[24]?r[25]=!1:r[25]=!0,r[25]?t.resolve(r[26]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[24],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[26]=r[47]==null?"":r[47]}])},function(e){return r[27]=t.createArray(),r[45]=(r[27].push(t.i64.cast([0,6])),r[27]),t.nativeOperation(n("LSGetBlobFromString.nop"),"message_key_debug").then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[28],void 0,r[16],r[27]).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return r[29]?r[30]=!1:r[30]=!0,r[30]?t.resolve(r[31]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[29],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[31]=r[47]==null?"":r[47]}])},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[15]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),[r[32]==null?"":r[32],e[1]].join("")).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return r[34]=t.createArray(),r[45]=(r[34].push(t.i64.cast([0,6])),r[34]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[35],void 0,r[33],r[34]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[36]?r[37]=!1:r[37]=!0,r[37]?t.resolve(r[38]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[36],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[38]=r[47]==null?"":r[47]}])},function(e){return r[39]=":",t.blobs.neq(r[15],void 0)?t.sequence([function(e){return r[45]=t.createArray(),r[51]=(r[45].push(t.i64.cast([0,18])),r[45]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,r[15],r[45]).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return r[46]!==void 0?t.sequence([function(e){return r[51]=t.i64.of_int32(r[46].length),t.i64.ge(r[51],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[46],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[53]=t[0],r[54]=t[1],t})},function(e){return r[52]=r[53]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[54]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[54]].join("")),r[53]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[54],r[53],t.i64.cast([0,3]))},function(e){return r[52]=void 0}])},function(e){return r[47]=r[52]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[52]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[52]].join("")),r[51]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[52],r[51],t.i64.cast([0,3]))},function(e){return r[47]=void 0}])},function(e){return t.blobs.neq(r[47],void 0)?r[48]=!0:r[48]=!1,r[48]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),t.nativeOperation(n("LSBase64Encode.nop"),r[47]).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return r[49]!==void 0?r[50]=r[49]:r[50]="encodingfailed",r[40]=r[50]}]):t.resolve(r[40]="null")},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[14]).then(function(e){var t;return t=e,r[41]=t[0],t})},function(n){var o;return r[42]=new t.Map,r[42].set("encryption_version",r[13]),r[42].set("epoch_anon_id",r[41]==null?"":r[41]),r[42].set("message_encryption_values",[r[21],r[39],r[26],r[39],r[31],r[39],r[38]].join("")),r[42].set("root_key_fingerprint",r[40]),r[42].set("backup_id",e[0]),r[43]=t.toJSON(r[42]),r[44]=new t.Map,r[44].set("encrypted_message_payload",r[4]),r[44].set("value_secret_ref",r[43]),o=[r[44],void 0],r[5]=o[0],r[6]=o[1]}]):t.resolve((r[13]=new t.Map,r[13].set("error_code",t.i64.cast([0,40])),r[13].set("stored_procedure","LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure"),r[13].set("error_message",""),a=[void 0,r[13]],r[5]=a[0],r[6]=a[1]))},function(e){return r[7]=t.i64.of_float(Date.now()),r[8]=t.i64.random(),r[10]="Finishing execution. Execution time: ",r[11]=t.i64.to_string(t.i64.sub(r[7],r[0])),r[12]=" ms",r[9]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][encryptMessagePayloadV2] ",r[9],r[10],r[9],r[11],r[9],r[12]].join("")),t.i64.eq(t.i64.mod_(r[8],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[13]=",",r[14]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"encryptMessagePayloadV2",[r[10],r[13],r[11],r[13],r[12]].join(""),r[14],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[5],r[6]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSGetLatestEpochKeys",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][getLatestEpochKeys] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]="",r[3]=void 0,r[4]=void 0,r[5]=void 0,e[0]?t.resolve(0):(r[15]=void 0,t.i64.neq(r[15],void 0)?t.sequence([function(e){return t.count(t.db.table(169).fetch([[[r[15]]]])).then(function(e){return r[16]=e})},function(e){return t.i64.le(r[16],t.i64.cast([0,1]))?t.sequence([function(e){return t.db.table(169).fetch([[[r[15]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[26]=new t.Map,r[26].set("error_msg","Expected a nonempty query result"),r[26].set("code",t.i64.cast([0,3])),r[26].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),r[27]=t.createArray(),r[28]=(r[27].push(r[26]),r[27]),o=[void 0,r[27]],r[22]=o[0],r[23]=o[1]):(n=l.item,r[26]=new t.Map,r[26].set("epoch_id",n.epochId),r[26].set("backup_id",n.backupId),r[26].set("epoch_anon_id_blob",n.epochAnonIdBlob),r[26].set("epoch_root_key_blob",n.epochRootKeyBlob),r[26].set("epoch_status",n.epochStatus),r[26].set("epoch_head",n.epochHead),r[26].set("authority_level",n.authorityLevel),a=[r[26],void 0],r[22]=a[0],r[23]=a[1])})},function(e){return r[25]=new t.Map,r[25].set("value",r[22]),r[25].set("errors",r[23]),r[17]=r[25]}]):t.resolve((r[22]=new t.Map,r[22].set("error_msg","Expected at most one result"),r[22].set("code",t.i64.cast([0,4])),r[22].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),r[23]=t.createArray(),r[25]=(r[23].push(r[22]),r[23]),r[24]=new t.Map,r[24].set("value",void 0),r[24].set("errors",r[23]),r[17]=r[24]))},function(e){return r[18]=r[17].get("value"),r[18]!==void 0?(r[22]=r[18].get("epoch_id"),r[23]=r[18].get("backup_id"),r[24]=r[18].get("epoch_anon_id_blob"),r[25]=r[18].get("epoch_root_key_blob"),r[26]=r[18].get("epoch_status"),r[27]=r[18].get("epoch_head"),r[28]=r[18].get("authority_level"),r[29]=r[17],r[19]=r[29]):(r[22]=r[17].get("errors"),r[23]=r[17].get("errors"),r[24]=new t.Map,r[24].set("value",void 0),r[24].set("errors",r[22]),r[19]=r[24]),r[20]=r[19].get("value"),r[20]!==void 0?(r[22]=r[20].get("epoch_id"),r[23]=r[20].get("backup_id"),r[24]=r[20].get("epoch_anon_id_blob"),r[25]=r[20].get("epoch_root_key_blob"),r[26]=r[20].get("epoch_status"),r[27]=r[20].get("epoch_head"),r[28]=r[20].get("authority_level"),r[2]=t.blobs.to_string(r[24]),r[3]=r[22],r[4]=r[25],t.blobs.neq(r[27],void 0)&&(r[5]=r[27]),r[21]=!0):(r[22]=r[19].get("errors"),r[23]=r[19].get("errors"),r[21]=!1)}]):t.resolve())},function(n){return t.i64.neq(r[3],void 0)?t.resolve(0):t.sequence([function(n){return r[15]=void 0,r[16]="",r[17]=void 0,r[18]=void 0,t.forEach(t.filter(t.db.table(169).fetch(),function(n){return e[0]||t.i64.eq(n.authorityLevel,t.i64.cast([0,80]))}),function(e){var n=e.item;return r[20]=t.blobs.to_string(n.epochAnonIdBlob),t.i64.eq([0,r[20].length],[0,r[16].length])?r[19]=r[20]>r[16]:r[19]=t.i64.gt([0,r[20].length],[0,r[16].length]),r[19]?(r[15]=n.epochId,r[16]=r[20],r[17]=n.epochRootKeyBlob,r[18]=n.epochHead):0})},function(e){return t.i64.neq(r[15],void 0)&&(r[2]=r[16],r[3]=r[15],r[4]=r[17],t.blobs.neq(r[18],void 0)&&(r[5]=r[18]),r[19]=t.i64.of_float(Date.now())),0}])},function(e){var o,a,i,l,s,u;return r[11]=t.blobs.of_string(r[2]),t.i64.neq(r[3],void 0)?(t.blobs.neq(r[11],void 0)?(t.blobs.neq(r[4],void 0)?(r[19]=new t.Map,r[19].set("epoch_id",r[3]),r[19].set("epoch_root_key",r[4]),r[19].set("epoch_anon_id",r[11]),r[19].set("epoch_head",r[5]),r[20]=new t.Map,r[20].set("epoch_keys",r[19]),o=[r[20],void 0],r[17]=o[0],r[18]=o[1]):(r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,402])),r[19].set("error_message","failed to query latest epoch"),r[19].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]),i=[r[17],r[18]],r[15]=i[0],r[16]=i[1]):(r[17]=new t.Map,r[17].set("error_code",t.i64.cast([0,403])),r[17].set("error_message","failed to query latest epoch"),r[17].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),l=[void 0,r[17]],r[15]=l[0],r[16]=l[1]),s=[r[15],r[16]],r[6]=s[0],r[7]=s[1]):(r[15]=new t.Map,r[15].set("error_code",t.i64.cast([0,400])),r[15].set("error_message","failed to query latest epoch"),r[15].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),u=[void 0,r[15]],r[6]=u[0],r[7]=u[1]),r[8]=t.i64.of_float(Date.now()),r[9]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[8],r[0])),r[14]=" ms",r[10]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][getLatestEpochKeys] ",r[10],r[12],r[10],r[13],r[10],r[14]].join("")),t.i64.eq(t.i64.mod_(r[9],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"getLatestEpochKeys",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[6],r[7]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsGetLatestEpochKeysStoredProcedure",e.__tables__=["secure_encrypted_backups_epochs"],a.exports=e}),null);
__d("LSLoadAndEncryptProtobufWithInputsV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop","LSSymmetricEncryptionCreateEncryptedData.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.i64.eq(e[0],t.i64.cast([0,1]))?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[10]=t[0],r[11]=t[1],r[12]=t[2],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(o){var a,i,l;return r[14]=new t.Map,r[14].set("message_tags",r[13]),r[15]=new t.Map,r[15].set("mt",r[14]),t.blobs.neq(r[10],void 0)?t.sequence([function(o){return r[18]=e[5].get("message_payload_encryption_keys"),r[19]=r[18].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[19],t.blobs.of_string(["message_thread","_",e[1]].join("")),r[10]).then(function(e){var t;return t=e,r[20]=t[0],t})},function(e){return t.blobs.neq(r[20],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[20]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(e){return r[21]=r[24]}]):t.resolve(r[21]=void 0)},function(o){var a;return r[21]!==void 0?t.sequence([function(e){return r[15]!==void 0?t.sequence([function(e){return r[27]=r[15].get("mt"),r[27]?r[28]=!1:r[28]=!0,r[28]?t.resolve(r[29]=void 0):t.sequence([function(e){return r[31]=new t.Map,r[32]=r[27].keys(),r[33]=t.i64.of_int32(r[32].length),t.i64.gt(r[33],t.i64.cast([0,0]))?t.loopAsync(r[33],function(e){return r[34]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[32],r[34]).then(function(e){var t;return t=e,r[35]=t[0],r[36]=t[1],t})},function(e){return r[37]=r[27].get(r[35]),r[31].set(r[35],r[37])}])}):t.resolve()},function(e){return r[29]=r[31]}])},function(e){return r[29]!==void 0?(r[31]=t.toJSON(r[29]),r[30]=r[31]):r[30]=void 0,r[24]=r[30]}]):t.resolve(r[24]=void 0)},function(n){var o;return r[15]!==void 0?(r[27]=r[15].get("mooos"),r[25]=r[27]):r[25]=void 0,r[26]=new t.Map,r[26].set("backup_action",e[0]),r[26].set("protobuf_encrypted",r[21]),r[26].set("supplemental_data_encrypted",void 0),r[26].set("timestamp_ms",e[4]),r[26].set("message_tags",r[24]),r[26].set("serialized_attachment_backup_payload",void 0),r[26].set("maybe_ooo_supplemental_upload",r[25]),o=[r[26],void 0],r[22]=o[0],r[23]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),r[24]=new t.Map,r[24].set("error_code",t.i64.cast([0,62])),r[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[24].set("error_message",""),a=[void 0,r[24]],r[22]=a[0],r[23]=a[1]))},function(e){var t;return t=[r[22],r[23]],r[16]=t[0],r[17]=t[1],t}]):t.resolve((r[12]?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),r[20]=new t.Map,r[20].set("error_code",t.i64.cast([0,70])),r[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[20].set("error_message",""),a=[void 0,r[20]],r[18]=a[0],r[19]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),r[20]=new t.Map,r[20].set("error_code",t.i64.cast([0,63])),r[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[20].set("error_message",""),i=[void 0,r[20]],r[18]=i[0],r[19]=i[1]),l=[r[18],r[19]],r[16]=l[0],r[17]=l[1]))},function(e){var t;return t=[r[16],r[17]],r[2]=t[0],r[3]=t[1],t}]):t.sequence([function(o){return t.i64.eq(e[0],t.i64.cast([0,2]))?t.sequence([function(o){var a;return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),e[1],e[2],e[3]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){var a;return r[17]=new t.Map,r[17].set("message_tags",r[16]),r[18]=new t.Map,r[18].set("mt",r[17]),t.blobs.neq(r[14],void 0)?t.sequence([function(o){var a;return e[3]!==void 0?t.sequence([function(o){var a;return r[23]=e[5].get("mailbox_root_key_v2"),t.blobs.neq(r[23],void 0)?t.sequence([function(o){return r[26]=e[5].get("message_payload_encryption_keys"),r[27]=r[26].get("epoch_root_key"),r[28]=t.createArray(),r[41]=(r[28].push(t.i64.cast([0,32])),r[28]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfcHJmX2tleQ=="),void 0,r[23],r[28]).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return r[29]!==void 0?t.sequence([function(e){return r[41]=t.i64.of_int32(r[29].length),t.i64.ge(r[41],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[29],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[43]=t[0],r[44]=t[1],t})},function(e){return r[42]=r[43]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[44]].join("")),r[43]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[44],r[43],t.i64.cast([0,3]))},function(e){return r[42]=void 0}])},function(e){return r[30]=r[42]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[42]].join("")),r[41]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[42],r[41],t.i64.cast([0,3]))},function(e){return r[30]=void 0}])},function(e){return t.blobs.neq(r[30],void 0)?r[31]=!0:r[31]=!1,r[31]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),r[32]=t.createArray(),r[41]=(r[32].push(t.i64.cast([0,32])),r[32]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfZW5jX2tleQ=="),void 0,r[27],r[32]).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return r[33]!==void 0?t.sequence([function(e){return r[41]=t.i64.of_int32(r[33].length),t.i64.ge(r[41],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[33],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[43]=t[0],r[44]=t[1],t})},function(e){return r[42]=r[43]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[44]].join("")),r[43]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[44],r[43],t.i64.cast([0,3]))},function(e){return r[42]=void 0}])},function(e){return r[34]=r[42]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[42]].join("")),r[41]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[42],r[41],t.i64.cast([0,3]))},function(e){return r[34]=void 0}])},function(o){return t.blobs.neq(r[34],void 0)?r[35]=!0:r[35]=!1,r[35]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),t.nativeOperation(n("LSGetBlobFromString.nop"),e[3]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),r[30],r[36]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[34],t.blob("c3VwcGxlbWVudGFsX2VuY19hYWQ="),r[36]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(o){var a;return t.blobs.neq(r[38],void 0)?t.sequence([function(o){return r[41]=new t.Map,r[41].set("sk_ciphertext",r[38]),r[41].set("sk_hash",r[37]),r[42]=e[5].get("message_payload_encryption_keys"),r[43]=r[42].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[43],t.blobs.of_string(["message_thread","_",e[1]].join("")),r[14]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return t.blobs.neq(r[44],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[44]).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return r[45]=r[48]}]):t.resolve(r[45]=void 0)},function(o){var a;return r[45]!==void 0?t.sequence([function(e){return r[18]!==void 0?t.sequence([function(e){return r[51]=r[18].get("mt"),r[51]?r[52]=!1:r[52]=!0,r[52]?t.resolve(r[53]=void 0):t.sequence([function(e){return r[55]=new t.Map,r[56]=r[51].keys(),r[57]=t.i64.of_int32(r[56].length),t.i64.gt(r[57],t.i64.cast([0,0]))?t.loopAsync(r[57],function(e){return r[58]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[56],r[58]).then(function(e){var t;return t=e,r[59]=t[0],r[60]=t[1],t})},function(e){return r[61]=r[51].get(r[59]),r[55].set(r[59],r[61])}])}):t.resolve()},function(e){return r[53]=r[55]}])},function(e){return r[53]!==void 0?(r[55]=t.toJSON(r[53]),r[54]=r[55]):r[54]=void 0,r[48]=r[54]}]):t.resolve(r[48]=void 0)},function(n){var o;return r[18]!==void 0?(r[51]=r[18].get("mooos"),r[49]=r[51]):r[49]=void 0,r[50]=new t.Map,r[50].set("backup_action",e[0]),r[50].set("protobuf_encrypted",r[45]),r[50].set("supplemental_data_encrypted",r[41]),r[50].set("timestamp_ms",e[4]),r[50].set("message_tags",r[48]),r[50].set("serialized_attachment_backup_payload",void 0),r[50].set("maybe_ooo_supplemental_upload",r[49]),o=[r[50],void 0],r[46]=o[0],r[47]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),r[48]=new t.Map,r[48].set("error_code",t.i64.cast([0,62])),r[48].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[48].set("error_message",""),a=[void 0,r[48]],r[46]=a[0],r[47]=a[1]))},function(e){var t;return t=[r[46],r[47]],r[39]=t[0],r[40]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_ENCRYPTION_FAILED"),r[41]=new t.Map,r[41].set("error_code",t.i64.cast([0,66])),r[41].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[41].set("error_message",""),a=[void 0,r[41]],r[39]=a[0],r[40]=a[1]))},function(e){var t;return t=[r[39],r[40]],r[24]=t[0],r[25]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error NULL_MAILBOX_ROOT_KEY_V2"),r[26]=new t.Map,r[26].set("error_code",t.i64.cast([0,27])),r[26].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[26].set("error_message",""),a=[void 0,r[26]],r[24]=a[0],r[25]=a[1]))},function(e){var t;return t=[r[24],r[25]],r[21]=t[0],r[22]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),r[23]=new t.Map,r[23].set("error_code",t.i64.cast([0,65])),r[23].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[23].set("error_message",""),a=[void 0,r[23]],r[21]=a[0],r[22]=a[1]))},function(e){var t;return t=[r[21],r[22]],r[19]=t[0],r[20]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),r[21]=new t.Map,r[21].set("error_code",t.i64.cast([0,64])),r[21].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[21].set("error_message",""),a=[void 0,r[21]],r[19]=a[0],r[20]=a[1]))},function(e){var t;return t=[r[19],r[20]],r[12]=t[0],r[13]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),r[14]=new t.Map,r[14].set("error_code",t.i64.cast([0,65])),r[14].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[14].set("error_message",""),a=[void 0,r[14]],r[12]=a[0],r[13]=a[1]))},function(e){var t;return t=[r[12],r[13]],r[10]=t[0],r[11]=t[1],t}]):t.sequence([function(o){return t.i64.eq(e[0],t.i64.cast([0,4]))?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],r[16]=t[2],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(o){var a,i,l;return r[18]=new t.Map,r[18].set("message_tags",r[17]),r[19]=new t.Map,r[19].set("mt",r[18]),t.blobs.neq(r[14],void 0)?t.sequence([function(o){return r[22]=e[5].get("message_payload_encryption_keys"),r[23]=r[22].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[23],t.blobs.of_string(["message_thread","_",e[1]].join("")),r[14]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(e){return t.blobs.neq(r[24],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[24]).then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return r[25]=r[28]}]):t.resolve(r[25]=void 0)},function(o){var a;return r[25]!==void 0?t.sequence([function(e){return r[19]!==void 0?t.sequence([function(e){return r[31]=r[19].get("mt"),r[31]?r[32]=!1:r[32]=!0,r[32]?t.resolve(r[33]=void 0):t.sequence([function(e){return r[35]=new t.Map,r[36]=r[31].keys(),r[37]=t.i64.of_int32(r[36].length),t.i64.gt(r[37],t.i64.cast([0,0]))?t.loopAsync(r[37],function(e){return r[38]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[36],r[38]).then(function(e){var t;return t=e,r[39]=t[0],r[40]=t[1],t})},function(e){return r[41]=r[31].get(r[39]),r[35].set(r[39],r[41])}])}):t.resolve()},function(e){return r[33]=r[35]}])},function(e){return r[33]!==void 0?(r[35]=t.toJSON(r[33]),r[34]=r[35]):r[34]=void 0,r[28]=r[34]}]):t.resolve(r[28]=void 0)},function(n){var o;return r[19]!==void 0?(r[31]=r[19].get("mooos"),r[29]=r[31]):r[29]=void 0,r[30]=new t.Map,r[30].set("backup_action",e[0]),r[30].set("protobuf_encrypted",r[25]),r[30].set("supplemental_data_encrypted",void 0),r[30].set("timestamp_ms",e[4]),r[30].set("message_tags",r[28]),r[30].set("serialized_attachment_backup_payload",void 0),r[30].set("maybe_ooo_supplemental_upload",r[29]),o=[r[30],void 0],r[26]=o[0],r[27]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),r[28]=new t.Map,r[28].set("error_code",t.i64.cast([0,62])),r[28].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[28].set("error_message",""),a=[void 0,r[28]],r[26]=a[0],r[27]=a[1]))},function(e){var t;return t=[r[26],r[27]],r[20]=t[0],r[21]=t[1],t}]):t.resolve((r[16]?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),r[24]=new t.Map,r[24].set("error_code",t.i64.cast([0,70])),r[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[24].set("error_message",""),a=[void 0,r[24]],r[22]=a[0],r[23]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),r[24]=new t.Map,r[24].set("error_code",t.i64.cast([0,63])),r[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[24].set("error_message",""),i=[void 0,r[24]],r[22]=i[0],r[23]=i[1]),l=[r[22],r[23]],r[20]=l[0],r[21]=l[1]))},function(e){var t;return t=[r[20],r[21]],r[12]=t[0],r[13]=t[1],t}]):t.sequence([function(n){var o;return t.i64.eq(e[0],t.i64.cast([0,3]))?t.sequence([function(e){return t.resolve(r[16]=void 0)},function(n){var o;return r[17]=void 0,r[18]=new t.Map,r[18].set("backup_action",e[0]),r[18].set("protobuf_encrypted",void 0),r[18].set("supplemental_data_encrypted",void 0),r[18].set("timestamp_ms",e[4]),r[18].set("message_tags",r[16]),r[18].set("serialized_attachment_backup_payload",void 0),r[18].set("maybe_ooo_supplemental_upload",r[17]),o=[r[18],void 0],r[14]=o[0],r[15]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error UNKNOWN_PROTOBUF_TYPE"),r[16]=new t.Map,r[16].set("error_code",t.i64.cast([0,60])),r[16].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[16].set("error_message",""),o=[void 0,r[16]],r[14]=o[0],r[15]=o[1]))},function(e){var t;return t=[r[14],r[15]],r[12]=t[0],r[13]=t[1],t}])},function(e){var t;return t=[r[12],r[13]],r[10]=t[0],r[11]=t[1],t}])},function(e){var t;return t=[r[10],r[11]],r[2]=t[0],r[3]=t[1],t}])},function(e){return r[4]=t.i64.of_float(Date.now()),r[5]=t.i64.random(),r[7]="Finishing execution. Execution time: ",r[8]=t.i64.to_string(t.i64.sub(r[4],r[0])),r[9]=" ms",r[6]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] ",r[6],r[7],r[6],r[8],r[6],r[9]].join("")),t.i64.eq(t.i64.mod_(r[5],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[10]=",",r[11]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufWithInputsV2",[r[7],r[10],r[8],r[10],r[9]].join(""),r[11],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[2],r[3]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSLoadAndEncryptProtobufV2",["LSLoadAndEncryptProtobufWithInputsV2","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadAndEncryptProtobufV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.filter(t.db.table(305).fetch(),function(n){return t.i64.eq(n.pendingBackupTaskId,e[0])}).next().then(function(o,a){var i,l=o.done,s=o.value;return l?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure] Returning error PROTOBUF_CONTEXT_ROW_NOT_FOUND"),r[11]=new t.Map,r[11].set("error_code",t.i64.cast([0,67])),r[11].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure"),r[11].set("error_message",""),i=[void 0,r[11]],r[2]=i[0],r[3]=i[1]):(a=s.item,t.sequence([function(o){return t.storedProcedure(n("LSLoadAndEncryptProtobufWithInputsV2"),a.backupAction,e[2],a.toplevelOfflineThreadingId,a.supplementalKey,a.messageTimestampMs,e[1]).then(function(e){var t;return t=e,r[11]=t[0],r[12]=t[1],t})},function(e){var t;return t=[r[11],r[12]],r[2]=t[0],r[3]=t[1],t}]))})},function(e){return r[5]=t.i64.of_float(Date.now()),r[6]=t.i64.random(),r[8]="Finishing execution. Execution time: ",r[9]=t.i64.to_string(t.i64.sub(r[5],r[0])),r[10]=" ms",r[7]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadAndEncryptProtobufV2] ",r[7],r[8],r[7],r[9],r[7],r[10]].join("")),t.i64.eq(t.i64.mod_(r[6],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[11]=",",r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufV2",[r[8],r[11],r[9],r[11],r[10]].join(""),r[12],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[2],r[3]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure",e.__tables__=["pending_protobuf_backups_context"],a.exports=e}),null);
__d("LSLogWebQpl.nop",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LogWebQplNOP").__setRef("LSLogWebQpl.nop"),s=function(n,r,o,a,i,l,s,u){return e.load().then(function(e){return e.call(o,a,i,l,s,u)})};s.__nop_name__="LSLogWebQpl",l.default=s}),98);
__d("LSQplAnnotateBool.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t,d=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),m=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addAnnotations(d,{bool:(t={},t[u]=c,t)},{instanceKey:m}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplAnnotateBool",l.default=s}),98);
__d("LSSerializeBackupPayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSDeriveValueSecretRefV2","LSEncryptIdentifiersV2","LSEncryptMessagePayloadV2","LSGetBlobFromString.nop","LSGetLatestEpochKeys","LSIsEncryptionVersionSecure","LSLoadAndEncryptProtobufV2","LSLogMebClientEvent.nop","LSLogWebQpl.nop","LSQplAnnotateBool.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],o=[],a=[];return t.sequence([function(i){return t.sequence([function(n){return o[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][serializeBackupPayloadV2] Beginning execution."),o[1]=t.i64.of_float(Date.now()),o[19]=t.i64.mul(o[1],t.i64.cast([0,1e6])),o[2]=t.i64.random(),o[6]=t.i64.to_string(o[2]),t.db.table(2).fetch([[[e[0]]]]).next().then(function(e,t){var n=e.done,r=e.value;return n?o[3]=void 0:(t=r.item,o[3]=t.dataTraceId)})},function(e){return o[3]!==void 0?o[5]=o[3]:o[5]=void 0,o[6]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,637746317]),o[6],!0,o[5]):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,637746317]),o[6],"LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure_start"):t.resolve()},function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!1}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var r,a,i=e.done,l=e.value;return i?(o[23]=new t.Map,o[23].set("error_msg","Expected a nonempty query result"),o[23].set("code",t.i64.cast([0,3])),o[23].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),o[24]=t.createArray(),o[25]=(o[24].push(o[23]),o[24]),r=[void 0,o[24]],o[7]=r[0],o[8]=r[1]):(n=l.item,o[23]=new t.Map,o[23].set("backup_id",n.backupId),o[23].set("device_public_key_blob",n.devicePublicKeyBlob),o[23].set("device_private_key_blob",n.devicePrivateKeyBlob),o[23].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),o[23].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),o[23].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),o[23].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),o[23].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),o[23].set("ocmf_client_state_blob",n.ocmfClientStateBlob),o[23].set("orf_client_state_v2_blob",void 0),o[23].set("orf_v2_authority_level",void 0),o[23].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),o[23].set("device_id",n.deviceId),o[23].set("backup_tenancy",n.backupTenancy),o[23].set("encryption_version",n.encryptionVersion),o[23].set("revision_version",n.revisionVersion),o[23].set("initialize_restore_result",void 0),o[23].set("device_creation_timestamp_sec",void 0),o[23].set("authority_level",n.authorityLevel),a=[o[23],void 0],o[7]=a[0],o[8]=a[1])})},function(a){return o[10]=new t.Map,o[10].set("value",o[7]),o[10].set("errors",o[8]),o[11]=o[10].get("value"),o[11]!==void 0?t.sequence([function(a){return o[23]=o[11].get("backup_id"),o[24]=o[11].get("device_public_key_blob"),o[25]=o[11].get("device_private_key_blob"),o[26]=o[11].get("epoch_storage_public_key_blob"),o[27]=o[11].get("epoch_storage_private_key_blob"),o[28]=o[11].get("epoch_auth_public_key_blob"),o[29]=o[11].get("epoch_auth_private_key_blob"),o[30]=o[11].get("mailbox_root_key_blob"),o[31]=o[11].get("ocmf_client_state_blob"),o[32]=o[11].get("orf_client_state_v2_blob"),o[33]=o[11].get("orf_v2_authority_level"),o[34]=o[11].get("oblivious_validation_token_blob"),o[35]=o[11].get("device_id"),o[36]=o[11].get("backup_tenancy"),o[37]=o[11].get("encryption_version"),o[38]=o[11].get("revision_version"),o[39]=o[11].get("initialize_restore_result"),o[40]=o[11].get("device_creation_timestamp_sec"),o[41]=o[11].get("authority_level"),t.i64.neq(o[35],void 0)?t.sequence([function(e){return o[46]=void 0,t.i64.neq(o[46],void 0)?t.resolve(o[47]=o[46]):t.sequence([function(e){return o[55]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,o[56]=t[0],t})},function(e){return o[56]&&(o[65]=(o[55].push(t.i64.cast([0,0])),o[55])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,o[57]=t[0],t})},function(e){return o[57]&&(o[65]=(o[55].push(t.i64.cast([0,2])),o[55])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,o[58]=t[0],t})},function(e){return o[58]&&(o[65]=(o[55].push(t.i64.cast([0,3])),o[55])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,o[59]=t[0],t})},function(e){return o[59]&&(o[65]=(o[55].push(t.i64.cast([0,4])),o[55])),o[60]=t.createArray(),o[61]=t.i64.of_int32(o[55].length),t.i64.gt(o[61],t.i64.cast([0,0]))?t.loopAsync(o[61],function(e){return o[65]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[55],o[65]).then(function(e){var t;return t=e,o[66]=t[0],o[67]=t[1],t})},function(e){return o[68]=(o[60].push(o[66]),o[60])}])}):t.resolve()},function(e){return t.sequence([function(e){return o[65]=t.createArray(),o[66]=t.i64.of_int32(o[60].length),t.i64.gt(o[66],t.i64.cast([0,0]))?t.loopAsync(o[66],function(e){return o[68]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[60],o[68]).then(function(e){var t;return t=e,o[69]=t[0],o[70]=t[1],t})},function(e){return o[71]=(o[65].push(t.i64.to_string(o[69])),o[65])}])}):t.resolve()},function(e){return o[67]=o[65].join(","),o[62]=o[67]}])},function(e){return o[60].some(function(e){return t.i64.eq(o[37],e)})?o[63]=o[37]:o[63]=void 0,t.i64.neq(o[63],void 0)?o[64]=o[63]:o[64]=void 0,o[47]=o[64]}])},function(a){return t.i64.neq(o[47],void 0)?o[48]=o[47]:o[48]=t.i64.cast([0,0]),t.i64.neq(o[36],void 0)?o[49]=o[36]:o[49]=t.i64.cast([0,1]),t.db.table(177).fetch([[[e[0]]],"fk_pending_tasks"]).next().then(function(a,i){var l=a.done,s=a.value;return l?t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[67]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[67],t.i64.cast([0,1e6])),o[19]),void 0],o[55]=a[0],o[56]=a[1],o[57]=a[2],o[58]=a[3],o[59]=a[4],o[60]=a[5],o[61]=a[6]):(r=s.item,o[67]=t.i64.of_float(Date.now()),i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[67],t.i64.cast([0,1e6])),o[19]),void 0],o[55]=i[0],o[56]=i[1],o[57]=i[2],o[58]=i[3],o[59]=i[4],o[60]=i[5],o[61]=i[6])})},function(e){return o[63]=new t.Map,o[63].set("task_id",o[55]),o[63].set("queue_name",o[56]),o[63].set("enqueue_timestamp_ms",o[57]),o[63].set("priority",o[58]),o[63].set("first_executed_timestamp_ms",o[59]),o[63].set("execution_time_ns",o[60]),o[63].set("echo_encoding_execution_time_ns",o[61]),o[64]=new t.Map,o[64].set("task_metadata",o[63]),o[64].set("action_type",void 0),o[64].set("content_type",void 0),o[64].set("identifiers",void 0),o[64].set("identifiers_v2",void 0),o[64].set("task_creation_source",void 0),o[64].set("message_payload_source",t.i64.cast([0,2])),o[65]=new t.Map,o[65].set("error_code",t.i64.cast([0,5])),o[65].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[65].set("error_message","Pending backup context row not found"),o[65]!==void 0?(o[67]=o[65].get("stored_procedure"),o[68]=o[65].get("error_code"),o[69]=o[65].get("error_message"),o[70]=".",o[71]=[o[67],o[70],t.i64.to_string(o[68]),o[70],o[69]].join(""),o[6]!==void 0&&o[71]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[71]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[66]=t.createArray(),n=[void 0,o[65],o[64],o[66]],o[50]=n[0],o[51]=n[1],o[52]=n[2],o[53]=n[3]}]):(i=s.item,t.sequence([function(n){return o[62]=i.actionType,o[63]=i.contentType,o[68]=i.echoContent,o[69]=i.lsTraceId,o[67]=i.echoEncodingLatencyNs,o[66]=i.attachmentPayload,o[70]=i.tamThreadSubtype,o[71]=i.isInstamadillo,o[55]=new t.Map,o[55].set("backup_id",t.i64.to_string(o[23])),o[55].set("act_thread_id",i.listKey),o[55].set("timestamp",i.sortKey),o[55].set("otid",i.uniqueKey),t.filter(t.db.table(305).fetch(),function(n){return t.i64.eq(n.pendingBackupTaskId,e[0])}).next().then(function(e,t){var n=e.done,r=e.value;return n?o[56]=!1:(t=r.item,o[55].set("supplemental_otid",t.supplementalOfflineThreadingId),o[55].set("deletion_otid",t.deletionOfflineThreadingId),o[56]=!0)})},function(e){return o[65]=t.i64.eq(void 0,void 0),o[6]!==void 0?t.nativeOperation(n("LSQplAnnotateBool.nop"),t.i64.cast([0,637746317]),o[6],"should_run_device_timestamp_sync",o[65]):t.resolve()},function(a){return o[64]=i.error==null?t.i64.cast([0,0]):i.error,[t.i64.cast([0,0]),t.i64.cast([0,32])].some(function(e){return t.i64.eq(o[64],e)})?t.sequence([function(e){return o[72]=o[55].get("act_thread_id"),o[73]=o[55].get("otid"),t.storedProcedure(n("LSGetLatestEpochKeys"),!1).then(function(e){var t;return t=e,o[74]=t[0],o[75]=t[1],t})},function(e){var r;return o[74]!==void 0?t.sequence([function(e){return t.i64.eq(o[63],t.i64.cast([0,1]))?t.sequence([function(e){return o[85]=t.createArray(),o[90]=(o[85].push(t.i64.cast([0,32])),o[85]),t.nativeOperation(n("LSGetBlobFromString.nop"),["thread_ope_key","_",o[72]].join("")).then(function(e){var t;return t=e,o[86]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),o[86],void 0,o[30],o[85]).then(function(e){var t;return t=e,o[87]=t[0],t})},function(e){return o[87]?o[88]=!1:o[88]=!0,o[88]?t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),o[91]="Got null keys while deriving message list OPE key. Returning null blobish",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[91]].join("")),o[90]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[91],o[90],t.i64.cast([0,3]))},function(e){return o[89]=void 0}]):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[87],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[90]=t[0],o[91]=t[1],t})},function(e){return o[89]=o[90]}])},function(e){return o[82]=o[89]}]):t.sequence([function(e){return t.i64.eq(o[62],t.i64.cast([0,2]))?t.sequence([function(e){return o[86]=t.createArray(),o[91]=(o[86].push(t.i64.cast([0,32])),o[86]),t.nativeOperation(n("LSGetBlobFromString.nop"),["thread_ope_key","_",o[73]].join("")).then(function(e){var t;return t=e,o[87]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),o[87],void 0,o[30],o[86]).then(function(e){var t;return t=e,o[88]=t[0],t})},function(e){return o[88]?o[89]=!1:o[89]=!0,o[89]?t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),o[92]="Got null keys while deriving message list OPE key. Returning null blobish",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[92]].join("")),o[91]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[92],o[91],t.i64.cast([0,3]))},function(e){return o[90]=void 0}]):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[88],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[91]=t[0],o[92]=t[1],t})},function(e){return o[90]=o[91]}])},function(e){return o[85]=o[90]}]):t.resolve(o[85]=void 0)},function(e){return o[82]=o[85]}])},function(e){var r;return t.blobs.neq(o[82],void 0)?t.sequence([function(e){return o[85]=o[74].get("epoch_keys"),o[86]=o[85].get("epoch_anon_id"),o[87]=o[85].get("epoch_root_key"),o[88]=t.createArray(),o[103]=(o[88].push(t.i64.cast([0,32])),o[88]),t.i64.ge(o[48],t.i64.cast([0,3]))?t.resolve(o[89]=void 0):t.sequence([function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),o[72]).then(function(e){var t;return t=e,o[103]=t[0],t})},function(e){return o[89]=o[103]}])},function(e){return t.i64.ge(o[48],t.i64.cast([0,4]))?(o[103]="_",o[90]=["message_key_in_epoch",o[103],t.blobs.to_string(o[86]),o[103],"cipher_version",o[103],t.i64.to_string(o[48]),o[103],"thread",o[103],o[72]==null?"":o[72]].join("")):(t.i64.ge(o[48],t.i64.cast([0,3]))?(o[104]="_",o[103]=["message_key_in_epoch",o[104],t.blobs.to_string(o[86]),o[104],"cipher_version",o[104],t.i64.to_string(o[48]),o[104],"thread",o[104],o[72]==null?"":o[72]].join("")):(t.i64.ge(o[48],t.i64.cast([0,2]))?(o[105]="_",o[104]=["message_key_in_epoch",o[105],t.blobs.to_string(o[86]),o[105],"cipher_version",o[105],t.i64.to_string(o[48])].join("")):o[104]=["message_key_in_epoch","_",t.blobs.to_string(o[86])].join(""),o[103]=o[104]),o[90]=o[103]),t.nativeOperation(n("LSGetBlobFromString.nop"),o[90]).then(function(e){var t;return t=e,o[91]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),o[91],o[89],o[87],o[88]).then(function(e){var t;return t=e,o[92]=t[0],t})},function(e){return o[92]?o[93]=!1:o[93]=!0,o[93]?t.resolve(o[94]=void 0):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[92],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[103]=t[0],o[104]=t[1],t})},function(e){return o[94]=o[103]}])},function(e){return t.filter(t.db.table(169).fetch(),function(e){return t.blobs.eq(e.epochAnonIdBlob,t.blob("MA=="))}).next().then(function(e,n){var r,a,i=e.done,l=e.value;return i?(o[103]=new t.Map,o[103].set("error_msg","Expected a nonempty query result"),o[103].set("code",t.i64.cast([0,3])),o[103].set("src_line","MEBEpochClientUtils.php:556 MEBEpochClientUtils::maybeEpochWithAnonIDFromPersistentEpochsTableDirectly()"),o[104]=t.createArray(),o[105]=(o[104].push(o[103]),o[104]),r=[void 0,o[104]],o[95]=r[0],o[96]=r[1]):(n=l.item,o[103]=new t.Map,o[103].set("epoch_id",n.epochId),o[103].set("backup_id",n.backupId),o[103].set("epoch_anon_id_blob",n.epochAnonIdBlob),o[103].set("epoch_root_key_blob",n.epochRootKeyBlob),o[103].set("epoch_status",n.epochStatus),o[103].set("epoch_head",n.epochHead),o[103].set("authority_level",n.authorityLevel),a=[o[103],void 0],o[95]=a[0],o[96]=a[1])})},function(e){return o[98]=new t.Map,o[98].set("value",o[95]),o[98].set("errors",o[96]),o[99]=o[98].get("value"),o[99]!==void 0?t.sequence([function(e){return o[103]=o[99].get("epoch_id"),o[104]=o[99].get("backup_id"),o[105]=o[99].get("epoch_anon_id_blob"),o[106]=o[99].get("epoch_root_key_blob"),o[107]=o[99].get("epoch_status"),o[108]=o[99].get("epoch_head"),o[109]=o[99].get("authority_level"),o[110]=t.createArray(),o[118]=(o[110].push(t.i64.cast([0,32])),o[110]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5zYWx0X21haWxib3hfcm9vdF9rZXlfdjI="),void 0,o[30],o[110]).then(function(e){var t;return t=e,o[111]=t[0],t})},function(e){return o[111]!==void 0?t.sequence([function(e){return o[118]=t.i64.of_int32(o[111].length),t.i64.ge(o[118],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[111],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[120]=t[0],o[121]=t[1],t})},function(e){return o[119]=o[120]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),o[121]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[121]].join("")),o[120]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[121],o[120],t.i64.cast([0,3]))},function(e){return o[119]=void 0}])},function(e){return o[112]=o[119]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),o[119]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[119]].join("")),o[118]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[119],o[118],t.i64.cast([0,3]))},function(e){return o[112]=void 0}])},function(e){return t.blobs.neq(o[112],void 0)?o[113]=!0:o[113]=!1,o[113]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),o[114]=t.createArray(),o[118]=(o[114].push(t.i64.cast([0,32])),o[114]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5tYWlsYm94X3Jvb3Rfa2V5X3Yy"),o[112],o[106],o[114]).then(function(e){var t;return t=e,o[115]=t[0],t})},function(e){return o[115]!==void 0?t.sequence([function(e){return o[118]=t.i64.of_int32(o[115].length),t.i64.ge(o[118],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[115],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[120]=t[0],o[121]=t[1],t})},function(e){return o[119]=o[120]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),o[121]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[121]].join("")),o[120]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[121],o[120],t.i64.cast([0,3]))},function(e){return o[119]=void 0}])},function(e){return o[116]=o[119]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),o[119]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[119]].join("")),o[118]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[119],o[118],t.i64.cast([0,3]))},function(e){return o[116]=void 0}])},function(e){return t.blobs.neq(o[116],void 0)?o[117]=!0:o[117]=!1,o[117]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),o[100]=o[116]}]):t.sequence([function(e){return o[103]=o[98].get("errors"),o[104]=o[98].get("errors"),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBEpochClientUtils] Failed to get mailbox_root_key_v2: epoch 0 is not available."),o[106]="Failed to get mailbox_root_key_v2: epoch 0 is not available.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBEpochClientUtils] ","",o[106]].join("")),o[105]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBEpochClientUtils",o[106],o[105],t.i64.cast([0,3]))},function(e){return o[100]=void 0}])},function(e){var r;return t.blobs.neq(o[94],void 0)?t.sequence([function(e){return t.blobs.neq(o[100],void 0)?t.sequence([function(e){return o[109]=t.createArray(),o[113]=(o[109].push(t.i64.cast([0,32])),o[109]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5mYWxsYmFja19rZXk="),void 0,o[100],o[109]).then(function(e){var t;return t=e,o[110]=t[0],t})},function(e){return o[110]!==void 0?t.sequence([function(e){return o[113]=t.i64.of_int32(o[110].length),t.i64.ge(o[113],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[110],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[115]=t[0],o[116]=t[1],t})},function(e){return o[114]=o[115]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),o[116]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[116]].join("")),o[115]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[116],o[115],t.i64.cast([0,3]))},function(e){return o[114]=void 0}])},function(e){return o[111]=o[114]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),o[114]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[114]].join("")),o[113]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[114],o[113],t.i64.cast([0,3]))},function(e){return o[111]=void 0}])},function(e){return t.blobs.neq(o[111],void 0)?o[112]=!0:o[112]=!1,o[112]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),o[103]=o[111]}]):t.resolve(o[103]=void 0)},function(e){var n;return o[104]=o[85].get("epoch_root_key"),o[105]=o[85].get("epoch_anon_id"),o[106]=o[85].get("epoch_id"),o[107]=new t.Map,o[107].set("payload_key",o[94]),o[107].set("payload_fallback_key",o[103]),o[107].set("encryption_version",o[48]),o[107].set("epoch_root_key",o[104]),o[107].set("epoch_anon_id",o[105]),o[107].set("epoch_id",o[106]),o[108]=new t.Map,o[108].set("ope_key",o[82]),o[108].set("message_payload_encryption_keys",o[107]),o[108].set("ocmf_shared_key",o[31]),o[108].set("mailbox_base_salt",o[30]),o[108].set("mailbox_root_key_v2",o[100]),n=[o[108],void 0],o[101]=n[0],o[102]=n[1]}]):t.resolve((o[103]=new t.Map,o[103].set("error_code",t.i64.cast([0,26])),o[103].set("stored_procedure","MEBKeyDeriver"),o[103].set("error_message",""),r=[void 0,o[103]],o[101]=r[0],o[102]=r[1]))},function(e){var t;return t=[o[101],o[102]],o[83]=t[0],o[84]=t[1],t}]):t.resolve((o[85]=new t.Map,o[85].set("error_code",t.i64.cast([0,25])),o[85].set("stored_procedure","MEBKeyDeriver"),o[85].set("error_message",""),r=[void 0,o[85]],o[83]=r[0],o[84]=r[1]))},function(e){var t;return t=[o[83],o[84]],o[76]=t[0],o[77]=t[1],t}]):t.resolve((r=[void 0,o[75]],o[76]=r[0],o[77]=r[1],r))},function(a){return o[76]!==void 0?t.sequence([function(e){return o[82]=o[55].get("backup_id"),o[83]=o[55].get("act_thread_id"),o[84]=o[55].get("timestamp"),o[85]=o[55].get("otid"),t.storedProcedure(n("LSEncryptIdentifiersV2"),o[62],o[63],o[82],o[83],t.i64.from_string(o[84]),o[85],o[76]).then(function(e){var t;return t=e,o[86]=t[0],o[87]=t[1],t})},function(a){return o[86]!==void 0?t.sequence([function(r){return o[92]=o[55].get("act_thread_id"),t.storedProcedure(n("LSLoadAndEncryptProtobufV2"),e[0],o[76],o[92]).then(function(e){var t;return t=e,o[93]=t[0],o[94]=t[1],t})},function(a){return o[99]=t.i64.eq(o[64],t.i64.cast([0,32]))||!1||r("gkx")("12541")||!1,o[100]=o[93]!==void 0,o[99]&&o[100]?t.sequence([function(e){return o[101]=o[55].get("act_thread_id"),o[102]=o[55].get("backup_id"),t.storedProcedure(n("LSDeriveValueSecretRefV2"),o[101],o[102],o[76]).then(function(e){var t;return t=e,o[103]=t[0],o[104]=t[1],t})},function(r){return o[93]!==void 0?t.sequence([function(r){return o[103]!==void 0?t.sequence([function(e){return o[113]=o[103].get("value_secret_ref"),o[114]=o[86].get("act_thread_id_ocmf_partial"),o[115]=o[86].get("otid_ocmf_partial"),o[116]=o[86].get("timestamp_encrypted"),o[117]=new t.Map,o[117].set("list_key",o[114]),o[117].set("unique_key",o[115]),o[117].set("sort_key",o[116]),o[118]=void 0,o[119]=new t.Map,o[119].set("list_item_id",o[117]),o[119].set("list_item",o[118]),o[119].set("action_type",o[62]),o[120]=o[55].get("timestamp"),o[121]=o[55].get("otid"),o[122]=o[55].get("act_thread_id"),o[123]=o[55].get("supplemental_otid"),o[124]=o[55].get("deletion_otid"),o[125]=new t.Map,o[125].set("timestamp",o[120]),o[125].set("otid",o[121]),o[125].set("wa_thread_id",t.i64.from_string(o[122])),o[125].set("supplemental_otid",o[123]),o[125].set("deletion_otid",o[124]),o[126]=o[76].get("mailbox_base_salt"),t.nativeOperation(n("LSBase64Encode.nop"),o[126]).then(function(e){var t;return t=e,o[127]=t[0],t})},function(e){return o[128]=o[76].get("ocmf_shared_key"),t.nativeOperation(n("LSBase64Encode.nop"),o[128]).then(function(e){var t;return t=e,o[129]=t[0],t})},function(e){return o[130]=new t.Map,o[130].set("mailbox_root_key",o[127]==null?"":o[127]),o[130].set("ocmf_client_state_blob",o[129]==null?"":o[129]),o[131]=o[86].get("backup_id_ocmf_partial"),o[132]=o[76].get("message_payload_encryption_keys"),o[133]=o[132].get("epoch_id"),o[134]=o[76].get("message_payload_encryption_keys"),o[135]=o[134].get("encryption_version"),o[150]=o[69]==null?"":o[69],o[136]=new t.Map,o[136].set("mailbox_partial_id",o[131]),o[136].set("action",o[119]),o[136].set("device_id",o[35]),o[136].set("echo_version",t.i64.cast([0,0])),o[136].set("epoch_id",o[133]),o[136].set("trace_id",void 0),o[136].set("encryption_version",o[135]),o[136].set("is_thread",t.i64.eq(o[63],t.i64.cast([0,2]))),o[136].set("raw_identifiers",o[125]),o[136].set("raw_tokens",o[130]),o[136].set("request_id",o[150]),o[136].set("tam_thread_subtype",o[70]==null?t.i64.cast([0,0]):o[70]),o[136].set("is_instamadillo",o[71]==null?!1:o[71]),o[136].set("should_run_device_creation_timestamp_sync",o[65]),o[136].set("value_secret_ref",o[113]),o[136].set("empty_echo_payload_reason",t.i64.cast([0,1])),o[93]!==void 0?t.sequence([function(e){return o[151]=o[93].get("supplemental_data_encrypted"),o[151]!==void 0?t.sequence([function(e){return o[153]=o[93].get("protobuf_encrypted"),o[154]=o[93].get("backup_action"),o[155]=o[93].get("timestamp_ms"),o[156]=o[151].get("sk_ciphertext"),t.nativeOperation(n("LSBase64Encode.nop"),o[156]).then(function(e){var t;return t=e,o[157]=t[0],t})},function(e){return o[158]=o[151].get("sk_hash"),t.nativeOperation(n("LSBase64Encode.nop"),o[158]).then(function(e){var t;return t=e,o[159]=t[0],t})},function(e){return o[160]=o[93].get("message_tags"),o[161]=o[93].get("maybe_ooo_supplemental_upload"),o[162]=new t.Map,o[162].set("supplementary_data_key",void 0),o[162].set("encrypted_protobuf",o[153]),o[162].set("key_value_backup_action",o[154]),o[162].set("protobuf_ts_ms",o[155]),o[162].set("supplemental_key_ciphertext",o[157]),o[162].set("supplemental_key_hash",o[159]),o[162].set("message_tags",o[160]),o[162].set("maybe_ooo_supplemental_upload",o[161]),o[152]=o[162]}]):t.resolve((o[153]=o[93].get("protobuf_encrypted"),o[154]=o[93].get("backup_action"),o[155]=o[93].get("timestamp_ms"),o[156]=o[93].get("message_tags"),o[157]=new t.Map,o[157].set("supplementary_data_key",void 0),o[157].set("encrypted_protobuf",o[153]),o[157].set("key_value_backup_action",o[154]),o[157].set("protobuf_ts_ms",o[155]),o[157].set("message_tags",o[156]),o[152]=o[157]))},function(e){return o[136].set("key_value_backup_payload",o[152])}]):t.resolve()},function(e){return o[66]!==void 0?t.resolve(o[136].set("attachment_backup_payload",o[66])):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),o[151]="payload_null",o[6]!==void 0&&o[151]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"attachment_info",o[151]):t.resolve())},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplAnnotateBool.nop"),t.i64.cast([0,637746317]),o[6],"process_attachments_via_message_upload",!0):t.resolve()},function(e){return o[150]!==void 0?t.nativeOperation(n("LSLogWebQpl.nop"),o[150],t.i64.cast([0,521481602]),"upload_start",t.i64.cast([0,0]),void 0,void 0):t.resolve()},function(n){return o[137]=t.toJSON(o[136]),t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[151]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[152]=void 0:o[152]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[151],t.i64.cast([0,1e6])),o[19]),o[152]],o[138]=a[0],o[139]=a[1],o[140]=a[2],o[141]=a[3],o[142]=a[4],o[143]=a[5],o[144]=a[6]):(r=s.item,o[151]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[152]=void 0:o[152]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[151],t.i64.cast([0,1e6])),o[19]),o[152]],o[138]=i[0],o[139]=i[1],o[140]=i[2],o[141]=i[3],o[142]=i[4],o[143]=i[5],o[144]=i[6])})},function(e){return o[146]=new t.Map,o[146].set("task_id",o[138]),o[146].set("queue_name",o[139]),o[146].set("enqueue_timestamp_ms",o[140]),o[146].set("priority",o[141]),o[146].set("first_executed_timestamp_ms",o[142]),o[146].set("execution_time_ns",o[143]),o[146].set("echo_encoding_execution_time_ns",o[144]),o[147]=new t.Map,o[147].set("task_metadata",o[146]),o[147].set("action_type",o[62]),o[147].set("content_type",o[63]),o[147].set("identifiers",void 0),o[147].set("identifiers_v2",o[55]),o[147].set("task_creation_source",void 0),o[147].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!0):t.resolve()},function(e){var n;return o[148]=new t.Map,o[148].set("payload",o[137]),o[149]=t.createArray(),o[151]=(o[149].push(void 0),o[149]),n=[o[148],void 0,o[147],o[149]],o[109]=n[0],o[110]=n[1],o[111]=n[2],o[112]=n[3]}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[124]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[125]=void 0:o[125]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[124],t.i64.cast([0,1e6])),o[19]),o[125]],o[113]=a[0],o[114]=a[1],o[115]=a[2],o[116]=a[3],o[117]=a[4],o[118]=a[5],o[119]=a[6]):(r=s.item,o[124]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[125]=void 0:o[125]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[124],t.i64.cast([0,1e6])),o[19]),o[125]],o[113]=i[0],o[114]=i[1],o[115]=i[2],o[116]=i[3],o[117]=i[4],o[118]=i[5],o[119]=i[6])})},function(e){return o[121]=new t.Map,o[121].set("task_id",o[113]),o[121].set("queue_name",o[114]),o[121].set("enqueue_timestamp_ms",o[115]),o[121].set("priority",o[116]),o[121].set("first_executed_timestamp_ms",o[117]),o[121].set("execution_time_ns",o[118]),o[121].set("echo_encoding_execution_time_ns",o[119]),o[122]=new t.Map,o[122].set("task_metadata",o[121]),o[122].set("action_type",o[62]),o[122].set("content_type",o[63]),o[122].set("identifiers",void 0),o[122].set("identifiers_v2",o[55]),o[122].set("task_creation_source",void 0),o[122].set("message_payload_source",t.i64.cast([0,2])),o[104]!==void 0?(o[124]=o[104].get("stored_procedure"),o[125]=o[104].get("error_code"),o[126]=o[104].get("error_message"),o[127]=".",o[128]=[o[124],o[127],t.i64.to_string(o[125]),o[127],o[126]].join(""),o[6]!==void 0&&o[128]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[128]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[123]=t.createArray(),o[124]=(o[123].push(void 0),o[123]),n=[void 0,o[104],o[122],o[123]],o[109]=n[0],o[110]=n[1],o[111]=n[2],o[112]=n[3]}])},function(e){var t;return t=[o[109],o[110],o[111],o[112]],o[105]=t[0],o[106]=t[1],o[107]=t[2],o[108]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[120]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[121]=void 0:o[121]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[120],t.i64.cast([0,1e6])),o[19]),o[121]],o[109]=a[0],o[110]=a[1],o[111]=a[2],o[112]=a[3],o[113]=a[4],o[114]=a[5],o[115]=a[6]):(r=s.item,o[120]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[121]=void 0:o[121]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[120],t.i64.cast([0,1e6])),o[19]),o[121]],o[109]=i[0],o[110]=i[1],o[111]=i[2],o[112]=i[3],o[113]=i[4],o[114]=i[5],o[115]=i[6])})},function(e){return o[117]=new t.Map,o[117].set("task_id",o[109]),o[117].set("queue_name",o[110]),o[117].set("enqueue_timestamp_ms",o[111]),o[117].set("priority",o[112]),o[117].set("first_executed_timestamp_ms",o[113]),o[117].set("execution_time_ns",o[114]),o[117].set("echo_encoding_execution_time_ns",o[115]),o[118]=new t.Map,o[118].set("task_metadata",o[117]),o[118].set("action_type",o[62]),o[118].set("content_type",o[63]),o[118].set("identifiers",void 0),o[118].set("identifiers_v2",o[55]),o[118].set("task_creation_source",void 0),o[118].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return o[94]!==void 0?(o[120]=o[94].get("stored_procedure"),o[121]=o[94].get("error_code"),o[122]=o[94].get("error_message"),o[123]=".",o[124]=[o[120],o[123],t.i64.to_string(o[121]),o[123],o[122]].join(""),o[6]!==void 0&&o[124]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[124]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[119]=t.createArray(),o[120]=(o[119].push(o[94]),o[119]),n=[void 0,void 0,o[118],o[119]],o[105]=n[0],o[106]=n[1],o[107]=n[2],o[108]=n[3]}])},function(e){var t;return t=[o[105],o[106],o[107],o[108]],o[95]=t[0],o[96]=t[1],o[97]=t[2],o[98]=t[3],t}]):t.sequence([function(r){return o[99]===!0&&o[100]===!1?t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[116]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[117]=void 0:o[117]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[116],t.i64.cast([0,1e6])),o[19]),o[117]],o[105]=a[0],o[106]=a[1],o[107]=a[2],o[108]=a[3],o[109]=a[4],o[110]=a[5],o[111]=a[6]):(r=s.item,o[116]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[117]=void 0:o[117]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[116],t.i64.cast([0,1e6])),o[19]),o[117]],o[105]=i[0],o[106]=i[1],o[107]=i[2],o[108]=i[3],o[109]=i[4],o[110]=i[5],o[111]=i[6])})},function(e){return o[113]=new t.Map,o[113].set("task_id",o[105]),o[113].set("queue_name",o[106]),o[113].set("enqueue_timestamp_ms",o[107]),o[113].set("priority",o[108]),o[113].set("first_executed_timestamp_ms",o[109]),o[113].set("execution_time_ns",o[110]),o[113].set("echo_encoding_execution_time_ns",o[111]),o[114]=new t.Map,o[114].set("task_metadata",o[113]),o[114].set("action_type",o[62]),o[114].set("content_type",o[63]),o[114].set("identifiers",void 0),o[114].set("identifiers_v2",o[55]),o[114].set("task_creation_source",void 0),o[114].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return o[94]!==void 0?(o[116]=o[94].get("stored_procedure"),o[117]=o[94].get("error_code"),o[118]=o[94].get("error_message"),o[119]=".",o[120]=[o[116],o[119],t.i64.to_string(o[117]),o[119],o[118]].join(""),o[6]!==void 0&&o[120]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[120]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[115]=t.createArray(),o[116]=(o[115].push(o[94]),o[115]),n=[void 0,void 0,o[114],o[115]],o[101]=n[0],o[102]=n[1],o[103]=n[2],o[104]=n[3]}]):t.sequence([function(r){var a,i,l,s;return t.i64.eq(o[62],t.i64.cast([0,1]))?(o[113]=o[68]===""?void 0:o[68],o[113]!==void 0?(a=[o[113],void 0],o[111]=a[0],o[112]=a[1]):(o[114]=new t.Map,o[114].set("error_code",t.i64.cast([0,30])),o[114].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[114].set("error_message",""),i=[void 0,o[114]],o[111]=i[0],o[112]=i[1]),l=[o[111],o[112]],o[105]=l[0],o[106]=l[1]):(s=["",void 0],o[105]=s[0],o[106]=s[1]),o[105]!==void 0?t.sequence([function(e){var r;return t.i64.eq(o[62],t.i64.cast([0,1]))?t.sequence([function(e){return o[117]=o[55].get("backup_id"),o[118]=o[55].get("act_thread_id"),t.storedProcedure(n("LSEncryptMessagePayloadV2"),o[117],o[118],o[76],o[105]).then(function(e){var t;return t=e,o[119]=t[0],o[120]=t[1],t})},function(e){var t;return t=[o[119],o[120]],o[111]=t[0],o[112]=t[1],t}]):t.resolve((o[117]=new t.Map,o[117].set("encrypted_message_payload",""),o[117].set("value_secret_ref",""),r=[o[117],void 0],o[111]=r[0],o[112]=r[1]))},function(r){return o[111]!==void 0?t.sequence([function(e){return o[93]!==void 0&&t.i64.eq(o[62],t.i64.cast([0,2]))?t.sequence([function(e){return o[155]=o[55].get("act_thread_id"),o[156]=o[55].get("backup_id"),t.storedProcedure(n("LSDeriveValueSecretRefV2"),o[155],o[156],o[76]).then(function(e){var t;return t=e,o[157]=t[0],o[158]=t[1],t})},function(e){return o[157]!==void 0?(o[160]=o[157].get("value_secret_ref"),o[159]=o[160]):o[159]="",o[117]=o[159]}]):t.resolve(o[117]="")},function(e){return o[118]=o[86].get("act_thread_id_ocmf_partial"),o[119]=o[86].get("otid_ocmf_partial"),o[120]=o[86].get("timestamp_encrypted"),o[121]=new t.Map,o[121].set("list_key",o[118]),o[121].set("unique_key",o[119]),o[121].set("sort_key",o[120]),o[111]!==void 0?(o[155]=o[111].get("encrypted_message_payload"),o[156]=o[111].get("value_secret_ref"),o[157]=new t.Map,o[157].set("value",o[155]),o[157].set("value_secret_ref",o[156]),o[122]=o[157]):o[122]=void 0,o[123]=new t.Map,o[123].set("list_item_id",o[121]),o[123].set("list_item",o[122]),o[123].set("action_type",o[62]),o[124]=o[55].get("timestamp"),o[125]=o[55].get("otid"),o[126]=o[55].get("act_thread_id"),o[127]=o[55].get("supplemental_otid"),o[128]=o[55].get("deletion_otid"),o[129]=new t.Map,o[129].set("timestamp",o[124]),o[129].set("otid",o[125]),o[129].set("wa_thread_id",t.i64.from_string(o[126])),o[129].set("supplemental_otid",o[127]),o[129].set("deletion_otid",o[128]),o[130]=o[76].get("mailbox_base_salt"),t.nativeOperation(n("LSBase64Encode.nop"),o[130]).then(function(e){var t;return t=e,o[131]=t[0],t})},function(e){return o[132]=o[76].get("ocmf_shared_key"),t.nativeOperation(n("LSBase64Encode.nop"),o[132]).then(function(e){var t;return t=e,o[133]=t[0],t})},function(e){return o[134]=new t.Map,o[134].set("mailbox_root_key",o[131]==null?"":o[131]),o[134].set("ocmf_client_state_blob",o[133]==null?"":o[133]),o[135]=o[86].get("backup_id_ocmf_partial"),o[136]=o[76].get("message_payload_encryption_keys"),o[137]=o[136].get("epoch_id"),o[138]=o[76].get("message_payload_encryption_keys"),o[139]=o[138].get("encryption_version"),o[154]=o[69]==null?"":o[69],o[140]=new t.Map,o[140].set("mailbox_partial_id",o[135]),o[140].set("action",o[123]),o[140].set("device_id",o[35]),o[140].set("echo_version",t.i64.cast([0,0])),o[140].set("epoch_id",o[137]),o[140].set("trace_id",void 0),o[140].set("encryption_version",o[139]),o[140].set("is_thread",t.i64.eq(o[63],t.i64.cast([0,2]))),o[140].set("raw_identifiers",o[129]),o[140].set("raw_tokens",o[134]),o[140].set("request_id",o[154]),o[140].set("tam_thread_subtype",o[70]==null?t.i64.cast([0,0]):o[70]),o[140].set("is_instamadillo",o[71]==null?!1:o[71]),o[140].set("should_run_device_creation_timestamp_sync",o[65]),o[140].set("value_secret_ref",o[117]),o[93]!==void 0?t.sequence([function(e){return o[155]=o[93].get("supplemental_data_encrypted"),o[155]!==void 0?t.sequence([function(e){return o[157]=o[93].get("protobuf_encrypted"),o[158]=o[93].get("backup_action"),o[159]=o[93].get("timestamp_ms"),o[160]=o[155].get("sk_ciphertext"),t.nativeOperation(n("LSBase64Encode.nop"),o[160]).then(function(e){var t;return t=e,o[161]=t[0],t})},function(e){return o[162]=o[155].get("sk_hash"),t.nativeOperation(n("LSBase64Encode.nop"),o[162]).then(function(e){var t;return t=e,o[163]=t[0],t})},function(e){return o[164]=o[93].get("message_tags"),o[165]=o[93].get("maybe_ooo_supplemental_upload"),o[166]=new t.Map,o[166].set("supplementary_data_key",void 0),o[166].set("encrypted_protobuf",o[157]),o[166].set("key_value_backup_action",o[158]),o[166].set("protobuf_ts_ms",o[159]),o[166].set("supplemental_key_ciphertext",o[161]),o[166].set("supplemental_key_hash",o[163]),o[166].set("message_tags",o[164]),o[166].set("maybe_ooo_supplemental_upload",o[165]),o[156]=o[166]}]):t.resolve((o[157]=o[93].get("protobuf_encrypted"),o[158]=o[93].get("backup_action"),o[159]=o[93].get("timestamp_ms"),o[160]=o[93].get("message_tags"),o[161]=new t.Map,o[161].set("supplementary_data_key",void 0),o[161].set("encrypted_protobuf",o[157]),o[161].set("key_value_backup_action",o[158]),o[161].set("protobuf_ts_ms",o[159]),o[161].set("message_tags",o[160]),o[156]=o[161]))},function(e){return o[140].set("key_value_backup_payload",o[156])}]):t.resolve()},function(e){return o[66]!==void 0?t.resolve(o[140].set("attachment_backup_payload",o[66])):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),o[155]="payload_null",o[6]!==void 0&&o[155]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"attachment_info",o[155]):t.resolve())},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplAnnotateBool.nop"),t.i64.cast([0,637746317]),o[6],"process_attachments_via_message_upload",!0):t.resolve()},function(e){return o[154]!==void 0?t.nativeOperation(n("LSLogWebQpl.nop"),o[154],t.i64.cast([0,521481602]),"upload_start",t.i64.cast([0,0]),void 0,void 0):t.resolve()},function(n){return o[141]=t.toJSON(o[140]),t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[155]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[156]=void 0:o[156]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[155],t.i64.cast([0,1e6])),o[19]),o[156]],o[142]=a[0],o[143]=a[1],o[144]=a[2],o[145]=a[3],o[146]=a[4],o[147]=a[5],o[148]=a[6]):(r=s.item,o[155]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[156]=void 0:o[156]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[155],t.i64.cast([0,1e6])),o[19]),o[156]],o[142]=i[0],o[143]=i[1],o[144]=i[2],o[145]=i[3],o[146]=i[4],o[147]=i[5],o[148]=i[6])})},function(e){return o[150]=new t.Map,o[150].set("task_id",o[142]),o[150].set("queue_name",o[143]),o[150].set("enqueue_timestamp_ms",o[144]),o[150].set("priority",o[145]),o[150].set("first_executed_timestamp_ms",o[146]),o[150].set("execution_time_ns",o[147]),o[150].set("echo_encoding_execution_time_ns",o[148]),o[151]=new t.Map,o[151].set("task_metadata",o[150]),o[151].set("action_type",o[62]),o[151].set("content_type",o[63]),o[151].set("identifiers",void 0),o[151].set("identifiers_v2",o[55]),o[151].set("task_creation_source",void 0),o[151].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return o[94]!==void 0?(o[155]=o[94].get("stored_procedure"),o[156]=o[94].get("error_code"),o[157]=o[94].get("error_message"),o[158]=".",o[159]=[o[155],o[158],t.i64.to_string(o[156]),o[158],o[157]].join(""),o[6]!==void 0&&o[159]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[159]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!0):t.resolve()},function(e){var n;return o[152]=new t.Map,o[152].set("payload",o[141]),o[153]=t.createArray(),o[155]=(o[153].push(o[94]),o[153]),n=[o[152],void 0,o[151],o[153]],o[113]=n[0],o[114]=n[1],o[115]=n[2],o[116]=n[3]}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[128]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[129]=void 0:o[129]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[128],t.i64.cast([0,1e6])),o[19]),o[129]],o[117]=a[0],o[118]=a[1],o[119]=a[2],o[120]=a[3],o[121]=a[4],o[122]=a[5],o[123]=a[6]):(r=s.item,o[128]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[129]=void 0:o[129]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[128],t.i64.cast([0,1e6])),o[19]),o[129]],o[117]=i[0],o[118]=i[1],o[119]=i[2],o[120]=i[3],o[121]=i[4],o[122]=i[5],o[123]=i[6])})},function(e){return o[125]=new t.Map,o[125].set("task_id",o[117]),o[125].set("queue_name",o[118]),o[125].set("enqueue_timestamp_ms",o[119]),o[125].set("priority",o[120]),o[125].set("first_executed_timestamp_ms",o[121]),o[125].set("execution_time_ns",o[122]),o[125].set("echo_encoding_execution_time_ns",o[123]),o[126]=new t.Map,o[126].set("task_metadata",o[125]),o[126].set("action_type",o[62]),o[126].set("content_type",o[63]),o[126].set("identifiers",void 0),o[126].set("identifiers_v2",o[55]),o[126].set("task_creation_source",void 0),o[126].set("message_payload_source",t.i64.cast([0,2])),o[112]!==void 0?(o[128]=o[112].get("stored_procedure"),o[129]=o[112].get("error_code"),o[130]=o[112].get("error_message"),o[131]=".",o[132]=[o[128],o[131],t.i64.to_string(o[129]),o[131],o[130]].join(""),o[6]!==void 0&&o[132]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[132]):t.resolve()):t.resolve()},function(e){return o[94]!==void 0?(o[128]=o[94].get("stored_procedure"),o[129]=o[94].get("error_code"),o[130]=o[94].get("error_message"),o[131]=".",o[132]=[o[128],o[131],t.i64.to_string(o[129]),o[131],o[130]].join(""),o[6]!==void 0&&o[132]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[132]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[127]=t.createArray(),o[128]=(o[127].push(o[94]),o[127]),n=[void 0,o[112],o[126],o[127]],o[113]=n[0],o[114]=n[1],o[115]=n[2],o[116]=n[3]}])},function(e){var t;return t=[o[113],o[114],o[115],o[116]],o[107]=t[0],o[108]=t[1],o[109]=t[2],o[110]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[122]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[123]=void 0:o[123]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[122],t.i64.cast([0,1e6])),o[19]),o[123]],o[111]=a[0],o[112]=a[1],o[113]=a[2],o[114]=a[3],o[115]=a[4],o[116]=a[5],o[117]=a[6]):(r=s.item,o[122]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[123]=void 0:o[123]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[122],t.i64.cast([0,1e6])),o[19]),o[123]],o[111]=i[0],o[112]=i[1],o[113]=i[2],o[114]=i[3],o[115]=i[4],o[116]=i[5],o[117]=i[6])})},function(e){return o[119]=new t.Map,o[119].set("task_id",o[111]),o[119].set("queue_name",o[112]),o[119].set("enqueue_timestamp_ms",o[113]),o[119].set("priority",o[114]),o[119].set("first_executed_timestamp_ms",o[115]),o[119].set("execution_time_ns",o[116]),o[119].set("echo_encoding_execution_time_ns",o[117]),o[120]=new t.Map,o[120].set("task_metadata",o[119]),o[120].set("action_type",o[62]),o[120].set("content_type",o[63]),o[120].set("identifiers",void 0),o[120].set("identifiers_v2",o[55]),o[120].set("task_creation_source",void 0),o[120].set("message_payload_source",t.i64.cast([0,2])),o[106]!==void 0?(o[122]=o[106].get("stored_procedure"),o[123]=o[106].get("error_code"),o[124]=o[106].get("error_message"),o[125]=".",o[126]=[o[122],o[125],t.i64.to_string(o[123]),o[125],o[124]].join(""),o[6]!==void 0&&o[126]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[126]):t.resolve()):t.resolve()},function(e){return o[94]!==void 0?(o[122]=o[94].get("stored_procedure"),o[123]=o[94].get("error_code"),o[124]=o[94].get("error_message"),o[125]=".",o[126]=[o[122],o[125],t.i64.to_string(o[123]),o[125],o[124]].join(""),o[6]!==void 0&&o[126]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[126]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[121]=t.createArray(),o[122]=(o[121].push(o[94]),o[121]),n=[void 0,o[106],o[120],o[121]],o[107]=n[0],o[108]=n[1],o[109]=n[2],o[110]=n[3]}])},function(e){var t;return t=[o[107],o[108],o[109],o[110]],o[101]=t[0],o[102]=t[1],o[103]=t[2],o[104]=t[3],t}])},function(e){var t;return t=[o[101],o[102],o[103],o[104]],o[95]=t[0],o[96]=t[1],o[97]=t[2],o[98]=t[3],t}])},function(e){var t;return t=[o[95],o[96],o[97],o[98]],o[88]=t[0],o[89]=t[1],o[90]=t[2],o[91]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[103]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[104]=void 0:o[104]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[103],t.i64.cast([0,1e6])),o[19]),o[104]],o[92]=a[0],o[93]=a[1],o[94]=a[2],o[95]=a[3],o[96]=a[4],o[97]=a[5],o[98]=a[6]):(r=s.item,o[103]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[104]=void 0:o[104]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[103],t.i64.cast([0,1e6])),o[19]),o[104]],o[92]=i[0],o[93]=i[1],o[94]=i[2],o[95]=i[3],o[96]=i[4],o[97]=i[5],o[98]=i[6])})},function(e){return o[100]=new t.Map,o[100].set("task_id",o[92]),o[100].set("queue_name",o[93]),o[100].set("enqueue_timestamp_ms",o[94]),o[100].set("priority",o[95]),o[100].set("first_executed_timestamp_ms",o[96]),o[100].set("execution_time_ns",o[97]),o[100].set("echo_encoding_execution_time_ns",o[98]),o[101]=new t.Map,o[101].set("task_metadata",o[100]),o[101].set("action_type",o[62]),o[101].set("content_type",o[63]),o[101].set("identifiers",void 0),o[101].set("identifiers_v2",o[55]),o[101].set("task_creation_source",void 0),o[101].set("message_payload_source",t.i64.cast([0,2])),o[87]!==void 0?(o[103]=o[87].get("stored_procedure"),o[104]=o[87].get("error_code"),o[105]=o[87].get("error_message"),o[106]=".",o[107]=[o[103],o[106],t.i64.to_string(o[104]),o[106],o[105]].join(""),o[6]!==void 0&&o[107]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[107]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[102]=t.createArray(),o[103]=(o[102].push(void 0),o[102]),n=[void 0,o[87],o[101],o[102]],o[88]=n[0],o[89]=n[1],o[90]=n[2],o[91]=n[3]}])},function(e){var t;return t=[o[88],o[89],o[90],o[91]],o[78]=t[0],o[79]=t[1],o[80]=t[2],o[81]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[93]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[94]=void 0:o[94]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[93],t.i64.cast([0,1e6])),o[19]),o[94]],o[82]=a[0],o[83]=a[1],o[84]=a[2],o[85]=a[3],o[86]=a[4],o[87]=a[5],o[88]=a[6]):(r=s.item,o[93]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[94]=void 0:o[94]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[93],t.i64.cast([0,1e6])),o[19]),o[94]],o[82]=i[0],o[83]=i[1],o[84]=i[2],o[85]=i[3],o[86]=i[4],o[87]=i[5],o[88]=i[6])})},function(e){return o[90]=new t.Map,o[90].set("task_id",o[82]),o[90].set("queue_name",o[83]),o[90].set("enqueue_timestamp_ms",o[84]),o[90].set("priority",o[85]),o[90].set("first_executed_timestamp_ms",o[86]),o[90].set("execution_time_ns",o[87]),o[90].set("echo_encoding_execution_time_ns",o[88]),o[91]=new t.Map,o[91].set("task_metadata",o[90]),o[91].set("action_type",o[62]),o[91].set("content_type",o[63]),o[91].set("identifiers",void 0),o[91].set("identifiers_v2",o[55]),o[91].set("task_creation_source",void 0),o[91].set("message_payload_source",t.i64.cast([0,2])),o[77]!==void 0?(o[93]=o[77].get("stored_procedure"),o[94]=o[77].get("error_code"),o[95]=o[77].get("error_message"),o[96]=".",o[97]=[o[93],o[96],t.i64.to_string(o[94]),o[96],o[95]].join(""),o[6]!==void 0&&o[97]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[97]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[92]=t.createArray(),o[93]=(o[92].push(void 0),o[92]),n=[void 0,o[77],o[91],o[92]],o[78]=n[0],o[79]=n[1],o[80]=n[2],o[81]=n[3]}])},function(e){var t;return t=[o[78],o[79],o[80],o[81]],o[58]=t[0],o[59]=t[1],o[60]=t[2],o[61]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[84]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[85]=void 0:o[85]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[84],t.i64.cast([0,1e6])),o[19]),o[85]],o[72]=a[0],o[73]=a[1],o[74]=a[2],o[75]=a[3],o[76]=a[4],o[77]=a[5],o[78]=a[6]):(r=s.item,o[84]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[85]=void 0:o[85]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[84],t.i64.cast([0,1e6])),o[19]),o[85]],o[72]=i[0],o[73]=i[1],o[74]=i[2],o[75]=i[3],o[76]=i[4],o[77]=i[5],o[78]=i[6])})},function(e){return o[80]=new t.Map,o[80].set("task_id",o[72]),o[80].set("queue_name",o[73]),o[80].set("enqueue_timestamp_ms",o[74]),o[80].set("priority",o[75]),o[80].set("first_executed_timestamp_ms",o[76]),o[80].set("execution_time_ns",o[77]),o[80].set("echo_encoding_execution_time_ns",o[78]),o[81]=new t.Map,o[81].set("task_metadata",o[80]),o[81].set("action_type",o[62]),o[81].set("content_type",o[63]),o[81].set("identifiers",void 0),o[81].set("identifiers_v2",o[55]),o[81].set("task_creation_source",void 0),o[81].set("message_payload_source",t.i64.cast([0,2])),o[82]=new t.Map,o[82].set("error_code",o[64]),o[82].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[82].set("error_message",""),o[82]!==void 0?(o[84]=o[82].get("stored_procedure"),o[85]=o[82].get("error_code"),o[86]=o[82].get("error_message"),o[87]=".",o[88]=[o[84],o[87],t.i64.to_string(o[85]),o[87],o[86]].join(""),o[6]!==void 0&&o[88]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[88]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[83]=t.createArray(),n=[void 0,o[82],o[81],o[83]],o[58]=n[0],o[59]=n[1],o[60]=n[2],o[61]=n[3]}])},function(e){var t;return t=[o[58],o[59],o[60],o[61]],o[50]=t[0],o[51]=t[1],o[52]=t[2],o[53]=t[3],t}]))})},function(e){var t;return t=[o[50],o[51],o[52],o[53]],o[42]=t[0],o[43]=t[1],o[44]=t[2],o[45]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[58]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[58],t.i64.cast([0,1e6])),o[19]),void 0],o[46]=a[0],o[47]=a[1],o[48]=a[2],o[49]=a[3],o[50]=a[4],o[51]=a[5],o[52]=a[6]):(r=s.item,o[58]=t.i64.of_float(Date.now()),i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[58],t.i64.cast([0,1e6])),o[19]),void 0],o[46]=i[0],o[47]=i[1],o[48]=i[2],o[49]=i[3],o[50]=i[4],o[51]=i[5],o[52]=i[6])})},function(e){return o[54]=new t.Map,o[54].set("task_id",o[46]),o[54].set("queue_name",o[47]),o[54].set("enqueue_timestamp_ms",o[48]),o[54].set("priority",o[49]),o[54].set("first_executed_timestamp_ms",o[50]),o[54].set("execution_time_ns",o[51]),o[54].set("echo_encoding_execution_time_ns",o[52]),o[55]=new t.Map,o[55].set("task_metadata",o[54]),o[55].set("action_type",void 0),o[55].set("content_type",void 0),o[55].set("identifiers",void 0),o[55].set("identifiers_v2",void 0),o[55].set("task_creation_source",void 0),o[55].set("message_payload_source",t.i64.cast([0,2])),o[56]=new t.Map,o[56].set("error_code",t.i64.cast([0,24])),o[56].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[56].set("error_message",""),o[56]!==void 0?(o[58]=o[56].get("stored_procedure"),o[59]=o[56].get("error_code"),o[60]=o[56].get("error_message"),o[61]=".",o[62]=[o[58],o[61],t.i64.to_string(o[59]),o[61],o[60]].join(""),o[6]!==void 0&&o[62]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[62]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[57]=t.createArray(),n=[void 0,o[56],o[55],o[57]],o[42]=n[0],o[43]=n[1],o[44]=n[2],o[45]=n[3]}])},function(e){var t;return t=[o[42],o[43],o[44],o[45]],o[12]=t[0],o[13]=t[1],o[14]=t[2],o[15]=t[3],t}]):t.sequence([function(n){return o[23]=o[10].get("errors"),o[24]=o[10].get("errors"),t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[37]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[37],t.i64.cast([0,1e6])),o[19]),void 0],o[25]=a[0],o[26]=a[1],o[27]=a[2],o[28]=a[3],o[29]=a[4],o[30]=a[5],o[31]=a[6]):(r=s.item,o[37]=t.i64.of_float(Date.now()),i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[37],t.i64.cast([0,1e6])),o[19]),void 0],o[25]=i[0],o[26]=i[1],o[27]=i[2],o[28]=i[3],o[29]=i[4],o[30]=i[5],o[31]=i[6])})},function(e){return o[33]=new t.Map,o[33].set("task_id",o[25]),o[33].set("queue_name",o[26]),o[33].set("enqueue_timestamp_ms",o[27]),o[33].set("priority",o[28]),o[33].set("first_executed_timestamp_ms",o[29]),o[33].set("execution_time_ns",o[30]),o[33].set("echo_encoding_execution_time_ns",o[31]),o[34]=new t.Map,o[34].set("task_metadata",o[33]),o[34].set("action_type",void 0),o[34].set("content_type",void 0),o[34].set("identifiers",void 0),o[34].set("identifiers_v2",void 0),o[34].set("task_creation_source",void 0),o[34].set("message_payload_source",t.i64.cast([0,2])),o[35]=new t.Map,o[35].set("error_code",t.i64.cast([0,1])),o[35].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[35].set("error_message",""),o[35]!==void 0?(o[37]=o[35].get("stored_procedure"),o[38]=o[35].get("error_code"),o[39]=o[35].get("error_message"),o[40]=".",o[41]=[o[37],o[40],t.i64.to_string(o[38]),o[40],o[39]].join(""),o[6]!==void 0&&o[41]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[41]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[36]=t.createArray(),n=[void 0,o[35],o[34],o[36]],o[12]=n[0],o[13]=n[1],o[14]=n[2],o[15]=n[3]}])},function(e){return o[16]=t.i64.of_float(Date.now()),o[17]=t.i64.random(),o[20]="Finishing execution. Execution time: ",o[21]=t.i64.to_string(t.i64.sub(o[16],o[0])),o[22]=" ms",o[18]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][serializeBackupPayloadV2] ",o[18],o[20],o[18],o[21],o[18],o[22]].join("")),t.i64.eq(t.i64.mod_(o[17],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(o[23]=",",o[24]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"serializeBackupPayloadV2",[o[20],o[23],o[21],o[23],o[22]].join(""),o[24],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[o[12],o[13],o[14],o[15]],a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],t}])},function(e){return t.resolve(a)}])}e.__sproc_name__="LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure",e.__tables__=["pending_tasks","secure_encrypted_backups_client_state","pending_backups_context_v2","pending_protobuf_backups_context","secure_encrypted_backups_epochs"];var s=e;l.default=s}),98);
__d("LSTaskSerializerEncryptedBackupsUpload",["LSArrayGetObjectAt","LSLogMebClientEvent.nop","LSSerializeBackupPayloadV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsUpload] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.forEach(t.db.table(177).fetch([[[e[0]]],"fk_pending_tasks"]),function(e){var n=e.update,r=e.item;return n({backupStatus:t.i64.cast([0,2])})})},function(o){return t.storedProcedure(n("LSSerializeBackupPayloadV2"),e[0]).then(function(e){var t;return t=e,r[2]=t[0],r[3]=t[1],r[4]=t[2],r[5]=t[3],t})},function(e){return r[6]=t.createArray(),r[7]=t.i64.of_int32(r[5].length),t.i64.gt(r[7],t.i64.cast([0,0]))?t.loopAsync(r[7],function(e){return r[23]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[5],r[23]).then(function(e){var t;return t=e,r[24]=t[0],r[25]=t[1],t})},function(e){return r[24]!==void 0?r[26]=(r[6].push(r[24]),r[6]):0}])}):t.resolve()},function(e){return r[8]=t.i64.of_int32(r[6].length),t.i64.gt(r[8],t.i64.cast([0,0]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[6],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[23]=t[0],r[24]=t[1],t})},function(e){return r[9]=r[23]}]):t.resolve(r[9]=void 0)},function(e){var o,a,i,l;return r[2]?r[10]=!1:r[10]=!0,r[10]?(r[3]?r[23]=!1:r[23]=!0,r[23]?(i=[void 0,void 0,r[9],r[6],r[4]],r[24]=i[0],r[25]=i[1],r[26]=i[2],r[27]=i[3],r[28]=i[4]):(a=[void 0,r[3],r[9],r[6],r[4]],r[24]=a[0],r[25]=a[1],r[26]=a[2],r[27]=a[3],r[28]=a[4]),l=[r[24],r[25],r[26],r[27],r[28]],r[11]=l[0],r[12]=l[1],r[13]=l[2],r[14]=l[3],r[15]=l[4]):(r[23]=r[2].get("payload"),o=[r[23],r[3],r[9],r[6],r[4]],r[11]=o[0],r[12]=o[1],r[13]=o[2],r[14]=o[3],r[15]=o[4]),r[23]=new t.Map,r[24]=r[23].set("success",r[11]),r[25]=r[23].set("failure",r[12]),r[26]=r[23].set("protobuf_failure",r[13]),r[27]=r[23].set("protobuf_failures",r[14]),r[28]=r[23].set("context",r[15]),r[29]=t.toJSON(r[23]),r[16]=r[29],r[17]=t.i64.of_float(Date.now()),r[18]=t.i64.random(),r[20]="Finishing execution. Execution time: ",r[21]=t.i64.to_string(t.i64.sub(r[17],r[0])),r[22]=" ms",r[19]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsUpload] ",r[19],r[20],r[19],r[21],r[19],r[22]].join("")),t.i64.eq(t.i64.mod_(r[18],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[23]=",",r[24]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUpload",[r[20],r[23],r[21],r[23],r[22]].join(""),r[24],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=[r[16],t.i64.cast([0,50026])],o[0]=n[0],o[1]=n[1],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadStoredProcedure",e.__tables__=["pending_backups_context_v2"],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsUploadProtobufOnly",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return r[0]=new n.Map,r[0].set("error_code",n.i64.cast([0,802])),r[0].set("stored_procedure","LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure"),r[0].set("error_message",""),r[2]=new n.Map,r[3]=r[2].set("success",void 0),r[4]=r[2].set("failure",r[0]),r[5]=r[2].set("context",void 0),r[6]=n.toJSON(r[2]),r[1]=r[6],e=[r[1],n.i64.cast([0,50042]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsUploadSenderBackup",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] Beginning execution."),r[1]=t.i64.of_float(Date.now()),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] LSEncryptedBackupsMinosEncrypt native op not supported"),r[3]="LSEncryptedBackupsMinosEncrypt native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] ","",r[3]].join("")),r[2]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure",r[3],r[2],t.i64.cast([0,3]))},function(e){return r[4]=new t.Map,r[4].set("error_code",t.i64.cast([0,3])),r[4].set("stored_procedure","taskSerializerEncryptedBackupsUploadSenderBackup"),r[4].set("error_message",""),r[12]=new t.Map,r[13]=r[12].set("success",void 0),r[14]=r[12].set("failure",r[4]),r[15]=r[12].set("context",void 0),r[16]=t.toJSON(r[12]),r[5]=r[16],r[6]=t.i64.of_float(Date.now()),r[7]=t.i64.random(),r[9]="Finishing execution. Execution time: ",r[10]=t.i64.to_string(t.i64.sub(r[6],r[0])),r[11]=" ms",r[8]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] ",r[8],r[9],r[8],r[10],r[8],r[11]].join("")),t.i64.eq(t.i64.mod_(r[7],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[12]=",",r[13]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUploadSenderBackup",[r[9],r[12],r[10],r[12],r[11]].join(""),r[13],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=[r[5],t.i64.cast([0,50057]),void 0],o[0]=n[0],o[1]=n[1],o[2]=n[2],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerMuteThreadV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i=r.done,l=r.value;return i?(n[4]=t.createArray(),n[5]=(n[4].push("TaskSerializerMuteThreadV2: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=l.item,t.sequence([function(e){return n[8]=o.threadKey,t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o,a=e.done,i=e.value;return a?(n[9]=t.createArray(),n[10]=(n[9].push("TaskSerializerMuteThreadV2: Thread not found"),n[9]),n[11]=(n[9].push(n[8]),n[9]),n[12]=t.toJSON(n[9]),(function(e){t.logger(e).mustfix(e)})(n[12]),o=[void 0,void 0,void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]):(r=i.item,t.sequence([function(e){return t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[9]=t.i64.cast([0,1]):(r=a.item,n[14]=r.syncGroup,t.i64.neq(n[14],void 0)?n[13]=n[14]:n[13]=t.i64.cast([0,1]),n[9]=n[13])})},function(e){var o;return n[11]=new t.Map,n[11].set("thread_key",n[8]),n[11].set("mailbox_type",t.i64.cast([0,0])),n[11].set("mute_expire_time_ms",r.muteExpireTimeMs),n[11].set("sync_group",n[9]),n[12]=t.toJSON(n[11]),o=[n[12],t.i64.cast([0,144]),void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]}]))})},function(e){var t;return t=[n[4],n[5],n[6]],n[0]=t[0],n[1]=t[1],n[2]=t[2],t}]))})},function(e){var t;return t=[n[0],n[1]],r[0]=t[0],r[1]=t[1],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerMuteThreadV2StoredProcedure",e.__tables__=["threads_optimistic_context","threads"],a.exports=e}),null);
__d("LSTaskSerializerRemoveThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i,l,s,u=r.done,c=r.value;return u?(n[4]=t.createArray(),n[5]=(n[4].push("TaskSerializerRemoveThreadV2: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=c.item,n[7]=o.removeType,t.i64.neq(n[7],void 0)?(n[8]=new t.Map,n[8].set("thread_key",o.threadKey),n[8].set("remove_type",n[7]),n[8].set("sync_group",o.syncGroup==null?t.i64.cast([0,1]):o.syncGroup),n[9]=t.toJSON(n[8]),i=[n[9],t.i64.cast([0,146]),void 0],n[4]=i[0],n[5]=i[1],n[6]=i[2]):(l=[void 0,void 0,void 0],n[4]=l[0],n[5]=l[1],n[6]=l[2]),s=[n[4],n[5],n[6]],n[0]=s[0],n[1]=s[1],n[2]=s[2])})},function(e){var t;return t=[n[0],n[1]],r[0]=t[0],r[1]=t[1],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerRemoveThreadStoredProcedure",e.__tables__=["threads_optimistic_context"],a.exports=e}),null);
__d("LSTaskSerializerSendMessageV2",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.db.table(31).fetch([[[e[0]]]]).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(r[4]=t.createArray(),r[5]=(r[4].push("task ID not found"),r[4]),r[6]=(r[4].push(e[0]),r[4]),r[7]=t.toJSON(r[4]),(function(e){t.logger(e).mustfix(e)})(r[7]),i=[void 0,void 0,void 0],r[0]=i[0],r[1]=i[1],r[2]=i[2]):(a=s.item,t.sequence([function(o){return r[11]=a.offlineThreadingId,r[12]=a.messageId,r[23]=a.threadAttributionSource,r[9]=a.platformRef,r[10]=a.platformToken,r[8]=a.replySourceId,r[13]=a.replySourceType,r[22]=a.sendType,r[25]=a.markThreadRead,r[15]=a.initiatingSource,r[16]=a.skipUrlPreviewGen,r[18]=a.textHasLinks,r[19]=a.dataclassParams,r[20]=a.multitabEnv,r[21]=a.metadataDataclass,r[17]=a.richTextFormatType,r[24]=a.subthreadParentMessageId,r[14]=a.isExclusiveToSubthread,t.db.table(12).fetch([[[r[11]]],"optimistic"]).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(r[26]=t.createArray(),r[27]=(r[26].push("OTID not found"),r[26]),r[28]=(r[26].push(r[11]),r[26]),r[29]=t.toJSON(r[26]),(function(e){t.logger(e).mustfix(e)})(r[29]),i=[void 0,void 0,void 0],r[4]=i[0],r[5]=i[1],r[6]=i[2]):(a=s.item,t.sequence([function(o){return r[34]=a.text,r[30]=a.threadKey,r[35]=a.messageId,r[43]=a.senderId,r[32]=a.stickerId,r[37]=a.mentionOffsets,r[38]=a.mentionLengths,r[31]=a.mentionIds,r[39]=a.mentionTypes,r[42]=a.replyType,r[40]=a.isForwarded,r[36]=a.forwardScore,r[41]=a.hotEmojiSize,r[33]=a.metadataDataclass,t.db.table(9).fetch([[[r[30]]]]).next().then(function(o,i){var l,s=o.done,u=o.value;return s?(r[44]=t.createArray(),r[45]=(r[44].push("thread not found"),r[44]),r[46]=(r[44].push(r[30]),r[44]),r[47]=t.toJSON(r[44]),(function(e){t.logger(e).mustfix(e)})(r[47]),l=[void 0,void 0,void 0],r[26]=l[0],r[27]=l[1],r[28]=l[2]):(i=u.item,t.sequence([function(n){return r[51]=i.threadName,r[49]=i.threadKey,r[52]=i.mailboxType,r[50]=i.threadType,r[53]=i.capabilities,r[54]=i.capabilities2,r[55]=i.capabilities3,r[56]=i.capabilities4,r[57]=i.capabilities5,t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,o){var a=n.done,i=n.value;return a?r[44]=!1:(o=i.item,t.sequence([function(n){return t.islc(t.db.table(2).fetch([[[o.queueName]],"queueNameTaskId"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(n,o){var a=n.done,i=n.value;return a?r[58]=!1:(o=i.item,r[58]=t.i64.eq(o.taskId,e[0]))})},function(e){return r[44]=r[58]}]))})},function(e){return t.i64.eq(i.authorityLevel,t.i64.cast([0,20]))&&[t.i64.cast([0,2]),t.i64.cast([0,5]),t.i64.cast([0,205]),t.i64.cast([0,206]),t.i64.cast([0,26])].some(function(e){return t.i64.eq(r[50],e)})&&r[44]?t.sequence([function(e){return r[61]=r[22]==null?t.i64.cast([0,1]):r[22],t.db.table(9).fetch([[[r[30]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[58]=t.i64.cast([0,1]):(n=a.item,r[77]=n.syncGroup,t.i64.neq(r[77],void 0)?r[76]=r[77]:r[76]=t.i64.cast([0,1]),r[58]=r[76])})},function(e){return r[60]=new t.Map,r[60].set("thread_id",r[30]),r[60].set("otid",r[11]),r[60].set("source",r[23]==null?t.i64.cast([0,0]):r[23]),r[60].set("send_type",t.i64.cast([0,1])),r[60].set("sync_group",r[58]),r[60].set("mark_thread_read",r[25]),t.i64.eq(r[61],t.i64.cast([0,1]))?t.resolve(r[60].set("text",r[34])):t.i64.eq(r[61],t.i64.cast([0,2]))?(t.i64.neq(r[32],void 0)&&(r[60].set("sticker_id",r[32]),r[60].set("send_type",r[61])),r[33]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[33]).then(function(e){var t;return t=e,r[76]=t[0],t})},function(e){return r[77]=new t.Map,r[78]=r[76].keys(),r[79]=t.i64.of_int32(r[78].length),t.i64.gt(r[79],t.i64.cast([0,0]))?t.loopAsync(r[79],function(e){return r[83]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[78],r[83]).then(function(e){var t;return t=e,r[84]=t[0],r[85]=t[1],t})},function(e){return r[86]=r[76].get(r[84]),r[77].set(r[84],r[86])}])}):t.resolve()},function(e){return r[80]=r[77].get("xma_music_sticker_message_metadata"),r[80]?r[81]=!1:r[81]=!0,r[81]?t.resolve(r[82]=void 0):t.sequence([function(e){return r[83]=new t.Map,r[84]=r[80].keys(),r[85]=t.i64.of_int32(r[84].length),t.i64.gt(r[85],t.i64.cast([0,0]))?t.loopAsync(r[85],function(e){return r[86]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[84],r[86]).then(function(e){var t;return t=e,r[87]=t[0],r[88]=t[1],t})},function(e){return r[89]=r[80].get(r[87]),r[83].set(r[87],r[89])}])}):t.resolve()},function(e){return r[82]=r[83]}])},function(e){return r[82]!==void 0?r[60].set("send_type",r[61]):0}]):t.resolve()):t.i64.eq(r[61],t.i64.cast([0,7]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[76]=n[0],r[77]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[76]=o[0],r[77]=o[1])})},function(e){return r[76]!==void 0&&t.i64.neq(r[77],void 0)?(r[60].set("url",r[76]),r[60].set("attribution_app_id",r[77]),r[60].set("send_type",r[61]),r[33]!==void 0?r[60].set("metadata_dataclass",r[33]):0):0}]):t.i64.eq(r[61],t.i64.cast([0,3]))?t.sequence([function(e){return r[60].set("text",r[34]),r[76]=t.createArray(),r[77]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[78]=n.offlineAttachmentId,r[79]=(r[76].push(t.i64.from_string(n.attachmentFbid)),r[76]),r[78]!==void 0?r[79]=(r[77].push(r[78]),r[77]):0})},function(e){return r[60].set("attachment_fbids",r[76]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[77]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,9]))?t.sequence([function(e){return r[60].set("text",r[34]),r[76]=t.createArray(),r[77]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[78]=n.offlineAttachmentId,r[79]=(r[76].push(t.i64.from_string(n.attachmentFbid)),r[76]),r[78]!==void 0?r[79]=(r[77].push(r[78]),r[77]):0})},function(e){return r[60].set("attachment_fbids",r[76]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[77]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,4]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[76]=void 0:(t=o.item,r[76]=t.attachmentFbid)})},function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[78]=void 0:(t=o.item,r[78]=t.actionUrl)})},function(e){return r[76]!==void 0?(r[60].set("text",r[34]),r[78]!==void 0&&r[60].set("url",r[78]),r[60].set("forwarded_share_id",r[76]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,5]))?t.resolve(r[12]!==void 0?(r[60].set("forwarded_msg_id",r[12]),r[60].set("send_type",r[61]),t.i64.neq(r[36],void 0)&&r[60].set("forward_score",r[36]),r[60].set("strip_forwarded_msg_caption",!1)):0):t.i64.eq(r[61],t.i64.cast([0,6]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[76]=n[0],r[77]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[76]=o[0],r[77]=o[1])})},function(e){return r[76]!==void 0?(r[60].set("url",r[76]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,11]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[76]=n[0],r[77]=n[1],n):(t=i.item,o=[t.actionUrl,t.attributionAppId],r[76]=o[0],r[77]=o[1])})},function(e){return r[76]!==void 0?(r[60].set("url",r[76]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.resolve(t.i64.eq(r[61],t.i64.cast([0,12]))?r[60].set("send_type",r[61]):0)},function(e){return r[72]=r[24]==null?void 0:r[24],r[71]=r[8]===""?void 0:r[8],r[71]!==void 0&&t.i64.neq(r[13],void 0)&&(r[76]=new t.Map,r[76].set("reply_source_id",r[71]),r[76].set("reply_source_type",r[13]),r[76].set("reply_type",r[42]==null?t.i64.cast([0,0]):r[42]),r[76].set("reply_source_attachment_id",void 0),r[60].set("reply_metadata",r[76])),r[72]!==void 0&&r[14]!==void 0&&(r[76]=new t.Map,r[76].set("subthread_parent_message_id",r[72]),r[76].set("is_exclusive_to_subthread",r[14]),r[60].set("subthread_data",r[76])),r[73]=r[31]===""?void 0:r[31],r[73]!==void 0&&(r[76]=r[37]===""?void 0:r[37],r[76]!==void 0&&(r[77]=r[38]===""?void 0:r[38],r[77]!==void 0&&(r[78]=new t.Map,r[78].set("mention_ids",r[73]),r[78].set("mention_offsets",r[76]),r[78].set("mention_lengths",r[77]),r[78].set("mention_types",r[39]===""?void 0:r[39]),r[60].set("mention_data",r[78])))),r[40]!==void 0&&r[60].set("is_forwarded",r[40]),r[74]=r[9]===""?void 0:r[9],r[74]!==void 0&&r[60].set("platform_ref",r[74]),r[75]=r[10]===""?void 0:r[10],r[75]!==void 0&&r[60].set("platform_token",r[75]),[t.i64.cast([0,1]),t.i64.cast([0,2])].some(function(e){return t.i64.eq(r[61],e)})&&t.i64.neq(r[41],void 0)&&r[60].set("hot_emoji_size",r[41]),t.i64.neq(r[15],void 0)&&r[60].set("initiating_source",r[15]),r[16]!==void 0&&r[60].set("skip_url_preview_gen",r[16]),t.i64.neq(r[17],void 0)&&r[60].set("rich_text_format_type",r[17]),t.resolve()},function(e){return r[18]!==void 0&&r[60].set("text_has_links",r[18]),r[19]!==void 0&&r[60].set("dataclass_params",r[19]),r[20]!==void 0&&r[60].set("multitab_env",r[20]),r[21]!==void 0&&r[60].set("metadata_dataclass",r[21]),t.filter(t.db.table(14).fetch([[[r[49],r[43]]]]),function(e){return t.i64.eq(e.threadKey,r[49])&&t.i64.eq(t.i64.cast([0,0]),r[52])&&t.i64.eq(e.contactId,r[43])}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[62]=!1:(n=a.item,t.i64.eq(r[50],t.i64.cast([0,152]))?(r[77]=n.threadRoles,t.i64.lt(t.i64.cast([0,7]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,7]),t.i64.cast([0,9]))?r[78]=!1:r[78]=!t.i64.eq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[77]),t.i64.cast([0,0])),r[79]=r[53],r[80]=r[54],r[81]=r[55],r[82]=r[56],r[83]=r[57],r[85]=t.i64.div(t.i64.cast([0,223]),t.i64.cast([0,64])),r[86]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.sub(t.i64.cast([0,223]),t.i64.mul(r[85],t.i64.cast([0,64]))))),t.i64.lt(t.i64.cast([0,223]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,223]),t.i64.cast([0,300]))?r[84]=!1:(t.i64.eq(r[85],t.i64.cast([0,0]))?r[87]=!t.i64.eq(t.i64.and_(r[86],r[79]),t.i64.cast([0,0])):(t.i64.eq(r[85],t.i64.cast([0,1]))?r[88]=!t.i64.eq(t.i64.and_(r[86],r[80]),t.i64.cast([0,0])):(t.i64.eq(r[85],t.i64.cast([0,2]))?r[89]=!t.i64.eq(t.i64.and_(r[86],r[81]),t.i64.cast([0,0])):(t.i64.eq(r[85],t.i64.cast([0,3]))?r[90]=!t.i64.eq(t.i64.and_(r[86],r[82]),t.i64.cast([0,0])):(t.i64.eq(r[85],t.i64.cast([0,4]))?r[91]=!t.i64.eq(t.i64.and_(r[86],r[83]),t.i64.cast([0,0])):r[91]=!1,r[90]=r[91]),r[89]=r[90]),r[88]=r[89]),r[87]=r[88]),r[84]=r[87]),r[78]!==r[84]&&((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),t.throw("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),r[76]=r[78]):r[76]=!1,r[62]=r[76])})},function(e){return r[62]&&r[60].set("perform_action_as_page",!0),r[64]=t.createArray(),t.forEach(t.db.table(14).fetch([[[r[30]]]]),function(e){var t=e.item;return r[76]=(r[64].push(t.contactId),r[64])})},function(e){return r[65]=new t.Map,r[65].set("participants",r[64]),r[65].set("send_payload",r[60]),r[51]!==void 0&&r[65].set("thread_name",r[51]),t.db.table(312).fetch([[[r[30]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[66]=void 0:(t=o.item,r[66]=t.metadata)})},function(e){return r[65].set("thread_metadata",r[66]),t.forEach(t.db.table(9).fetch([[[r[49]]]]),function(e){var t=e.update,n=e.item;return t({otidOfFirstMessage:a.offlineThreadingId})})},function(e){var n,o,a,i,l,s,u,c,d;return r[66]===void 0?(t.i64.eq(r[50],t.i64.cast([0,5]))||t.i64.eq(r[50],t.i64.cast([0,26]))?((function(e){t.logger(e).mustfix(e)})("For Marketplace & community chat subthreads, thread metadata cannot be null"),n=[void 0,void 0,void 0],r[76]=n[0],r[77]=n[1],r[78]=n[2]):(r[79]=t.toJSON(r[65]),o=[r[79],t.i64.cast([0,130]),void 0],r[76]=o[0],r[77]=o[1],r[78]=o[2]),a=[r[76],r[77],r[78]],r[68]=a[0],r[69]=a[1],r[70]=a[2]):(t.i64.eq(r[50],t.i64.cast([0,5]))?(r[79]=t.toJSON(r[65]),i=[r[79],t.i64.cast([0,645]),void 0],r[76]=i[0],r[77]=i[1],r[78]=i[2]):(t.i64.eq(r[50],t.i64.cast([0,2]))?(r[82]=t.toJSON(r[65]),l=[r[82],t.i64.cast([0,787]),void 0],r[79]=l[0],r[80]=l[1],r[81]=l[2]):(r[82]=t.toJSON(r[65]),s=[r[82],t.i64.cast([0,645]),void 0],r[79]=s[0],r[80]=s[1],r[81]=s[2]),u=[r[79],r[80],r[81]],r[76]=u[0],r[77]=u[1],r[78]=u[2]),c=[r[76],r[77],r[78]],r[68]=c[0],r[69]=c[1],r[70]=c[2]),d=[r[68],r[69],r[70]],r[46]=d[0],r[47]=d[1],r[48]=d[2]}]):t.sequence([function(e){return r[61]=r[22]==null?t.i64.cast([0,1]):r[22],t.db.table(9).fetch([[[r[30]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[58]=t.i64.cast([0,1]):(n=a.item,r[71]=n.syncGroup,t.i64.neq(r[71],void 0)?r[70]=r[71]:r[70]=t.i64.cast([0,1]),r[58]=r[70])})},function(e){return r[60]=new t.Map,r[60].set("thread_id",r[30]),r[60].set("otid",r[11]),r[60].set("source",r[23]==null?t.i64.cast([0,0]):r[23]),r[60].set("send_type",t.i64.cast([0,1])),r[60].set("sync_group",r[58]),r[60].set("mark_thread_read",r[25]),t.i64.eq(r[61],t.i64.cast([0,1]))?t.resolve(r[60].set("text",r[34])):t.i64.eq(r[61],t.i64.cast([0,2]))?(t.i64.neq(r[32],void 0)&&(r[60].set("sticker_id",r[32]),r[60].set("send_type",r[61])),r[33]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[33]).then(function(e){var t;return t=e,r[70]=t[0],t})},function(e){return r[71]=new t.Map,r[72]=r[70].keys(),r[73]=t.i64.of_int32(r[72].length),t.i64.gt(r[73],t.i64.cast([0,0]))?t.loopAsync(r[73],function(e){return r[77]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[72],r[77]).then(function(e){var t;return t=e,r[78]=t[0],r[79]=t[1],t})},function(e){return r[80]=r[70].get(r[78]),r[71].set(r[78],r[80])}])}):t.resolve()},function(e){return r[74]=r[71].get("xma_music_sticker_message_metadata"),r[74]?r[75]=!1:r[75]=!0,r[75]?t.resolve(r[76]=void 0):t.sequence([function(e){return r[77]=new t.Map,r[78]=r[74].keys(),r[79]=t.i64.of_int32(r[78].length),t.i64.gt(r[79],t.i64.cast([0,0]))?t.loopAsync(r[79],function(e){return r[80]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[78],r[80]).then(function(e){var t;return t=e,r[81]=t[0],r[82]=t[1],t})},function(e){return r[83]=r[74].get(r[81]),r[77].set(r[81],r[83])}])}):t.resolve()},function(e){return r[76]=r[77]}])},function(e){return r[76]!==void 0?r[60].set("send_type",r[61]):0}]):t.resolve()):t.i64.eq(r[61],t.i64.cast([0,7]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[70]=n[0],r[71]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[70]=o[0],r[71]=o[1])})},function(e){return r[70]!==void 0&&t.i64.neq(r[71],void 0)?(r[60].set("url",r[70]),r[60].set("attribution_app_id",r[71]),r[60].set("send_type",r[61]),r[33]!==void 0?r[60].set("metadata_dataclass",r[33]):0):0}]):t.i64.eq(r[61],t.i64.cast([0,3]))?t.sequence([function(e){return r[60].set("text",r[34]),r[70]=t.createArray(),r[71]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[72]=n.offlineAttachmentId,r[73]=(r[70].push(t.i64.from_string(n.attachmentFbid)),r[70]),r[72]!==void 0?r[73]=(r[71].push(r[72]),r[71]):0})},function(e){return r[60].set("attachment_fbids",r[70]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[71]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,9]))?t.sequence([function(e){return r[60].set("text",r[34]),r[70]=t.createArray(),r[71]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[72]=n.offlineAttachmentId,r[73]=(r[70].push(t.i64.from_string(n.attachmentFbid)),r[70]),r[72]!==void 0?r[73]=(r[71].push(r[72]),r[71]):0})},function(e){return r[60].set("attachment_fbids",r[70]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[71]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,4]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[70]=void 0:(t=o.item,r[70]=t.attachmentFbid)})},function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[72]=void 0:(t=o.item,r[72]=t.actionUrl)})},function(e){return r[70]!==void 0?(r[60].set("text",r[34]),r[72]!==void 0&&r[60].set("url",r[72]),r[60].set("forwarded_share_id",r[70]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,5]))?t.resolve(r[12]!==void 0?(r[60].set("forwarded_msg_id",r[12]),r[60].set("send_type",r[61]),t.i64.neq(r[36],void 0)&&r[60].set("forward_score",r[36]),r[60].set("strip_forwarded_msg_caption",!1)):0):t.i64.eq(r[61],t.i64.cast([0,6]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[70]=n[0],r[71]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[70]=o[0],r[71]=o[1])})},function(e){return r[70]!==void 0?(r[60].set("url",r[70]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,11]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[70]=n[0],r[71]=n[1],n):(t=i.item,o=[t.actionUrl,t.attributionAppId],r[70]=o[0],r[71]=o[1])})},function(e){return r[70]!==void 0?(r[60].set("url",r[70]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.resolve(t.i64.eq(r[61],t.i64.cast([0,12]))?r[60].set("send_type",r[61]):0)},function(e){return r[66]=r[24]==null?void 0:r[24],r[65]=r[8]===""?void 0:r[8],r[65]!==void 0&&t.i64.neq(r[13],void 0)&&(r[70]=new t.Map,r[70].set("reply_source_id",r[65]),r[70].set("reply_source_type",r[13]),r[70].set("reply_type",r[42]==null?t.i64.cast([0,0]):r[42]),r[70].set("reply_source_attachment_id",void 0),r[60].set("reply_metadata",r[70])),r[66]!==void 0&&r[14]!==void 0&&(r[70]=new t.Map,r[70].set("subthread_parent_message_id",r[66]),r[70].set("is_exclusive_to_subthread",r[14]),r[60].set("subthread_data",r[70])),r[67]=r[31]===""?void 0:r[31],r[67]!==void 0&&(r[70]=r[37]===""?void 0:r[37],r[70]!==void 0&&(r[71]=r[38]===""?void 0:r[38],r[71]!==void 0&&(r[72]=new t.Map,r[72].set("mention_ids",r[67]),r[72].set("mention_offsets",r[70]),r[72].set("mention_lengths",r[71]),r[72].set("mention_types",r[39]===""?void 0:r[39]),r[60].set("mention_data",r[72])))),r[40]!==void 0&&r[60].set("is_forwarded",r[40]),r[68]=r[9]===""?void 0:r[9],r[68]!==void 0&&r[60].set("platform_ref",r[68]),r[69]=r[10]===""?void 0:r[10],r[69]!==void 0&&r[60].set("platform_token",r[69]),[t.i64.cast([0,1]),t.i64.cast([0,2])].some(function(e){return t.i64.eq(r[61],e)})&&t.i64.neq(r[41],void 0)&&r[60].set("hot_emoji_size",r[41]),t.i64.neq(r[15],void 0)&&r[60].set("initiating_source",r[15]),r[16]!==void 0&&r[60].set("skip_url_preview_gen",r[16]),t.i64.neq(r[17],void 0)&&r[60].set("rich_text_format_type",r[17]),t.resolve()},function(e){return r[18]!==void 0&&r[60].set("text_has_links",r[18]),r[19]!==void 0&&r[60].set("dataclass_params",r[19]),r[20]!==void 0&&r[60].set("multitab_env",r[20]),r[21]!==void 0&&r[60].set("metadata_dataclass",r[21]),t.filter(t.db.table(14).fetch([[[r[49],r[43]]]]),function(e){return t.i64.eq(e.threadKey,r[49])&&t.i64.eq(t.i64.cast([0,0]),r[52])&&t.i64.eq(e.contactId,r[43])}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[62]=!1:(n=a.item,t.i64.eq(r[50],t.i64.cast([0,152]))?(r[71]=n.threadRoles,t.i64.lt(t.i64.cast([0,7]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,7]),t.i64.cast([0,9]))?r[72]=!1:r[72]=!t.i64.eq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[71]),t.i64.cast([0,0])),r[73]=r[53],r[74]=r[54],r[75]=r[55],r[76]=r[56],r[77]=r[57],r[79]=t.i64.div(t.i64.cast([0,223]),t.i64.cast([0,64])),r[80]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.sub(t.i64.cast([0,223]),t.i64.mul(r[79],t.i64.cast([0,64]))))),t.i64.lt(t.i64.cast([0,223]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,223]),t.i64.cast([0,300]))?r[78]=!1:(t.i64.eq(r[79],t.i64.cast([0,0]))?r[81]=!t.i64.eq(t.i64.and_(r[80],r[73]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,1]))?r[82]=!t.i64.eq(t.i64.and_(r[80],r[74]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,2]))?r[83]=!t.i64.eq(t.i64.and_(r[80],r[75]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,3]))?r[84]=!t.i64.eq(t.i64.and_(r[80],r[76]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,4]))?r[85]=!t.i64.eq(t.i64.and_(r[80],r[77]),t.i64.cast([0,0])):r[85]=!1,r[84]=r[85]),r[83]=r[84]),r[82]=r[83]),r[81]=r[82]),r[78]=r[81]),r[72]!==r[78]&&((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),t.throw("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),r[70]=r[72]):r[70]=!1,r[62]=r[70])})},function(e){var n;return r[62]&&r[60].set("perform_action_as_page",!0),r[64]=t.toJSON(r[60]),n=[r[64],t.i64.cast([0,46]),void 0],r[46]=n[0],r[47]=n[1],r[48]=n[2]}])},function(e){var t;return t=[r[46],r[47],r[48]],r[26]=t[0],r[27]=t[1],r[28]=t[2],t}]))})},function(e){var t;return t=[r[26],r[27],r[28]],r[4]=t[0],r[5]=t[1],r[6]=t[2],t}]))})},function(e){var t;return t=[r[4],r[5],r[6]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}]))})},function(e){var t;return t=[r[0],r[1]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxTaskSerializerSendMessageV2StoredProcedure",e.__tables__=["messages_optimistic_context","messages","threads","pending_tasks","attachments","participants","threads_optimistic_metadata"],a.exports=e}),null);
__d("LSTaskSerializerSyncThreadCapabilities",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,void 0,void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSMailboxTaskSerializerSyncThreadCapabilitiesStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIsExperimentCapabilityEnabled.nop",["LSACSExperimentCapability","LSIntEnum","MetaConfig","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("MetaConfig")._("87"),c=r("MetaConfig")._("156"),d=function(a,i,l,d){switch((s||(s=o("LSIntEnum"))).toNumber(l)){case r("LSACSExperimentCapability").BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:return(e||(e=n("Promise"))).resolve([c]);case r("LSACSExperimentCapability").INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:return(e||(e=n("Promise"))).resolve([!1]);case r("LSACSExperimentCapability").RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:return(e||(e=n("Promise"))).resolve([u])}return(e||(e=n("Promise"))).resolve([!1])};d.__nop_name__="LSIsExperimentCapabilityEnabled",l.default=d}),98);
__d("LSVoprfHmac.nop",["ACSCipherSuiteModule","ACSTokenHmacUtil","Promise","XPlatReactTextEncoder","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i){var l=o("ACSCipherSuiteModule").getACSCipherSuiteByValue(o("ACSCipherSuiteModule").VOPRF_RISTRETTO_HMACSHA512.value);if(!l)return(e||(e=n("Promise"))).resolve([void 0]);var s=yield o("ACSTokenHmacUtil").hmac(l.macAlgorithm,new Uint8Array(i).slice(),new(o("XPlatReactTextEncoder")).TextEncoder().encode(a));return(e||(e=n("Promise"))).resolve([s.buffer])});function r(e,n,r,o){return t.apply(this,arguments)}return r})();s.__nop_name__="LSVoprfHmac",l.default=s}),98);
__d("LSTaskSerializerUnauthenticatedTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsExperimentCapabilityEnabled.nop","LSMailboxTaskCompletionApiOnTaskCompletion","LSRemoveUsedTokens","LSVoprfHmac.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return t.db.table(311).fetch([[[e[0]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[0]=void 0:(t=o.item,r[0]=t.projectName)})},function(o){return r[0]!==void 0?t.sequence([function(o){return e[1]!==void 0?t.sequence([function(e){return r[9]=t.createArray(),r[10]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(307).fetch(),function(e){return r[0]===e.projectName&&t.i64.gt(e.expirationTimestampMs,r[10])}),function(e){var t=e.item;return r[16]=(r[9].push(t.configId),r[9])})},function(e){return t.sequence([function(e){return r[16]=t.createArray(),r[17]=t.i64.of_int32(r[9].length),t.i64.gt(r[17],t.i64.cast([0,0]))?t.loopAsync(r[17],function(e){return r[19]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[9],r[19]).then(function(e){var t;return t=e,r[20]=t[0],r[21]=t[1],t})},function(e){return r[22]=(r[16].push(r[20]),r[16])}])}):t.resolve()},function(e){return r[18]=r[16].join(","),r[11]=r[18]}])},function(o){return t.filter(t.db.table(309).fetch(),function(e){return r[9].includes(e.configId)&&t.i64.gt(e.redeemLimit,t.i64.cast([0,0]))}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(e){return t.nativeOperation(n("LSIsExperimentCapabilityEnabled.nop"),t.i64.cast([0,0]),r[0]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){return r[16]?t.sequence([function(n){return t.db.table(311).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[20]=t.i64.cast([0,0]):(n=a.item,r[20]=n.failureCount)})},function(n){return t.forEach(t.db.table(311).fetch([[[e[0]]]]),function(e){var n=e.item;return t.forEach(t.db.table(311).fetch([[[n.taskId]]]),function(e){var n=e.update,o=e.item;return n({failureCount:t.i64.add(r[20],t.i64.cast([0,1]))})})})},function(e){var n;return n=[void 0,void 0,t.i64.mul(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.mod_(r[20],t.i64.cast([0,7])))),t.i64.cast([0,500]))],r[17]=n[0],r[18]=n[1],r[19]=n[2],n}]):t.sequence([function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[20]=t.createArray(),r[21]=(r[20].push("Unauthenticated Task Serializer: no valid tokens"),r[20]),r[22]=(r[20].push(e[0]),r[20]),r[23]=(r[20].push(r[0]),r[20]),r[24]=t.toJSON(r[20]),(function(e){t.logger(e).mustfix(e)})(r[24]),o=[void 0,void 0,void 0],r[17]=o[0],r[18]=o[1],r[19]=o[2]}])},function(e){var t;return t=[r[17],r[18],r[19]],r[12]=t[0],r[13]=t[1],r[14]=t[2],t}]):(a=l.item,t.sequence([function(o){return r[20]=a.tokenId,t.nativeOperation(n("LSVoprfHmac.nop"),e[2]==null?"":e[2],a.sharedSecret).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){return t.blobs.neq(r[16],void 0)?t.sequence([function(e){return t.forEach(t.db.table(309).fetch([[[r[20]]]]),function(e){var n=e.update,r=e.item;return n({redeemLimit:t.i64.sub(r.redeemLimit,t.i64.cast([0,1]))})})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[16]).then(function(e){var t;return t=e,r[21]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),a.nonce).then(function(e){var t;return t=e,r[22]=t[0],t})},function(n){var o;return r[23]=new t.Map,r[23].set("config_id",a.configId),r[23].set("tag",r[21]==null?"":r[21]),r[23].set("aux",r[22]==null?"":r[22]),r[23].set("project_name",r[0]),r[24]=t.toJSON(r[23]),r[25]=new t.Map,r[25].set("payload",e[2]==null?"":e[2]),r[25].set("token",r[24]),r[26]=t.toJSON(r[25]),o=[r[26],t.i64.from_string(e[1]),void 0],r[17]=o[0],r[18]=o[1],r[19]=o[2]}]):t.sequence([function(e){return t.forEach(t.db.table(309).fetch([[[r[20]]]]),function(e){return e.delete()})},function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[21]=t.createArray(),r[22]=(r[21].push("Unauthenticated Task Serializer: hmac failed"),r[21]),r[23]=(r[21].push(e[0]),r[21]),r[24]=t.toJSON(r[21]),(function(e){t.logger(e).mustfix(e)})(r[24]),o=[void 0,void 0,void 0],r[17]=o[0],r[18]=o[1],r[19]=o[2]}])},function(e){var t;return t=[r[17],r[18],r[19]],r[12]=t[0],r[13]=t[1],r[14]=t[2],t}]))})},function(e){var t;return t=[r[12],r[13],r[14]],r[6]=t[0],r[7]=t[1],r[8]=t[2],t}]):t.sequence([function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[9]=t.createArray(),r[10]=(r[9].push("Unauthenticated Task Serializer: task has no write label"),r[9]),r[11]=(r[9].push(e[0]),r[9]),r[12]=t.toJSON(r[9]),(function(e){t.logger(e).mustfix(e)})(r[12]),o=[void 0,void 0,void 0],r[6]=o[0],r[7]=o[1],r[8]=o[2]}])},function(e){var t;return t=[r[6],r[7],r[8]],r[2]=t[0],r[3]=t[1],r[4]=t[2],t}]):t.sequence([function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[6]=t.createArray(),r[7]=(r[6].push("Unauthenticated Task Serializer: anonymous_task_context row not found"),r[6]),r[8]=(r[6].push(e[0]),r[6]),r[9]=t.toJSON(r[6]),(function(e){t.logger(e).mustfix(e)})(r[9]),o=[void 0,void 0,void 0],r[2]=o[0],r[3]=o[1],r[4]=o[2]}])},function(e){return t.storedProcedure(n("LSRemoveUsedTokens"))},function(e){return r[0]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSIsExperimentCapabilityEnabled.nop"),t.i64.cast([0,1]),r[0]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return r[6]?t.sequence([function(e){return t.i64.neq(r[4],void 0)?t.resolve(r[8]=!0):t.sequence([function(e){return r[10]=t.createArray(),r[11]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(307).fetch(),function(e){return r[0]===e.projectName&&t.i64.gt(e.expirationTimestampMs,r[11])}),function(e){var t=e.item;return r[15]=(r[10].push(t.configId),r[10])})},function(e){return t.sequence([function(e){return r[15]=t.createArray(),r[16]=t.i64.of_int32(r[10].length),t.i64.gt(r[16],t.i64.cast([0,0]))?t.loopAsync(r[16],function(e){return r[18]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[10],r[18]).then(function(e){var t;return t=e,r[19]=t[0],r[20]=t[1],t})},function(e){return r[21]=(r[15].push(r[19]),r[15])}])}):t.resolve()},function(e){return r[17]=r[15].join(","),r[12]=r[17]}])},function(e){return t.filter(t.db.table(309).fetch(),function(e){return r[10].includes(e.configId)&&t.i64.gt(e.redeemLimit,t.i64.cast([0,0]))}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[13]=!0:(t=o.item,r[13]=!1)})},function(e){return r[8]=r[13]}])},function(e){return r[8]?t.sequence([function(e){return t.filter(t.db.table(310).fetch(),function(e){return e.projectName===r[0]}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[10]=void 0:(t=o.item,r[10]=t.taskId)})},function(e){return r[9]=r[10]}]):t.resolve(r[9]=void 0)},function(e){return r[7]=r[9]}]):t.resolve(r[7]=void 0)},function(e){return r[5]=r[7]}]):t.resolve(r[5]=void 0)},function(e){var t;return t=[r[2],r[3],r[4],r[5]],o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsTaskSerializerUnauthenticatedTaskStoredProcedure",e.__tables__=["anonymous_task_context","secure_acs_configurations","secure_acs_tokens","acs_request_context"],a.exports=e}),null);
__d("LSTaskSerializerUpdateThreadName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i=r.done,l=r.value;return i?(n[4]=t.createArray(),n[5]=(n[4].push("taskSerializerUpdateThreadName: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=l.item,t.sequence([function(e){return n[8]=o.threadKey,t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o,a=e.done,i=e.value;return a?(n[9]=t.createArray(),n[10]=(n[9].push("taskSerializerUpdateThreadName: Thread not found"),n[9]),n[11]=(n[9].push(n[8]),n[9]),n[12]=t.toJSON(n[9]),(function(e){t.logger(e).mustfix(e)})(n[12]),o=[void 0,void 0,void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]):(r=i.item,t.sequence([function(e){return t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[9]=t.i64.cast([0,1]):(r=a.item,n[14]=r.syncGroup,t.i64.neq(n[14],void 0)?n[13]=n[14]:n[13]=t.i64.cast([0,1]),n[9]=n[13])})},function(e){var o;return n[11]=new t.Map,n[11].set("thread_key",n[8]),n[11].set("thread_name",r.threadName==null?"":r.threadName),n[11].set("sync_group",n[9]),n[12]=t.toJSON(n[11]),o=[n[12],t.i64.cast([0,32]),void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]}]))})},function(e){var t;return t=[n[4],n[5],n[6]],n[0]=t[0],n[1]=t[1],n[2]=t[2],t}]))})},function(e){var t;return t=[n[0],n[1],n[2]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerUpdateThreadNameStoredProcedure",e.__tables__=["threads_optimistic_context","threads"],a.exports=e}),null);
__d("LSSerializeTask",["LSForceTaskExecutionImmediately","LSLogMebClientEvent.nop","LSTaskSerializerAcsIssueNextSync","LSTaskSerializerDeleteChatHistory","LSTaskSerializerE2eeMessageIntegrityCheckV2","LSTaskSerializerE2eeMetadataThreadIntegrityCheck","LSTaskSerializerEncryptedBackupAction","LSTaskSerializerEncryptedBackupsLoopingUpload","LSTaskSerializerEncryptedBackupsOpenUpload","LSTaskSerializerEncryptedBackupsRestoreWithSerializer","LSTaskSerializerEncryptedBackupsUpload","LSTaskSerializerEncryptedBackupsUploadProtobufOnly","LSTaskSerializerEncryptedBackupsUploadSenderBackup","LSTaskSerializerMuteThreadV2","LSTaskSerializerRemoveThread","LSTaskSerializerSendMessageV2","LSTaskSerializerSyncThreadCapabilities","LSTaskSerializerUnauthenticatedTask","LSTaskSerializerUpdateThreadName"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return e[1]==="46"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerSendMessageV2"),e[0]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],t})},function(e){var n;return n=[r[8],t.i64.to_string(r[9]),void 0,void 0],r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],n}]):t.sequence([function(o){return e[1]==="144"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerMuteThreadV2"),e[0]).then(function(e){var t;return t=e,r[12]=t[0],r[13]=t[1],t})},function(e){var n;return n=[r[12],t.i64.to_string(r[13]),void 0,void 0],r[8]=n[0],r[9]=n[1],r[10]=n[2],r[11]=n[3],n}]):t.sequence([function(o){return e[1]==="146"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerRemoveThread"),e[0]).then(function(e){var t;return t=e,r[16]=t[0],r[17]=t[1],t})},function(e){var n;return n=[r[16],t.i64.to_string(r[17]),void 0,void 0],r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=n[3],n}]):t.sequence([function(o){return e[1]==="32"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerUpdateThreadName"),e[0]).then(function(e){var t;return t=e,r[20]=t[0],r[21]=t[1],r[22]=t[2],t})},function(e){var n;return n=[r[20],t.i64.to_string(r[21]),void 0,r[22]],r[16]=n[0],r[17]=n[1],r[18]=n[2],r[19]=n[3],n}]):t.sequence([function(o){return e[1]==="362"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerAcsIssueNextSync"),e[0]).then(function(e){var t;return t=e,r[24]=t[0],r[25]=t[1],r[26]=t[2],t})},function(e){var n;return n=[r[24],t.i64.to_string(r[25]),void 0,r[26]],r[20]=n[0],r[21]=n[1],r[22]=n[2],r[23]=n[3],n}]):t.sequence([function(o){return e[1]==="50015"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsRestoreWithSerializer"),e[0]).then(function(e){var t;return t=e,r[28]=t[0],r[29]=t[1],r[30]=t[2],t})},function(e){var n;return n=[r[28],t.i64.to_string(r[29]),void 0,r[30]],r[24]=n[0],r[25]=n[1],r[26]=n[2],r[27]=n[3],n}]):t.sequence([function(o){return e[1]==="319"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupAction"),e[0]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],r[34]=t[2],t})},function(e){var n;return n=[r[32],t.i64.to_string(r[33]),void 0,r[34]],r[28]=n[0],r[29]=n[1],r[30]=n[2],r[31]=n[3],n}]):t.sequence([function(o){return e[1]==="50026"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsUpload"),e[0]).then(function(e){var t;return t=e,r[36]=t[0],r[37]=t[1],t})},function(e){var n;return n=[r[36],t.i64.to_string(r[37]),void 0,void 0],r[32]=n[0],r[33]=n[1],r[34]=n[2],r[35]=n[3],n}]):t.sequence([function(o){return e[1]==="50042"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsUploadProtobufOnly"),e[0]).then(function(e){var t;return t=e,r[40]=t[0],r[41]=t[1],r[42]=t[2],t})},function(e){var n;return n=[r[40],t.i64.to_string(r[41]),void 0,r[42]],r[36]=n[0],r[37]=n[1],r[38]=n[2],r[39]=n[3],n}]):t.sequence([function(o){return e[1]==="700"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerE2eeMetadataThreadIntegrityCheck"),e[0]).then(function(e){var t;return t=e,r[44]=t[0],r[45]=t[1],r[46]=t[2],t})},function(e){var n;return n=[r[44],t.i64.to_string(r[45]),void 0,r[46]],r[40]=n[0],r[41]=n[1],r[42]=n[2],r[43]=n[3],n}]):t.sequence([function(o){return e[1]==="705"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerE2eeMessageIntegrityCheckV2"),e[0]).then(function(e){var t;return t=e,r[48]=t[0],r[49]=t[1],r[50]=t[2],t})},function(e){var n;return n=[r[48],t.i64.to_string(r[49]),void 0,r[50]],r[44]=n[0],r[45]=n[1],r[46]=n[2],r[47]=n[3],n}]):t.sequence([function(o){return e[1]==="50043"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsLoopingUpload"),e[0]).then(function(e){var t;return t=e,r[52]=t[0],r[53]=t[1],r[54]=t[2],t})},function(e){var n;return n=[r[52],t.i64.to_string(r[53]),void 0,r[54]],r[48]=n[0],r[49]=n[1],r[50]=n[2],r[51]=n[3],n}]):t.sequence([function(o){return e[1]==="50048"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsOpenUpload"),e[0]).then(function(e){var t;return t=e,r[56]=t[0],r[57]=t[1],t})},function(e){var n;return n=[r[56],t.i64.to_string(r[57]),void 0,void 0],r[52]=n[0],r[53]=n[1],r[54]=n[2],r[55]=n[3],n}]):t.sequence([function(o){return e[1]==="160013"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerSyncThreadCapabilities"),e[0]).then(function(e){var t;return t=e,r[60]=t[0],r[61]=t[1],r[62]=t[2],t})},function(e){var n;return n=[r[60],t.i64.to_string(r[61]),void 0,r[62]],r[56]=n[0],r[57]=n[1],r[58]=n[2],r[59]=n[3],n}]):t.sequence([function(o){return e[1]==="903"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerDeleteChatHistory"),e[0]).then(function(e){var t;return t=e,r[64]=t[0],r[65]=t[1],r[66]=t[2],t})},function(e){var n;return n=[r[64],t.i64.to_string(r[65]),void 0,r[66]],r[60]=n[0],r[61]=n[1],r[62]=n[2],r[63]=n[3],n}]):t.sequence([function(o){var a;return e[1]==="50057"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsUploadSenderBackup"),e[0]).then(function(e){var t;return t=e,r[68]=t[0],r[69]=t[1],r[70]=t[2],t})},function(e){var n;return n=[r[68],t.i64.to_string(r[69]),void 0,r[70]],r[64]=n[0],r[65]=n[1],r[66]=n[2],r[67]=n[3],n}]):t.resolve((a=[e[2],e[1],void 0,void 0],r[64]=a[0],r[65]=a[1],r[66]=a[2],r[67]=a[3],a))},function(e){var t;return t=[r[64],r[65],r[66],r[67]],r[60]=t[0],r[61]=t[1],r[62]=t[2],r[63]=t[3],t}])},function(e){var t;return t=[r[60],r[61],r[62],r[63]],r[56]=t[0],r[57]=t[1],r[58]=t[2],r[59]=t[3],t}])},function(e){var t;return t=[r[56],r[57],r[58],r[59]],r[52]=t[0],r[53]=t[1],r[54]=t[2],r[55]=t[3],t}])},function(e){var t;return t=[r[52],r[53],r[54],r[55]],r[48]=t[0],r[49]=t[1],r[50]=t[2],r[51]=t[3],t}])},function(e){var t;return t=[r[48],r[49],r[50],r[51]],r[44]=t[0],r[45]=t[1],r[46]=t[2],r[47]=t[3],t}])},function(e){var t;return t=[r[44],r[45],r[46],r[47]],r[40]=t[0],r[41]=t[1],r[42]=t[2],r[43]=t[3],t}])},function(e){var t;return t=[r[40],r[41],r[42],r[43]],r[36]=t[0],r[37]=t[1],r[38]=t[2],r[39]=t[3],t}])},function(e){var t;return t=[r[36],r[37],r[38],r[39]],r[32]=t[0],r[33]=t[1],r[34]=t[2],r[35]=t[3],t}])},function(e){var t;return t=[r[32],r[33],r[34],r[35]],r[28]=t[0],r[29]=t[1],r[30]=t[2],r[31]=t[3],t}])},function(e){var t;return t=[r[28],r[29],r[30],r[31]],r[24]=t[0],r[25]=t[1],r[26]=t[2],r[27]=t[3],t}])},function(e){var t;return t=[r[24],r[25],r[26],r[27]],r[20]=t[0],r[21]=t[1],r[22]=t[2],r[23]=t[3],t}])},function(e){var t;return t=[r[20],r[21],r[22],r[23]],r[16]=t[0],r[17]=t[1],r[18]=t[2],r[19]=t[3],t}])},function(e){var t;return t=[r[16],r[17],r[18],r[19]],r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=t[3],t}])},function(e){var t;return t=[r[12],r[13],r[14],r[15]],r[8]=t[0],r[9]=t[1],r[10]=t[2],r[11]=t[3],t}])},function(e){var t;return t=[r[8],r[9],r[10],r[11]],r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],t}])},function(o){return e[3]?t.sequence([function(e){return r[9]=r[1]==="60009"||r[1]==="60006"||r[1]==="60008"||r[1]==="60011"||r[1]==="765"||r[1]==="1006"||r[1]==="160009"||r[1]==="761"||r[1]==="1018"||r[1]==="632"||r[1]==="384"||r[1]==="384",r[9]&&r[1]!==void 0?(r[15]=["Deidentified task is being executed through the 'identified' path. Canceling task with label: ",r[1]].join(""),(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSCoreSerializeTaskStoredProcedure] ","",r[15]].join("")),r[14]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSCoreSerializeTaskStoredProcedure",r[15],r[14],t.i64.cast([0,3]))):t.resolve()},function(e){return t.resolve(r[8]=!1)},function(e){var t,n,o;return r[9]||r[8]?(t=[void 0,void 0,void 0,void 0],r[10]=t[0],r[11]=t[1],r[12]=t[2],r[13]=t[3]):(n=[r[0],r[1],r[2],r[3]],r[10]=n[0],r[11]=n[1],r[12]=n[2],r[13]=n[3]),o=[r[10],r[11],r[12],r[13]],r[4]=o[0],r[5]=o[1],r[6]=o[2],r[7]=o[3]}]):t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerUnauthenticatedTask"),e[0],r[1],r[0]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],r[10]=t[2],r[11]=t[3],t})},function(e){return t.i64.neq(r[11],void 0)?t.storedProcedure(n("LSForceTaskExecutionImmediately"),r[11]):t.resolve()},function(e){var n;return n=[r[8],t.i64.to_string(r[9]),void 0,r[10]],r[4]=n[0],r[5]=n[1],r[6]=n[2],r[7]=n[3],n}])},function(e){var t;return t=[r[4],r[5],r[6],r[7]],o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreSerializeTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSSerializeTaskStoredProcedure",["LSSerializeTask","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSSerializeTask"),a.taskId,a.taskLabel,a.taskValue,a.requiresAuthentication);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSBeginHandlingPendingTasksForQueue2",["I64","LSFactory","LSIntEnum","LSPendingTasksPluginType","LSSerializeTaskStoredProcedure","LSShape","LSVec","Promise","ReQL","XPlatReactCrypto","asyncToGeneratorRuntime","gkx","isNativeTask"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=500,d=3e4,m=5,p=100,_=7;function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.lightspeed_task_context.get(t);return n==null||n.requiresAuthentication}),g.apply(this,arguments)}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.pending_tasks.index("queueNameTaskId")).getKeyRange(t));return n==null?{context:void 0,failureCount:(s||(s=o("I64"))).neg_one,httpUrlOverride:void 0,minTimeToSyncTimestampMs:s.neg_one,pluginType:(u||(u=o("LSIntEnum"))).ofNumber(r("LSPendingTasksPluginType").LS_BROKER),queueName:""}:n}),y.apply(this,arguments)}function C(e,t){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.network_requests).getKeyRange(t));return n==null?0:(s||(s=o("I64"))).to_float(n.lastSyncRequestTimestampMs)}),b.apply(this,arguments)}function v(e,t,n){var r=(s||(s=o("I64"))).equal(e.failureCount,(s||(s=o("I64"))).zero)||t;if(r)return 0;var a=(s||(s=o("I64"))).to_float(e.failureCount)>_?(s||(s=o("I64"))).to_float(e.failureCount)-_:(s||(s=o("I64"))).to_float(e.failureCount),i=Math.min((1<<Math.min(a-1,_))*c,d),l=n+i;return Math.max(l-Date.now(),0)}function S(){var e=Array.from(o("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));return e[0]>>>=1,(s||(s=o("I64"))).add(s.lsl_(s.of_float(e[0]),32),s.of_float(e[1]))}function R(){var e=(s||(s=o("I64"))).of_float(Date.now());return s.and_(s.or_(s.lsl_(e,22),s.and_(S(),s.castExn([0,4194303]))),s.castExn([2147483647,4294967295]))}function L(e,t){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=R(),r=yield e.network_requests.get(t,(s||(s=o("I64"))).neg_one);return r==null?yield e.network_requests.add({epochId:n,failureCount:(s||(s=o("I64"))).zero,lastSentTimestampMs:s.zero,lastSyncRequestTimestampMs:s.of_float(Date.now()),syncDatabaseId:s.neg_one,taskQueueName:t}):yield e.network_requests.put(babelHelpers.extends({},r,{epochId:n,lastSyncRequestTimestampMs:(s||(s=o("I64"))).of_float(Date.now())})),n}),E.apply(this,arguments)}function k(e,t){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return(yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.network_requests).getKeyRange(t).filter(function(e){return e.epochId!=null})))!=null}),I.apply(this,arguments)}function T(e,t,n){var r=(s||(s=o("I64"))).to_float(e.minTimeToSyncTimestampMs),a=Date.now(),i=r-a,l=i<=0;return l?v(e,t,n):i}function D(e){return e.httpUrlOverride!=null||(s||(s=o("I64"))).to_float(e.failureCount)>_}function x(e){return e.timeoutTimestampMs!=null?(s||(s=o("I64"))).to_float(e.timeoutTimestampMs)<=Date.now():!1}function $(e){return e==="90"||e==="130"||e==="153"}function P(e,t,n,r,o){var a=o===0?void 0:o;return{failureCount:a,label:e,payload:t,queueName:n,taskId:r}}function N(e,t,n){return M.apply(this,arguments)}function M(){return M=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield r("LSSerializeTaskStoredProcedure")(r("LSFactory")(e),{requiresAuthentication:n,taskId:t.taskId,taskLabel:t.context,taskValue:t.taskValue}),i=a[0],l=a[1],u=a[2],c=a[3];return i==null?c!=null?{minRetryDelayMs:c}:void 0:P(l,i,t.queueName,t.taskId,(s||(s=o("I64"))).to_float(t.failureCount))}),M.apply(this,arguments)}function w(e,t,n){return A.apply(this,arguments)}function A(){return A=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){if(t.context==null){yield e.pending_tasks.delete(t.taskId);return}var r=x(t);if(r){yield e.pending_tasks.delete(t.taskId);return}return N(e,t,n)}),A.apply(this,arguments)}function F(e,t){var n=t>=(r("gkx")("26373")&&e===String(207)?p:m)||$(e);return!n}function O(e,t){return B.apply(this,arguments)}function B(){return B=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.pending_tasks.get(t.taskId);n!=null&&(s||(s=o("I64"))).equal(t.firstExecutedTimestampMs,(s||(s=o("I64"))).zero)&&(yield e.pending_tasks.put(babelHelpers.extends({},n,{firstExecutedTimestampMs:(s||(s=o("I64"))).of_float(Date.now())})))}),B.apply(this,arguments)}function W(e,t){return q.apply(this,arguments)}function q(){return q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){if(r.length===0)return{epochId:void 0,tasks:[]};var a=[],i=r[0].httpUrlOverride,l=(yield(e||(e=n("Promise"))).all(r.map(function(e){return f(t,e.taskId)}))).some(Boolean);for(var u of r){var c=u.httpUrlOverride===i,d=(yield f(t,u.taskId))===l;if(yield O(t,u),!c||!d)break;var m=yield w(t,u,l);if(m!=null&&m.payload!=null)a.push(m);else if((m==null?void 0:m.minRetryDelayMs)!=null){var p=yield t.pending_tasks.get(u.taskId);if(p!=null){var _;yield t.pending_tasks.put(babelHelpers.extends({},p,{failureCount:(s||(s=o("I64"))).add((_=p.failureCount)!=null?_:(s||(s=o("I64"))).zero,s.one),minTimeToSyncTimestampMs:s.add(m.minRetryDelayMs,s.of_float(Date.now()))}))}}else yield t.pending_tasks.delete(u.taskId);if(!F(u.context,a.length))break}return{epochId:void 0,tasks:a}}),q.apply(this,arguments)}function U(e,t,n,r,o){return V.apply(this,arguments)}function V(){return V=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,o){o===void 0&&(o=!0);var a=yield W(e,t),i=a.tasks;if(i.length===0)return{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:n,skipRealtimeGateway:!1,workItemType:4};if(o===!0){var l=yield L(e,n);a.epochId=l}var s=yield h(e,n);return{httpUrlOverride:s.httpUrlOverride,networkPayload:a,nextSyncMs:void 0,queueName:n,skipRealtimeGateway:D(s),workItemType:r}}),V.apply(this,arguments)}function H(e,t,n){return G.apply(this,arguments)}function G(){return G=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield h(e,t),i=yield C(e,t),l=T(a,n,i),s=l!==0;if(s)return[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:l,queueName:t,skipRealtimeGateway:!1,workItemType:3}];var u=[],c=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.pending_tasks.index("queueNameTaskId")).getKeyRange(t)),d=c.filter(r("isNativeTask"));if(d.length>0){var m=yield U(e,d,t,2,r("gkx")("4778")===!0);u.push(m)}var p=c.filter(function(e){return!r("isNativeTask")(e)});if(p.length>0){var _=yield U(e,p,t,1);u.push(_)}return u}),G.apply(this,arguments)}function z(e,t,n){return j.apply(this,arguments)}function j(){return j=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=!(yield k(e,t));return r?H(e,t,n):[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:t,skipRealtimeGateway:!1,workItemType:4}]}),j.apply(this,arguments)}function K(e,t){return Q.apply(this,arguments)}function Q(){return Q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.ignoreSoftDelay,a=t.queueName,i=yield z(e,a,n);return i.map(function(e){var t,n,a;return o("LSShape").ofRecord({network_payload:o("LSShape").ofRecord({epoch_id:(t=e.networkPayload)==null?void 0:t.epochId,tasks:r("LSVec").ofArray(((n=(a=e.networkPayload)==null?void 0:a.tasks)!=null?n:[]).map(function(e){var t;return o("LSShape").ofRecord({failure_count:e.failureCount!=null?(s||(s=o("I64"))).of_float(e.failureCount):void 0,label:(t=e.label)!=null?t:void 0,payload:e.payload,queue_name:e.queueName,task_id:e.taskId})}))}),next_sync_ms:e.nextSyncMs!=null?(s||(s=o("I64"))).of_float(e.nextSyncMs):void 0,queue_name:e.queueName,skip_realtime_gateway:e.skipRealtimeGateway,work_item_type:(u||(u=o("LSIntEnum"))).ofNumber(e.workItemType)})})}),Q.apply(this,arguments)}K._updateTaskIfNeeded=O,K._getHeadOfNormalQueue=h,K._lastSyncRequestTimestampForQueue=C,K._exponentialBackoffForNormalQueue=v,K._generateNewEpoch=R,K._openNewEpochForQueue=L,K._isEpochOpenForQueue=k,K._calculateDelayForNormalQueue=T,K._queueShouldSkipRealtimeGateway=D,K._isNativeTask=r("isNativeTask"),K._taskIsTimedOut=x,K._taskShouldStopBatching=$,K._buildTaskPayloadExpressionForNormalTaskWithParameters=P,K._buildTaskPayloadExpressionForValidatedNormalTask=N,K._buildTaskPayloadExpressionForUnvalidatedNormalTask=w,K._workForNormalQueueWithoutDelay=U,K._workForNormalQueueWithClosedEpoch=H,K._buildWorkForNormalQueue=z,K._buildNetworkPayloadShapeForTasks=W,K._canContinueBatchingForQueue=F,l.default=K}),98);
__d("LSContactBlockedByViewerStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNBLOCKED:0,MESSAGE_BLOCKED:1,FULLY_BLOCKED:2});i.default=e}),66);
__d("LSContactType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,USER:1,PAGE:2,PAGE_PERSONA:3});i.default=e}),66);
__d("LSContactViewerRelationship",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,NOT_CONTACT:1,CONTACT_OF_VIEWER:2,FACEBOOK_FRIEND:3,SOFT_CONTACT:4});i.default=e}),66);
__d("LSCookie",["$InternalEnum","Cookie","CookieCore","CurrentEnvironment","CurrentMessengerUser","FBLogger","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","MessengerLogHistory","MqttWebDeviceID","ReQL","SortedAsyncIterable","getErrorSafe","isPromise","isStringNullOrEmpty","pageID","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=n("$InternalEnum")({SYNCING:"1",NOT_SYNCING:"0"}),d=o("MessengerLogHistory").getInstance("client_init"),m=r("CurrentEnvironment").instagramdotcom?"igd_ls":"m_ls",p={c:{},d:r("MqttWebDeviceID").clientID,s:c.NOT_SYNCING,u:r("pageID")};function _(e){function t(e){o("CookieCore").setWithDomain_FOR_MESSENGER_LS_ONLY(m,JSON.stringify(e),window.location.hostname)}var n=r("Cookie").get(m);if(n==null){var a;t((a={},a[o("CurrentMessengerUser").getIDorEIMU()]=e,a));return}var i=JSON.parse(n);if(i.u==null){var l;t(babelHelpers.extends({},i,(l={},l[o("CurrentMessengerUser").getIDorEIMU()]=e,l)))}else{var s;t((s={},s[o("CurrentMessengerUser").getIDorEIMU()]=e,s))}}function f(){r("Cookie").clear(m)}function g(e){if(typeof e!="object"||e==null)return null;var t=e.c,n=e.d,r=e.s,o=e.u,a=typeof r=="string"?c.cast(r):null,i=typeof t=="object"&&t!=null?Object.entries(t).reduce(function(e,t){var n=t[0],r=t[1];return e==null||typeof r!="string"?null:(e[n]=r,e)},{}):null;return typeof n!="string"||a==null||i==null||typeof o!="string"?null:{c:i,d:n,s:a,u:o}}function h(){var e,t=r("Cookie").get(m);if(r("isStringNullOrEmpty")(t))return p;var n=JSON.parse(t),a=o("CurrentMessengerUser").getIDorEIMU(),i=g(n),l=typeof n=="object"&&n!=null?g(n[a]):null;return(e=l!=null?l:i)!=null?e:p}function y(e){var t=h();if(t.u===r("pageID")){var n={};e.forEach(function(e){var t=e[0],r=e[1],a=r.currentCursor,i=r.groupId;a!=null&&(n[(s||(s=o("I64"))).to_string(i)]=a)}),d.debug("Updated sync cookie to set syncing=false, saving latest cursors"),_(babelHelpers.extends({},t,{c:n,s:c.NOT_SYNCING}))}}var C=[1,2,o("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()?null:95];function b(t){var n=o("SortedAsyncIterable").toArray(o("ReQL").union.apply(void 0,C.map(function(e){return e==null?o("ReQL").empty():o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(e))})));if((e||(e=r("isPromise")))(n)){r("promiseDone")(n.then(function(e){y(e)}));return}y(n)}function v(){try{var e=h();d.debug("Updated sync cookie to set syncing=true"),_(babelHelpers.extends({},e,{s:c.SYNCING,u:r("pageID")}))}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).warn("[LS] Failed to sync cookie")}}l.Status=c,l.DEFAULT_COOKIE=p,l.clear=f,l.get=h,l.syncBeforeUnload=b,l.setSyncing=v}),98);
__d("LSDataTraceFlushDeferred",["MetaConfig","Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("LSDataTraceFlush").__setRef("LSDataTraceFlushDeferred");function u(t){return r("MetaConfig")._("62")?s.load().then(function(e){return e.flushExpiredDataTraces(t)}):(e||(e=n("Promise"))).resolve(function(){})}l.watchForExpiredTraces=u}),98);
__d("LSDatabaseProviderType",[],(function(t,n,r,o,a,i){"use strict";function e(e){return l(e.persistenceTypes)}function l(e){return e.includes("indexeddb")}i.isProviderPersisted=e,i.hasPersistentType=l}),66);
__d("LSJSONOp",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126,SUB_STRING:127}),l=e;i.default=l}),66);
__d("LSMaybeDeferredImports",["LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return u(e)}function s(e){return u(e)}function u(e){var t=null;return{load:function(){return t==null?e.load().then(function(e){return t=e,t}):o("LSSynchronousPromise").makeSynchronousPromise(t)}}}l.wrapReqDeferredMaybeSync=e,l.wrapJSResourceForInteractionMaybeSync=s}),98);
__d("LSSelectOrder",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["ASC","DESC"]),l=e;i.default=l}),66);
__d("LSDatascriptJSONEval",["FBLogger","JSResourceForInteraction","LS","LSMaybeDeferredImports","getErrorSafe","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("LSMaybeDeferredImports").wrapJSResourceForInteractionMaybeSync(r("JSResourceForInteraction")("LSLocalize").__setRef("LSDatascriptJSONEval"));function d(e,t,n){if((u||(u=r("isPromise")))(e))return e.then(t,n);try{return t(e)}catch(e){var o=r("getErrorSafe")(e);if(n)return n(o);throw o}}var m=(function(){function t(e,t,n,o){var a=this;o===void 0&&(o=[]),this.$4={},this.$5=[],this.$6=null,this.$7=function(e){return d(a.$8(e),function(e){return e},function(t){throw r("FBLogger")("messenger_web").catching(t).mustfix("Error evaluating step op: %s",Array.isArray(e)?e[0]:"<primitive value>"),t})},this.$1=t,this.$2=e,this.$3=n;for(var i=0;i<o.length;i++)this.$4[i]=o[i]}var o=t.prototype;return o.eval=function(){return this.$2==null?this.$1.resolveGuaranteeAsync([]):this.$1.resolveGuaranteeAsync(this.$7(this.$2.step))},o.$8=function(o){var t=this,a,i,l,u,m,p,_,f,g,h,y,C;if(!Array.isArray(o))return o;var b=o[0],v=babelHelpers.arrayLikeToArray(o).slice(1),S=v;switch(b){case 8:return S.map(this.$7);case 2:return this.$4[S[0]];case 3:return d(this.$7(S[1]),function(e){return t.$4[S[0]]=e});case 4:return d(this.$7(S[2]),function(e){for(var n=S[0],r=S[1],o=0;o<r;o++,n++)t.$4[n]=e[o];return e});case 12:{for(var R=S[0],L=S[1],E=[],k=R;k<L;k++)E[k]=this.$4[k];return E}case 1:{for(var I,T=function(n){I=d(I,function(){return t.$7(S[n])})},D=0;D<S.length;D++)T(D);return I}case 5:return(a=this.$1).storedProcedure.apply(a,S.map(this.$7));case 6:return(i=this.$1).nativeTypeOperation.apply(i,S.map(this.$7));case 7:return(l=this.$1).nativeOperation.apply(l,S.map(this.$7));case 9:return;case 10:return 1/0;case 11:return NaN;case 13:return this.$7(S[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(S[0]));case 15:return this.$1.blobs.of_string(this.$7(S[0]));case 16:return this.$1.blob(this.$7(S[0]));case 17:return this.$1.i64.of_float(this.$7(S[0]));case 18:{var x=this.$7(S[0]);return x!=null?this.$1.i64.to_float(x):void 0}case 19:return this.$1.i64.from_string(this.$7(S[0]));case 70:return this.$1.i64.cast(this.$7(S[0]));case 20:return this.$1.i64.to_string(this.$7(S[0]));case 21:return(u=this.$3)==null||(u=u.gk)==null?void 0:u[S[0]];case 22:{var $,P=S[0],N=S[1],M=S[2],w=S[3],A=($=this.$3)==null||($=$.qe)==null||($=$[P])==null||($=$[N])==null?void 0:$[M];if(A==null)return A;switch(w){case"BOOL":case"STR":return A;case"I64":{if(typeof A!="object")throw r("FBLogger")("messenger_web").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(A.toString())}}return}case 23:return this.$7(S[0])?this.$7(S[1]):S[2]!=null?this.$7(S[2]):void 0;case 24:return this.$7(S[0])||this.$7(S[1]);case 25:return this.$7(S[0])&&this.$7(S[1]);case 26:return!this.$7(S[0]);case 27:return this.$7(S[0])==null;case 28:return this.$1.notnull(this.$7(S[0]));case 29:return this.$7(S[0])===this.$7(S[1]);case 30:return this.$1.i64.eq(this.$7(S[0]),this.$7(S[1]));case 31:return this.$1.blobs.eq(this.$7(S[0]),this.$7(S[1]));case 32:return this.$7(S[0])!==this.$7(S[1]);case 33:return this.$1.i64.neq(this.$7(S[0]),this.$7(S[1]));case 34:return this.$1.blobs.neq(this.$7(S[0]),this.$7(S[1]));case 35:return this.$7(S[0])>this.$7(S[1]);case 36:return this.$1.i64.gt(this.$7(S[0]),this.$7(S[1]));case 37:return this.$1.blobs.gt(this.$7(S[0]),this.$7(S[1]));case 38:return this.$7(S[0])>=this.$7(S[1]);case 39:return this.$1.i64.ge(this.$7(S[0]),this.$7(S[1]));case 40:return this.$1.blobs.ge(this.$7(S[0]),this.$7(S[1]));case 41:return this.$7(S[0])<this.$7(S[1]);case 42:return this.$1.i64.lt(this.$7(S[0]),this.$7(S[1]));case 43:return this.$1.blobs.lt(this.$7(S[0]),this.$7(S[1]));case 44:return this.$7(S[0])<=this.$7(S[1]);case 45:return this.$1.i64.le(this.$7(S[0]),this.$7(S[1]));case 46:return this.$1.blobs.le(this.$7(S[0]),this.$7(S[1]));case 47:return this.$1.throw(S[0]);case 48:return this.$1.print(this.$7(S[0]));case 49:{var F=this.$7(S[0]),O=S[1],B=this.$1.logger(F);switch(O){case"mustfix":return B.mustfix(F);case"info":return B.info(F);case"warn":return B.warn(F);case"debug":return B.debug(F);default:throw r("FBLogger")("messenger_web").mustfixThrow("Invalid logger level %s",O)}}case 50:return S.length===0?this.$1.createArray():(m=this.$1).createArrayWithElements.apply(m,this.$7(S[0]));case 51:{var W=this.$7(S[0]);return W.push(this.$7(S[1])),W}case 52:return this.$1.i64.of_int32(this.$7(S[0]).length);case 53:return new this.$1.Map;case 54:return this.$7(S[0]).get(this.$7(S[1]));case 55:return this.$7(S[0]).set(this.$7(S[1]),this.$7(S[2]));case 56:return this.$7(S[0]).keys();case 57:return this.$7(S[0]).delete(this.$7(S[1]));case 58:return this.$7(S[0]).has(this.$7(S[1]));case 59:return this.$7(S[0]).join(this.$7(S[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(S[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return c.load().then(function(e){var n=e.localizeV1Async;return n(t.$7(S[0]),t.$7(S[1]))});case 66:return c.load().then(function(e){var n=e.localizeV2Async;return n(t.$7(S[0]),t.$7(S[1]))});case 68:return this.$7(S[0])+this.$7(S[1]);case 69:return this.$1.i64.add(this.$7(S[0]),this.$7(S[1]));case 71:return(p=this.$3)==null||(p=p.justknob)==null?void 0:p[S[0]];case 72:return(_=this.$3)==null||(_=_.iggk)==null?void 0:_[S[0]];case 100:return this.$5[S[0]][S[1]];case 101:{if(this.$6==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[S[0]]}case 102:return this.$5[this.$7(S[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(S[0]).trim();case 75:return this.$7(S[0]).split(this.$7(S[1])).join(this.$7(S[2]));case 76:return S.map(this.$7).join("");case 77:return this.$1.like(this.$7(S[0]),this.$7(S[1]));case 78:return[0,this.$7(S[0]).length];case 79:{var q=S.map(this.$7),U=q[0],V=babelHelpers.arrayLikeToArray(q).slice(1);return V.includes(U)}case 80:return this.$7(S[1]).includes(this.$7(S[0]));case 81:return this.$7(S[0])-this.$7(S[1]);case 82:return this.$7(S[0])*this.$7(S[1]);case 83:return this.$7(S[0])/this.$7(S[1]);case 84:return this.$7(S[0])%this.$7(S[1]);case 91:return this.$1.i64.lsl_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 92:return this.$1.i64.lsr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 93:return this.$1.i64.asr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 94:return this.$1.i64.and_(this.$7(S[0]),this.$7(S[1]));case 95:return this.$1.i64.or_(this.$7(S[0]),this.$7(S[1]));case 96:return this.$1.i64.xor(this.$7(S[0]),this.$7(S[1]));case 85:return this.$1.i64.sub(this.$7(S[0]),this.$7(S[1]));case 86:return this.$1.i64.mul(this.$7(S[0]),this.$7(S[1]));case 87:return this.$1.i64.div(this.$7(S[0]),this.$7(S[1]));case 88:return this.$1.i64.mod_(this.$7(S[0]),this.$7(S[1]));case 89:{var H=S.map(this.$7),G=H[0],z=babelHelpers.arrayLikeToArray(H).slice(1);return z.some(function(e){return t.$1.i64.eq(G,e)})}case 90:{var j=this.$7(S[0]);return this.$7(S[1]).some(function(e){return t.$1.i64.eq(j,e)})}case 97:return this.$7(S[0])?this.$7(S[1]):this.$7(S[2]);case 98:{var K=this.$7(S[0]),Q=this.$7(S[1]);return(K||Q)&&!(K&&Q)}case 99:return(f=this.$7(S[0]))!=null?f:this.$7(S[1]);case 103:return;case 104:return n.call(null,S[0]);case 105:{for(var X=this.$7(S[0]),Y=S[1],J=r("LS").n,Z,ee=function(n){Z=d(Z,function(){return t.$4[Y]=n,t.$7(S[2])})},te=J(e||(e=babelHelpers.taggedTemplateLiteralLoose(["0"])));this.$1.i64.lt(te,X);te=this.$1.i64.add(te,J(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))ee(te);return Z}case 106:return this.$7(S[0]);case 107:throw r("FBLogger")("messenger_web").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(S[0])};case 109:return{gte:this.$7(S[0])};case 110:return{lt:this.$7(S[0])};case 111:return{lte:this.$7(S[0])};case 112:return S.length===1?this.$7(S[0]):(g=this.$1).merge.apply(g,S.map(this.$7));case 113:{var ne=S[0],re=S[1],oe=babelHelpers.arrayLikeToArray(S).slice(2),ae=oe.map(this.$7);switch(re){case"ASC":return(h=this.$1.db.table(ne)).fetch.apply(h,ae);case"DESC":return(y=this.$1.db.table(ne)).fetchDesc.apply(y,ae)}return}case 114:return this.$1.filter(this.$7(S[0]),function(e){t.$6=e;var n=t.$7(S[1]);return t.$6=null,n});case 115:return(C=this.$1).sortBy.apply(C,S.map(this.$7));case 116:return this.$1.forEach(this.$7(S[0]),function(e){return e.delete()});case 117:return this.$1.islc(this.$7(S[0]),0,this.$7(S[1]));case 118:return this.$1.count(this.$7(S[0]));case 119:return this.$1.db.table(S[0]).peekNextAutoIncrementId();case 120:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item,r=e.update,o={};t.$6=n;for(var a=1;a<S.length;a+=2)o[S[a]]=t.$7(S[a+1]);return t.$6=null,r(o)});case 121:{for(var ie=S[0],le={},se=1;se<S.length;se+=2)le[S[se]]=this.$7(S[se+1]);return this.$1.db.table(ie).add(le)}case 122:{for(var ue=S[0],ce={},de=1;de<S.length;de+=2)ce[S[de]]=this.$7(S[de+1]);return this.$1.db.table(ue).put(ce)}case 123:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item;return t.$5[S[1]]=n,t.$7(S[2])});case 124:return this.$7(S[0]).next().then(function(e){var n=e.done,r=e.value;if(n)return t.$7(S[3]);var o=S[1];return o!=null?(t.$5[o]=r.item,t.$7(S[2])):0});case 125:return this.$7(S[0]).slice(0,this.$7(S[1]));case 126:return this.$1.groupBy(this.$7(S[0]),S[1]).forEach(function(e){return t.$5[S[2]]=e,t.$7(S[3])});case 127:return this.$7(S[0]).substr(this.$1.i64.to_int32(this.$7(S[1])),this.$1.i64.to_int32(this.$7(S[2])))}},t})();l.default=m}),98);
__d("LSProgramTarget",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({DASM:1,JS:2,JSON:3}),l=e;i.default=l}),66);
__d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE",["Env","TrustedTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s={createScript:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];n.forEach(function(e){if(typeof window!="undefined"&&typeof window.trustedTypes!="undefined"&&!window.trustedTypes.isScript(e))throw r("err")("Trusted Function requires TrustedScripts args only.")});var a=n.slice(0,-1).join(","),i=n.pop().toString();return"(function anonymous(\n     "+a+"\n     ) {\n     "+i+"\n     })"}},u=r("TrustedTypes").createPolicy("unsafe-function-do-not-use",s);function c(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(r("TrustedTypes").isSupportedNatively()&&(e||(e=r("Env"))).useTrustedTypes){var i=u.createScript.apply(u,[""].concat(o));return t.eval(i)}else return babelHelpers.construct(Function,o)}l.TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE=u,l.createTrustedFunction=c}),98);
__d("LSDatascriptEvaluator",["ExecutionEnvironment","FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","TrustedTypesNoOpPolicy_DO_NOT_USE","TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE","cr:8018","getErrorSafe","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){var n=function(n){return function(t,r){var o;return e==null||(o=e.qe)==null||(o=o[t])==null||(o=o[n])==null?void 0:o[r]}},a=new Proxy({getBool:n("fb"),getNumber:n("fb"),getString:n("fb")},{get:function(t,r){return r in t?t[r]:{getBool:n(r),getNumber:n(r),getString:n(r)}}}),i=function(n){var t;return e==null||(t=e.gk)==null?void 0:t[n]};i.ig=function(t){var n;return e==null||(n=e.iggk)==null?void 0:n[t]};var l={getBool:function(n){var t;return e==null||(t=e.justknob)==null?void 0:t[n]}};return function(e){var n,s=o("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE").createTrustedFunction((n=r("TrustedTypesNoOpPolicy_DO_NOT_USE")).createScript("gkx"),n.createScript("qex"),n.createScript("justknobx"),n.createScript("return "+t));return s(i,a,l)(r("LSFactory")(e,{dynamic:!0}))}}var u=function(t){return r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow('Received a sync script with an illegal target of "%s"',t!=null?t:-1)};function c(t,o){var a=JSON.parse(o),i=t!=null?t:{gk:{},iggk:{},justknob:{},qe:{}};return function(t){var o=n("cr:8018")!=null?new(n("cr:8018")):void 0,l=o==null?void 0:o.start({bool:{isInWorker:(e||(e=r("ExecutionEnvironment"))).isInWorker},string:{dynamic:String(!0)}}),s=r("LSFactory")(t,{dynamic:!0,lsRuntimeLogger:o});return new(r("LSDatascriptJSONEval"))(a,s,i).eval().finally(function(){return l==null||l.end(),Promise.resolve()})}}function d(e,t,n){if(!r("justknobx")._("3078"))return m(e,t,n);if(n==null)throw u(n);switch(n){case 3:return c(e,t);default:throw u(n)}}function m(e,t,n){if(n==null)return r("FBLogger")("lightspeed","null_target").mustfix("Received <null> target field for sync script!"),s(e,t);switch(n){case 3:return c(e,t);case 2:return s(e,t);case 1:throw r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow("Received a sync script with LSProgramTarget of DASM, this should never happen!")}}function p(e){return function(t){if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(n){var a=n.experiments,l=n.priority,s=n.syncScript,u=n.target,c=n.taskNames,m=a!=null?JSON.parse(a):null;try{var p=d(m,s,u);return t.runInTransaction(function(t){return e&&e(),p(t)},"readwrite",l,{taskNames:c,type:"sync_script"},i.id+":247")}catch(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");var _=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(_).mustfix("Error executing sync script"),e}}}}p.__debugModuleName="LSDatascriptEvaluator",l.default=p}),98);
__d("LSDatascriptEvaluatorMaybeDeferred",["cr:6542"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:6542")}),98);
__d("LSTruncateTableAndSetShowError",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(e){return t.forEach(t.db.table(115).fetch(),function(e){return e.delete()})},function(r){return n[0]=t.i64.of_float(Date.now()),t.db.table(115).add({statusId:t.i64.cast([0,0]),timestampMs:n[0],errorShouldBeShown:e[0]})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSConnectivityTruncateTableAndSetShowErrorStoredProcedure",e.__tables__=["user_visible_network_connectivity_error"],a.exports=e}),null);
__d("LSDeleteAllAndInsertConnectivityStatus",["LSTruncateTableAndSetShowError"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.forEach(t.db.table(114).fetch(),function(e){return e.delete()})},function(n){return r[0]=t.i64.of_float(Date.now()),t.db.table(114).add({statusId:void 0,timestampMs:r[0],internetConnectionState:e[0]})},function(r){return t.storedProcedure(n("LSTruncateTableAndSetShowError"),t.i64.neq(e[0],t.i64.cast([0,1])))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSConnectivityDeleteAllAndInsertConnectivityStatusStoredProcedure",e.__tables__=["connectivity_status"],a.exports=e}),null);
__d("LSDeleteAllAndInsertConnectivityStatusStoredProcedure",["LSDeleteAllAndInsertConnectivityStatus","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSDeleteAllAndInsertConnectivityStatus"),a.internetConnectionState);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSEagerlyLoadOnMessenger",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}i.eagerlyLoadOnMessenger=e}),66);
__d("LSGroupParticipantJoinState",[],(function(t,n,r,o,a,i){var e=Object.freeze({MEMBER:0,PENDING:1,INVITED:2});i.default=e}),66);
__d("LSSyncStoredProcedureUtils",["I64","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a=r!=null?(e||(e=o("I64"))).of_float(Date.now()+r):n.minTimeToSyncTimestampMs;yield t.pending_tasks.put(babelHelpers.extends({},n,{failureCount:(e||(e=o("I64"))).add(n.failureCount,e.one),minTimeToSyncTimestampMs:a}))}),u.apply(this,arguments)}function c(e,t,n){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.pending_tasks.index("queueNameTaskId")).getKeyRange(t));if(r!=null)return s(e,r,n)}),d.apply(this,arguments)}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a=yield t.network_requests.get(n,r);a!=null&&(yield t.network_requests.put(babelHelpers.extends({},a,{failureCount:(e||(e=o("I64"))).add(a==null?void 0:a.failureCount,e.one)})))}),p.apply(this,arguments)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield e.network_requests.get(t,n);r!=null&&(yield e.network_requests.put(babelHelpers.extends({},r,{epochId:void 0,networkTaskIdentifier:void 0})))}),f.apply(this,arguments)}l.incrementPendingTaskFailureCount=s,l.incrementPendingTasksTaskFailureCount=c,l.incrementNetworkRequestsTaskFailureCount=m,l.closeEpoch=_}),98);
__d("LSHandleTaskSendFailureForQueue2",["I64","LSSyncStoredProcedureUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){yield o("LSSyncStoredProcedureUtils").incrementPendingTasksTaskFailureCount(t,n,r),yield o("LSSyncStoredProcedureUtils").incrementNetworkRequestsTaskFailureCount(t,n,(e||(e=o("I64"))).neg_one),yield o("LSSyncStoredProcedureUtils").closeEpoch(t,n,e.neg_one)}),u.apply(this,arguments)}l.default=s}),98);
__d("LSHandleTaskSendSuccessForQueue2",["I64","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=yield t.network_requests.get(n,(e||(e=o("I64"))).neg_one);r==null||r.epochId==null||(yield t.network_requests.delete(n,e.neg_one))}),u.apply(this,arguments)}l.default=s}),98);
__d("LSHandleTaskSuccessOpsDownloadFailureForQueue",["I64","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=yield t.network_requests.get(n,(e||(e=o("I64"))).neg_one);r!=null&&r.epochId!=null&&(yield t.network_requests.delete(n,(e||(e=o("I64"))).neg_one));var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.pending_tasks.index("queueNameTaskId")).getKeyRange(n));a!=null&&(yield t.pending_tasks.delete(a.taskId))}),u.apply(this,arguments)}l.default=s}),98);
__d("LSInternetConnectionState",[],(function(t,n,r,o,a,i){var e=Object.freeze({NOT_CONNECTED:0,CONNECTED:1});i.default=e}),66);
__d("LSMessageReplySourceTypeV2",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,FB_STORY_MENTION:22,EXPIRED_STORY:23,FB_PRODUCER_STORY_REPLY:24,FB_POST_MENTION:25,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28,IG_COLLAB_INVITE:29,FB_QUICKSNAP:30});i.default=e}),66);
__d("LSMessageSendStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});i.default=e}),66);
__d("LSPlatformDefaultUnderlyingApi",["Promise","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return r("emptyFunction")}function u(){return(e||(e=n("Promise"))).resolve()}var c={cleanup:r("emptyFunction"),logEvent:function(t){},onConnectionStatusChange:s,onReconnect:s,publish:u,subscribe:s};l.default=c}),98);
__d("LSPlatformDeviceId",["ChannelClientID","FBLogger","LSCookie","MqttWebDeviceID","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("21118")?r("MqttWebDeviceID").clientID:r("ChannelClientID").getID()}var s=e();function u(t){return t==null&&r("FBLogger")("messenger_web").info("Missed provider type for deviceId"),t==="persisted"?o("LSCookie").get().d:e()}l.deviceId=s,l.getDeviceIdForProviderType=u}),98);
__d("LSStreamGroupRef",["I64","LSMailboxInitialSyncCursor"],(function(t,n,r,o,a,i,l){"use strict";var e,s={connectionStatusChangeHandler:null,current:null,currentStreamGroupId:null,publishBuffer:new Map,reconnectHandler:null,status:"Disconnected",subscribers:new Map};function u(){return(e||(e=o("I64"))).equal((e||(e=o("I64"))).of_int32(1),o("LSMailboxInitialSyncCursor").syncChannel)?"mqtt":s.current==null||s.current.streamGroupLoggingContext.sgTransportId==null?"null":s.current.streamGroupLoggingContext.sgTransportId}function c(){return s.status}l.streamGroupRef=s,l.getTransportId=u,l.getTransportStatus=c}),98);
__d("MessengerPWAVersionForUserAgent",["isMessengerPWA"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("isMessengerPWA")();if(t){var n=(e=new URL(window.location.href).searchParams.get("__pwa"))!=null?e:"1.0.0";return n}}l.default=e}),98);
__d("LSPlatformRealtimeTransport",["I64","LSDynamicDependencies","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSShape","LSStreamGroupRef","MessengerPWAVersionForUserAgent","NetworkStatus","Promise","QuickPerformanceLogger","Random","clearTimeout","promiseDone","qpl","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=r("qpl")._(701246226,"1285"),m="LSPlatformRealtimeTransport.NotConnected",p="LSPlatformRealtimeTransport.Timeout";function _(e){var t=new Map;return{getAll:function(){return Array.from(t.values())},getOrStart:function(r){var n=r.toString(),o=t.get(n);return o==null&&(o=e(r),t.set(n,o)),o}}}function f(e){}function g(t,a,i){var l=new Map,m={contents:f},g=new Set,h=new Map,y=[],C=_(function(e){var n=t(e,i);return y.push(n.subscribe(function(e){var t=JSON.parse(e),n=o("LSDynamicDependencies").downloadBootloaderDependencies(t.sp,t.nop,t.ntop),a=t.request_id,i;if(a!=null){var s=l.get(a);if(s==null)i=!1;else{r("clearTimeout")(s.timeoutId),s.resolve({downloadTask:n,payload:t,type:"taskresponse"}),l.delete(a);var u=s.instanceKey;(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"response",{instanceKey:u}),c.markerEnd(d,2,u),i=!0}}else i=!1;if(!i){Array.from(h.entries()).forEach(function(e){return e[1](n,t)});return}})),y.push(n.onReconnect(function(e){return m.contents(e)})),y.push(n.onConnectionStatusChange(function(e){g.forEach(function(t){return t(e)})})),n});return C.getOrStart((u||(u=o("LSIntEnum"))).unwrapIntEnum(o("LSMailboxInitialSyncCursor").syncChannel)),{cleanup:function(){y.forEach(function(e){return e()}),C.getAll().forEach(function(e){return e.cleanup()})},logEvent:function(t){C.getAll().forEach(function(e){return e.logEvent(t)})},onConnectionStatusChange:function(t){return g.add(t),function(){g.delete(t)}},onReconnect:function(t){return m.contents=t,function(){m.contents=f}},publish:function(i){var t=i.databaseType,m=i.payload,_=i.queueName,f=i.requestId,g=i.syncChannel,h=i.type_;return new(e||(e=n("Promise")))(function(e,n){var i=C.getOrStart((u||(u=o("LSIntEnum"))).unwrapIntEnum(g)),y=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);if((s||(s=o("I64"))).equal(h,(u||(u=o("LSIntEnum"))).ofNumber(3))){var b=r("setTimeout")(function(){i.logEvent("Timeout");var e=l.get(f);return(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"timeout",{instanceKey:y}),c.markerEnd(d,3,y),e!=null&&(l.delete(f),e.reject({RE_EXN_ID:p})),n({RE_EXN_ID:p})},3e4);l.set(f,{instanceKey:y,queueName:_,reject:n,resolve:e,timeoutId:b,timestamp:Date.now()})}(c||(c=r("QuickPerformanceLogger"))).markerStart(d,y),c.markerPoint(d,"publish",{instanceKey:y}),c.markerAnnotate(d,{string:{networkStatus:String(r("NetworkStatus").isOnline()),streamGroupId:o("LSStreamGroupRef").getTransportId(),streamGroupStatus:o("LSStreamGroupRef").getTransportStatus()}},{instanceKey:y}),c.markerAnnotate(d,{int:{databaseType:t,requestType:u.toNumber(h)}},{instanceKey:y});var v=r("MessengerPWAVersionForUserAgent")();r("promiseDone")(i.publish(o("LSJson").stringify(o("LSShape").ofRecord(babelHelpers.extends({app_id:a,payload:m},v!=null?{pwa_version:v}:{},{request_id:f,type:h}))),h,t),function(){if(!(s||(s=o("I64"))).equal(h,(u||(u=o("LSIntEnum"))).ofNumber(3)))return(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"response",{instanceKey:y}),c.markerEnd(d,2,y),e({type:"noresponseexpected"})},function(e){(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"fail",{instanceKey:y}),c.markerEnd(d,3,y),n(e)})})},subscribeToNonTaskResponses:function(t){var e={};return h.set(e,t),function(){h.delete(e)}}}}l.NotConnected=m,l.Timeout=p,l.LSPlatformRealtimeTransport=g}),98);
__d("shouldStubUnderlyingTransport",["ExecutionEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return!(e||(e=r("ExecutionEnvironment"))).canUseDOM&&!(e||(e=r("ExecutionEnvironment"))).isInWorker}l.default=s}),98);
__d("LSPlatformMqttRealtimeTransport",["I64","LSIntEnum","LSPlatformDefaultUnderlyingApi","LSPlatformRealtimeTransport","Promise","promiseDone","shouldStubUnderlyingTransport"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return[{payload:JSON.stringify({ls_fdid:"",ls_sv:e}),qos:1,topic:"/ls_app_settings"}]}function d(t){var a={contents:t.getConnectionState()},i={contents:function(){}},l={contents:new(u||(u=n("Promise")))(function(e,t){i.contents=e})},c={onMQTTStateChanged:function(t){t==="Connected"?i.contents():t==="Disconnected"&&a.contents==="Connected"&&(l.contents=new(u||(u=n("Promise")))(function(e,t){i.contents=e})),a.contents=t}};return a.contents==="Connected"&&i.contents(),t.subscribeChannelEvents(c),[function(){t.unsubscribeChannelEvents(c)},function(a,i,c){return l.contents.then(function(){return new(u||(u=n("Promise")))(function(n,l){r("promiseDone")(t.publish("/ls_req",a,{listener:{onEvent:function(t){if(t==="NOT_CONNECTED")return l({RE_EXN_ID:o("LSPlatformRealtimeTransport").NotConnected})}},qos:(e||(e=o("I64"))).equal(i,(s||(s=o("LSIntEnum"))).ofNumber(4))?0:1,skipBuffer:!1}),function(){return n()},function(e){return e.message==="Publish Timed Out"?l({RE_EXN_ID:o("LSPlatformRealtimeTransport").Timeout}):l(e)})})})}]}var m={contents:void 0};function p(e,t,n){if(r("shouldStubUnderlyingTransport")())return r("LSPlatformDefaultUnderlyingApi");var o=n.getInstance(t),a={getPublishMessages:function(){return c(e)}};o.registerExtraConnectPayloadProvider(a);var i={onMQTTStateChanged:function(t){var e=m.contents;if(e!=null)return e(t)}};o.subscribeChannelEvents(i);var l=o.subscribe("/ls_foreground_state",function(){}),s=d(o),u=s[0],p=s[1];return{cleanup:function(){o.unregisterExtraConnectPayloadProvider(a),n.shutdownAndClear(),o.unsubscribeChannelEvents(i),l(),u()},logEvent:function(t){},onConnectionStatusChange:function(t){return m.contents=t,function(){m.contents=void 0}},onReconnect:function(t){var e={contents:o.getConnectionState()},n={contents:e.contents==="Connected"},r={onMQTTStateChanged:function(o){o==="Connected"&&(n.contents&&e.contents!=="Connected"&&t(1),n.contents=!0),e.contents=o}};return o.subscribeChannelEvents(r),function(){o.unsubscribeChannelEvents(r)}},publish:p,subscribe:function(t){return o.subscribe("/ls_resp",function(e){return t(e)})}}}l.default=p}),98);
__d("LSPlatformRequestId",[],(function(t,n,r,o,a,i){"use strict";var e=4;function l(){var t=e;return e+=1,t}var s={generate:l};i.default=s}),66);
__d("LSPlatformRequestScheduler",["clearTimeout","justknobx","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Math.pow(2,31)-1,s=(function(){function t(){this.requests=new Map}var n=t.prototype;return n.schedule=function(n,o,a){var t=this.requests.get(o);t!=null&&r("clearTimeout")(t);var i=r("justknobx")._("4435")?Math.min(a,e):a;this.requests.set(o,r("setTimeout")(n,i))},n.cleanup=function(){this.requests.forEach(function(e){return r("clearTimeout")(e)})},t})();l.default=s}),98);
__d("LSPlatformServerResponseHandler",["FBLogger","Promise","asyncToGeneratorRuntime","clearTimeout","nullthrows","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s="executeFirstBlockForSyncTransaction",u=(function(){function t(e){this.eval=e,this.currentlyRunning=new Map}var o=t.prototype;return o.evalWhenReady=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n;try{yield e,n=r("setTimeout")(function(){r("FBLogger")("messenger_web").mustfix("waited longer than 30 seconds to eval sync script")},3e4),yield this.eval(t)}finally{r("clearTimeout")(n)}});function t(t,n){return e.apply(this,arguments)}return t})(),o.$1=function(r){var t=this.currentlyRunning.get(r);return t==null&&(t=(e||(e=n("Promise"))).resolve(),this.currentlyRunning.set(r,t)),t},t.getSyncScriptType=function(t){var e;if(!((e=t.sp)!=null&&e.includes(s)))return{status:"non-transactional"};var n=(function(){try{var e;return(e=JSON.parse(t.syncScript))==null?void 0:e.step}catch(e){return null}})();if(!Array.isArray(n))return r("FBLogger")("messenger_web").warn("Sync payload appears invalid."),{status:"non-transactional"};for(var o=[n];o.length;){var a=r("nullthrows")(o.shift());for(var i of a)if(Array.isArray(i)){if(i[0]===5&&i[1]===s&&Array.isArray(i[2]))return{status:"transactional",syncGroup:parseInt(i[2][1],10)};o.push(i)}}return{status:"err"}},o.maybeEvalInOrderReceived=function(n,o){var e,a=this,i=t.getSyncScriptType(o),l=0;switch(i.status){case"err":r("FBLogger")("messenger_web").warn("Sync script sync group parsing failed: employed sprocs were %s",JSON.stringify((e=o.sp)!=null?e:void 0));break;case"non-transactional":return this.evalWhenReady(n,o);case"transactional":l=i.syncGroup;break}var s=this.$1(l),u=s.then(function(){return a.evalWhenReady(n,babelHelpers.extends({},o,{priority:"sync_script"}))}).catch(function(e){throw a.currentlyRunning.delete(l),e});return this.currentlyRunning.set(l,u),u},t})();l.default=u}),98);
__d("LSPlatformTaskSyncGroupId",[],(function(t,n,r,o,a,i){"use strict";var e=-1,l=e;i.default=l}),66);
__d("MWPBeginHandlingPendingTasksForQueue",["LSBeginHandlingFireForgetTasksForQueueStoredProcedure","LSBeginHandlingPendingTasksForQueue2","LSFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var o=t.fireAndForgetTask,a=t.ignoreSoftDelay,l=t.queueName,s=yield e.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(o===!0){var t=yield r("LSBeginHandlingFireForgetTasksForQueueStoredProcedure")(r("LSFactory")(e),{queueName:l}),n=t[0];return[n]}return r("LSBeginHandlingPendingTasksForQueue2")(e,{ignoreSoftDelay:a,queueName:l})});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":37");return s}),s.apply(this,arguments)}l.default=e}),98);
__d("MWPlatformTaskUtils",["FBLogger","I64","JSScheduler","MetaConfig","Promise","ReQL","asyncToGeneratorRuntime","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){function a(){return i.apply(this,arguments)}function i(){return i=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield e(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).warn("Failed to calculate work for task queue %s",t.queueName)}}),i.apply(this,arguments)}if((u||(u=o("I64"))).gt(t.priority,(u||(u=o("I64"))).zero)&&r("MetaConfig")._("78")){var l=function(){var e=a()};(s||(s=r("JSScheduler"))).scheduleLoggingPriCallback(l)}else r("promiseDone")(a())}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){try{yield e(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).warn("Failed to calculate work for fire forget queue %s",t.queueName)}}),m.apply(this,arguments)}function p(e,t){var r=new Set,a=[],i=[];return i.push(e.tables.pending_tasks.index("queueNameTaskId").subscribe(function(e,t){var n,i;if(t.operation==="delete"){r.add(e[0]);return}var l=t.operation==="put"&&t.prevValue==null||t.operation==="add",s=t.operation==="put"&&(u||(u=o("I64"))).compare(t.value.failureCount,(n=(i=t.prevValue)==null?void 0:i.failureCount)!=null?n:(u||(u=o("I64"))).zero)>0;(l||s)&&r.add(t.value.queueName),(t.operation==="add"&&t.value.dataTraceId==null||t.value.dataTraceId==="")&&a.push(t.value)})),i.push(e.tables.network_requests.subscribe(function(e,t){var n=e[0];n!==""&&(t.operation==="delete"||t.value.epochId==null)&&r.add(n)})),i.push(e.subscribeToCommit(function(){var i=Array.from(r);r.clear(),a=[],i.forEach((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.pending_tasks.index("queueNameTaskId")).bounds({gte:[n]}));r!=null&&c(t,r)});return function(e){return r.apply(this,arguments)}})())})),i}function _(e,t){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.pending_tasks)),r=new Set;for(var a of n)r.has(a.queueName)||(r.add(a.queueName),c(t,a))})())}function f(t,a){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var l=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.pending_fire_and_forget_tasks));yield(e||(e=n("Promise"))).all(l.map(function(e){return d(a,e)})),r("promiseDone")(t.runInTransaction(function(t){return(e||(e=n("Promise"))).all(l.map(function(e){return t.pending_fire_and_forget_tasks.delete(e.taskId)}))},"readwrite","background",void 0,i.id+":199"))})())}function g(e,t){var n=!1,r=[];return r.push(e.tables.pending_fire_and_forget_tasks.subscribe(function(e,t){if(t.operation!=="delete"){var r=t.operation==="put"&&t.prevValue==null||t.operation==="add";r&&(n=!0)}})),r.push(e.subscribeToCommit(function(){n&&f(e,t),n=!1})),r}l.checkQueuesWhenPendingTaskTableUpdates=p,l.checkAllPendingTasksForWork=_,l.checkAllFireForgetTasksForWork=f,l.checkQueuesWhenPendingFireForgetTaskTableUpdates=g}),98);
__d("LSPlatformTaskSystemTransport",["CurrentMessengerUser","FBLogger","I64","JSResourceForInteraction","JSScheduler","LSDatabaseProviderType","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueue2","LSHandleTaskSuccessOpsDownloadFailureForQueue","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSPlatformTaskSyncGroupId","LSShape","LSVec","MWPBeginHandlingPendingTasksForQueue","MWPBumpEntityKey","MWPlatformTaskUtils","Promise","ReQL","asyncToGeneratorRuntime","cr:4031","cr:6668","gkx","promiseDone","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=500,m=r("JSResourceForInteraction")("publishLSPlatformDeidentifiedPayload").__setRef("LSPlatformTaskSystemTransport"),p=new Set([632,765,60011,1006,1018].map(function(e){return e.toString()})),_=(function(){function t(e,t,a,i){var l=this;this.key="ls",this.$8=!1,this.$19=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield r("MWPBeginHandlingPendingTasksForQueue")(l.$1,{ignoreSoftDelay:t,queueName:e});for(var a of n)yield l.$18(o("LSShape").toRecord(a))});return function(t,n){return e.apply(this,arguments)}})(),this.$1=e,this.$2=t,this.$3=a,this.$4=i,this.$8=o("LSDatabaseProviderType").isProviderPersisted(e),this.$5=new(r("LSPlatformRequestScheduler")),this.$6=new(r("LSPlatformServerResponseHandler"))(a),this.$7=this.$9(),this.$10()}var a=t.prototype;return a.$11=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.filter(function(e){return e.label!=null&&p.has(e.label)});if(n.length<e.length){n.length>0&&r("FBLogger")("maw_ohai").mustfix("Deidentifed tasks label %s sent together with normal tasks",n[0].label);var o=yield this.$2.publish(t);return o}var a=n[0],i=yield m.load(),l=yield i(babelHelpers.extends({},t,{taskLabel:a.label}));return l});function t(t,n){return e.apply(this,arguments)}return t})(),a.$12=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield this.$1.runInTransaction(function(t){return r("LSHandleTaskSendFailureForQueue2")(t,e)},"readwrite",void 0,void 0,i.id+":151")});function t(t){return e.apply(this,arguments)}return t})(),a.$13=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield this.$1.runInTransaction(function(t){return r("LSHandleTaskSendSuccessForQueue2")(t,e)},"readwrite","background",void 0,i.id+":160")});function t(t){return e.apply(this,arguments)}return t})(),a.$14=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield this.$1.runInTransaction(function(t){return r("LSHandleTaskSuccessOpsDownloadFailureForQueue")(t,e)},"readwrite",void 0,void 0,i.id+":168")});function t(t){return e.apply(this,arguments)}return t})(),a.$15=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=r("LSVec").toArray(e.tasks).slice(0).map(function(e){return o("LSShape").toRecord(e)}),n=t[0];if(n!=null){var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(this.$1.tables.pending_tasks).getKeyRange(n.task_id));return a==null?void 0:a.dataTraceId}});function t(t){return e.apply(this,arguments)}return t})(),a.$16=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=this;if(t.network_payload!=null){var l=o("LSShape").toRecord(t.network_payload);(c||(c=r("JSScheduler"))).scheduleLoggingPriCallback(function(){return l&&(n("cr:6668")==null?void 0:n("cr:6668").recordTaskSending(l.tasks))});var s=this.$4;try{yield(u||(u=n("Promise"))).all(r("LSVec").toArray(l.tasks).map(function(e){return o("LSShape").toRecord(e)}).map(function(n){var l=r("LSPlatformRequestId").generate();return i.$11([n],{databaseType:r("LSPlatformTaskSyncGroupId"),payload:o("LSJson").stringify(o("LSShape").ofRecord({label:n.label,payload:n.payload,version:s})),queueName:t.queue_name,requestId:l,syncChannel:o("LSMailboxInitialSyncCursor").taskChannel,type_:(e||(e=o("I64"))).of_int32(a)})}))}catch(e){}}});function a(e,n){return t.apply(this,arguments)}return a})(),a.$17=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){if(t.network_payload!=null){var i=o("LSShape").toRecord(t.network_payload),l=r("LSVec").toArray(i.tasks).map(function(e){return o("LSShape").toRecord(e)}),u=yield this.$15(i);(c||(c=r("JSScheduler"))).scheduleLoggingPriCallback(function(){return i&&(n("cr:6668")==null?void 0:n("cr:6668").recordTaskSending(i.tasks))});var d=r("LSPlatformRequestId").generate(),m,p=r("qex")._("2071");if(p!=null&&p!=="default"){var _=p+"."+(s||(s=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").taskChannel)+"."+a.toString();o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",_)}try{m=yield this.$11(l,{databaseType:r("LSPlatformTaskSyncGroupId"),payload:o("LSJson").stringify(o("LSShape").ofRecord(babelHelpers.extends({},i,{version_id:this.$4},u==null?{}:{data_trace_id:u}))),queueName:t.queue_name,requestId:d,syncChannel:o("LSMailboxInitialSyncCursor").taskChannel,type_:(e||(e=o("I64"))).of_int32(a)})}catch(e){if(p!=null&&p!=="default"){var f=p+"."+(s||(s=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").taskChannel)+"."+a.toString();o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f+".exception"),e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout?o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f+".exception.timeout"):e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f+".exception.notconnected")}e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout?o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_timeout"):e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected?(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_notconnected"),r("FBLogger")("messenger_web").warn("Publishing a task to the server not connected")):(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_generic"),r("FBLogger")("messenger_web").warn("Error while publishing a task for request: %s, error %s",a,JSON.stringify(e))),yield this.$12(t.queue_name)}if(m!=null&&m.type==="taskresponse")try{var g=m.downloadTask,h=m.payload,y={experiments:h.ex,sp:h.sp,syncScript:h.payload,target:h.target,taskNames:l.map(function(e){return e.label}).filter(Boolean)};yield this.$6.evalWhenReady(g,y),yield this.$13(t.queue_name),(c||(c=r("JSScheduler"))).scheduleLoggingPriCallback(function(){return i&&(n("cr:6668")==null?void 0:n("cr:6668").recordTaskSent(i.tasks,h.payload))})}catch(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","handle_task_failure"),r("FBLogger")("messenger_web").catching(e).mustfix("Encountered an error while processing a task response via realtime transport"),(e==null?void 0:e.name)==="dynamic_sproc_loading_timeout"&&r("gkx")("14417")?yield this.$14(t.queue_name):yield this.$12(t.queue_name)}}});function a(e,n){return t.apply(this,arguments)}return a})(),a.decideWhatToDoWithTask=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a,i){var l=this,s=yield r("MWPBeginHandlingPendingTasksForQueue")(e,{fireAndForgetTask:i,ignoreSoftDelay:!1,queueName:t,transportKey:a});r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var e of s)yield l.$18(o("LSShape").toRecord(e))})())});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),a.$18=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=this.$5,i=this.$19;function l(t,n){a.schedule(function(){r("promiseDone")(i(t,!1))},t,n!=null?(e||(e=o("I64"))).to_float(n):d)}var s=(e||(e=o("I64"))).to_int32(t.work_item_type);switch(s){case 1:yield this.$17(t,3);break;case 5:yield this.$16(t,4);break;case 3:l(t.queue_name,t.next_sync_ms);break;case 2:yield n("cr:4031").handleLSWork(this.$1,t,o("CurrentMessengerUser").getAccountID());break;case 4:break;default:r("FBLogger")("messenger_web").warn("Unknown Task type of %s",s)}});function a(e){return t.apply(this,arguments)}return a})(),a.$9=function(){var e=this,t=this.$1;return this.$2.onReconnect(function(a){o("LSMailboxInitialSyncCursor").isWebApp&&a===3&&r("qex")._("2082")===!0||(r("promiseDone")(t.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.network_requests).bounds({gte:o("ReQL").key("")}));yield(u||(u=n("Promise"))).all(t.map(function(t){var n=t.taskQueueName;return r("LSHandleTaskSendFailureForQueue2")(e,n)}))});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":481")),e.$10())})},a.$10=function(){var e=this;o("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(t){var n=t.queueName;return e.decideWhatToDoWithTask(e.$1,n)})},a.cleanup=function(){this.$7()},t})();l.default=_}),98);
__d("LSReplyMessageAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16,BLOKS_XMA:17,EPHEMERAL_RAVEN_MESSAGE:18,THIRD_PARTY_STICKER:19,SOUND_BITE:9});i.default=e}),66);
__d("LSVersion",[],(function(t,n,r,o,a,i){a.exports="32381005491547324"}),null);
__d("WAGlobals",["WAJids","WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(e){s=e}function c(){if(s==null)throw r("err")("WaMsgr api called before set");return s}function d(){var e;return(e=c().myJids)==null?void 0:e.deviceJid}function m(){var e;return(e=c().myJids)==null?void 0:e.userJid}function p(e){return o("WAJids").extractUserJid(e)===o("WAJids").extractUserJid(d())}function _(){return c().config}function f(){return c().dependencies}var g="WAOneQueue is not defined";function h(){var t=c().waOneQueue;if(t==null)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),g),r("err")(g);return t}function y(){return c().hmacKey}l.setGlobals=u,l.getMyDeviceJid=d,l.getMyUserJid=m,l.isPeerDevice=p,l.getConfig=_,l.getDependencies=f,l.getWaOneQueue=h,l.getHMACKey=y}),98);
__d("MAWUserJidWrapper",["ExecutionEnvironment","MAWCurrentUser","MAWODSProxy","WAGlobals","WAJids","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("WAJids").toMsgrUserJid(o("MAWCurrentUser").getID());if((e||(e=r("ExecutionEnvironment"))).isInWorker){var n=o("WAGlobals").getMyUserJid();return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MY_USER_JID_GETTER,key:n===t?"same":"different"}),n}return t}l.getMyUserJid=s}),98);
__d("MAWAuthor",["MAWUserJidWrapper","WAJids","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){if(t==null||t===o("WAJids").AUTHOR_SYSTEM)return null;if(o("WAJids").isAuthorMe(t))return o("MAWUserJidWrapper").getMyUserJid();var e=o("WAJids").authorAsUserJid(t);return e==null||r("isStringNullOrEmpty")(o("WAJids").userIdFromJid(e))?null:o("WAJids").authorAsUserJid(t)};l.getAuthorUserJid=e}),98);
__d("MAWExternalId",["I64","Random","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=131071,u=null,c=0;function d(){var e=u,t=Date.now();if(e==null||p(e)!==p(t))return u=t,c=0,t;var n=t+100*(c+1),r=g(t),o=g(n);return r==null||o==null||r>o?t:(c++,n)}function m(e){return new Date(e).getTime()>0}function p(e){return Math.floor(e/100)*100}function _(e){return Math.floor(r("Random").random()*e)}function f(){var t=d();return o("WAStanzaUtils").toStanzaId((e||(e=o("I64"))).to_string(e.and_(e.or_(e.lsl_(e.of_float(t),22),e.and_(e.of_float(_(s)),e.of_float(s))),e.max_int)))}function g(e){return m(e)?Math.floor(Number(e)%1e5/100):null}l.generateExternalId=f,l.getThreeMostSignificantDigitsForSortOrderTimestamp=g}),98);
__d("MNLSXMALayoutType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17,TWO_CARD:18,NOTE:19,VSTACK:20,SQUIRCLE:21,REPLY:22,RICH_RESPONSE:23,CODE:24,TABLE:25,SQUIRCLE_SHARED_STACK:26,UNIFIED_RESPONSE:27,CARD:28,CONDENSED_LINK:29,DOODLE_SPACE:30});i.default=e}),66);
__d("MNXMAPreviewImageDecorationType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,COLLAGE:1,VIDEO:2,MESSENGER_ICON:3,INSTAGRAM_ICON:4,SHOPPING:5,UPCOMING_EVENT:6,LIVE:7,REEL:8,IGTV:9,YOUTUBE_VIDEO:10,YOUTUBE_SHORTS:11,COMMENT:12,BLUR:13,PILL:14,MESSENGER_CHANNEL_IMAGE:15,TROPHY:16,DXMA_LIVE:17,DXMA_LIVE_ENDED:18,LIKE_BUBBLE_REPLY:19,LIKE_BUBBLES:20,REPOST:21,FUBS_EXCLUSIVE_CONTENT_TEASER:22});i.default=e}),66);
__d("MWPlatformTaskSystem",["LSPlatformRequestScheduler","MWPlatformTaskUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){var n=this;this.$1=e,this.$2=t,this.$3=new(r("LSPlatformRequestScheduler")),this.$4=o("MWPlatformTaskUtils").checkQueuesWhenPendingTaskTableUpdates(e,function(t){var r=t.queueName,o=t.transportKey;return n.$6(e,r,o,!1)}),this.$5=o("MWPlatformTaskUtils").checkQueuesWhenPendingFireForgetTaskTableUpdates(e,function(t){var r=t.queueName,o=t.transportKey;return n.$6(e,r,o,!0)}),this.$7()}var t=e.prototype;return t.$6=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){yield this.$2.decideWhatToDoWithTask(e,t,n,r)});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),t.$7=function(){var e=this;o("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(t){var n=t.queueName;return e.$6(e.$1,n)})},t.cleanup=function(){this.$4.forEach(function(e){return e()}),this.$5.forEach(function(e){return e()}),this.$2.cleanup()},e})();l.default=e}),98);
__d("MessagingAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,STICKER:1,IMAGE:2,ANIMATED_IMAGE:3,VIDEO:4,AUDIO:5,FILE:6,XMA:7,EPHEMERAL_IMAGE:8,EPHEMERAL_VIDEO:9,SELFIE_STICKER:10,SOUND_BITE:12,CATALOG_ITEM:13,POWER_UP:14,THIRD_PARTY_STICKER:15});i.default=e}),66);
__d("NestedTimeRange",["SimpleHook","performance","performanceAbsoluteNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new(o("SimpleHook")).SimpleHook,c=new(o("SimpleHook")).SimpleHook,d="/";function m(e,t){return""+e+d+t}var p=(function(){function t(e,t){t===void 0&&(t=null),this.$3=0,this.$1=e,this.$2=t}var n=t.prototype;return n.isRunning=function(){return this.$3>0},n.fullname=function(){return this.$2!==null?m(this.$2.fullname(),this.$1):this.$1},n.start=function(n){if(n===void 0&&(n=(e||(e=r("performanceAbsoluteNow")))()),this.$3===0){var t;(t=this.$2)==null||t.start(n),this.__onStart(n)}return++this.$3,n},n.__onStart=function(t){u.call(this,t)},n.stop=function(n){if(n===void 0&&(n=(e||(e=r("performanceAbsoluteNow")))()),--this.$3,this.$3===0){var t;this.__onStop(n),(t=this.$2)==null||t.stop(n)}return n},n.__onStop=function(t){c.call(this,t)},t})();function _(){(s||(s=r("performance"))).mark&&(s||(s=r("performance"))).measure&&(u.add(function(e,t){(s||(s=r("performance"))).mark(e.fullname()+"_start")}),c.add(function(e,t){(s||(s=r("performance"))).measure(e.fullname(),e.fullname()+"_start")}))}l.OnRangeStart=u,l.OnRangeStop=c,l.TIME_RANGE_LEVEL_SEPARATOR=d,l.rangeFullName=m,l.NestedTimeRange=p,l.enableDevConsoleTimeline=_}),98);
__d("OfflineThreadingId",["I64","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("4194303");function u(){return(e||(e=o("I64"))).to_string(c())}function c(){var t=o("XPlatReactCrypto").getRandomValues(new Uint8Array(8)),n=new DataView(t.buffer),r=(e||(e=o("I64"))).add(e.lsl_(e.of_int32(n.getUint32(0)),32),e.of_int32(n.getUint32(4)));return d(Date.now(),r)}function d(t,n){return(e||(e=o("I64"))).and_(e.or_(e.lsl_(e.of_float(t),22),e.and_(n,s)),e.max_int)}function m(t){for(var n=c(),r=[],a=0;a<t.length;a++)r.push([t[a],(e||(e=o("I64"))).to_string(n)]),n=p(n);return r}function p(t,n){n===void 0&&(n=(e||(e=o("I64"))).one);var r=_(t),a=f(t);return d(r,(e||(e=o("I64"))).add(a,n))}function _(t){return(e||(e=o("I64"))).to_float(e.lsr_(t,22))}function f(t){return(e||(e=o("I64"))).and_(t,s)}l.createOfflineThreadingID=u,l.createForItemsInOrder=m,l.createNewFromExisting=p,l.extractTimestamp=_}),98);
__d("QLogEvent",["DoubleKeyMap","FBLogger","NestedTimeRange","QPLEvent","SimpleHook","performanceNavigationStart"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new(o("DoubleKeyMap")).DoubleKeyMap,c=(function(e){function t(t,n,r){var o;return o=e.call(this,t,r)||this,o.$QPLRange$p_1=n,u.set(n,o.fullname(),o),o}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.__onStart=function(n){e.prototype.__onStart.call(this,n),this.$QPLRange$p_1.point(this.fullname()+"_START",{timestamp:n})},n.__onStop=function(n){e.prototype.__onStop.call(this,n),this.$QPLRange$p_1.point(this.fullname()+"_END",{timestamp:n}),u.delete(this.$QPLRange$p_1,this.fullname())},n.range=function(n){var e;this.fullname().startsWith(o("NestedTimeRange").TIME_RANGE_LEVEL_SEPARATOR)||r("FBLogger")("qpl").warn("Range %s cannot have subrange since root name does not start with /",this.fullname());var a=o("NestedTimeRange").rangeFullName(this.fullname(),n);return(e=u.get(this.$QPLRange$p_1,a))!=null?e:new t(n,this.$QPLRange$p_1,this)},t})(o("NestedTimeRange").NestedTimeRange),d=new(o("DoubleKeyMap")).DoubleKeyMap,m=new(s=o("SimpleHook")).SimpleHook,p=new s.SimpleHook,_=new s.SimpleHook,f=new s.SimpleHook,g=(function(t){function n(n,r,a,i,l){var s;r===void 0&&(r=0),a===void 0&&(a=2),i===void 0&&(i=!1);var u=(e||(e=o("QPLEvent"))).getMarkerId(n);return s=t.call(this,"event_"+u)||this,s.event=n,s.instanceKey=r,s.$QPLEvent$p_1=a,s.isUserFlow=i,s.$QPLEvent$p_2=l,d.set(u,r,s),s}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.action=function(t){return this.$QPLEvent$p_1=t,this},a.getAction=function(){return this.$QPLEvent$p_1},a.setIsUserFlow=function(t){return this.isUserFlow=t,this},a.startFromNavStart=function(){return this.start(r("performanceNavigationStart")()),this},a.startFromTime=function(t){return this.start(t),this},a.__onStart=function(t){var e;(e=this.$QPLEvent$p_2)==null||e.onStart(this,t),m.call(this,t)},a.__onStop=function(n){var t;(t=this.$QPLEvent$p_2)==null||t.onStop(this,n),p.call(this,n),u.deleteAll(this),d.delete((e||(e=o("QPLEvent"))).getMarkerId(this.event),this.instanceKey)},a.range=function(t){var e;return(e=u.get(this,t))!=null?e:new c(t,this)},a.point=function(t,n){var e;return n===void 0&&(n={}),(e=this.$QPLEvent$p_2)==null||e.onPoint(this,t,n),_.call(this,t,n),this},a.annotate=function(t){var e;return(e=this.$QPLEvent$p_2)==null||e.onAnnotate(this,t),f.call(this,t),this},n})(o("NestedTimeRange").NestedTimeRange);function h(t,n,r){var a;return n===void 0&&(n=0),(a=d.get((e||(e=o("QPLEvent"))).getMarkerId(t),n))!=null?a:new g(t,n,2,!1,r)}l.OnEventStart=m,l.OnEventStop=p,l.OnEventPoint=_,l.OnEventAnnotate=f,l.QPLEvent=g,l.event=h}),98);
__d("VirtualMessageChannel",["invariant","Promise","SimpleHook","nullthrows","promiseDone"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(function(){function t(e){e===void 0&&(e=!1),this.$2=new(o("SimpleHook")).SimpleHook,this.onmessage=null,this.onmessageerror=null,this.$3=e}var a=t.prototype;return a.setRemotePort=function(t){this.$1=t},a.addEventListener=function(t,n,r){if((t==="message"||t==="error")&&r==null||s(0,55320,t),t==="message")if(typeof n=="function")this.$2.add(n);else{var e=n.handleEvent.bind(n);this.$2.add(e),n.__handler=e}},a.removeEventListener=function(t,n,r){if(typeof n=="function")this.$2.remove(n);else{var e=n.__handler;this.$2.remove(e)}},a.postMessage=function(o,a){var t=this,i=function(){var e=r("nullthrows")(t.$1,"By now remote port must have value!");e.$2.call({data:o,ports:a})};this.$3?i():r("promiseDone")((e||(e=n("Promise"))).resolve(),i)},a.start=function(){},a.close=function(){},t})(),c=function(t,n){this.port1=new u(t),this.port2=new u(n),this.port1.setRemotePort(this.port2),this.port2.setRemotePort(this.port1)};l.VirtualMessagePort=u,l.VirtualMessageChannel=c}),98);
__d("WAWorkerGlobalScope",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){return typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:self})();i.workerGlobalScope=e}),66);
__d("WorkerMessagePortLogging",["MainPageUrl","QLogEvent","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=Math.random()<.1,s=20,u=100,c=50;function d(){return o("MainPageUrl").isWorkerLogEnabled()||o("MainPageUrl").mainPageUrl.searchParams.get("worker_log")===1}var m=0;function p(){return o("QLogEvent").event(r("qpl")._(41497718,"106"),m++)}function _(t,n,r){if(r===void 0&&(r=!1),!(n==null||!e)){var o=n.sendDelayHighPrecision,a=n.sendTimestamp,i=n.sendDateTime,l=n.receiveTimestamp,d=n.receiveDateTime,m=p();m.startFromTime();var _=m.range("SEND_DELAY");_.start(a),_.stop(l);var f=m.range("SEND_DELAY_LOW_PRECISION");f.start(i),f.stop(d);var g=Math.abs(a-i),h=Math.abs(l-d);if(m.annotate({string:{port_name:t},int:{send_delay:o,send_drift:g,receive_drift:h},bool:{send_delay_above_max:o!=null&&o>s,send_drift_above_max:g>u,receive_drift_above_max:h>u}}),r){var y=m.range("ROUND_TRIP");y.start(n.sendTimestamp),y.stop(n.receiveTimestamp);var C=n.receiveTimestamp-n.sendTimestamp;m.annotate({int:{round_trip:C},bool:{round_trip_above_max:C>c}})}m.stop()}}l.isWorkerLogEnabled=d,l.logMessageTiming=_}),98);
__d("WorkerMessagePort",["Deferred","FBLogger","MainPageUrl","Promise","PromiseAnnotate","SimpleHook","VirtualMessageChannel","WorkerMessagePortLogging","performanceAbsoluteNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return e}var d=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(o("SimpleHook").SimpleHook);function m(e,t){var n=e;n.__timing=t}function p(e){return e.__timing}var _=(function(){function e(e,t){var n=this;this.$1={},this.onUnhandledMessage=new d,this.onMessage=new d,this.onPostMessage=new d,this.onError=new d,this.$2=e,this.name=t,this.$2.addEventListener("message",function(e){return n.onMessageHandler(e.data)}),this.$2.addEventListener("error",function(e){return n.onError.call(e)}),this.onPostMessage.add(function(e){m(e,{receiveDateTime:-1,receiveTimestamp:-1,sendDateTime:Date.now(),sendDelayHighPrecision:0,sendDelayLowPrecision:0,sendTimestamp:(u||(u=r("performanceAbsoluteNow")))()})}),this.onMessage.add(function(e){var t=p(e);if(t!=null){var a=t.sendDateTime,i=t.sendTimestamp,l=(u||(u=r("performanceAbsoluteNow")))(),s=Date.now();t.receiveTimestamp=l,t.receiveDateTime=s,t.sendDelayHighPrecision=l-i,t.sendDelayLowPrecision=s-a,o("WorkerMessagePortLogging").logMessageTiming(n.name,t)}})}var t=e.prototype;return t.onMessageHandler=function(t){try{this.onMessage.call(t);var e=this.$1[t.type];e?e.call(t):this.onUnhandledMessage.call(t)}catch(e){this.onError.call(e)}},t.postMessage=function(t,n){this.onPostMessage.call(t),n?this.$2.postMessage(t,n):this.$2.postMessage(t)},t.addMessageListener=function(t,n){var e=this.$1[t];return e||(e=new d,this.$1[t]=e),e.add(n)},t.removeMessageListener=function(t,n){var e=this.$1[t];return!!e&&e.remove(n)},t.removeAllMessageListeners=function(t){var e=this.$1[t];e&&e.clear()},t.onMessageOnce=function(t,r){var e=this;return new(s||(s=n("Promise")))(function(n){var o=e.addMessageListener(t,function(a){r(a)&&(e.removeMessageListener(t,o),n(a))})})},t.close=function(){var e=this.$2;e.close==null||e.close(),e.terminate==null||e.terminate()},t.isWrappingVirtualMessagePort=function(){return this.$2 instanceof o("VirtualMessageChannel").VirtualMessagePort},e})();function f(e){return e}var g=(function(t){function a(a,i){var l;l=t.call(this,a,i)||this;var u=f(l),c=new(r("Deferred")),d=c.getPromise();u.addMessageListener("endpoint_started",function(e){c.resolve(e);var t=p(e);u.postMessage({endpoint:e.endpoint,startSendTimestamp:t==null?void 0:t.sendTimestamp,targetEndpoint:l.name,type:"endpoint_started_received"})});var m=u.onMessageOnce("endpoint_started_received",function(){return!0});return(e||(e=o("PromiseAnnotate"))).setDisplayName(d,"endpoint_started"),e.setDisplayName(m,"endpoint_started_received"),u.postMessage({endpoint:l.name,type:"endpoint_started"}),r("promiseDone")(d,function(e){var t=p(e);o("WorkerMessagePortLogging").logMessageTiming(l.name,t)}),r("promiseDone")(m,function(e){var t=p(e);t!=null&&o("WorkerMessagePortLogging").logMessageTiming(l.name,t,!0)}),l.fullyConnected=(s||(s=n("Promise"))).race([d,m]).then(function(){return l}),l}return babelHelpers.inheritsLoose(a,t),a})(_);l.getMessageTiming=p,l.WorkerMessagePort=_,l.CastWorkerMessagePort=f,l.WorkerSyncedMessagePort=g}),98);
__d("getMWLSRegion",["MessengerWebRegion"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("MessengerWebRegion").regionNullable;return e==null?"":e}l.default=e}),98);
__d("last",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=null;if(Array.isArray(e)||typeof e=="string")e.length&&(t={value:e[e.length-1]});else for(var n of e)t=t||{},t.value=n;return t?t.value:null}i.default=e}),66);/*FB_PKG_DELIM*/
__d("EBEnableUnifiedAttachment",[],(function(t,n,r,o,a,i){"use strict";var e=!1;function l(t){e=t}function s(){return e}i.setEbEnableUnifiedAttachment=l,i.getEbEnableUnifiedAttachment=s}),66);
__d("EBLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("wmi_eb",t)};l.EBLogger=e}),98);
__d("EBMinosCheckWasmFeatureSupport",["asyncToGeneratorRuntime","qex","wasm-feature-detect"],(function(t,n,r,o,a,i,l){"use strict";function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("wasm-feature-detect").bulkMemory(),t=yield o("wasm-feature-detect").bigInt(),n=yield o("wasm-feature-detect").referenceTypes();return e&&t&&n}),s.apply(this,arguments)}function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield e();if(!t)return!1;var n=r("qex")._("208")===!0;return n}),c.apply(this,arguments)}l.checkWasmFeatureSupport=e,l.checkWasFeatureSupportAndQE=u}),98);
__d("MWEBUseLocalStorage",["WALogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=t,i=n!=null?n:"true";if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var l;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Encrypted Backups key "," written to local storage"])),a),(l=(s||(s=r("WebStorage"))).getLocalStorage())==null||l.setItem(a,i)}}function c(e){var t=e;if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var n;(n=(s||(s=r("WebStorage"))).getLocalStorage())==null||n.removeItem(t)}}function d(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return(t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n)}return null}function m(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return((t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n))!=null}return!0}l.mwEBCreateLocalStorageEntry=u,l.mwEBDeleteLocalStorageEntry=c,l.mwEBGetLocalStorageEntryValue=d,l.mwEBGetIsLocalStorageEntryValuePresent=m}),98);
__d("EBReenrollmentTriggerHandler",["EBLogger","LSIntEnum","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("EBLogger").EBLogger().tags(["DefaultEBReenrollmentTriggerHandler"]),u=(function(){function t(){}var n=t.prototype;return n.handle=function(n){s.debug("Running default reenrollment trigger handler for reason: "+(e||(e=o("LSIntEnum"))).toNumber(n.deviceReenrollmentReason));for(var t of r("MWEncryptedBackupsLocalStorageEntryEnum").members())s.debug("Clearing local storage key: "+t),t!==r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE&&o("MWEBUseLocalStorage").mwEBDeleteLocalStorageEntry(t)},t})();l.DefaultEBReenrollmentTriggerHandler=u}),98);
__d("MWEBODSCategory",[],(function(t,n,r,o,a,i){"use strict";var e=7319;i.default=e}),66);
__d("MWEBODSEntityName.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({MW_EB_PIN_RESTORE_AUTH:"mw_eb_pin_restore_auth",MW_EB_RC_RESTORE_AUTH:"mw_eb_rc_restore_auth",MW_EB_AUTO_RESTORE_AUTH:"mw_eb_auto_restore_auth",MW_EB_OTC_AUTH:"mw_eb_otc_auth",MW_EB_ONBOARDING_AUTH:"mw_eb_onboarding_auth",MW_EBSM_HYDRATION:"mw_ebsm_hydration",MW_EBSM_IDB:"mw_eb_ebsm_idb",MW_EBSM_CORRUPTION:"mw_ebsm_corruption",MW_EBSM_CORRUPTION_RELOAD:"mw_ebsm_corruption_reload",MW_EBSM_RESTORE_PERSISTENCE_ERROR:"mw_ebsm_restore_persistence",MW_EBSM_IDB_TABLE_DELETION:"mw_ebsm_idb_table_deletion",MW_EBSM_WORKER_SUFFIX:"_worker",MW_EBSM_COUNTERS:"mw_ebsm_counters",MW_EBSM_FETCH_BACKUP_IDS:"mw_ebsm_fetch_backup_ids",MW_EB_SWITCH_CONSISTENCY:"mw_eb_switch_consistency",MAW_EB_UPLOAD_TRACKING:"maw_eb_upload_tracking",MAW_EB_UPLOAD_COUNTER:"maw_eb_upload_counter",MAW_EB_RESTORE_COUNTER:"maw_eb_restore_counter",EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST:"eb_symmetric_encryption_js_rust_shadow_test",MAW_EB_FRONTEND_QPL_IN_WORKER:"maw_eb_frontend_qpl_in_worker",MW_EB_RETROACTIVE_BACKUP:"mw_eb_retroactive_backup"}),l=e;i.default=l}),66);
__d("EBReenrollmentTriggerListener",["EBReenrollmentTriggerHandler","LSIntEnum","MWEBODSCategory","MWEBODSEntityName.enum","ODS","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){this.$1=new Map,this.$4=new(o("EBReenrollmentTriggerHandler")).DefaultEBReenrollmentTriggerHandler,this.$2=e,this.$5()}var n=t.prototype;return n.$5=function(){var t=this;return this.$3==null&&(this.$3=o("ReQL").fromTableAscending(this.$2.tables.encrypted_backups_reenrollment_trigger).take(1).subscribe(function(n,a){if(a.operation==="add"||a.operation==="put"){(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_COUNTERS,"reenrollment_trigger");var l=t.getDefaultHandler();if(a.value.deviceReenrollmentReason!=null){var u;l=(u=t.$1.get((s||(s=o("LSIntEnum"))).unwrapIntEnum(a.value.deviceReenrollmentReason)))!=null?u:l}l.handle(a.value),r("promiseDone")(t.$2.runInTransaction(function(e){return e.encrypted_backups_reenrollment_trigger.delete(a.value.pk)},"readwrite",void 0,void 0,i.id+":77"))}})),this.$3},n.attachHandler=function(t,n){this.$1.set(t,n)},n.getDefaultHandler=function(){return this.$4},t})(),c;function d(e){return c!=null||(c=new u(e)),c}function m(e){return c==null&&d(e),c}l.initEBReenrollmentTriggerListener=d,l.getEBReenrollmentTriggerListener_TESTING_ONLY=m}),98);
__d("EBUnifyLegacyMediaUpload",[],(function(t,n,r,o,a,i){"use strict";var e=!1;function l(t){e=t}function s(){return e}i.setEnableUnifyLegacyMediaUpload=l,i.getEnableUnifyLegacyMediaUpload=s}),66);
__d("EphemeralMediaViewMode",[],(function(t,n,r,o,a,i){var e=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});i.default=e}),66);
__d("LSDataTraceTag",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=4,d=5,m=6,p=7,_=20,f=21,g=22,h=23,y=24,C=25,b=26,v=27,S=28,R=29,L=30,E=31,k=32,I=33,T=34,D=35,x=36,$=37,P=38,N=39,M=40,w=41,A=42;i.none=e,i.sticker=l,i.image=s,i.animatedImage=u,i.video=c,i.audio=d,i.file=m,i.xma=p,i.messageTypeNone=_,i.messageTypeText=f,i.messageTypeFutureproof=g,i.messageTypeCiphertext=h,i.messageTypeUnavailable=y,i.messageTypeImage=C,i.messageTypeVideo=b,i.messageTypePtt=v,i.messageTypeAdmin=S,i.messageTypeRevoked=R,i.messageTypeGif=L,i.messageTypeSticker=E,i.messageTypeExpiredEphemeral=k,i.messageTypeEphemeralSettingAdmin=I,i.messageTypeEphemeralSyncResponse=T,i.messageTypeEphemeralScreenshotAction=D,i.messageTypeDeleteForMe=x,i.messageTypeEphemeralSettingChangeFromCurrentDevice=$,i.messageTypeAlertICDC=P,i.messageTypeGroupInvite=N,i.messageTypeXMA=M,i.messageTypeReaction=w,i.messageTypeSenderKeyDistribution=A}),66);
__d("LSMEBTaskCreationSource",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,MEM_RECEIVE_PROTOBUF_ONLY_FBN:16,MEM_SEND_PROTOBUF_ONLY_FBN:17,MEM_PEER_SYNC_PROTOBUF_ONLY_FBN:18,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,PROTOBUF_RESTORE:39,FTS_INDEX_EB_MESSAGES:40,INSTAMADILLO_DYI:41,MESSENGER_MESSAGE_LIST_PAGINATION:45,DELTA_GENERIC_MESSAGE_SYNC:55,MEDIA_GALLERY_RESTORE:57,EB_PROTOBUF_RESTORE_NO_OP:58,NEW_MEMBER_EXPORT:59,THREAD_POINT_QUERY:76,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37,EB_POINT_QUERY_RETRY_DECRYPTION_FAILURES:38,IGD_DYI:42,FTS_INDEX_EB_MESSAGES_WEB:43,BULK_QUERY_FOR_SEARCH_RESULT:44,MSGR_DYI:46,EB_RESTORE_ON_REGISTRATION:47,EB_RESTORE_ON_OFFLINE_QUEUE_COUNT_LIMIT:48,EB_POINT_QUERY_RESTORE_ON_ACK_DROP:49,EB_POINT_QUERY_RESTORE_ON_DECRYPTION_FAILURE:50,EB_POINT_QUERY_RESTORE_ON_UNAVAILABLE_DEVICE:51,EB_RANGE_QUERY_RESTORE_ON_THREAD_SESSION_ACTIVATE:52,EB_POINT_QUERY_PINNED_MESSAGES:53,EB_POINT_QUERY_RESTORE_PROTOBUF:54,EB_POINT_QUERY_IN_ACT_REACTIONS:56,EB_POINT_QUERY_BUMP_MESSAGES:60,EB_POINT_QUERY_IN_ACT_FOR_INCOMING_RETRY_RECEIPT:61,EB_POINT_QUERY_IN_ACT_FOR_REPORTING:62,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_STATUS_UPDATE:63,EB_POINT_QUERY_IN_ACT_FOR_REPL_TEST:64,EB_POINT_QUERY_IN_ACT_FOR_FACEBOOK_APP_NSE_NOTIFICATION_RENDERING:65,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_EXPORT_HANDLING:66,EB_POINT_QUERY_IN_ACT_FOR_TAM_ACT_PROXY:67,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_MESSAGE:68,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_AI_BOT_MESSAGE:69,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_PERSISTENCE:70,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_INDEXING:71,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_NEW_MEMBER_HYDRATION:72,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_ECHO_TO_PROTO_CONVERSION:73,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_HISTORICAL_FUTURE_PROOF:74,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_REALTIME_BLOCKED:75,EB_POINT_QUERY_TO_FETCH_SENDER_DEVICE_KEYS:77,RESONANCE_UTILS:80,MPS_RESTORE_REVERB_RESTORE:81,REPORTING:82,CLIENT_MESSAGE_TRUNCATION:83,CALLING_XMA:84,EB_ACT_ATTACHMENT_RESTORE:85,EB_MEB_ATTACHMENT_ACCESS_CONTROL_RESTORE:86,FORCE_CLIENT_MESSAGE_TRUNCATION:87,ACT_EDIT_MESSAGE_VALIDATION:88,ACT_REVOKE_MESSAGE_VALIDATION:89,REVERB_CLEANUP_HANDLER_SINGLE_MESSAGE_POINT_QUERY:90,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_BEFORE_QUERY:91,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_AFTER_QUERY:92,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_SURROUNDING_QUERY:93,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_LOCAL_BACKUP_RESTORE:94,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_ENCRYPTED_BACKUP_RESTORE:95,FILE_GALLERY_RESTORE:96});i.default=e}),66);
__d("LSThreadMediaGalleryGroup",[],(function(t,n,r,o,a,i){var e=Object.freeze({PHOTOS_AND_VIDEOS:0,FILES_ONLY:1,LINKS:2});i.default=e}),66);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function u(e){return e>0}function c(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(0);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(1);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(2);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(5);default:return(e||(e=o("LSIntEnum"))).ofNumber(4)}}function d(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NONE);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SENDING_TO_SERVER);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SERVER_RECEIVED);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").RETRIABLE_ERROR);default:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}l.ACK=s,l.isMsgAuthoritative=u,l.levelToMessagingSendStatusV2=c,l.levelToMessagingSendStatus=d}),98);
__d("MAWAdminAddParticipantMsg",["MAWLocalizationType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=1;function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS}}}function u(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS}}}function c(e,t,n,r){switch(e){case 1:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER};case 2:return{adminMsgContent:[t,n,r],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER}}return{adminMsgContent:[t,n,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER}}function d(e,t){switch(e){case 1:return{adminMsgContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU};case 2:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER}}return{adminMsgContent:[(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER}}function m(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER}}return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER}}function p(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r=t[0],a=t[1],i=o("WAJids").userIdFromJid(r),l=a!=null?o("WAJids").userIdFromJid(a):"";if(e==null)return t.includes(n)?d(t.length,r===n?l:i):m(t.length,i,l);if(e===n)return u(t.length,i,l);var p=o("WAJids").userIdFromJid(e);return t.includes(n)?s(t.length,p,r===n?l:i):c(t.length,p,i,l)}function _(t,n){return babelHelpers.extends({},p(t,n),{version:e})}l.createAddParticipantsAdminMessage=_}),98);
__d("WAAckLevel",[],(function(t,n,r,o,a,i){"use strict";var e={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};i.ACK=e}),66);
__d("MAWAdminMsgHelpers",["MAWCreateParticipantAdminMsg","MAWExternalId","MAWRemoveParticipantAdminMsg","WAAckLevel","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e="Facebook User",s=1;function u(t){return t==null||t===""?e:t}function c(t){return t!=null?o("WAJids").userIdFromJid(t):e}function d(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWCreateParticipantAdminMsg").createParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function m(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWRemoveParticipantAdminMsg").removeParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function p(e,t){return babelHelpers.extends({},_(e,t),{version:s})}function _(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n={adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserPromotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotPromoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotPromoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantPromotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:"participantPromotedParticipant"}}return n}function f(e,t,n,r){var a=_(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function g(e,t){return babelHelpers.extends({},h(e,t),{version:s})}function h(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n=e===r?{adminMsgContent:[],adminType:"currentUserSelfDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserDemotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotDemoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantDemotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:a===e?"participantSelfDemoted":"participantDemotedParticipant"}}return n}function y(e,t,n,r){var a=h(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function C(e,t,n,r){var a,i=[],l=t.subject.content;if(l!=null)return t.subject.user===o("WAGlobals").getMyUserJid()?(a="currentUserNamedGroup",i.push(l)):n==null?(a="unkonwnUserNamedGroup",i.push(l)):(a="participantNamedGroup",i.push(n,l)),{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:{adminMsgContent:i,adminType:a},serverTs:r,ts:r,type:"Admin"}}function b(e,t){var n=v(e,t);if(n!=null)return babelHelpers.extends({},n,{version:s})}function v(e,t){var n,r=[];if(e===o("WAGlobals").getMyUserJid())switch(t){case"all_member_add":n="currentUserSetAddModeAllMembers";break;case"admin_add":n="currentUserSetAddModeAdminOnly";break}else if(e!=null)switch(r.push(o("WAJids").userIdFromJid(e)),t){case"all_member_add":n="participantSetAddModeAllMembers";break;case"admin_add":n="participantSetAddModeAdminOnly";break}else switch(t){case"all_member_add":n="serverSetAddModeAllMembers";break;case"admin_add":n="serverSetAddModeAdminOnly";break}if(n!=null)return{adminMsgContent:r,adminType:n}}function S(e,t,n,r){var a=v(n,t);if(a!=null)return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}l.UNKNOWN_USER=e,l.maybeUnknownParticipantName=u,l.createAdminMsgContactId=c,l.createParticipantAddAdminMessage=d,l.createParticipantRemoveAdminMsg=m,l.createParticipantPromoteAdminMessage=p,l.createParticipantPromoteAdminMsg=f,l.createParticipantDemoteAdminMessage=g,l.createParticipantDemoteAdminMsg=y,l.createGroupNameChangeAdminMsg=C,l.createMemberAddModeChangeAdminMessage=b,l.createMemberAddModeChangeAdminMsg=S}),98);
__d("MAWCreateParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantAddedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantAddedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantAddedYouAndMoreThanOneUsers"}}}function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"currentUserAddedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserAddedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserAddedMoreThanTwoParticipant"}}}function u(e,t,n,r){switch(e){case 1:return{adminMsgContent:[t,n],adminType:"participantAddedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantAddedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantAddedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c)):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(d),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c))}l.createParticipantAdminMessage=c}),98);
__d("MAWRemoveParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantRemovedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantRemovedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantRemovedYouAndMoreThanOneUsers"}}}function s(e,t,n,r){switch(e){case 1:return r?{adminMsgContent:[],adminType:"currentUserLeftGroup"}:{adminMsgContent:[t],adminType:"currentUserRemovedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserRemovedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserRemovedMoreThanTwoParticipant"}}}function u(e,t,n,r,o){switch(e){case 1:return o?{adminMsgContent:[t],adminType:"participantLeftGroup"}:{adminMsgContent:[t,n],adminType:"participantRemovedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantRemovedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantRemovedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===o("WAGlobals").getMyUserJid()):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===t)}l.removeParticipantAdminMessage=c}),98);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return{contactIds:t,contents:[]};case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:{var n=t[0],r=t[1];return{contactIds:[n],contents:[r]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:{var a=t[0],i=t[1],l=t[2];return{contactIds:[a,i],contents:[l]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:{var s=t[0],u=t[1],c=t[2];return{contactIds:[s],contents:[u,c]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:{var d=t[0],m=t[1],p=t[2];return{contactIds:[d],contents:[m]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:{var _=t[0],f=t[1],g=t[2],h=t[3];return{contactIds:[_],contents:[f,g]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:default:return{contactIds:[],contents:t}}}l.deconstructContactIdsFromAdminContent=e}),98);
__d("MAWAdminMsgTypesGrouped",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e=o("MAWLocalizationType")).LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE],u=[e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN],c=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE],d=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS],m=[e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER],p=[e.LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS],_=[e.LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP],f=[e.LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME],g=[e.LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME,e.LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME],h=[e.LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE],y=[e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED],C=[e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED,e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT],b=[e.LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK],v=[e.LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK,e.LOCALIZATION_TYPE.RTC_XMA_FALLBACK],S=[e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE],R=[e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE],L=[e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET],E=[e.LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE],k=[e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL],I=[e.LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED],T=[e.LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_POST,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG,e.LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE],D=[e.LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP,e.LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_POST,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT],x=[e.LOCALIZATION_TYPE.EMPTY_SNIPPET];l.cutoverAdminMsgs=s,l.dualThreadCutoverAdminMsgs=u,l.deviceChanges=c,l.currentUserAddRemoveParticipant=d,l.otherUserAddRemoveParticipant=m,l.groupPermissionsChanged=p,l.participantLeftGroup=_,l.chatCustomizedByCurrentUser=f,l.chatCustomizedByOtherUser=g,l.pinnedMessageUpdate=h,l.limitSharingUpdate=y,l.twoUsersConnected=C,l.fallbackMsgFromCurrentUser=b,l.fallbackMsgFromOtherUser=v,l.currentUserBumpsMessage=S,l.otherUserBumpsMessage=R,l.ephemeralSettingChanges=L,l.icdcAlerts=E,l.callActionToNotifyAbout=k,l.callActionNotToNotifyAbout=I,l.otherNonAdminMsgToBeBumped=T,l.otherNonAdminMsgToBeMarkedAsUnread=D,l.otherNonAdminMsgToNotTriggerUpdate=x}),98);
__d("MAWAdminRemoveParticipantMsg",["MAWAdminMsgType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=1;function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU};case 2:return{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS}}}function u(e,t,n,r){switch(e){case 1:return r?{adminMsgContent:[],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LEFT_GROUP}:{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS}}}function c(e,t,n,r,a){switch(e){case 1:return a?{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LEFT_GROUP}:{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_ONE_USER};case 2:return{adminMsgContent:[t,n,r],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_TWO_USER}}return{adminMsgContent:[t,n,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER}}function d(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r=t[0],a=t[1],i=o("WAJids").userIdFromJid(r),l=a!=null?o("WAJids").userIdFromJid(a):"";if(e==null)return t.includes(n)?{adminMsgContent:[],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_REMOVED_YOU}:{adminMsgContent:[i],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_REMOVED_ONE_USER};if(e===n)return u(t.length,i,l,r===n);var d=o("WAJids").userIdFromJid(e);return t.includes(n)?s(t.length,d,r===n?l:i):c(t.length,d,i,l,r===e)}function m(t,n){return babelHelpers.extends({},d(t,n),{version:e})}l.createRemoveParticipantsAdminMessage=m}),98);
__d("MAWAdminWriteGroupNameChangeAdminMsgContent",["MAWAdminMsgType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r,a=[];return e===n?(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_NAMED_GROUP,a.push(t)):e==null?(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_NAMED_GROUP,a.push(t)):(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_NAMED_GROUP,a.push(o("WAJids").userIdFromJid(e),t)),{adminMsgContent:a,adminType:r,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWAudioUtils",["FBLogger","Promise","WAMaybeTranscodeOggOpusToWavForPlayback","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=r("gkx")("3053")?URL.createObjectURL(yield o("WAMaybeTranscodeOggOpusToWavForPlayback").maybeTranscodeOggOpusToWavForPlayback(t)):URL.createObjectURL(t);return new(e||(e=n("Promise")))(function(e,t){var n=new Audio;n.setAttribute("crossOrigin","anonymous"),n.addEventListener("loadedmetadata",function(n){var r=n.currentTarget;if(r instanceof HTMLAudioElement){var o=r.duration;e(Math.ceil(o))}else t("EventTarget returned for event should be HTMLAudioElement")}),n.src=a,n.onabort=function(){t(r("FBLogger")("messenger_web").mustfixThrow("Error loading audio from provided URL"))},n.onerror=function(){var e,o;t(r("FBLogger")("messenger_web").mustfixThrow("getAudioDurationInSeconds: audioElement error code: %s. message: %s",(e=n.error)==null?void 0:e.code,(o=n.error)==null?void 0:o.message))}})}),u.apply(this,arguments)}function c(e){return Array.from(new Uint8Array(e)).join(",")}l.getAudioDurationInSeconds=s,l.serializeWaveform=c}),98);
__d("MsgrWebGating",["MAWMpsGating","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("15418")||o("MAWMpsGating").isMpsMessageRendering()}l.isQuotedMessagesInLsEnabled=e}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a=e.author,i=e.msgId,l=o("WAJids").authorToUserId(a,t),s=(n=e.quote)==null||(n=n.content.msgContent)==null?void 0:n.content,u=(r=e.quote)==null?void 0:r.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:u!=null?u*1e3:void 0,replyMessageText:s,replySourceId:i,replyToUserId:l}}l.default=e}),98);
__d("MAWBridgeMsg",["FBLogger","LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","MsgrWebGating","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","WATimeUtils","getReplyContentForNoteReply","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;if(o("MsgrWebGating").isQuotedMessagesInLsEnabled()){if(e.isForwarded===!0&&e.type!==o("MAWMsgType").MSG_TYPE.STICKER)return{replyType:"FORWARD"};if(o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))return{replyToMsgId:e.msgId,replyToUserId:o("WAJids").authorToUserId(e.author,t),replyType:"HIGHLIGHTS_TAB_POST_REPLY",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null};if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var r=e.threadJid,a=o("WAJids").interpretAsUserJid(r),i;return a!=null&&(i=o("WAJids").userIdFromJid(a)),o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)?{mentionedUserId:i!=null?i:t,replyType:"FB_POST_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}:{mentionedUserId:i!=null?i:t,replyType:"FB_STORY_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}}if(!(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))){var l=(n=e.quote)==null?void 0:n.content;if(l!=null){var s=l.author,u=l.expirationTs,c=l.mediaId,d=l.msgContent,m=l.msgId,p=l.plaintextHash,_=l.sourceId,f=l.ts,g=l.type,h=l.xmaMessageType,y=o("WAJids").authorToUserId(s,t);if(g===o("WAMsgType").NOTE_REPLY)return{noteContent:d==null?void 0:d.content,replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(u*1e3):void 0,replyToMsgId:e.msgId,replyToUserId:y,replyType:"LIGHTWEIGHT_STATUS"};if(g===o("MAWMsgType").MSG_TYPE.XMA&&o("MAWXMAUtils").isXMAStoryReply(h)){if(_==null)return;var C=o("MAWXMAUtils").isXMAStoryProducerReply(h);return C?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:c!=null?c:void 0,storyMediaPlaintextHash:p,storyMsgType:c!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}:{replyType:"STORY",storyMediaPlaintextHash:p,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}}if(m!=null)return{isBumpMsg:e.type===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,replyToMsgId:m,replyType:"MESSAGE"}}}}}function c(e,t,n){var a,i,l,s=((a=e.quote)==null?void 0:a.content.type)===o("WAMsgType").NOTE_REPLY;if(s)return r("getReplyContentForNoteReply")(e,n);var u=(i=e.quote)==null?void 0:i.content;if(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var c,d=e.author,m=e.mediaId,p=e.msgId,_=o("WAJids").authorToUserId(d,n);if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var f=e.threadJid,g;f!=null&&(g=o("WAJids").interpretAsUserJid(f)),g!=null&&(_=o("WAJids").userIdFromJid(g))}return m!=null&&e.plaintextHash==null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content"),{isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(e.xmaMessageType),isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(e.xmaMessageType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(e.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(e.xmaMessageType),replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:m,replyPlaintextHash:(c=e.plaintextHash)!=null?c:void 0,replySenderIsMe:d===o("WAJids").AUTHOR_ME||_===n,replySourceId:p,replySourceTimestampMs:e.sortOrderMs,replyStatusType:m!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:_}}if(!(u==null||(u==null?void 0:u.msgId)==null&&(u==null?void 0:u.sourceId)==null)){var h=u||{},y=h.author,C=h.mediaId,b=h.msgId,v=h.plaintextHash,S=h.sourceId,R=h.specialTextSize,L=h.ts,E=h.type,k=h.xmaMessageType,I=L!=null?L*1e3:void 0,T=u.type===o("MAWMsgType").MSG_TYPE.TEXT||o("MAWXMAUtils").isXMAExternalLinkShare(k)?(l=u.msgContent)==null?void 0:l.content:void 0,D=o("WAJids").authorToUserId(y,n),x=u.type===o("MAWMsgType").MSG_TYPE.TEXT?u.msgContent.mentionedJids:void 0,$=y===o("WAJids").AUTHOR_ME||D===n,P=t||{},N=P.replyMediaId,M=P.replyMediaPreviewHeight,w=P.replyMediaPreviewWidth,A=P.replyMediaUrlFallback,F=P.replyPlaintextHash,O=P.replyXMAId;if(o("MAWXMAUtils").isXMAStoryReply(k)){var B;return{isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(k),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(k),isStoryReply:!0,replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:C,replyPlaintextHash:(B=F!=null?o("WAHashUtils").stringToPlaintextHash(F):v)!=null?B:void 0,replySenderIsMe:$,replySourceId:S,replySourceTimestampMs:I,replyStatusType:C!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:D}}var W=o("MAWImageUtils").boundHeightWidth(M,w,96*.8),q=W.height,U=W.width;return{isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(k),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(k),isStoryReply:!1,replyMediaId:N,replyMediaPreviewHeight:E===o("MAWMsgType").MSG_TYPE.STICKER?q:M,replyMediaPreviewWidth:E===o("MAWMsgType").MSG_TYPE.STICKER?U:w,replyMediaUrlFallback:A,replyMentionedJids:x,replyMessageText:T,replyPlaintextHash:F!=null?o("WAHashUtils").stringToPlaintextHash(F):void 0,replySenderIsMe:$,replySourceId:b,replySourceTimestampMs:I,replyStatusType:R===1||R===2||R===3?o("MAWMsgType").MSG_TYPE.STICKER:E,replyToUserId:D,replyXMAId:O}}}function d(e){var t=e.specialTextSize;switch(t){case 1:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").SMALL);case 2:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").MEDIUM);case 3:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").LARGE);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").NONE)}}function m(e){if(r("justknobx")._("3424")&&e==="media_restore")return"EncryptedBackupsMedia";switch(e){case"eb_restore":return"EncryptedBackups";case"media_restore":return"EncryptedBackupsMedia";case"whatsapp":return"WhatsApp";default:return}}function p(t,n,a){var i,l,s,d,p=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),_=((i=t.isForwarded)!=null?i:!1)&&t.type!==o("MAWMsgType").MSG_TYPE.STICKER,f=(l=t.forwardingScore)!=null?l:0,g=o("MAWDbMsg").getCanonicalTsFromMsg(t),h=c(t,n,p),y=u(t,p),C=o("MAWXMAUtils").isXMAStoryShare(t.xmaMessageType),b=o("MAWXMAUtils").isXMAStoryReaction(t.xmaMessageType),v=o("MAWXMAUtils").isXMAExternalLinkShare(t.xmaMessageType),S=o("MAWXMAUtils").isIGXMAStoryMention(t.xmaMessageType),R=o("MAWXMAUtils").isFBXMAStoryMention(t.xmaMessageType),L=o("MAWXMAUtils").isXMAStoryHighlightShare(t.xmaMessageType),E=o("MAWXMAUtils").isXMAPostPrivateReply(t.xmaMessageType),k=o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(t.xmaMessageType),I=t.messageExpirationTs!=null&&t.messageExpirationTs<=o("WATimeUtils").unixTime(),T=o("MAWDbMsg").getSortOrderWithFallback(t),D=t.externalId,x=m(t.source);(n==null?void 0:n.replyPlaintextHash)!==(h==null?void 0:h.replyPlaintextHash)&&r("FBLogger")("messenger_web").warn("replyPlaintextHash mismatch. From replyMeta is null: %s, from replyContent is null: %s. Message type: %s",(n==null?void 0:n.replyPlaintextHash)==null,(h==null?void 0:h.replyPlaintextHash)==null,t.type);var $=(n==null?void 0:n.replyPlaintextHash)!=null?o("WAHashUtils").stringToPlaintextHash(n==null?void 0:n.replyPlaintextHash):(s=h==null?void 0:h.replyPlaintextHash)!=null?s:void 0;switch(t.type){case o("MAWMsgType").MSG_TYPE.TEXT:{var P,N=o("MAWVault").isVaulted(t.msgContent.content)?t.msgContent.content:o("MAWVault").vault(t.msgContent.content);return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:t.msgContent.commands,content:N,editCount:t.editCount,ephemeralDurationInSec:(P=t.ephemeralSetting)==null?void 0:P.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,mentionedJids:t.msgContent.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,specialTextSize:t.specialTextSize,transportKey:x,ts:g,type_:t.type})}case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,ephemeralDurationInSec:(d=t.ephemeralSetting)==null?void 0:d.ephemeralExpirationInSec,externalId:D,forwardingScore:f,groupId:t.groupId,groupIndex:t.groupIndex,groupSize:t.groupSize,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,unsupportedType:t.msgContent.subtype});case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:[t.msgContent.authorName],adminType:t.msgContent.adminType,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:{var M,w,A;return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:(M=t.msgContent)==null||(M=M.adminMsgContent)==null?void 0:M.map(function(e){return e==="Facebook User"?"0":e}),adminType:(w=t.msgContent)==null?void 0:w.adminType,adminVersion:(A=t.msgContent)==null?void 0:A.version,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type}}case o("MAWMsgType").MSG_TYPE.REVOKED:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,originalTs:t.originalTs,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.XMA:{var F,O,B,W,q,U=(F=t.msgContent)==null?void 0:F.content,V=U!=null?o("MAWVault").isVaulted(U)?(O=t.msgContent)==null?void 0:O.content:o("MAWVault").vault(U):void 0;v&&V==null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"])));var H=V;return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:(B=t.msgContent)==null?void 0:B.commands,content:H,ephemeralDurationInSec:(W=t.ephemeralSetting)==null?void 0:W.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isCollapsed:t.isCollapsed,isExpiredMsg:I,isExpiredXmaMsg:t.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(t.xmaMessageType),isFBStoryMention:R,isForwarded:_,isIGStoryMention:S,isMsgHighlightsTabFriendUpdatesReply:k,isPostPrivateReply:E,isStoryHighlightShare:L,isStoryReaction:b,isStoryShare:C,mentionedJids:(q=t.msgContent)==null?void 0:q.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,xmaMessageType:t.xmaMessageType})}default:return r("WAAssertUnreachable")(t.type)}}l.getSpecialTextSize=d,l.convertDbMsgSourceToLSTransportKey=m,l.createBridgeMsg=p}),98);
__d("MAWBridgeSafeActionsWorkerAndUI",["ExecutionEnvironment","FBLogger","MAWBridge","Promise","ifRequireable"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,i){return(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWBridge").getBridge().sendAndReceive("backend",t,a,i==null?void 0:i.isLoggingDisabled):new(e||(e=n("Promise")))(function(e,n){return r("ifRequireable")("MAWBridgeSendAndReceive",function(n){var r=n.sendAndReceive;return e(r("backend",t,a,i))},function(){return n("MAWBridgeSendAndReceive not available in UI ifRequired")})})}function c(e,t,n){return(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWBridge").getBridge().fireAndForget("backend",e,t,n):r("ifRequireable")("MAWBridgeFireAndForget",function(r){var o=r.fireAndForget;return o("backend",e,t,n)},function(){throw r("FBLogger")("messenger_web").mustfixThrow("MAWBridgeFireAndForget not available in UI ifRequired")})}l.sendAndReceiveBackendWorkerAndUIShared=u,l.fireAndForgetBackendWorkerAndUIShared=c}),98);
__d("MAWBridgeTraceEvent",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ReceivedReceipt","ReceivedSent","FlowEndForFailure","FlowEndForSuccess"]),l=e;i.default=l}),66);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{return(e||(e=o("I64"))).of_string(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).mustfix("Cannot convert string to i64: %s",t)}}l.stringToI64Opt=s}),98);
__d("MAWConvertExtendedContentTypeToLSXmaContentType",["LSXmaContentType","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return null;switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return r("LSXmaContentType").FB_FEED_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return r("LSXmaContentType").FB_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return r("LSXmaContentType").FB_STORY_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return r("LSXmaContentType").FB_STORY_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return r("LSXmaContentType").FB_FEED_VIDEO_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return r("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return r("LSXmaContentType").FB_PRODUCER_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return r("LSXmaContentType").FB_EVENT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:return r("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return r("LSXmaContentType").MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return r("LSXmaContentType").FB_SHORT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return r("LSXmaContentType").MSG_LOCATION_SHARING;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return r("LSXmaContentType").MSG_LOCATION_SHARING_V2;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return r("LSXmaContentType").FB_POST_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY:return r("LSXmaContentType").FB_FEED_POST_REACTION_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return r("LSXmaContentType").MSG_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return r("LSXmaContentType").MSG_AI_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return r("LSXmaContentType").MSG_MEMORIES_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return r("LSXmaContentType").MSG_EXTERNAL_LINK_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return r("LSXmaContentType").RTC_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return r("LSXmaContentType").RTC_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return r("LSXmaContentType").RTC_MISSED_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return r("LSXmaContentType").RTC_MISSED_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return r("LSXmaContentType").FB_PROFILE_DIRECTORY_ITEM;default:return null}}l.convertExtendedContentTypeToLSXmaContentType=e}),98);
__d("MAWBridgeXMAUtils",["I64","LSIntEnum","MAWBridgeUIEventDataValidation","MAWConvertExtendedContentTypeToLSXmaContentType","MAWMpsGating","MAWXMAUtils","MNLSXMALayoutType","MNXMAPreviewImageDecorationType","MWPBumpEntityKey","MessagingAttachmentType","Promise","Random","ReQL","WAArmadilloXMA.pb","WAJids","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t,n,r,o,a){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i,l,s){var c=r.ctas,d=r.defaultCTA,m=p(r.targetId,r.targetType),f=(u||(u=o("I64"))).of_int32(o("Random").uint32());if(d!=null){var C=g(d,f,i,a,l,m,r.targetType);yield y(t,C,f,s.defaultCta)}var b=o("MAWXMAUtils").isFBXMAPostMention(r.targetType)&&r.author===o("WAJids").AUTHOR_ME,v=[];return c!=null&&!b&&(v=yield(e||(e=n("Promise"))).all(c.map(function(e,n){var r=_(f,n),o=h(e,r,i,a,l,m),u=n===0?s.attachmentCta1:n===1?s.attachmentCta2:n===2?s.attachmentCta3:void 0;return y(t,o,r,u)}))),{attachmentCta1Id:v.length>0?v[0]:void 0,attachmentCta2Id:v.length>1?v[1]:void 0,attachmentCta3Id:v.length>2?v[2]:void 0,defaultCtaId:d==null?void 0:f}}),d.apply(this,arguments)}function m(e){var t="xma_web_url";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:t="xma_rtc_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:t="xma_rtc_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:t="xma_rtc_missed_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:t="xma_rtc_missed_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:t="igd_web_post_share";break}return t}function p(e,t){if(!o("MAWXMAUtils").isFBXMAPostMention(t))return e!=null?o("MAWBridgeUIEventDataValidation").stringToI64Opt(e):void 0}function _(e,t){return(u||(u=o("I64"))).add(e,u.of_int32(t+1))}function f(e,t,n,r,a,i,l){var s;l===void 0&&(l="xma_web_url");var c=e.actionUrl,d=e.nativeUrl;return{actionContentBlob:void 0,actionUrl:c!=null?c:d,attachmentFbid:a,attachmentIndex:(u||(u=o("I64"))).zero,ctaId:t,enableExtensions:!1,extensionHeightType:void 0,messageId:n,nativeUrl:d!=null?d:c,platformToken:void 0,targetId:i!=null?i:void 0,threadKey:r,title:(s=e.title)!=null?s:"Tap to view status update",type_:l!=null?l:"xma_web_url",urlWebviewType:void 0}}function g(e,t,n,r,o,a,i){var l=m(i);return f(e,t,n,r,o,a,l)}function h(e,t,n,r,o,a){var i;switch(e.ctaType){case"contact_sharing_profile":i="contact_sharing_profile";break;case"contact_sharing_message":i="contact_sharing_message";break}return f(e,t,n,r,o,a,i)}function y(e,t,n,r){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){return r!=null?yield e.attachment_ctas.upsert([r.ctaId],t):yield e.attachment_ctas.add(t),n}),C.apply(this,arguments)}function b(e,t,n){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=null,a={attachmentCta1:void 0,attachmentCta2:void 0,attachmentCta3:void 0,defaultCta:void 0};return r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(t,n)),r!=null&&(a.defaultCta=yield S(e,r.defaultCtaId),a.attachmentCta1=yield S(e,r.attachmentCta1Id),a.attachmentCta2=yield S(e,r.attachmentCta2Id),a.attachmentCta3=yield S(e,r.attachmentCta3Id)),[r,a]}),v.apply(this,arguments)}function S(t,r){var a;return r==null?(e||(e=n("Promise"))).resolve(void 0):(a=o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachment_ctas).getKeyRange(r)))!=null?a:void 0}function R(e,t,n,a,i,l,c,d,m){var p,_,f,g,h,y,C,b,v=(u||(u=o("I64"))).zero,S=L(e),R=o("MAWConvertExtendedContentTypeToLSXmaContentType").convertExtendedContentTypeToLSXmaContentType(e.targetType),D=R?(u||(u=o("I64"))).of_int32(R):void 0,x=(p=e==null||(_=e.defaultCTA)==null?void 0:_.actionUrl)!=null?p:e==null||(f=e.defaultCTA)==null?void 0:f.nativeUrl;e.defaultPreviewMediaId!=null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_xma_handler","xma_preview_media_has_plaintext_hash."+m+"."+e.targetType+"."+(e.defaultPreviewMediaPlaintextHash!=null?"true":"false"));var $=o("MAWMpsGating").isMpsMessageRendering();return{accessibilitySummaryText:void 0,actionUrl:x!=null?x:void 0,attachmentCta1Id:i,attachmentCta2Id:l,attachmentCta3Id:c,attachmentFbid:n,attachmentIndex:u.zero,attachmentLoggingType:void 0,attachmentType:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:u.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:k(e.ctas,1),cta1Type:E(e.ctas,1),cta2Title:k(e.ctas,2),cta2Type:E(e.ctas,2),cta3Title:k(e.ctas,3),cta3Type:E(e.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:d,defaultCtaTitle:(g=e.defaultCTA)==null?void 0:g.title,defaultCtaType:S.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:e.filesize!=null?(u||(u=o("I64"))).of_int32(e.filesize):void 0,gatingTitle:e.overlayTitle,gatingType:e.overlayIconGlyph!=null?String(e.overlayIconGlyph):void 0,hasMedia:e.hasMedia!=null?e.hasMedia:!1,hasXma:!0,hasXmaFavicon:$?e.faviconPlaintextHash!=null:e.faviconMediaId!=null,hasXmaHeaderImage:$?e.headerMediaPlaintextHash!=null:e.headerMediaId!=null,hasXmaPreview:$?e.defaultPreviewMediaPlaintextHash!=null:e.defaultPreviewMediaId!=null,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:e.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:e.maxSubtitleNumOfLines!=null?(u||(u=o("I64"))).of_int32(e.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:e.maxTitleNumOfLines!=null?(u||(u=o("I64"))).of_int32(e.maxTitleNumOfLines):void 0,messageId:a,miniPreview:void 0,offlineAttachmentId:(h=e.offlineAttachmentId)!=null?h:n,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:S.height,previewHeightLarge:e.previewHeightLarge!=null?(u||(u=o("I64"))).of_int32(e.previewHeightLarge):void 0,previewImageDecorationType:T(e.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:S.width,previewWidthLarge:e.previewWidthLarge!=null?(u||(u=o("I64"))).of_int32(e.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:e.subtitleText,targetId:void 0,threadKey:t,timestampMs:v,titleText:e.titleText,transportKey:"WhatsApp",viewerSeenTimestampMs:void 0,waveformData:void 0,xmaContentType:D,xmaDataclass:e.xmaDataclass,xmaFaviconFbid:$?e.faviconPlaintextHash:(y=e.faviconMediaId)==null?void 0:y.toString(),xmaHeaderImageFbid:$?e.headerMediaPlaintextHash:(C=e.headerMediaId)==null?void 0:C.toString(),xmaLayoutType:e.xmaLayoutType!=null?I(e.xmaLayoutType):void 0,xmaPreviewFbid:$?e.defaultPreviewMediaPlaintextHash:(b=e.defaultPreviewMediaId)==null?void 0:b.toString(),xmasTemplateType:e.xmaLayoutType!=null?I(e.xmaLayoutType):void 0}}function L(e){var t;switch(e.targetType){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:t={height:(u||(u=o("I64"))).of_int32(108),width:(u||(u=o("I64"))).of_int32(72),xmaContentType:"xma_montage_share"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:t={xmaContentType:"xma_rtc_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:t={xmaContentType:"xma_rtc_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:t={xmaContentType:"xma_rtc_missed_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:t={xmaContentType:"xma_rtc_missed_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:t={xmaContentType:"xma_rtc_missed_group_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:t={xmaContentType:"xma_rtc_missed_group_video"};break;default:t={height:e.previewHeight!=null?(u||(u=o("I64"))).of_int32(e.previewHeight):void 0,width:e.previewWidth!=null?(u||(u=o("I64"))).of_int32(e.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return t}function E(e,t){if(e!=null){var n=e[t-1];if(n!=null){var r=n.buttonType,a=n.ctaType;switch(a){case"contact_sharing_profile":return"contact_sharing_profile";case"contact_sharing_message":return"contact_sharing_message";default:return r===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}}}}function k(e,t){if(e!=null){var n=e[t-1];if(n!=null)return n.title}}function I(e){return e===0||e!==3?(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").SINGLE):(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").PORTRAIT)}function T(e){switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").COLLAGE);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").REEL);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").DEFAULT)}}l.addAttachmentCtas=c,l.maybeBridgeToLSTargetId=p,l.getCtaIdFromDefaultCtaId=_,l.composeDefaultAttachmentCta=g,l.composeAttachmentCta=h,l.getExistingAttachmentAndAttachmentCtas=b,l.composeAttachmentXMA=R}),98);
__d("MAWBridgeXMA",["MAWBridgeXMAUtils","MAWDbMedia","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){if(e!=null)switch(e){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function u(t,n,r){var a,i,l,u,c=n.author,d=n.contentRef,m=n.ctas,p=n.defaultCTA,_=n.defaultPreviewMediaId,f=n.defaultPreviewMediaPlaintextHash,g=n.faviconMediaId,h=n.faviconPlaintextHash,y=n.headerMediaId,C=n.headerMediaPlaintextHash,b=n.headerTitle,v=n.maxSubtitleNumOfLines,S=n.maxTitleNumOfLines,R=n.msgId,L=n.offlineAttachmentId,E=n.overlayIconGlyph,k=n.overlayTitle,I=n.subtitleText,T=n.targetId,D=n.targetType,x=n.targetUsername,$=n.threadJid,P=n.titleText,N=n.xmaDataclass,M=n.xmaId,w=n.xmaLayoutType;t!=null&&t.mediaType!==o("MAWDbMedia").MEDIA_TYPE.IMAGE&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""])),t.mediaType),T!=null&&o("MAWBridgeXMAUtils").maybeBridgeToLSTargetId(T,D);var A=r.hasMedia,F=r.hasXmaFaviconMedia,O=r.hasXmaHeaderMedia;return{author:c,contentRef:d,ctas:m==null?void 0:m.filter(function(e){return e.ctaType!=null}),defaultCTA:p,defaultPreviewMediaId:_,defaultPreviewMediaPlaintextHash:f,duration:null,faviconMediaId:g,faviconPlaintextHash:h,filesize:t==null?void 0:t.size,hasMedia:A,hasXmaFaviconMedia:F,hasXmaHeaderMedia:O,headerMediaId:y,headerMediaPlaintextHash:C,headerTitle:b,maxSubtitleNumOfLines:v,maxTitleNumOfLines:S,mediaType:t==null?void 0:t.mediaType,msgId:R,offlineAttachmentId:L,overlayIconGlyph:E,overlayTitle:k,playableUrlMimeType:s(t==null?void 0:t.mediaType),previewHeight:t==null||(a=t.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,previewHeightLarge:t==null||(i=t.validatedImageInfo)==null?void 0:i.height,previewUrlMimeType:s(t==null?void 0:t.mediaType),previewWidth:t==null||(l=t.validatedImageInfo)==null?void 0:l.jpegThumbnailWidth,previewWidthLarge:t==null||(u=t.validatedImageInfo)==null?void 0:u.width,subtitleText:I,targetId:T,targetType:D,targetUsername:x,threadJid:$,titleText:P,ts:t==null?void 0:t.ts,xmaDataclass:N,xmaId:M,xmaLayoutType:w}}function c(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}function d(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}l.mediaTypeToMimeType=s,l.createBridgeXMA=u,l.createBridgeXMAShareExpired=c,l.createBridgeXMAShareTombstoned=d}),98);
__d("MAWDbEditMsgHistory",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(t){return(e||(e=o("I64"))).of_float(t)}function c(t){return(e||(e=o("I64"))).to_float(t)}l.unsafeCoerceToEditMsgHistoryId=s,l.convertToEditMsgHistoryId64=u,l.convertToEditMsgHistoryId=c}),98);
__d("MAWDbPoll",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e,t){var n=(e+t).split("");return Math.abs(n.reduce(function(e,t){var n=t.charCodeAt(0),r=(e<<5)-e+n;return r&=r,r},0))}i.convertStringToOptionHash=e,i.convertOptionHashToString=l,i.generateStableIdFromOptionHash=s}),66);
__d("MAWDbXMA",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(e){return e}function c(t){return(e||(e=o("I64"))).to_float(t)}l.convertNumbersToXMAIds=s,l.convertNumberToXMAId=u,l.convertXMAId64ToXMAId=c}),98);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={dyi:r("justknobx")._("467"),frontloaded:20,initial:20,paginated:r("justknobx")._("3177"),point:1,search:r("justknobx")._("2477")};function c(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"paginated"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function d(t){var n=t.querySource,a=t.runningInWorker,i=t.taskSource,l=t.traceId;l!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:i,traceId:l,triggerType:"initial"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function m(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"dyi"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function p(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"frontloaded"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function _(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"point"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function f(t){var n=t.querySource,a=t.runningInWorker,i=t.traceId;i!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:r("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:i,triggerType:"search"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function g(t,n){t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLSuccessThroughBridge(r("qpl")._(521476165,"2432"),void 0,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endSuccess(r("qpl")._(521476165,"2432"),{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function h(t,n,a,i){a===void 0&&(a="restore_failure"),t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLFailThroughBridge(r("qpl")._(521476165,"2432"),a,i,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endFailure(r("qpl")._(521476165,"2432"),a,{annotations:i,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function y(e){L("protobuf",e)}function C(e){var t=e.querySource,n=e.runningInWorker,a=e.taskSource,i=e.traceId,l=e.triggerType;if(n!=null&&n){var s;o("MAWQplProxy").startQplUserFlow(r("qpl")._(521476165,"2432"),{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(s=u[l])!=null?s:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},{providedInstanceKey:o("WAHashStringToNumber").hashStringToNumber(i),providedTimeoutInMs:r("justknobx")._("2950")})}else{var c;r("QPLUserFlow").start(r("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(c=u[l])!=null?c:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},instanceKey:o("WAHashStringToNumber").hashStringToNumber(i),timeoutInMs:r("justknobx")._("2950")})}}function b(e){var t=e.pointName,n=e.traceId;r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function v(e){var t=e.annotations,n=e.pointName,a=e.traceId;r("QPLUserFlow").addAnnotations(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)}),r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),n,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function S(e){var t=e.annotations,n=e.pointName,a=e.traceId;a!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),n,{annotations:t,instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function R(e){var t=e.pointName,n=e.traceId;o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function L(t,n){var a=n?(s||(s=o("LSIntEnum"))).unwrapIntEnum(n):null;(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+t+"."+E(a))}function E(e){var t;return(t=e==null?void 0:e.toString())!=null?t:"unknown"}l.markEBRestorePaginated=c,l.markEBRestoreInitial=d,l.markEBRestoreDYI=m,l.markEBRestoreFrontloaded=p,l.markEBRestorePoint=_,l.markEBRestoreSearch=f,l.markEBRestoreSuccess=g,l.markEBRestoreFail=h,l.markEBRestoreProtobuf=y,l.addQPLRestorePoint=b,l.addQPLRestorePointWithAnnotations=v,l.addQPLRestorePointWithAnnotationsWorker=S,l.addQPLRestorePointWorker=R}),98);
__d("MWEBODSEntityKey.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({START:"start",SUCCESS:"success",FAIL:"fail",INCORRECT_PIN_CODE:"incorrect_pin_code",INCORRECT_RECOVERY_CODE:"incorrect_recovery_code",TIMEOUT:"timeout",CANCEL:"cancel"}),l=e;i.default=l}),66);
__d("MWEBODSUtils",["CurrentMessengerUser","MWEBODSCategory","ODS"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i=o("CurrentMessengerUser").getAppID(),l=i!=null?i.toString():"unknown",s=t+"."+l;(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),s,n,a!=null?a:1),e.bumpEntityKey(r("MWEBODSCategory"),t,n,a!=null?a:1)}l.markODSForEB=s}),98);
__d("WACommsConnectionState",["WAGenericStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,!1)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isConnected=function(){return this.get()},n.waitForConnection=function(){return this.waitForValue(!0)},t})(o("WAGenericStateManager").WAGenericStateManager),s=new e;l.WACommsConnectionState=s}),98);
__d("WAGetHashFromProtocolMsgId",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.externalId+"_"+e.author+"_"+e.chat}i.getHashFromProtocolMsgId=e}),66);
__d("MAWEBUploadTrackingUtils",["MAWAckLevel","MAWEBSwitch","MAWExternalId","MAWMsgType","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBODSUtils","ODS","QPLUserFlow","QuickPerformanceLogger","WACommsConnectionState","WAExceededStorageQuota","WAGetHashFromProtocolMsgId","WAGlobals","WAHashStringToNumber","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={ERROR_FETCHING_DB_MESSAGE:"error_fetching_db_message",FAILED_TO_ACK_MESSAGE:"failed_to_ack_message",FAILED_TO_CONSTRUCT_ECHO_MESSAGE:"failed_to_construct_echo_message",MESSAGE_UPLOAD_TIMEOUT:"message_upload_timeout",RUNTIME_ERROR:"runtime_error"};function c(e,t,n,a,i,l,u,c,d,m){if(l===void 0&&(l=!1),u===void 0&&(u=!1),d===void 0&&(d="unknown"),m===void 0&&(m=0),!!r("MAWEBSwitch").isEnabled()){r("QPLUserFlow").start(r("qpl")._(521481602,"829"),{annotations:{bool:{eb_switch:r("MAWEBSwitch").isEnabled(),eb_upload_queue:!0,fromUploadQueue:l,is_retroactive_upload:u,middleware_init:!1},int:{attachmentsSize:c!=null?c:0,instanceKey:i,retryCount:m},string:{comms_status:o("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected",externalId:e,msgType:n,payloadType:d,threadId:t,triggerType:a,userJid:o("WAGlobals").getMyUserJid()}},instanceKey:i,timeoutInMs:r("justknobx")._("1405")}),p(i,"upload_tracking_started"),(s||(s=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,r("MWEBODSEntityKey.enum").START),o("MWEBODSUtils").markODSForEB(r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+(n!=null?n:"unknown"));var _=o("MAWMsgType").isMAWSupportedMediaType(n!=null?n:"Text")?"media":"non-media";o("MWEBODSUtils").markODSForEB(r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+_)}}function d(e){return e==null?{string:{comms_status_on_failure:o("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected"}}:babelHelpers.extends({},e,{string:babelHelpers.extends({},e.string,{comms_status_on_failure:o("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected"})})}function m(e,t,n,r){switch(e){case"success":g(t,n,r);break;case"fail":f(t,n,r);break;case"point":p(t,n,r);break}}function p(e,t,n){n&&r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),n,{instanceKey:e}),r("QPLUserFlow").addPoint(r("qpl")._(521481602,"829"),t,{instanceKey:e})}function _(e,t){var n;r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),d(t),{instanceKey:e}),r("QPLUserFlow").endCancel(r("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:t==null||(n=t.string)==null?void 0:n.jid}},instanceKey:e}),(s||(s=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,r("MWEBODSEntityKey.enum").CANCEL)}function f(e,t,n){var a;r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),d(n),{instanceKey:e}),r("QPLUserFlow").endFailure(r("qpl")._(521481602,"829"),t,{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:n==null||(a=n.string)==null?void 0:a.jid}},instanceKey:e}),(s||(s=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,r("MWEBODSEntityKey.enum").FAIL)}function g(e,t,n){p(e,t),h(e,n)}function h(e,t){t&&r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),t,{instanceKey:e}),r("QPLUserFlow").endSuccess(r("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},instanceKey:e}),(s||(s=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,r("MWEBODSEntityKey.enum").SUCCESS)}function y(e,t,n){var a;p(e,t),n&&r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),n,{instanceKey:e}),r("QPLUserFlow").endTimeout(r("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:n==null||(a=n.string)==null?void 0:a.jid}},instanceKey:e}),(s||(s=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,r("MWEBODSEntityKey.enum").TIMEOUT)}function C(t,n,o){var a=r("qpl")._(521481602,"829");p(t,n),o&&(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(a,o,{instanceKey:t}),(e||(e=r("QuickPerformanceLogger"))).markerEnd(a,52,t,e.currentTimestamp())}function b(){return o("WAHashStringToNumber").hashStringToNumber(o("MAWExternalId").generateExternalId())}function v(e,t){return t===void 0&&(t=0),o("WAHashStringToNumber").hashStringToNumber(o("WAGetHashFromProtocolMsgId").getHashFromProtocolMsgId(e)+"_"+o("WAGlobals").getMyDeviceJid()+"_"+t)}function S(e){return r("MAWEBSwitch").isEnabled()&&o("MAWMsgType").isEBSupportedMsgType(e.type)&&e.ack>=o("MAWAckLevel").ACK.sent&&e.serverTs!=null&&!(e.ephemeralSetting!=null&&e.ephemeralSetting.ephemeralExpirationInSec>0)}function R(e){return{addAnnotations:function(n){L(e,n)},addPoint:function(n,r){p(e,n,r)},endCancel:function(n,r){_(e,r)},endFail:function(n,r){f(e,n,r)},endSuccess:function(n){h(e,n)},getQPLAttrs:function(){return{instanceKey:e}},isActive:function(){return!0},start:function(){}}}function L(e,t){r("QPLUserFlow").addAnnotations(r("qpl")._(521481602,"829"),t,{instanceKey:e})}function E(e,t){return e.get(t)}function k(e,t,n,r,o){var a=E(t,n);if(a!=null)switch(e){case"success":g(a,r,o);break;case"fail":f(a,r,o);break;case"point":p(a,r,o);break}}l.EBUploadTrackingWorkerFailurePoints=u,l.startUploadTracking=c,l.handleBridgeEbUploadTrackingQPL=m,l.addPointWorkerOnly=p,l.endCancelWorkerOnly=_,l.endFailWorkerOnly=f,l.endSuccessWorkerOnly=g,l.endTimeoutWorkerOnly=y,l.endRetryWorkerOnly=C,l.genInstanceKeyOnly=b,l.genInstanceKeyForUploadQueue=v,l.isUploadSupported=S,l.makeEBWorkerQplFlowFromInstanceKey=R,l.addAnnotationsForEBWorkerQplFlow=L,l.getUploadTrackingInstanceKey=E,l.addUploadTrackingByType=k}),98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={NONE:0,LQ_4K:1,HQ_4K:2},u={NONE:0,GIPHY:1,TENOR:2},c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4},d={UNKNOWN:0,OPUS:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={};m.name="WAMediaTransport",m.internalSpec={integral:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,g],ancillary:[2,e.TYPES.MESSAGE,p]},p.name="WAMediaTransport$Ancillary",p.internalSpec={fileLength:[1,e.TYPES.UINT64],mimetype:[2,e.TYPES.STRING],thumbnail:[3,e.TYPES.MESSAGE,_],objectId:[4,e.TYPES.STRING]},_.name="WAMediaTransport$Ancillary$Thumbnail",_.internalSpec={jpegThumbnail:[1,e.TYPES.BYTES],downloadableThumbnail:[2,e.TYPES.MESSAGE,f],thumbnailWidth:[3,e.TYPES.UINT32],thumbnailHeight:[4,e.TYPES.UINT32]},f.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail",f.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],thumbnailScansSidecar:[7,e.TYPES.BYTES],thumbnailScanLengths:[8,e.FLAGS.REPEATED|e.TYPES.UINT32]},g.name="WAMediaTransport$Integral",g.internalSpec={fileSha256:[1,e.TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64]},h.name="ImageTransport",h.internalSpec={integral:[1,e.TYPES.MESSAGE,C],ancillary:[2,e.TYPES.MESSAGE,y]},y.name="ImageTransport$Ancillary",y.internalSpec={height:[1,e.TYPES.UINT32],width:[2,e.TYPES.UINT32],scansSidecar:[3,e.TYPES.BYTES],scanLengths:[4,e.FLAGS.REPEATED|e.TYPES.UINT32],midQualityFileSha256:[5,e.TYPES.BYTES],hdType:[6,e.TYPES.ENUM,s],memoriesConceptScores:[7,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.FLOAT],memoriesConceptIds:[8,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.UINT32]},C.name="ImageTransport$Integral",C.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},b.name="VideoTransport",b.internalSpec={integral:[1,e.TYPES.MESSAGE,S],ancillary:[2,e.TYPES.MESSAGE,v]},v.name="VideoTransport$Ancillary",v.internalSpec={seconds:[1,e.TYPES.UINT32],caption:[2,e.TYPES.MESSAGE,o("WACommon.pb").MessageTextSpec],gifPlayback:[3,e.TYPES.BOOL],height:[4,e.TYPES.UINT32],width:[5,e.TYPES.UINT32],sidecar:[6,e.TYPES.BYTES],gifAttribution:[7,e.TYPES.ENUM,u],accessibilityLabel:[8,e.TYPES.STRING],isHd:[9,e.TYPES.BOOL]},S.name="VideoTransport$Integral",S.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},R.name="AudioTransport",R.internalSpec={integral:[1,e.TYPES.MESSAGE,I],ancillary:[2,e.TYPES.MESSAGE,L]},L.name="AudioTransport$Ancillary",L.internalSpec={seconds:[1,e.TYPES.UINT32],avatarAudio:[2,e.TYPES.MESSAGE,E],waveformData:[3,e.TYPES.STRING],waveform:[4,e.TYPES.BYTES]},E.name="AudioTransport$Ancillary$AvatarAudio",E.internalSpec={poseId:[1,e.TYPES.UINT32],avatarAnimations:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,k]},k.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations",k.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],animationsType:[7,e.TYPES.ENUM,c]},I.name="AudioTransport$Integral",I.internalSpec={transport:[1,e.TYPES.MESSAGE,m],audioFormat:[2,e.TYPES.ENUM,d]},T.name="DocumentTransport",T.internalSpec={integral:[1,e.TYPES.MESSAGE,x],ancillary:[2,e.TYPES.MESSAGE,D]},D.name="DocumentTransport$Ancillary",D.internalSpec={pageCount:[1,e.TYPES.UINT32]},x.name="DocumentTransport$Integral",x.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},$.name="StickerTransport",$.internalSpec={integral:[1,e.TYPES.MESSAGE,N],ancillary:[2,e.TYPES.MESSAGE,P]},P.name="StickerTransport$Ancillary",P.internalSpec={pageCount:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],width:[3,e.TYPES.UINT32],firstFrameLength:[4,e.TYPES.UINT32],firstFrameSidecar:[5,e.TYPES.BYTES],mustacheText:[6,e.TYPES.STRING],isThirdParty:[7,e.TYPES.BOOL],receiverFetchId:[8,e.TYPES.STRING],accessibilityLabel:[9,e.TYPES.STRING]},N.name="StickerTransport$Integral",N.internalSpec={transport:[1,e.TYPES.MESSAGE,m],isAnimated:[2,e.TYPES.BOOL],receiverFetchId:[3,e.TYPES.STRING]},M.name="ContactTransport",M.internalSpec={integral:[1,e.TYPES.MESSAGE,A],ancillary:[2,e.TYPES.MESSAGE,w]},w.name="ContactTransport$Ancillary",w.internalSpec={displayName:[1,e.TYPES.STRING]},A.name="ContactTransport$Integral",A.internalSpec={vcard:[1,e.TYPES.STRING],downloadableVcard:[2,e.TYPES.MESSAGE,m],__oneofs__:{contact:["vcard","downloadableVcard"]}},l.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=s,l.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=u,l.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c,l.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=d,l.WAMediaTransportSpec=m,l.WAMediaTransport$AncillarySpec=p,l.WAMediaTransport$Ancillary$ThumbnailSpec=_,l.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=f,l.WAMediaTransport$IntegralSpec=g,l.ImageTransportSpec=h,l.ImageTransport$AncillarySpec=y,l.ImageTransport$IntegralSpec=C,l.VideoTransportSpec=b,l.VideoTransport$AncillarySpec=v,l.VideoTransport$IntegralSpec=S,l.AudioTransportSpec=R,l.AudioTransport$AncillarySpec=L,l.AudioTransport$Ancillary$AvatarAudioSpec=E,l.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=k,l.AudioTransport$IntegralSpec=I,l.DocumentTransportSpec=T,l.DocumentTransport$AncillarySpec=D,l.DocumentTransport$IntegralSpec=x,l.StickerTransportSpec=$,l.StickerTransport$AncillarySpec=P,l.StickerTransport$IntegralSpec=N,l.ContactTransportSpec=M,l.ContactTransport$AncillarySpec=w,l.ContactTransport$IntegralSpec=A}),98);
__d("WAMediaHdType",[],(function(t,n,r,o,a,i,l){"use strict";var e=0,s=1,u=2,c={HD_TYPE_NONE:e,HD_TYPE_LQ_4K:s,HD_TYPE_HQ_4K:u};l.HD_TYPE_NONE=e,l.HD_TYPE_LQ_4K=s,l.HD_TYPE_HQ_4K=u,l.HD_TYPE=c}),98);
__d("MAWEncodeMediaTransportProtocol",["MAWDbMedia","WAMediaHdType","WAMediaTransport.pb","encodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e="image/jpeg",s="image/webp",u="video/mp4",c="audio/wav",d="audio/ogg",m="image/gif",p="application/octet-stream";function _(e){switch(e){case o("WAMediaHdType").HD_TYPE_NONE:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.NONE;case o("WAMediaHdType").HD_TYPE_LQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.LQ_4K;case o("WAMediaHdType").HD_TYPE_HQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.HQ_4K;default:return}}function f(t,n,r){var a,i,l,s,u,c,d,m,p={ancillary:{hdType:_((a=r==null?void 0:r.hdType)!=null?a:(i=t.validatedImageInfo)==null?void 0:i.hdType),height:(l=t.validatedImageInfo)==null?void 0:l.height,scanLengths:((s=n.progressiveJpegDetails)==null?void 0:s.scanLengths)||[],scansSidecar:(u=n.progressiveJpegDetails)==null?void 0:u.sidecar,width:(c=t.validatedImageInfo)==null?void 0:c.width},integral:{transport:{ancillary:{fileLength:t.size,mimetype:e,objectId:n.objectId,thumbnail:{downloadableThumbnail:n.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:(d=t.validatedImageInfo)==null?void 0:d.jpegThumbnailHeight,thumbnailWidth:(m=t.validatedImageInfo)==null?void 0:m.jpegThumbnailWidth}},integral:{directPath:n.directPath,fileEncSha256:n.fileEncSha256,fileSha256:n.fileSha256,mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,p).readBuffer()}function g(e,t,n){var r=f(e,t,n);return{payload:{content:{imageMessage:{caption:{mentionedJid:[]},image:{payload:r,version:1}}}}}}function h(e,t){var n,r,a,i,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,height:(n=e.validatedImageInfo)==null?void 0:n.height,width:(r=e.validatedImageInfo)==null?void 0:r.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:s,objectId:t.objectId,thumbnail:{thumbnailHeight:(a=e.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,thumbnailWidth:(i=e.validatedImageInfo)==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,l).readBuffer()}function y(e,t){var n=h(e,t);return{payload:{content:{stickerMessage:{sticker:{payload:n,version:1}}}}}}function C(e,t){var n,r=e.mediaType===o("MAWDbMedia").MEDIA_TYPE.GIF,a=e.isVideoGif===!0,i=r?e.validatedImageInfo:e.validatedVideoInfo,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,gifPlayback:r||a,height:i==null?void 0:i.height,seconds:r||(n=e.validatedVideoInfo)==null?void 0:n.duration,sidecar:t.sidecar,width:i==null?void 0:i.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:r?m:u,objectId:t.objectId,thumbnail:r?{thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}:{downloadableThumbnail:t.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,l).readBuffer()}function b(e,t){var n=C(e,t);return{payload:{content:{videoMessage:{caption:{mentionedJid:[]},video:{payload:n,version:1}}}}}}var v=new ArrayBuffer(0);function S(e,t){var n,a,i={ancillary:{seconds:(n=e.validatedAudioInfo)==null?void 0:n.duration,waveform:(a=e.validatedAudioInfo)==null?void 0:a.waveform},integral:{audioFormat:r("gkx")("3053")?o("WAMediaTransport.pb").AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT.OPUS:void 0,transport:{ancillary:{fileLength:e.size,mimetype:r("gkx")("3053")?d:c,objectId:t.objectId,thumbnail:{jpegThumbnail:v}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,i).readBuffer()}function R(e,t){var n=S(e,t);return{payload:{content:{audioMessage:{audio:{payload:n,version:1},ptt:!0}}}}}function L(e,t){var n={ancillary:{},integral:{transport:{ancillary:{fileLength:e.size,mimetype:p,objectId:t.objectId,thumbnail:{jpegThumbnail:new ArrayBuffer(1),thumbnailHeight:1,thumbnailWidth:1}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,n).readBuffer()}function E(e,t){var n,r=L(e,t);return{payload:{content:{documentMessage:{document:{payload:r,version:1},fileName:(n=e.validatedDocumentFileInfo)==null?void 0:n.filename}}}}}l.IMAGE_MIME_TYPE=e,l.STICKER_MIME_TYPE=s,l.VIDEO_MIME_TYPE=u,l.AUDIO_WAV_MIME_TYPE=c,l.AUDIO_OGG_MIME_TYPE=d,l.GIF_MIME_TYPE=m,l.FILE_MIME_TYPE=p,l.encodeMediaHdType=_,l.encodeValidatedMediaToImageTransport=f,l.encodeValidatedImageMessage=g,l.encodeValidatedMediaToStickerTransport=h,l.encodeValidatedStickerMessage=y,l.encodeValidatedMediaToVideoTransport=C,l.encodeValidatedVideoMessage=b,l.emptyAudioFileArrayBuffer=v,l.encodeValidatedMediaToAudioTransport=S,l.encodeValidatedAudioMessage=R,l.encodeValidatedMediaToDocumentTransport=L,l.encodeValidatedFileMessage=E}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={ES_OPEN:1,ES_CLOSE:2},c={UNKNOWN:0,NUDE:1,NOT_NUDE:2},d={TAKEDOWN:0,RESTORE:1},m={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23},p={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2},_={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2},f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2},g={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={};h.name="Armadillo",h.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,C],metadata:[2,e.TYPES.MESSAGE,y]},y.name="Armadillo$Metadata",y.internalSpec={},C.name="Armadillo$Payload",C.internalSpec={content:[1,e.TYPES.MESSAGE,B],applicationData:[2,e.TYPES.MESSAGE,L],signal:[3,e.TYPES.MESSAGE,v],subProtocol:[4,e.TYPES.MESSAGE,b],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},b.name="Armadillo$SubProtocolPayload",b.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},v.name="Armadillo$Signal",v.internalSpec={encryptedBackupsSecrets:[1,e.TYPES.MESSAGE,S],__oneofs__:{signal:["encryptedBackupsSecrets"]}},S.name="Armadillo$Signal$EncryptedBackupsSecrets",S.internalSpec={backupId:[1,e.TYPES.UINT64],serverDataId:[2,e.TYPES.UINT64],epoch:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,R],tempOcmfClientState:[4,e.TYPES.BYTES],mailboxRootKey:[5,e.TYPES.BYTES],obliviousValidationToken:[6,e.TYPES.BYTES]},R.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch",R.internalSpec={id:[1,e.TYPES.UINT64],anonId:[2,e.TYPES.BYTES],rootKey:[3,e.TYPES.BYTES],status:[4,e.TYPES.ENUM,u]},L.name="Armadillo$ApplicationData",L.internalSpec={metadataSync:[1,e.TYPES.MESSAGE,O],aiBotResponse:[2,e.TYPES.MESSAGE,k],messageHistoryDocumentMessage:[3,e.TYPES.MESSAGE,E],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}},E.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage",E.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},k.name="Armadillo$ApplicationData$AIBotResponseMessage",k.internalSpec={summonToken:[1,e.TYPES.STRING],messageText:[2,e.TYPES.STRING],serializedExtras:[3,e.TYPES.STRING]},I.name="Armadillo$ApplicationData$MetadataSyncAction",I.internalSpec={actionTimestamp:[1,e.TYPES.INT64],chatAction:[101,e.TYPES.MESSAGE,P],messageAction:[102,e.TYPES.MESSAGE,x],spectraAction:[103,e.TYPES.MESSAGE,D],attachmentInterventionAction:[104,e.TYPES.MESSAGE,T],__oneofs__:{actionType:["chatAction","messageAction","spectraAction","attachmentInterventionAction"]}},T.name="Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionAction",T.internalSpec={messageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],interventionType:[2,e.TYPES.ENUM,c]},D.name="Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraAction",D.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionType:[2,e.TYPES.ENUM,d],takedownActionId:[3,e.TYPES.INT64],config:[4,e.TYPES.STRING]},x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction",x.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],messageDelete:[101,e.TYPES.MESSAGE,$],__oneofs__:{action:["messageDelete"]}},$.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete",$.internalSpec={},P.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction",P.internalSpec={chatId:[1,e.TYPES.STRING],chatArchive:[101,e.TYPES.MESSAGE,w],chatDelete:[102,e.TYPES.MESSAGE,M],chatRead:[103,e.TYPES.MESSAGE,N],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}},N.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead",N.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],read:[2,e.TYPES.BOOL]},M.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete",M.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F]},w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive",w.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],archived:[2,e.TYPES.BOOL]},A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage",A.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],timestamp:[2,e.TYPES.INT64]},F.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange",F.internalSpec={lastMessageTimestamp:[1,e.TYPES.INT64],lastSystemMessageTimestamp:[2,e.TYPES.INT64],messages:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,A]},O.name="Armadillo$ApplicationData$MetadataSyncNotification",O.internalSpec={actions:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,I]},B.name="Armadillo$Content",B.internalSpec={commonSticker:[1,e.TYPES.MESSAGE,Q],screenshotAction:[3,e.TYPES.MESSAGE,G],extendedContentMessage:[4,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,e.TYPES.MESSAGE,K],ravenActionNotifMessage:[6,e.TYPES.MESSAGE,j],extendedMessageContentWithSear:[7,e.TYPES.MESSAGE,z],imageGalleryMessage:[8,e.TYPES.MESSAGE,H],paymentsTransactionMessage:[10,e.TYPES.MESSAGE,W],bumpExistingMessage:[11,e.TYPES.MESSAGE,V],noteReplyMessage:[13,e.TYPES.MESSAGE,U],ravenMessageMsgr:[14,e.TYPES.MESSAGE,K],networkVerificationMessage:[15,e.TYPES.MESSAGE,q],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}},W.name="Armadillo$Content$PaymentsTransactionMessage",W.internalSpec={transactionId:[1,e.TYPES.UINT64],amount:[2,e.TYPES.STRING],currency:[3,e.TYPES.STRING],paymentStatus:[4,e.TYPES.ENUM,m],extendedContentMessage:[5,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec]},q.name="Armadillo$Content$NetworkVerificationMessage",q.internalSpec={codeText:[1,e.TYPES.STRING]},U.name="Armadillo$Content$NoteReplyMessage",U.internalSpec={noteId:[1,e.TYPES.STRING],noteText:[2,e.TYPES.MESSAGE,s.MessageTextSpec],noteTimestampMs:[3,e.TYPES.INT64],textContent:[4,e.TYPES.MESSAGE,s.MessageTextSpec],stickerContent:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],videoContent:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}},V.name="Armadillo$Content$BumpExistingMessage",V.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},H.name="Armadillo$Content$ImageGalleryMessage",H.internalSpec={images:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s.SubProtocolSpec]},G.name="Armadillo$Content$ScreenshotAction",G.internalSpec={screenshotType:[1,e.TYPES.ENUM,p]},z.name="Armadillo$Content$ExtendedContentMessageWithSear",z.internalSpec={searId:[1,e.TYPES.STRING],payload:[2,e.TYPES.BYTES],nativeUrl:[3,e.TYPES.STRING],searAssociatedMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],searSentWithMessageId:[5,e.TYPES.STRING]},j.name="Armadillo$Content$RavenActionNotifMessage",j.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionTimestamp:[2,e.TYPES.INT64],actionType:[3,e.TYPES.ENUM,_]},K.name="Armadillo$Content$RavenMessage",K.internalSpec={ephemeralType:[1,e.TYPES.ENUM,f],imageMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],videoMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}},Q.name="Armadillo$Content$CommonSticker",Q.internalSpec={stickerType:[1,e.TYPES.ENUM,g]},l.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=u,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_ATTACHMENT_INTERVENTION_ACTION_INTERVENTION_TYPE=c,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_SPECTRA_ACTION_SPECTRA_ACTION_TYPE=d,l.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=m,l.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=p,l.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=_,l.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f,l.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=g,l.ArmadilloSpec=h,l.Armadillo$MetadataSpec=y,l.Armadillo$PayloadSpec=C,l.Armadillo$SubProtocolPayloadSpec=b,l.Armadillo$SignalSpec=v,l.Armadillo$Signal$EncryptedBackupsSecretsSpec=S,l.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=R,l.Armadillo$ApplicationDataSpec=L,l.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=E,l.Armadillo$ApplicationData$AIBotResponseMessageSpec=k,l.Armadillo$ApplicationData$MetadataSyncActionSpec=I,l.Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionActionSpec=T,l.Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraActionSpec=D,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=x,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=$,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=P,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=N,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=M,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=w,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=A,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=F,l.Armadillo$ApplicationData$MetadataSyncNotificationSpec=O,l.Armadillo$ContentSpec=B,l.Armadillo$Content$PaymentsTransactionMessageSpec=W,l.Armadillo$Content$NetworkVerificationMessageSpec=q,l.Armadillo$Content$NoteReplyMessageSpec=U,l.Armadillo$Content$BumpExistingMessageSpec=V,l.Armadillo$Content$ImageGalleryMessageSpec=H,l.Armadillo$Content$ScreenshotActionSpec=G,l.Armadillo$Content$ExtendedContentMessageWithSearSpec=z,l.Armadillo$Content$RavenActionNotifMessageSpec=j,l.Armadillo$Content$RavenMessageSpec=K,l.Armadillo$Content$CommonStickerSpec=Q}),98);
__d("MAWEphemeralUtils",["MAWLocalizationType","MAWUserJidWrapper","WAArmadilloApplication.pb","WAJids","err"],(function(t,n,r,o,a,i,l){"use strict";var e=60,s=60*e,u=24*s;function c(t,n,r,a){var i,l=[],c=n===u,d=t===o("MAWUserJidWrapper").getMyUserJid();if(a)i=o("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET;else if(t==null)n===0?i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:n<e?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,l.push(n.toString())):n<s?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,l.push((n/e).toString())):n<u||c?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,l.push((n/s).toString())):(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,l.push((n/u).toString()));else{var m=o("WAJids").extractUserId(t).toString();n===0?d?i=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF:(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,l.push(m)):n<e?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,l.push(m)),l.push(n.toString())):n<s?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,l.push(m)),l.push((n/e).toString())):n<u||c?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,l.push(m)),l.push((n/s).toString())):(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,l.push(m)),l.push((n/u).toString()))}return{adminMsgContent:l,adminType:i,version:1}}function d(e,t,n){var a,i=[],l=o("WAJids").extractUserId(t).toString();switch(e){case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE:n?a=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT:(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,i.push(l));break;case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING:n?a=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN:(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,i.push(l));break;default:throw r("err")("Received unexpected screenshot action type")}return{ephemeralScreenshotActionContent:i,ephemeralScreenshotActionType:a}}l.getEphemeralSettingChangeData=c,l.getEphemeralScreenshotActionData=d}),98);
__d("MAWGetUserDeviceChangeAdminType",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case"add":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case"remove":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case"update":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}l.getUserDeviceAdminType=e}),98);
__d("MAWJidUtils",["FBLogger","I64","LSIntEnum","MAWDbMsg","MAWJids","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){if(o("WAJids").isAuthorSystem(e)||t==null||n==null){r("FBLogger")("messenger_web").warn("Failed to create protocolMsgId with externalId %s for a msg to edit",n);return}return{author:e,chat:t,externalId:n}}function c(e){var t;return u(e.author,e.threadJid,(t=e.externalId)!=null?t:e.editExternalId)}function d(e){return o("WAJids").isAuthorMe(e)?o("WAGlobals").getMyUserJid():e}function m(t,n){var r=(e||(e=o("I64"))).to_string(t),a=(s||(s=o("LSIntEnum"))).unwrapIntEnum(n);switch(a){case 15:return o("MAWJids").jidUtils.toUserJid(r);case 16:return o("WAJids").toGroupJid(r);default:return null}}function p(e){return g(e.threadJid,e.externalId)}function _(e){return f(e.threadJid,e.externalId)}function f(e,t){var n=o("MAWDbMsg").toMsgId(g(e,t));if(n==null)throw r("FBLogger")("messenger_e2ee_web").mustfixThrow("formatProtocolMsgIdFromExternalId: Failed to create protocolMsgId with externalId %s for a msg",t);return n}function g(e,t){return e+"."+t}l.maybeToProtocolMsgId=u,l.toProtocolMsgId=c,l.getAuthorJid=d,l.LSJidtoChatJid=m,l.toProtocolMsgIdStringForMAWStorage=p,l.formatProtocolMsgIdFromMsg=_,l.formatProtocolMsgIdFromExternalId=f}),98);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:3449")&&n("cr:3449").clearLocalStorageBigValues()}l.onQuotaExceeded=e}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){o("WALogger").LOG([e])}function u(e){o("WALogger").ERROR([e])}function c(){return o("LocalStorageWrapper").getStorage(s)}function d(){return o("LocalStorageWrapper").isLocalStorageAvailable(s)}function m(e,t,n){return o("LocalStorageWrapper").setItemGuarded(e,t,n,u,o("MWLocalStorageErrorHandler").onQuotaExceeded)}function p(t,n){t==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]))):t.removeItem(n)}l.getStorage=c,l.isLocalStorageAvailable=d,l.setItemGuarded=m,l.removeItemGuarded=p}),98);
__d("MAWMediaGalleryEBTaggingUtils",["LSThreadMediaGalleryGroup","MAWMpsGating","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("13725")}function s(e){return u(e)!=null}function u(e){return e===r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS?r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS:e===r("LSThreadMediaGalleryGroup").FILES_ONLY&&o("MAWMpsGating").isFileGalleryEBTaggingEnabled()?r("LSThreadMediaGalleryGroup").FILES_ONLY:void 0}l.isMediaGalleryEBTaggingRestoreEnabled=e,l.isMediaGalleryGroupSupportedForTaggedRestore=s,l.toMediaGalleryGroupForTaggedRestore=u}),98);
__d("MAWMsg",["$InternalEnum","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","MsgrWebGating","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t,n,r,a,i){return e===o("MAWMsgType").MSG_TYPE.TEXT?t?(u||(u=o("LSIntEnum"))).ofNumber(8192):(u||(u=o("LSIntEnum"))).ofNumber(1):e===o("MAWMsgType").MSG_TYPE.IMAGE||e===o("MAWMsgType").MSG_TYPE.VIDEO||e===o("MAWMsgType").MSG_TYPE.RAVEN?(u||(u=o("LSIntEnum"))).ofNumber(2):e===o("MAWMsgType").MSG_TYPE.PTT?(u||(u=o("LSIntEnum"))).ofNumber(4):e===o("MAWMsgType").MSG_TYPE.FUTUREPROOF?m(a):e===o("MAWMsgType").MSG_TYPE.CIPHERTEXT?(u||(u=o("LSIntEnum"))).ofNumber(65536):e===o("MAWMsgType").MSG_TYPE.UNAVAILABLE?(u||(u=o("LSIntEnum"))).ofNumber(262144):e===o("MAWMsgType").MSG_TYPE.GIF?(u||(u=o("LSIntEnum"))).ofNumber(16384):e===o("MAWMsgType").MSG_TYPE.STICKER?(u||(u=o("LSIntEnum"))).ofNumber(4096):e===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE?(u||(u=o("LSIntEnum"))).ofNumber(64):e===o("MAWMsgType").MSG_TYPE.XMA?n!=null&&n?(u||(u=o("LSIntEnum"))).ofNumber(256):i===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(536870912):(u||(u=o("LSIntEnum"))).ofNumber(1024):e===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE?r?(u||(u=o("LSIntEnum"))).ofNumber(1):(u||(u=o("LSIntEnum"))).ofNumber(33554432):e===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(134217728):(u||(u=o("LSIntEnum"))).ofNumber(1)}function m(e){switch(e){case"liveLocationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4294967296);case"locationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(u||(u=o("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(u||(u=o("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(u||(u=o("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(u||(u=o("LSIntEnum"))).ofNumber(1073741824);case"messengerMemory":return(u||(u=o("LSIntEnum"))).ofNumber(8589934592);case"rtcMessage":return(u||(u=o("LSIntEnum"))).ofNumber(17179869184);default:return(u||(u=o("LSIntEnum"))).ofNumber(131072)}}function p(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16384))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(64))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4096))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function _(e,t){var n=e.replyAttachmentType;if(n==null)return!1;var a=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t);return a&&e.replyAttachmentId==null&&(!o("MsgrWebGating").isQuotedMessagesInLsEnabled()||e.replyAttachmentPlaintextHash==null)?!1:(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").AUDIO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO))}function f(e){return(c||(c=o("I64"))).equal(e.displayedContentTypes,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function g(e){return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),e.displayedContentTypes)}function h(e){var t=e.displayedContentTypes;return!!(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(32))}function y(e){return(c||(c=o("I64"))).lt(e.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(2))}function C(e){var t=e.displayedContentTypes;return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1024),t)||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),t)}function b(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(65536))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(131072))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(524288))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4294967296))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1048576))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2097152))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4194304))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2147483648))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8388608))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16777216))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1073741824))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8589934592))?!0:(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(262144))}var v=(s=n("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),S=s({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),R=s({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2}),L=s({IMAGE:0,VIDEO:1});l.text=(e=o("MAWMsgType")).MSG_TYPE.TEXT,l.image=e.MSG_TYPE.IMAGE,l.video=e.MSG_TYPE.VIDEO,l.ptt=e.MSG_TYPE.PTT,l.unsent=e.MSG_TYPE.REVOKED,l.gif=e.MSG_TYPE.GIF,l.bumpExistingMessage=e.MSG_TYPE.BUMP_EXISTING_MESSAGE,l.getDisplayedContentTypes=d,l.isMediaMsg=p,l.isMediaReplyAttachmentType=_,l.isReceiverFetchMsg=f,l.isReceiverFetchXMAMsg=g,l.isAdminMsg=h,l.isOptimistic=y,l.isXMAMsg=C,l.isPlaceholder=b,l.MAWRavenActionNotifType=v,l.MAWRavenMsgEphemeralMediaState=S,l.MAWRavenMsgEphemeralType=R,l.MAWRavenMsgMediaType=L}),98);
__d("MWXMAV2IsDataclassLiveLocationXMA",["MSGDataclassTypes.flow","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s(e)!=null}function s(e){if(e!=null){var t=e.content;if(!(t==null||(t==null?void 0:t.__typename)!=="XMSGXmaSingleContent")){var n=t.custom_template_data;if(!(n==null||(n==null?void 0:n.__typename)!=="XMSGXmaLocationTemplateData")){var r=n.location_metadata;if(!(r==null||(r==null?void 0:r.__typename)!=="XMSGXmaLiveLocationMetadata"))return r}}}}var u=1e3;function c(e,t){var n,a=r("justknobx")._("4207"),i=Math.floor(Date.now()/u)-a;return t!=null&&t<i&&((n=s(e))==null?void 0:n.session_state)===o("MSGDataclassTypes.flow").XmsgXmaLiveLocationSessionState.Started}l.isDataclassLiveLocationXMA=e,l.getLiveLocationMetadata=s,l.isExpiredLiveLocationStarted=c}),98);
__d("MAWParseCollapsibleIdFromXMADataClass",["FBLogger","MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)throw r("FBLogger")("messenger_web").mustfixThrow("xmaDataclass is missing or invalid");var t=o("MWXMAV2IsDataclassLiveLocationXMA").getLiveLocationMetadata(e);if(t!=null)return parseInt(t.session_id,10);if((e==null?void 0:e.layout_config)==null||typeof(e==null?void 0:e.layout_config.collapsible_id)!="number")throw r("FBLogger")("messenger_web").mustfixThrow("Layout config or collapsible_id is missing or invalid");return e.layout_config.collapsible_id}l.parseCollapsibleIdFromXMADataClass=e}),98);
__d("MWXMAV2XmaDataClass",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null)try{return JSON.parse(e)}catch(e){r("FBLogger")("messenger_web_sharing").mustfix("Error parsing xma dataclass")}}l.parseXmaDataClass=e}),98);
__d("MAWParseXMAUnsupportedMessageType",["MWXMAV2IsDataclassLiveLocationXMA","MWXMAV2XmaDataClass","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(n===void 0&&(n=!1),e==null)return null;if(n)return"paymentsTransactionMessage";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(o("MWXMAV2XmaDataClass").parseXmaDataClass(t))?"liveLocationMessage":"locationMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return"contactShareMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return"storyMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return"postMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return"messengerMemory";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return"rtcMessage";default:return null}}l.getXMAUnsupportedMessageType=e}),98);
__d("WAArmadilloBackupCommon.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="Subprotocol",e.internalSpec={payload:[1,o("WAProtoConst").TYPES.BYTES],version:[2,o("WAProtoConst").TYPES.INT32]},l.SubprotocolSpec=e}),98);
__d("WAArmadilloBackupMessage.pb",["WAArmadilloBackupCommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.name="BackupMessage",s.internalSpec={metadata:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,u],encryptedTransportMessage:[2,e.TYPES.BYTES],encryptedTransportEvent:[5,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],encryptedTransportLocallyTransformedMessage:[6,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],miTransportAdminMessage:[7,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage","miTransportAdminMessage"]}},u.name="BackupMessage$Metadata",u.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32],threadTypeTag:[7,e.TYPES.INT32],clientTimestampMs:[8,e.TYPES.INT64]},c.name="BackupMessage$Metadata$FrankingMetadata",c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]},l.BackupMessageSpec=s,l.BackupMessage$MetadataSpec=u,l.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={},s={};e.name="LocallyTransformedMessage",e.internalSpec={pollUpdateMessage:[1,o("WAProtoConst").TYPES.MESSAGE,s],__oneofs__:{content:["pollUpdateMessage"]}},s.name="LocallyTransformedMessage$PollUpdateAdminMessage",s.internalSpec={pollCreationMessageId:[1,o("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,o("WAProtoConst").TYPES.STRING]},l.LocallyTransformedMessageSpec=e,l.LocallyTransformedMessage$PollUpdateAdminMessageSpec=s}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u=(s=n("$InternalEnum"))({UNSET:0,DISABLED:1,ENABLED:2}),c=s({UNSET:0,CHANGED:1,REMOVED:2}),d=s({UNSET:0,PINNED:1,UNPINNED:2}),m=s({UNSET:0,ALL_MEMBERS:1,ADMINS_ONLY:2}),p=s({UNSET:0,ADDED:1,REMOVED:2}),_=s({UNSET:0,ADDED:1,REMOVED:2}),f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={},X={};f.name="MiTransportAdminMessage",f.internalSpec={skipBumpThread:[34,(e=o("WAProtoConst")).TYPES.BOOL],skipSnippetUpdate:[35,e.TYPES.BOOL],chatThemeChanged:[1,e.TYPES.MESSAGE,X],nicknameChanged:[2,e.TYPES.MESSAGE,Q],groupParticipantChanged:[3,e.TYPES.MESSAGE,K],groupAdminChanged:[4,e.TYPES.MESSAGE,j],groupNameChanged:[5,e.TYPES.MESSAGE,z],groupMembershipAddModeChanged:[6,e.TYPES.MESSAGE,G],messagePinned:[7,e.TYPES.MESSAGE,H],groupImageChanged:[8,e.TYPES.MESSAGE,V],quickReactionChanged:[9,e.TYPES.MESSAGE,U],linkCta:[10,e.TYPES.MESSAGE,W],iconChanged:[11,e.TYPES.MESSAGE,B],disappearingSettingChanged:[12,e.TYPES.MESSAGE,O],limitSharingChanged:[13,e.TYPES.MESSAGE,F],xmatDisappearingSetting:[14,e.TYPES.MESSAGE,A],xmatFriendRequestConfirmedEncrypted:[15,e.TYPES.MESSAGE,w],xmatInstantGameEncryptedDynamicCustomUpdate:[16,e.TYPES.MESSAGE,M],xmatLinkCta:[17,e.TYPES.MESSAGE,N],xmatMagicWords:[18,e.TYPES.MESSAGE,P],xmatMessagingLimitSharing:[19,e.TYPES.MESSAGE,$],xmatMessengerQrCodeScanned:[20,e.TYPES.MESSAGE,x],xmatMessengerSharedAlbumAddition:[21,e.TYPES.MESSAGE,D],xmatMessengerSharedAlbumContentRemoval:[22,e.TYPES.MESSAGE,I],xmatMessengerSharedAlbumDeletion:[23,e.TYPES.MESSAGE,k],xmatMessengerSharedAlbumRename:[24,e.TYPES.MESSAGE,E],xmatMessengerSharedAlbum:[25,e.TYPES.MESSAGE,L],xmatThemeColor:[26,e.TYPES.MESSAGE,R],xmatThreadIcon:[27,e.TYPES.MESSAGE,S],xmatThreadNickname:[28,e.TYPES.MESSAGE,v],xmatThreadQuickReaction:[29,e.TYPES.MESSAGE,b],xmatUpdatePayments:[30,e.TYPES.MESSAGE,C],xmatPinMessageV2:[31,e.TYPES.MESSAGE,y],xmatUnpinMessageV2:[32,e.TYPES.MESSAGE,h],xmatGenaiTaskAdd:[33,e.TYPES.MESSAGE,g],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged","limitSharingChanged","xmatDisappearingSetting","xmatFriendRequestConfirmedEncrypted","xmatInstantGameEncryptedDynamicCustomUpdate","xmatLinkCta","xmatMagicWords","xmatMessagingLimitSharing","xmatMessengerQrCodeScanned","xmatMessengerSharedAlbumAddition","xmatMessengerSharedAlbumContentRemoval","xmatMessengerSharedAlbumDeletion","xmatMessengerSharedAlbumRename","xmatMessengerSharedAlbum","xmatThemeColor","xmatThreadIcon","xmatThreadNickname","xmatThreadQuickReaction","xmatUpdatePayments","xmatPinMessageV2","xmatUnpinMessageV2","xmatGenaiTaskAdd"]}},g.name="MiTransportAdminMessage$XmatGenAITaskAdd",g.internalSpec={taskId:[1,e.TYPES.INT64]},h.name="MiTransportAdminMessage$XmatUnpinMessageV2",h.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},y.name="MiTransportAdminMessage$XmatPinMessageV2",y.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},C.name="MiTransportAdminMessage$XmatUpdatePayments",C.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING],amount:[3,e.TYPES.FLOAT],transactionId:[4,e.TYPES.INT64],transactionStatus:[5,e.TYPES.INT32]},b.name="MiTransportAdminMessage$XmatThreadQuickReaction",b.internalSpec={threadQuickReactionEmoji:[1,e.TYPES.STRING],threadQuickReactionInstructionKeyId:[2,e.TYPES.STRING]},v.name="MiTransportAdminMessage$XmatThreadNickname",v.internalSpec={participantId:[1,e.TYPES.INT64],nickname:[2,e.TYPES.STRING]},S.name="MiTransportAdminMessage$XmatThreadIcon",S.internalSpec={threadIcon:[1,e.TYPES.STRING]},R.name="MiTransportAdminMessage$XmatThemeColor",R.internalSpec={themeId:[1,e.TYPES.STRING],themeColor:[2,e.TYPES.STRING],gradient:[3,e.FLAGS.REPEATED|e.TYPES.STRING],shouldShowIcon:[4,e.TYPES.BOOL],themeType:[5,e.TYPES.INT32],accessibilityLabel:[6,e.TYPES.STRING],themeNameWithSubtitle:[7,e.TYPES.STRING],themeEmoji:[8,e.TYPES.STRING]},L.name="MiTransportAdminMessage$XmatMessengerSharedAlbum",L.internalSpec={xmaDataclass:[1,e.TYPES.STRING]},E.name="MiTransportAdminMessage$XmatMessengerSharedAlbumRename",E.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],oldAlbumTitle:[2,e.TYPES.STRING],newAlbumTitle:[3,e.TYPES.STRING]},k.name="MiTransportAdminMessage$XmatMessengerSharedAlbumDeletion",k.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING]},I.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval",I.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],removedContentMap:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,T],removedContentCount:[3,e.TYPES.INT64],albumTitle:[4,e.TYPES.STRING]},T.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTuple",T.internalSpec={key:[1,e.TYPES.INT64],value:[2,e.TYPES.STRING]},D.name="MiTransportAdminMessage$XmatMessengerSharedAlbumAddition",D.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING],numOfAttachments:[3,e.TYPES.INT64],isAlbumCreation:[4,e.TYPES.BOOL]},x.name="MiTransportAdminMessage$XmatMessengerQRCodeScanned",x.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING]},$.name="MiTransportAdminMessage$XmatMessagingLimitSharing",$.internalSpec={senderName:[1,e.TYPES.STRING],senderId:[2,e.TYPES.STRING],limitSharingType:[3,e.TYPES.STRING]},P.name="MiTransportAdminMessage$XmatMagicWords",P.internalSpec={newMagicWordCount:[1,e.TYPES.INT64],removedMagicWordCount:[2,e.TYPES.INT64],magicWord:[3,e.TYPES.STRING],emojiEffect:[4,e.TYPES.STRING],isAllEdited:[5,e.TYPES.BOOL],themeName:[6,e.TYPES.STRING]},N.name="MiTransportAdminMessage$XmatLinkCTA",N.internalSpec={linkCtaXmatPrimaryText:[1,e.TYPES.STRING],linkCtaXmatCtaText:[2,e.TYPES.STRING],linkCtaXmatCtaUrl:[3,e.TYPES.STRING],linkCtaXmatCtaIosUrl:[4,e.TYPES.STRING],androidUri:[5,e.TYPES.STRING],asyncUrl:[6,e.TYPES.STRING],wwwIsAsyncUrl:[7,e.TYPES.BOOL],msiteEnabled:[8,e.TYPES.BOOL],hideUriInFallback:[9,e.TYPES.BOOL],showConfirmationDialog:[10,e.TYPES.BOOL],graphPayload:[11,e.TYPES.STRING],identifierName:[12,e.TYPES.STRING],threadId:[13,e.TYPES.STRING],hideCtaInFallback:[14,e.TYPES.BOOL],ctxAdConversationStarterInfo:[15,e.TYPES.STRING],fbmUri:[16,e.TYPES.STRING],initiatorUserId:[17,e.TYPES.STRING]},M.name="MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdate",M.internalSpec={senderName:[1,e.TYPES.STRING],muteManagementAdminTextType:[2,e.TYPES.STRING],gameName:[3,e.TYPES.STRING]},w.name="MiTransportAdminMessage$XmatFriendRequestConfirmedEncrypted",w.internalSpec={otherUserName:[1,e.TYPES.STRING],isTurnOnCohort:[2,e.TYPES.STRING],userWhoAcceptedFriendRequest:[3,e.TYPES.STRING]},A.name="MiTransportAdminMessage$XmatDisappearingSetting",A.internalSpec={disappearingSettingTime:[1,e.TYPES.INT64],oldDisappearingSettingTime:[2,e.TYPES.INT64],disappearingSettingActorFbid:[3,e.TYPES.INT64],newEphemeralityType:[4,e.TYPES.INT64],oldEphemeralityType:[5,e.TYPES.INT64]},F.name="MiTransportAdminMessage$LimitSharingChanged",F.internalSpec={sharingType:[1,e.TYPES.ENUM,u]},O.name="MiTransportAdminMessage$DisappearingSettingChanged",O.internalSpec={disappearingSettingDurationSeconds:[1,e.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,e.TYPES.INT32]},B.name="MiTransportAdminMessage$IconChanged",B.internalSpec={threadIcon:[1,e.TYPES.STRING]},W.name="MiTransportAdminMessage$LinkCta",W.internalSpec={ukOsaAdminText:[1,e.TYPES.MESSAGE,q],__oneofs__:{content:["ukOsaAdminText"]}},q.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText",q.internalSpec={initiatorUserId:[2,e.TYPES.STRING]},U.name="MiTransportAdminMessage$QuickReactionChanged",U.internalSpec={emojiName:[1,e.TYPES.STRING]},V.name="MiTransportAdminMessage$GroupImageChanged",V.internalSpec={action:[1,e.TYPES.ENUM,c]},H.name="MiTransportAdminMessage$MessagePinned",H.internalSpec={action:[1,e.TYPES.ENUM,d]},G.name="MiTransportAdminMessage$GroupMembershipAddModeChanged",G.internalSpec={mode:[1,e.TYPES.ENUM,m]},z.name="MiTransportAdminMessage$GroupNameChanged",z.internalSpec={groupName:[1,e.TYPES.STRING]},j.name="MiTransportAdminMessage$GroupAdminChanged",j.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,p]},K.name="MiTransportAdminMessage$GroupParticipantChanged",K.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,_]},Q.name="MiTransportAdminMessage$NicknameChanged",Q.internalSpec={targetUserId:[1,e.TYPES.STRING],nickname:[2,e.TYPES.STRING]},X.name="MiTransportAdminMessage$ChatThemeChanged",X.internalSpec={themeName:[1,e.TYPES.STRING],themeEmoji:[2,e.TYPES.STRING],themeType:[3,e.TYPES.INT32]},l.MiTransportAdminMessage$LimitSharingChanged$SharingType=u,l.MiTransportAdminMessage$GroupImageChanged$Action=c,l.MiTransportAdminMessage$MessagePinned$Action=d,l.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=m,l.MiTransportAdminMessage$GroupAdminChanged$Action=p,l.MiTransportAdminMessage$GroupParticipantChanged$Action=_,l.MiTransportAdminMessageSpec=f,l.MiTransportAdminMessage$XmatGenAITaskAddSpec=g,l.MiTransportAdminMessage$XmatUnpinMessageV2Spec=h,l.MiTransportAdminMessage$XmatPinMessageV2Spec=y,l.MiTransportAdminMessage$XmatUpdatePaymentsSpec=C,l.MiTransportAdminMessage$XmatThreadQuickReactionSpec=b,l.MiTransportAdminMessage$XmatThreadNicknameSpec=v,l.MiTransportAdminMessage$XmatThreadIconSpec=S,l.MiTransportAdminMessage$XmatThemeColorSpec=R,l.MiTransportAdminMessage$XmatMessengerSharedAlbumSpec=L,l.MiTransportAdminMessage$XmatMessengerSharedAlbumRenameSpec=E,l.MiTransportAdminMessage$XmatMessengerSharedAlbumDeletionSpec=k,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemovalSpec=I,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTupleSpec=T,l.MiTransportAdminMessage$XmatMessengerSharedAlbumAdditionSpec=D,l.MiTransportAdminMessage$XmatMessengerQRCodeScannedSpec=x,l.MiTransportAdminMessage$XmatMessagingLimitSharingSpec=$,l.MiTransportAdminMessage$XmatMagicWordsSpec=P,l.MiTransportAdminMessage$XmatLinkCTASpec=N,l.MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdateSpec=M,l.MiTransportAdminMessage$XmatFriendRequestConfirmedEncryptedSpec=w,l.MiTransportAdminMessage$XmatDisappearingSettingSpec=A,l.MiTransportAdminMessage$LimitSharingChangedSpec=F,l.MiTransportAdminMessage$DisappearingSettingChangedSpec=O,l.MiTransportAdminMessage$IconChangedSpec=B,l.MiTransportAdminMessage$LinkCtaSpec=W,l.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=q,l.MiTransportAdminMessage$QuickReactionChangedSpec=U,l.MiTransportAdminMessage$GroupImageChangedSpec=V,l.MiTransportAdminMessage$MessagePinnedSpec=H,l.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=G,l.MiTransportAdminMessage$GroupNameChangedSpec=z,l.MiTransportAdminMessage$GroupAdminChangedSpec=j,l.MiTransportAdminMessage$GroupParticipantChangedSpec=K,l.MiTransportAdminMessage$NicknameChangedSpec=Q,l.MiTransportAdminMessage$ChatThemeChangedSpec=X}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2}),u=n("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3}),c=n("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2}),d={},m={},p={},_={},f={};d.name="TransportEvent",d.internalSpec={placeholder:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],event:[2,e.TYPES.MESSAGE,m],__oneofs__:{content:["placeholder","event"]}},m.name="TransportEvent$Event",m.internalSpec={deviceChange:[1,e.TYPES.MESSAGE,_],icdcAlert:[2,e.TYPES.MESSAGE,p],__oneofs__:{event:["deviceChange","icdcAlert"]}},p.name="TransportEvent$Event$IcdcAlert",p.internalSpec={type:[1,e.TYPES.ENUM,s]},_.name="TransportEvent$Event$DeviceChange",_.internalSpec={type:[1,e.TYPES.ENUM,u],deviceName:[2,e.TYPES.STRING],devicePlatform:[3,e.TYPES.STRING],deviceModel:[4,e.TYPES.STRING]},f.name="TransportEvent$Placeholder",f.internalSpec={type:[1,e.TYPES.ENUM,c]},l.TransportEvent$Event$IcdcAlert$Type=s,l.TransportEvent$Event$DeviceChange$Type=u,l.TransportEvent$Placeholder$Type=c,l.TransportEventSpec=d,l.TransportEvent$EventSpec=m,l.TransportEvent$Event$IcdcAlertSpec=p,l.TransportEvent$Event$DeviceChangeSpec=_,l.TransportEvent$PlaceholderSpec=f}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={SMALL:1,MEDIUM:2,LARGE:3},c={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5},d={NONE:0,VIDEO:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={};m.name="ConsumerApplication",m.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,p],metadata:[2,e.TYPES.MESSAGE,f]},p.name="ConsumerApplication$Payload",p.internalSpec={content:[1,e.TYPES.MESSAGE,y],applicationData:[2,e.TYPES.MESSAGE,h],signal:[3,e.TYPES.MESSAGE,g],subProtocol:[4,e.TYPES.MESSAGE,_],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},_.name="ConsumerApplication$SubProtocolPayload",_.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},f.name="ConsumerApplication$Metadata",f.internalSpec={specialTextSize:[1,e.TYPES.ENUM,u]},g.name="ConsumerApplication$Signal",g.internalSpec={},h.name="ConsumerApplication$ApplicationData",h.internalSpec={revoke:[1,e.TYPES.MESSAGE,I],__oneofs__:{applicationContent:["revoke"]}},y.name="ConsumerApplication$Content",y.internalSpec={messageText:[1,e.TYPES.MESSAGE,s.MessageTextSpec],imageMessage:[2,e.TYPES.MESSAGE,W],contactMessage:[3,e.TYPES.MESSAGE,P],locationMessage:[4,e.TYPES.MESSAGE,w],extendedTextMessage:[5,e.TYPES.MESSAGE,M],statusTextMessage:[6,e.TYPES.MESSAGE,N],documentMessage:[7,e.TYPES.MESSAGE,F],audioMessage:[8,e.TYPES.MESSAGE,B],videoMessage:[9,e.TYPES.MESSAGE,O],contactsArrayMessage:[10,e.TYPES.MESSAGE,$],liveLocationMessage:[11,e.TYPES.MESSAGE,x],stickerMessage:[12,e.TYPES.MESSAGE,A],groupInviteMessage:[13,e.TYPES.MESSAGE,D],viewOnceMessage:[14,e.TYPES.MESSAGE,T],reactionMessage:[16,e.TYPES.MESSAGE,k],pollCreationMessage:[17,e.TYPES.MESSAGE,L],pollUpdateMessage:[18,e.TYPES.MESSAGE,R],editMessage:[19,e.TYPES.MESSAGE,C],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}},C.name="ConsumerApplication$EditMessage",C.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],message:[2,e.TYPES.MESSAGE,s.MessageTextSpec],timestampMs:[3,e.TYPES.INT64]},b.name="ConsumerApplication$PollAddOptionMessage",b.internalSpec={pollOption:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E]},v.name="ConsumerApplication$PollVoteMessage",v.internalSpec={selectedOptions:[1,e.FLAGS.REPEATED|e.TYPES.BYTES],senderTimestampMs:[2,e.TYPES.INT64]},S.name="ConsumerApplication$PollEncValue",S.internalSpec={encPayload:[1,e.TYPES.BYTES],encIv:[2,e.TYPES.BYTES]},R.name="ConsumerApplication$PollUpdateMessage",R.internalSpec={pollCreationMessageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],vote:[2,e.TYPES.MESSAGE,S],addOption:[3,e.TYPES.MESSAGE,S]},L.name="ConsumerApplication$PollCreationMessage",L.internalSpec={encKey:[1,e.TYPES.BYTES],name:[2,e.TYPES.STRING],options:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E],selectableOptionsCount:[4,e.TYPES.UINT32]},E.name="ConsumerApplication$Option",E.internalSpec={optionName:[1,e.TYPES.STRING]},k.name="ConsumerApplication$ReactionMessage",k.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],text:[2,e.TYPES.STRING],groupingKey:[3,e.TYPES.STRING],senderTimestampMs:[4,e.TYPES.INT64],reactionMetadataDataclassData:[5,e.TYPES.STRING],style:[6,e.TYPES.INT32]},I.name="ConsumerApplication$RevokeMessage",I.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},T.name="ConsumerApplication$ViewOnceMessage",T.internalSpec={imageMessage:[1,e.TYPES.MESSAGE,W],videoMessage:[2,e.TYPES.MESSAGE,O],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}},D.name="ConsumerApplication$GroupInviteMessage",D.internalSpec={groupJid:[1,e.TYPES.STRING],inviteCode:[2,e.TYPES.STRING],inviteExpiration:[3,e.TYPES.INT64],groupName:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],caption:[6,e.TYPES.MESSAGE,s.MessageTextSpec]},x.name="ConsumerApplication$LiveLocationMessage",x.internalSpec={location:[1,e.TYPES.MESSAGE,V],accuracyInMeters:[2,e.TYPES.UINT32],speedInMps:[3,e.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,e.TYPES.UINT32],caption:[5,e.TYPES.MESSAGE,s.MessageTextSpec],sequenceNumber:[6,e.TYPES.INT64],timeOffset:[7,e.TYPES.UINT32]},$.name="ConsumerApplication$ContactsArrayMessage",$.internalSpec={displayName:[1,e.TYPES.STRING],contacts:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,P]},P.name="ConsumerApplication$ContactMessage",P.internalSpec={contact:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},N.name="ConsumerApplication$StatusTextMesage",N.internalSpec={text:[1,e.TYPES.MESSAGE,M],textArgb:[6,e.TYPES.FIXED32],backgroundArgb:[7,e.TYPES.FIXED32],font:[8,e.TYPES.ENUM,c]},M.name="ConsumerApplication$ExtendedTextMessage",M.internalSpec={text:[1,e.TYPES.MESSAGE,s.MessageTextSpec],matchedText:[2,e.TYPES.STRING],canonicalUrl:[3,e.TYPES.STRING],description:[4,e.TYPES.STRING],title:[5,e.TYPES.STRING],thumbnail:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],previewType:[7,e.TYPES.ENUM,d]},w.name="ConsumerApplication$LocationMessage",w.internalSpec={location:[1,e.TYPES.MESSAGE,V],address:[2,e.TYPES.STRING]},A.name="ConsumerApplication$StickerMessage",A.internalSpec={sticker:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},F.name="ConsumerApplication$DocumentMessage",F.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],fileName:[2,e.TYPES.STRING]},O.name="ConsumerApplication$VideoMessage",O.internalSpec={video:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},B.name="ConsumerApplication$AudioMessage",B.internalSpec={audio:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],ptt:[2,e.TYPES.BOOL]},W.name="ConsumerApplication$ImageMessage",W.internalSpec={image:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},q.name="ConsumerApplication$InteractiveAnnotation",q.internalSpec={polygonVertices:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,U],location:[2,e.TYPES.MESSAGE,V],__oneofs__:{action:["location"]}},U.name="ConsumerApplication$Point",U.internalSpec={x:[1,e.TYPES.DOUBLE],y:[2,e.TYPES.DOUBLE]},V.name="ConsumerApplication$Location",V.internalSpec={degreesLatitude:[1,e.TYPES.DOUBLE],degreesLongitude:[2,e.TYPES.DOUBLE],name:[3,e.TYPES.STRING]},H.name="ConsumerApplication$MediaPayload",H.internalSpec={protocol:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},l.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=u,l.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=c,l.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=d,l.ConsumerApplicationSpec=m,l.ConsumerApplication$PayloadSpec=p,l.ConsumerApplication$SubProtocolPayloadSpec=_,l.ConsumerApplication$MetadataSpec=f,l.ConsumerApplication$SignalSpec=g,l.ConsumerApplication$ApplicationDataSpec=h,l.ConsumerApplication$ContentSpec=y,l.ConsumerApplication$EditMessageSpec=C,l.ConsumerApplication$PollAddOptionMessageSpec=b,l.ConsumerApplication$PollVoteMessageSpec=v,l.ConsumerApplication$PollEncValueSpec=S,l.ConsumerApplication$PollUpdateMessageSpec=R,l.ConsumerApplication$PollCreationMessageSpec=L,l.ConsumerApplication$OptionSpec=E,l.ConsumerApplication$ReactionMessageSpec=k,l.ConsumerApplication$RevokeMessageSpec=I,l.ConsumerApplication$ViewOnceMessageSpec=T,l.ConsumerApplication$GroupInviteMessageSpec=D,l.ConsumerApplication$LiveLocationMessageSpec=x,l.ConsumerApplication$ContactsArrayMessageSpec=$,l.ConsumerApplication$ContactMessageSpec=P,l.ConsumerApplication$StatusTextMesageSpec=N,l.ConsumerApplication$ExtendedTextMessageSpec=M,l.ConsumerApplication$LocationMessageSpec=w,l.ConsumerApplication$StickerMessageSpec=A,l.ConsumerApplication$DocumentMessageSpec=F,l.ConsumerApplication$VideoMessageSpec=O,l.ConsumerApplication$AudioMessageSpec=B,l.ConsumerApplication$ImageMessageSpec=W,l.ConsumerApplication$InteractiveAnnotationSpec=q,l.ConsumerApplication$PointSpec=U,l.ConsumerApplication$LocationSpec=V,l.ConsumerApplication$MediaPayloadSpec=H}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2},c={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={};d.name="MessageApplication",d.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,e.TYPES.MESSAGE,m]},m.name="MessageApplication$Metadata",m.internalSpec={forwardingScore:[5,e.TYPES.UINT32],isForwarded:[6,e.TYPES.BOOL],businessMetadata:[7,e.TYPES.MESSAGE,(s=o("WACommon.pb")).SubProtocolSpec],frankingKey:[8,e.TYPES.BYTES],frankingVersion:[9,e.TYPES.INT32],quotedMessage:[10,e.TYPES.MESSAGE,p],threadType:[11,e.TYPES.ENUM,u],readonlyMetadataDataclass:[12,e.TYPES.STRING],groupId:[13,e.TYPES.STRING],groupSize:[14,e.TYPES.UINT32],groupIndex:[15,e.TYPES.UINT32],botResponseId:[16,e.TYPES.STRING],collapsibleId:[17,e.TYPES.STRING],secondaryOtid:[18,e.TYPES.STRING],chatEphemeralSetting:[1,e.TYPES.MESSAGE,b],ephemeralSettingList:[2,e.TYPES.MESSAGE,_],ephemeralSharedSecret:[3,e.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}},p.name="MessageApplication$Metadata$QuotedMessage",p.internalSpec={stanzaId:[1,e.TYPES.STRING],remoteJid:[2,e.TYPES.STRING],participant:[3,e.TYPES.STRING],payload:[4,e.TYPES.MESSAGE,f]},_.name="MessageApplication$Metadata$EphemeralSettingMap",_.internalSpec={chatJid:[1,e.TYPES.STRING],ephemeralSetting:[2,e.TYPES.MESSAGE,b]},f.name="MessageApplication$Payload",f.internalSpec={coreContent:[1,e.TYPES.MESSAGE,C],signal:[2,e.TYPES.MESSAGE,y],applicationData:[3,e.TYPES.MESSAGE,h],subProtocol:[4,e.TYPES.MESSAGE,g],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}},g.name="MessageApplication$SubProtocolPayload",g.internalSpec={futureProof:[1,e.TYPES.ENUM,s.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],businessMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],paymentMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],multiDevice:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],voip:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],armadillo:[7,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}},h.name="MessageApplication$ApplicationData",h.internalSpec={},y.name="MessageApplication$Signal",y.internalSpec={},C.name="MessageApplication$Content",C.internalSpec={},b.name="MessageApplication$EphemeralSetting",b.internalSpec={ephemeralExpiration:[2,e.TYPES.UINT32],ephemeralSettingTimestamp:[3,e.TYPES.INT64],ephemeralityType:[5,e.TYPES.ENUM,c],isEphemeralSettingReset:[4,e.TYPES.BOOL]},l.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=u,l.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=c,l.MessageApplicationSpec=d,l.MessageApplication$MetadataSpec=m,l.MessageApplication$Metadata$QuotedMessageSpec=p,l.MessageApplication$Metadata$EphemeralSettingMapSpec=_,l.MessageApplication$PayloadSpec=f,l.MessageApplication$SubProtocolPayloadSpec=g,l.MessageApplication$ApplicationDataSpec=h,l.MessageApplication$SignalSpec=y,l.MessageApplication$ContentSpec=C,l.MessageApplication$EphemeralSettingSpec=b}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.payload;if(a==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(o("decodeProtobuf").getUnknownFields(e.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};var i=a.subProtocol;if(i==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(o("decodeProtobuf").getUnknownFields(i)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:i.futureProof};var l=[],s=(t=e.payload)==null||(t=t.subProtocol)==null?void 0:t.consumerMessage,u=(n=e.payload)==null||(n=n.subProtocol)==null?void 0:n.armadillo,c=(r=e.payload)==null||(r=r.subProtocol)==null?void 0:r.multiDevice;if(s!=null){if(s.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};l.push({payload:new Uint8Array(s.payload),type:"success",subprotocolType:"consumerMessage"})}if(u!=null){if(u.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};l.push({payload:new Uint8Array(u.payload),type:"success",subprotocolType:"armadillo"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};l.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"multiDevice"})}return l.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+l.length}:l[0]}l.parseMessageApplication=e}),98);
__d("lastx",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){var t=null;if(Array.isArray(e))e.length&&(t={value:e[e.length-1]});else for(var n of e)t=t||{},t.value=n;if(t)return t.value;s(0,1145)}l.default=e}),98);
__d("MultiKeyMap",["invariant","lastx"],(function(t,n,r,o,a,i,l,s){"use strict";var e=typeof WeakMap=="function",u=(function(){function t(){this.$1=this.$2(),this.$3=null}var n=t.prototype;return n.set=function(t,n){this.$4(t);for(var e=this.$1,r=0;r<t.length-1;r++){var o=t[r],a=this.$5(e,o).get(o);a==null&&(a=this.$2(),this.$5(e,o).set(o,a)),a.type==="map"||s(0,1732),e=a}var i=t[t.length-1];this.$5(e,i).set(i,{type:"value",value:n})},n.get=function(t){this.$4(t);var e=this.$6(t),n=e&&e.get(r("lastx")(t));return n==null||n.type!=="value"?void 0:n.value},n.delete=function(t){this.$4(t);var e=this.$6(t);return e?e.delete(r("lastx")(t)):!1},n.$5=function(t,n){return c(n)?t.cache:t.weakCache},n.$6=function(t){for(var e=this.$1,n=0;n<t.length-1;n++){var o,a=t[n];if(((o=e)==null?void 0:o.type)==="map")e=this.$5(e,a).get(a);else return}var i=r("lastx")(t),l=e&&this.$5(e,i);return l},n.$2=function(){return{type:"map",cache:new Map,weakCache:e?new WeakMap:new Map}},n.$4=function(t){if(this.$3==null&&(this.$3=t.length),this.$3!==t.length)throw new Error("MultiKeyMap called with different number of keys");if(t.length<1)throw new Error("MultiKeyMap called with empty array of keys")},t})();function c(e){var t=typeof e;return t==="bigint"||t==="boolean"||t==="number"||t==="string"||e==null}l.default=u}),98);
__d("memoizeWithArgsWeak",["MultiKeyMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t===void 0&&(t="");var n=new(r("MultiKeyMap"));return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=n.get(r);if(a!==void 0)return a;var i=e.apply(void 0,r);return n.set(r,i),i}}l.default=e}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAByteArray","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}function s(e){return e instanceof ArrayBuffer?e:o("WAByteArray").uint8ArrayToBuffer(e)}var u=function(t){var e;this.kind="imageTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(e=t.image)==null?void 0:e.payload)},c=function(t){var e;this.kind="audioTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,(e=t.audio)==null?void 0:e.payload),this.ptt=t.ptt},d=function(t){var e;this.kind="videoTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,(e=t.video)==null?void 0:e.payload),this.caption=t.caption},m=function(t){var e;this.kind="documentTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,(e=t.document)==null?void 0:e.payload),this.fileName=t.fileName},p=function(t){var e;this.kind="stickerTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,(e=t.sticker)==null?void 0:e.payload)},_=function(t){var e=this,n;this.kind="extendedContentMessage",this.favicon=(n=r("memoize"))(function(){var t,n;return((t=e.payload)==null||(t=t.favicon)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.favicon)==null?void 0:n.payload)}),this.headerImage=n(function(){var t,n;return((t=e.payload)==null||(t=t.headerImage)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.headerImage)==null?void 0:n.payload)}),this.previews=n(function(){var t,n;return(t=(n=e.payload)==null||(n=n.previews)==null?void 0:n.map(function(e){return o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,e.payload)}))!=null?t:[]}),this.associatedMessage=n(function(){var t=e.payload.associatedMessage;return(t==null?void 0:t.payload)==null?null:new y(t.payload)}),this.payload=t},f=function(t){var e=this;this.stickerContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.stickerContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,n.payload)}),this.videoContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.videoContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,n.payload)}),this.payload=t},g=(function(){function e(e){this.kind="armadillo",this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloApplication.pb").ArmadilloSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.extendedContentMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},t.noteReply=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.noteReplyMessage;return t==null?null:new f(t)},t.paymentsTransactionMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null||(e=e.paymentsTransactionMessage)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},e})(),h=(function(){function e(e){var t=this,n;this.kind="consumerApplication",this.imageMessage=(n=r("memoize"))(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.imageMessage;if(n!=null)return new u(n)}),this.audioMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.audioMessage;if(n!=null)return new c(n)}),this.videoMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.videoMessage;if(n!=null)return new d(n)}),this.documentMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.documentMessage;if(n!=null)return new m(n)}),this.stickerMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.stickerMessage;if(n!=null)return new p(n)}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.attachmentMessage=function(){var e,t,n,r;return(e=(t=(n=(r=this.imageMessage())!=null?r:this.audioMessage())!=null?n:this.videoMessage())!=null?t:this.documentMessage())!=null?e:this.stickerMessage()},e})(),y=(function(){function e(e){var t=this;this.kind="messageApplication",this.subProtocol=r("memoize")(function(){var e=o("WAParseMessageApplication").parseMessageApplication(t.proto);if(e.payload!=null){var n=e.payload;switch(e.subprotocolType){case"consumerMessage":return new h(n);case"armadillo":return new g(n);case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:e.subprotocolType}}}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,e)}var t=e.prototype;return t.consumerMessage=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="consumerApplication"?null:e},t.armadillo=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="armadillo"?null:e},e})(),C=function(t){this.kind="transportEvent",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloTransportEvent.pb").TransportEventSpec,t)},b=function(t){this.kind="locallyTransformedMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,t)},v=function(t){this.kind="adminMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,t)},S="SKIP_CACHE",R=(function(){function e(e,t){var n=this;this.payload=r("memoize")(function(){if(n.proto.encryptedTransportEvent!=null)return new C(r("nullthrows")(n.proto.encryptedTransportEvent.payload));if(n.proto.encryptedTransportLocallyTransformedMessage!=null)return new b(r("nullthrows")(n.proto.encryptedTransportLocallyTransformedMessage.payload));if(n.proto.encryptedTransportMessage!=null)return new y(r("nullthrows")(n.proto.encryptedTransportMessage));if(n.proto.miTransportAdminMessage!=null)return new v(r("nullthrows")(n.proto.miTransportAdminMessage.payload));throw r("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")}),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,e)}var t=e.prototype;return t.encryptedTransportMessage=function(){var e=this.payload();if(e.kind==="messageApplication")return e},t.encryptedTransportEvent=function(){var e=this.payload();if(e.kind==="transportEvent")return e},t.locallyTransformedMessage=function(){var e=this.payload();if(e.kind==="locallyTransformedMessage")return e},t.adminMessage=function(){var e=this.payload();if(e.kind==="adminMessage")return e},e})();R.create=r("memoizeWithArgsWeak")(function(e){return new R(e,S)}),l.DeserializedImageMessage=u,l.DeserializedAudioMessage=c,l.DeserializedVideoMessage=d,l.DeserializedDocumentMessage=m,l.DeserializedStickerMessage=p,l.DeserializedExtendedContentMessage=_,l.DeserializedNoteReply=f,l.DeserializedArmadilloApplication=g,l.DeserializedConsumerApplication=h,l.DeserializedMessageApplication=y,l.DeserializedTransportEvent=C,l.DeserializedLocallyTransformedMessage=b,l.DeserializedAdminMessage=v,l.DeserializedBackupMessage=R}),98);
__d("RavenMessagingState",[],(function(t,n,r,o,a,i){var e=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});i.default=e}),66);
__d("MAWRavenUtils",["EphemeralMediaViewMode","MAWMsg","RavenMessagingState"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){switch(t){case o("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:return r("RavenMessagingState").PERMANENT;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN:return r("RavenMessagingState").UNSEEN;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN:return r("RavenMessagingState").SEEN;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.REPLAYED:return r("RavenMessagingState").REPLAYED;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.EXPIRED:return r("RavenMessagingState").EXPIRED}},s=function(t){switch(t){case o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return r("EphemeralMediaViewMode").PERMANENT;case o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return r("EphemeralMediaViewMode").REPLAYABLE;case o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return r("EphemeralMediaViewMode").READ_ONCE}},u=function(t,n){return{ephemeralMediaState:n,ephemeralMediaViewMode:s(t)}};function c(t,n){switch(n){case o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?r("RavenMessagingState").SEEN:e(t);case o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?r("RavenMessagingState").SEEN:t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN?r("RavenMessagingState").REPLAYED:e(t);case o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return e(t)}}l.getEphemeralMediaState=e,l.getEphemeralMediaViewMode=s,l.deriveRavenSettings=u,l.getNextRavenMessageEphemeralState=c}),98);
__d("MAWVaultMaterialsStorage",["MAWVaultMaterials","MWFBLogger","Promise","WebAsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="mw_exchange_vm";function u(){var t=o("MAWVaultMaterials").generateNewVaultMaterials(),a="newly-generated";return new(e||(e=n("Promise")))(function(e){r("WebAsyncStorage").getOrSetItem(s,t,function(n,r){if(n!=null){var i=o("MWFBLogger").MWLogger();if(n instanceof Error)throw i.catching(n).mustfixThrow("Failed to store Vaulting Materials. %s",n.toString());i.mustfix("Failed to store Vaulting Materials.")}r!==null&&(t=r,a="storage"),e(o("MAWVaultMaterials").initializeVaultMaterials(t,a))})})}function c(){return o("MAWVaultMaterials").hasVaultBeenSetup()?(e||(e=n("Promise"))).resolve(o("MAWVaultMaterials").getVaultMaterials()):u()}l.setupVaultMaterials=c}),98);
__d("MAWWriteLimitSharingAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r;return t?(n=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,r=n===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED?[e]:[]):(n=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED,r=n===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED?[e]:[]),{adminMsgContent:r,adminType:n,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWritePinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_PINNED_MESSAGE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadHotlikeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e===o("MAWCurrentUser").getID(),r=n?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,a=[];return r===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE?a.push(t):a.push(e,t),{adminMsgContent:a,adminType:r,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadNicknameCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=o("MAWCurrentUser").getID(),a=e===r&&e!==t,i=t===r&&t!==e,l=t===e&&r===t,s=t===e&&r!==t,u;l&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:l&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:s&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:s&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:a&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:a&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:i&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:i&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME;var c=[];switch(u){case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:c.push(t,n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:c.push(e,n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:c.push(n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:c.push(t);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:c.push(e);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:c.push(e,t,n);break;default:break}return{adminMsgContent:c,adminType:u,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadPhotoCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MessengerThreadThemeType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({COLOR_GRADIENT:1,THEME:2,THIRD_PARTY:3,INTERACTIVE:4,IGD_CHANNEL_CUSTOMIZED_THEME:5,AI_AGENT:6,AI_GENERATED_THEME:7,AI_STUDIO_GENERATED_THEME:8,AI_INTERACTIVE_THEME:9,AI_INTERACTIVE_THEME_GENERATED:10,MSGR_CUSTOM_THEME:11,AI_SCROLLABLE_THEME:12}),l=e;i.default=l}),66);
__d("MAWWriteThreadThemeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser","MessengerThreadThemeType","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,r){var a=e===o("MAWCurrentUser").getID(),i=u(a,r),l=[];return i===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME||i===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME?l.push(n):l.push(e,n),t!=null&&l.push(t),{adminMsgContent:l,adminType:i,version:1}}function u(t,n){if(n!=null)try{var a=r("MessengerThreadThemeType").cast(parseInt(n,10))===7;if(a)return t?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unable to convert theme type to integer: ",""])),t)}return t?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_THEME}l.getAdminMsgContent=s}),98);
__d("MAWWriteUKOSAAdminMsgContent",["MAWAdminMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("MAWAdminMsgType").ADMIN_MSG_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE,n=[e];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteUnpinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_UNPINNED_MESSAGE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MWChatEncryptedBackupsQPLEvents",["qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=r("qpl"))._(521476140,"378"),u=e._(521472542,"295"),c=e._(521484256,"3212"),d=e._(521473384,"31"),m=e._(521482085,"409"),p=e._(521485406,"272"),_=e._(521482763,"296"),f=e._(521484295,"1460"),g=e._(521482969,"1519"),h=e._(521479124,"1939"),y=e._(521474385,"263"),C=e._(521476098,"504"),b=e._(521482858,"1290"),v=e._(521473194,"1331"),S=e._(521471024,"2275");l.pinCodeChangeQplEvent=s,l.optOutQplEvent=u,l.resetBackupQplEvent=c,l.ebResetObserverQplEvent=d,l.backupSetupQplEvent=m,l.mobileOnboardingQplEvent=p,l.restoreQplEvent=_,l.restoreDeviceAuthQplEvent=f,l.messageRestoreQplEvent=g,l.restoreWithAutoRestoreConsentQplEvent=h,l.hsmFleetMigrationQplEvent=y,l.virtualDeviceRevocationQplEvent=C,l.onboardingAuthQplEvent=b,l.processBackupIdsQPLEvent=v,l.fetchBackupIdsQPLEvent=S}),98);
__d("MWXMAV2IsCollapsibleXMA",["MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;return!(e==null||((t=e.layout_config)==null?void 0:t.collapsible_id)==null&&!o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(e))}l.isCollapsibleXMA=e}),98);
__d("MpsAdminMsgToBridge",["FBLogger","MAWAckLevel","MAWAdminAddParticipantMsg","MAWAdminMsgHelpers","MAWAdminRemoveParticipantMsg","MAWAdminWriteGroupNameChangeAdminMsgContent","MAWEphemeralUtils","MAWJids","MAWWriteLimitSharingAdminMsgContent","MAWWritePinMessageAdminMsgContent","MAWWriteThreadHotlikeCustomizationAdminMsgContent","MAWWriteThreadNicknameCustomizationAdminMsgContent","MAWWriteThreadPhotoCustomizationAdminMsgContent","MAWWriteThreadThemeCustomizationAdminMsgContent","MAWWriteUKOSAAdminMsgContent","MAWWriteUnpinMessageAdminMsgContent","WAArmadilloMiTransportAdminMessage.pb","WAMsgType","err","getErrorSafe","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=["$$unknownFieldCount","skipBumpThread","skipSnippetUpdate"],s=["type"],u=["type"],c=["type"],d=["type"],m=["type"],p=["type"],_=["type"],f=["type"],g=["type"],h=["type"],y=["type"],C=["type"],b=["type"],v=["type"],S=["type"],R=["type"],L=["type"],E=["type"],k=["type"],I=["type"];function T(e,t){return o("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.emojiName,"emojiName is null"))}function D(e,t){return o("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.threadIcon,"threadIcon is null"))}function x(e,t){var n;return o("MAWWriteThreadThemeCustomizationAdminMsgContent").getAdminMsgContent(e,t.themeEmoji,r("nullthrows")(t.themeName,"themeName is null"),""+((n=t.themeType)!=null?n:""))}function $(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.PINNED?o("MAWWritePinMessageAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNPINNED?o("MAWWriteUnpinMessageAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNSET||t.action===null||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function P(e,t){return o("MAWWriteThreadNicknameCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.targetUserId,"targetUserId is null"),r("nullthrows")(t.nickname,"nickname is null"))}function N(e){var t;return o("MAWWriteUKOSAAdminMsgContent").getAdminMsgContent(r("nullthrows")((t=e.ukOsaAdminText)==null?void 0:t.initiatorUserId,"initiatorUserId is null"))}function M(e,t){var n,r;return o("MAWEphemeralUtils").getEphemeralSettingChangeData(o("MAWJids").toUserJid(e),(n=t.disappearingSettingDurationSeconds)!=null?n:0,((r=t.oldDisappearingSettingDurationSeconds)!=null?r:0)===0,!1)}function w(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.CHANGED||t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.REMOVED?o("MAWWriteThreadPhotoCustomizationAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function A(e,t){return t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.ENABLED?o("MAWWriteLimitSharingAdminMsgContent").getAdminMsgContent(e,!0):t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.DISABLED?o("MAWWriteLimitSharingAdminMsgContent").getAdminMsgContent(e,!1):t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.UNSET||t.sharingType===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.sharingType)})()}function F(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.ADDED?o("MAWAdminAddParticipantMsg").createAddParticipantsAdminMessage(o("MAWJids").toUserJid(e),(t.targetUserId||[]).map(function(e){return o("MAWJids").toUserJid(e)})):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.REMOVED?o("MAWAdminRemoveParticipantMsg").createRemoveParticipantsAdminMessage(o("MAWJids").toUserJid(e),(t.targetUserId||[]).map(function(e){return o("MAWJids").toUserJid(e)})):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function O(e,t){return o("MAWAdminWriteGroupNameChangeAdminMsgContent").getAdminMsgContent(o("MAWJids").toUserJid(e),r("nullthrows")(t.groupName))}function B(e,t){var n,a;return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.ADDED?o("MAWAdminMsgHelpers").createParticipantPromoteAdminMessage(o("MAWJids").toUserJid(r("nullthrows")((n=t.targetUserId)==null?void 0:n[0])),o("MAWJids").toUserJid(e)):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.REMOVED?o("MAWAdminMsgHelpers").createParticipantDemoteAdminMessage(o("MAWJids").toUserJid(r("nullthrows")((a=t.targetUserId)==null?void 0:a[0])),o("MAWJids").toUserJid(e)):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function W(e,t){return t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.ADMINS_ONLY?o("MAWAdminMsgHelpers").createMemberAddModeChangeAdminMessage(o("MAWJids").toUserJid(e),"admin_add"):t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.ALL_MEMBERS?o("MAWAdminMsgHelpers").createMemberAddModeChangeAdminMessage(o("MAWJids").toUserJid(e),"all_member_add"):t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.UNSET||t.mode===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.mode)})()}function q(e,t){return M(e,{disappearingSettingDurationSeconds:t.disappearingSettingTime!=null?Number(t.disappearingSettingTime):0,oldDisappearingSettingDurationSeconds:t.oldDisappearingSettingTime!=null?Number(t.oldDisappearingSettingTime):0})}function U(e){return e.initiatorUserId!=null?N({ukOsaAdminText:{initiatorUserId:e.initiatorUserId}}):null}function V(e,t){return A(e,{sharingType:t.limitSharingType==="disabled"?o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.DISABLED:t.limitSharingType==="enabled"?o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.ENABLED:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.UNSET})}function H(e){return $(e,{action:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.PINNED})}function G(e){return $(e,{action:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNPINNED})}function z(e,t){return x(e,{themeEmoji:t.themeEmoji,themeName:t.themeNameWithSubtitle,themeType:t.themeType})}function j(e,t){return t.threadIcon!=null?D(e,{threadIcon:t.threadIcon}):null}function K(e,t){return t.participantId!=null&&t.nickname!=null?P(e,{nickname:t.nickname,targetUserId:""+t.participantId}):null}function Q(e,t){return t.threadQuickReactionEmoji!=null?T(e,{emojiName:t.threadQuickReactionEmoji}):null}function X(e){var t=Object.keys(e);if(t.length!==1)throw r("err")("Expected exactly one key");var n=t[0];return babelHelpers.extends({type:n},e[n])}function Y(t,n){var r=n.$$unknownFieldCount,o=n.skipBumpThread,a=n.skipSnippetUpdate,i=babelHelpers.objectWithoutPropertiesLoose(n,e),l=X(i);return(function(e){if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="quickReactionChanged"){var n=e.type,r=babelHelpers.objectWithoutPropertiesLoose(e,s);return T(t,r)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="iconChanged"){var o=e.type,a=babelHelpers.objectWithoutPropertiesLoose(e,u);return D(t,a)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="chatThemeChanged"){var i=e.type,l=babelHelpers.objectWithoutPropertiesLoose(e,c);return x(t,l)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="messagePinned"){var X=e.type,Y=babelHelpers.objectWithoutPropertiesLoose(e,d);return $(t,Y)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="nicknameChanged"){var J=e.type,Z=babelHelpers.objectWithoutPropertiesLoose(e,m);return P(t,Z)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="linkCta"){var ee=e.type,te=babelHelpers.objectWithoutPropertiesLoose(e,p);return N(te)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="disappearingSettingChanged"){var ne=e.type,re=babelHelpers.objectWithoutPropertiesLoose(e,_);return M(t,re)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupImageChanged"){var oe=e.type,ae=babelHelpers.objectWithoutPropertiesLoose(e,f);return w(t,ae)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="limitSharingChanged"){var ie=e.type,le=babelHelpers.objectWithoutPropertiesLoose(e,g);return A(t,le)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupParticipantChanged"){var se=e.type,ue=babelHelpers.objectWithoutPropertiesLoose(e,h);return F(t,ue)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupNameChanged"){var ce=e.type,de=babelHelpers.objectWithoutPropertiesLoose(e,y);return O(t,de)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupAdminChanged"){var me=e.type,pe=babelHelpers.objectWithoutPropertiesLoose(e,C);return B(t,pe)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupMembershipAddModeChanged"){var _e=e.type,fe=babelHelpers.objectWithoutPropertiesLoose(e,b);return W(t,fe)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatDisappearingSetting"){var ge=e.type,he=babelHelpers.objectWithoutPropertiesLoose(e,v);return q(t,he)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatLinkCta"){var ye=e.type,Ce=babelHelpers.objectWithoutPropertiesLoose(e,S);return U(Ce)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessagingLimitSharing"){var be=e.type,ve=babelHelpers.objectWithoutPropertiesLoose(e,R);return V(t,ve)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatPinMessageV2")return H(t);if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatUnpinMessageV2")return G(t);if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThemeColor"){var Se=e.type,Re=babelHelpers.objectWithoutPropertiesLoose(e,L);return z(t,Re)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadIcon"){var Le=e.type,Ee=babelHelpers.objectWithoutPropertiesLoose(e,E);return j(t,Ee)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadNickname"){var ke=e.type,Ie=babelHelpers.objectWithoutPropertiesLoose(e,k);return K(t,Ie)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadQuickReaction"){var Te=e.type,De=babelHelpers.objectWithoutPropertiesLoose(e,I);return Q(t,De)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatFriendRequestConfirmedEncrypted"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatInstantGameEncryptedDynamicCustomUpdate"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMagicWords"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerQrCodeScanned"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumAddition"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumContentRemoval"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumDeletion"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumRename"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbum"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatGenaiTaskAdd"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatUpdatePayments")return null;throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})(l)}function J(e){var t,n,a,i,l=(t=e.deserialize().adminMessage())==null?void 0:t.proto;if(l!=null){var s;try{s=Y(e.message.senderId,l)}catch(e){r("FBLogger")("mps").catching(r("getErrorSafe")(e)).warn("Failed to get admin message content")}var u={ack:o("MAWAckLevel").ACK.received,adminContent:(n=s)==null?void 0:n.adminMsgContent,adminType:(a=s)==null?void 0:a.adminType,adminVersion:(i=s)==null?void 0:i.version,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:u}}}l.getMessageContent=Y,l.adminMsgToBridgeMsg=J}),98);
__d("MpsToBridgeMessageId",["MAWJidUtils","MpsTypes","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWJidUtils").formatProtocolMsgIdFromExternalId(o("WAJids").unsafeCoerceToChatJid(e),o("WAStanzaUtils").toStanzaId(t))}function s(e){var t=e.lastIndexOf("."),n=e.substring(0,t),r=e.substring(t+1);return{messageId:o("MpsTypes").toMessageId(r),threadId:o("MpsTypes").toThreadId(n)}}l.mpsToBridgeMsgId=e,l.bridgeMsgIdToMps=s}),98);
__d("MpsBumpMessageToBridgeMsg",["MAWAckLevel","MAWMsgType","MpsToBridgeMessageId","MpsTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.deserialize().encryptedTransportMessage(),i=a==null||(t=a.armadillo())==null||(t=t.proto.payload)==null||(t=t.content)==null?void 0:t.bumpExistingMessage;if(i==null||((n=i.key)==null?void 0:n.id)==null||a==null)return null;var l=o("MpsTypes").toMessageId(i.key.id),s={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),replyContent:{isBumpMsg:!0,replyToMsgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(e.message.threadId,l),replyType:"MESSAGE"},replySourceId:(r=i.key)==null?void 0:r.id,sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE};return{kind:"bridgeMsg",value:s}}l.bumpMessageToBridgeMsg=e}),98);
__d("MpsEditToBridge",["LSMessageSendStatus","MAWDbEditMsgHistory","MAWMpsGating","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MAWDbEditMsgHistory").convertToEditMsgHistoryId64(o("MAWDbEditMsgHistory").unsafeCoerceToEditMsgHistoryId(Number(e.getExternalId()))),a=e.topLevelMetadata(),i={author:e.getAuthor(),editExternalId:o("WAStanzaUtils").toStanzaId(e.getExternalId()),editMsgHistoryId:n,editTs:e.getUnixTs(),msgContent:t,originalMsgExternalId:o("WAStanzaUtils").toStanzaId(a.getExternalId()),originalMsgId:a.getMsgId(),sendStatus:r("LSMessageSendStatus").SENDING_TO_SERVER,threadJid:e.getChatJid()};return{kind:"bridgeEditHistoryMsg",value:i}}function s(t){var n,r,a=(n=t.deserialize().encryptedTransportMessage())==null||(n=n.consumerMessage())==null||(n=n.payload)==null||(n=n.content)==null||(n=n.editMessage)==null?void 0:n.message;if(a!=null)return e(t,{commands:a==null?void 0:a.commands,content:((r=a==null?void 0:a.text)!=null?r:"")+(o("MAWMpsGating").isFullMpsEnabled()?" *":""),mentionedJids:a==null?void 0:a.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean)})}function u(t){var n,r,o,a,i=t.supplementals,l=t.topLevel;if(l.kind!=="bridgeMsg")return t;var s=i.map(function(e){return e.kind==="bridgeEditHistoryMsg"?e.value:null}).filter(Boolean).sort(function(e,t){return t.editTs-e.editTs});if(s.length===0)return t;i.push(e(t.message,{commands:l.value.commands&&[].concat(l.value.commands),content:(n=l.value.content)!=null?n:"",mentionedJids:l.value.mentionedJids&&[].concat(l.value.mentionedJids)}));var u=s[0].msgContent;return l.value=babelHelpers.extends({},l.value,{commands:(r=u.commands)!=null?r:l.value.commands,content:(o=u.content)!=null?o:l.value.content,editCount:s.length,mentionedJids:(a=u.mentionedJids)!=null?a:l.value.mentionedJids}),babelHelpers.extends({},t,{supplementals:i,topLevel:l})}l.editMessageToBridgeMsg=s,l.processEditedMessage=u}),98);
__d("MpsEphemeralMessageToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.supplementals,r=e.topLevel,a=(t=e.message.deserialize().encryptedTransportMessage())==null||(t=t.proto.metadata)==null||(t=t.chatEphemeralSetting)==null?void 0:t.ephemeralExpiration;if(a==null||a===0)return e;var i=o("WATimeUtils").castToUnixTime(e.message.getUnixTs()+a),l=o("WATimeUtils").cappedMillisecondsUntil(i);return l<=0?e:(r.kind==="bridgeMsg"&&(r.value=babelHelpers.extends({},r.value,{ephemeralDurationInSec:a})),e.supplementals.push({kind:"bridgeMsgsStartCountdown",value:{msgs:[{countdownTs:i,millisecondsUntilCountdownTs:l,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),babelHelpers.extends({},e,{supplementals:n,topLevel:r}))}l.processEphemeralMessage=e}),98);
__d("MpsForwardToBridge",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t,n,r,o,a,i=e.message,l=e.topLevel,s=i.deserialize().encryptedTransportMessage();return s==null||l.kind!=="bridgeMsg"||((t=s.proto.metadata)==null?void 0:t.isForwarded)!==!0||(l.value=babelHelpers.extends({},l.value,{forwardingScore:(n=(r=s.proto.metadata)==null?void 0:r.forwardingScore)!=null?n:0,isForwarded:(o=(a=s.proto.metadata)==null?void 0:a.isForwarded)!=null?o:!1,replyContent:{replyType:"FORWARD"}})),e}i.processForwarding=e}),66);
__d("MpsFutureproofToBridge",["MAWAckLevel","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.FUTUREPROOF};return{kind:"bridgeMsg",value:t}}l.futureproofBridgeMsg=e}),98);
__d("MpsLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("mps",t)};l.MpsLogger=e}),98);
__d("getMediaTypeFromConsumerMessage",["MAWEncodeMediaTransportProtocol","WAMediaTransport.pb","decodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a=((t=e.ancillary)==null?void 0:t.gifPlayback)===!0||((n=e.ancillary)==null?void 0:n.gifAttribution)!=null;if(r("gkx")("5398")){var i,l=(i=e.integral)==null||(i=i.transport)==null||(i=i.ancillary)==null?void 0:i.mimetype;if(a&&l===o("MAWEncodeMediaTransportProtocol").GIF_MIME_TYPE)return"gif"}else if(a)return"gif";return"video"}function s(t){var n,r=t==null||(n=t.payload)==null?void 0:n.content;if((r==null?void 0:r.audioMessage)!=null)return"ptt";if((r==null?void 0:r.videoMessage)!=null){var a,i=r==null||(a=r.videoMessage)==null||(a=a.video)==null?void 0:a.payload,l=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,i);return e(l)}if((r==null?void 0:r.documentMessage)!=null)return"document";if((r==null?void 0:r.stickerMessage)!=null)return"sticker";if((r==null?void 0:r.imageMessage)!=null)return"image";if((r==null?void 0:r.extendedContentMessage)!=null)return"xma-image"}l.getMediaTypeForVideo=e,l.getMediaTypeFromConsumerMessage=s}),98);
__d("MpsMediaToBridge",["FBLogger","MAWAckLevel","MAWAudioUtils","MAWDbMedia","MAWImageUtils","MAWMsgType","WAHashUtils","WALongInt","WATimeUtils","getMediaTypeFromConsumerMessage"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("getMediaTypeFromConsumerMessage").getMediaTypeFromConsumerMessage(e.proto);if(t!=null)return s(t)}function s(e){return e==="ptt"?o("MAWMsgType").MSG_TYPE.PTT:e==="image"?o("MAWMsgType").MSG_TYPE.IMAGE:e==="video"?o("MAWMsgType").MSG_TYPE.VIDEO:e==="gif"?o("MAWMsgType").MSG_TYPE.GIF:e==="sticker"?o("MAWMsgType").MSG_TYPE.STICKER:e==="document"?o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:e==="xma-image"?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function u(t){var n,r,a,i=t.deserialize().encryptedTransportMessage(),l=i==null?void 0:i.consumerMessage();if(!(i==null||l==null)){var s=e(l);if(s!=null){var u={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),externalId:t.getExternalId(),forwardingScore:0,groupId:(n=i.proto.metadata)==null?void 0:n.groupId,groupIndex:(r=i.proto.metadata)==null?void 0:r.groupIndex,groupSize:(a=i.proto.metadata)==null?void 0:a.groupSize,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,msgId:t.getMsgId(),sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:s};return{kind:"bridgeMsg",value:u}}}}function c(e,t,n){var r,a,i={height:n==null||(r=n.transport)==null||(r=r.ancillary)==null||(r=r.thumbnail)==null?void 0:r.thumbnailHeight,width:n==null||(a=n.transport)==null||(a=a.ancillary)==null||(a=a.thumbnail)==null?void 0:a.thumbnailWidth},l={height:t==null?void 0:t.height,width:t==null?void 0:t.width};if(e==="Sticker"){var s;i=(s=o("MAWImageUtils")).boundHeightWidth(i.height,i.width,s.STICKER_THUMBNAIL_MAX_SIZE),l=s.boundHeightWidth(l.height,l.width,s.STICKER_THUMBNAIL_MAX_SIZE)}return{previewHeight:i.height,previewHeightLarge:l.height,previewWidth:i.width,previewWidthLarge:l.width}}function d(e,t,n,r){var a,i,l,s,u,d,m,p,_,f=e.ancillary,g=e.integral;if(!(f==null||g==null)&&!(f.receiverFetchId!=null||(g==null?void 0:g.receiverFetchId)!=null)){var h=n.getMsgId(),y=g==null||(a=g.transport)==null||(a=a.integral)==null?void 0:a.mediaKeyTimestamp,C=g==null||(i=g.transport)==null||(i=i.integral)==null?void 0:i.fileSha256,b=C!=null?o("WAHashUtils").toPlaintextHash(C):void 0,v=f.waveform!=null?o("MAWAudioUtils").serializeWaveform(f.waveform):void 0;return babelHelpers.extends({accessibilitySummaryText:f.accessibilityLabel,defaultFilename:r,duration:((l=f.seconds)!=null?l:0)*1e3,filenames:r!=null?(s={},s[h]=r,s):void 0,filesize:o("WALongInt").numberOrThrowIfTooLarge((u=g==null||(d=g.transport)==null||(d=d.ancillary)==null?void 0:d.fileLength)!=null?u:0),gifPlayback:f.gifPlayback,hasMedia:!0,hasPreviewMedia:(g==null||(m=g.transport)==null||(m=m.ancillary)==null?void 0:m.thumbnail)!=null},f.hdType!=null?{hdTypes:(p={},p[h]=f.hdType,p)}:{},{mediaId:o("MAWDbMedia").convertNumberToMediaId(0),mediaType:t,messagesSortOrderMs:(_={},_[h]=n.topLevel.timestampMs,_),msgIds:[h],offlineAttachmentId:b,plaintextHash:b},c(t,f,g),{sortOrderMs:y!=null?o("WATimeUtils").castLongIntToMillisTime(y):void 0,threadJid:n.getChatJid(),transportKey:"WhatsApp",ts:n.getUnixTs(),waveformData:v})}}function m(t,n){var o,a,i=(o=t.documentMessage())==null?void 0:o.fileName,l=(a=t.attachmentMessage())==null?void 0:a.payload;if(l!=null){var s=e(t);if(s==null){r("FBLogger")("mps").mustfix("media type is null for attachment message");return}return d(l,s,n,i)}}function p(e){var t,n=(t=e.message.deserialize().encryptedTransportMessage())==null?void 0:t.consumerMessage();if(n==null)return e;var r=m(n,e.message);return r==null||e.supplementals.push({kind:"bridgeMedia",value:r}),e}l.getMediaTypeForMessage=e,l.getMediaTypeForServerMediaType=s,l.mediaToBridge=u,l.getBridgeFromAttachmentTransport=d,l.getBridgeMediaFromConsumerMessage=m,l.processAttachment=p}),98);
__d("maybeConvertMessageTextMentionsV2ToV1",["WACommon.pb"],(function(t,n,r,o,a,i,l){function e(e){if(e==null||e.text==null||e.mentions==null||e.mentions.length===0)return e;var t=e.text,n=[],r=[],a=0;for(var i of e.mentions){var l=i.offset,s=i.length,u=i.mentionedJid,c=i.mentionType;c!==o("WACommon.pb").MENTION_MENTION_TYPE.PROFILE||l==null||s==null||u==null||(r.push(u+"@msgr"),n.push(t.substring(a,l)),n.push("@"+u+"@msgr"),a=l+s)}return r.length===0?e:(n.push(t.substring(a)),babelHelpers.extends({},e,{text:n.join(""),mentionedJid:r,mentions:[]}))}l.default=e}),98);
__d("mwv2MessageIsEmojiOnly",["EmojiRenderer","EmoticonRenderer","ReStoreVaulting"],(function(t,n,r,o,a,i,l){"use strict";var e=/^[ \r\n\s]*$/;function s(t,n){if(t==null)return!1;var r=o("ReStoreVaulting").maybeUnvault(t),a=o("EmojiRenderer").parse(r).map(function(e){return{length:e.length,offset:e.offset}}),i=n?o("EmoticonRenderer").parse(r).map(function(e){return{length:e.chars.length,offset:e.offset}}):[],l=a.concat(i);if(l.length===0)return!1;var s=l.sort(function(e,t){return e.offset-t.offset|0}),u={contents:0},c={contents:0},d=s.some(function(t){u.contents===t.offset?(u.contents=u.contents+t.length|0,c.contents=u.contents):c.contents=t.offset;var n=r.substring(u.contents,c.contents);return u.contents=t.offset+t.length|0,e.test(n)===!1}),m=u.contents!==r.length&&!e.test(r.substring(c.contents));return d?!1:!m}l.default=s}),98);
__d("MpsMessageTextToBridge",["MAWAckLevel","MAWMpsGating","MAWVault","WAJids","WAMsgType","maybeConvertMessageTextMentionsV2ToV1","mwv2MessageIsEmojiOnly"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i,l,s=e.deserialize().encryptedTransportMessage(),u=s==null?void 0:s.consumerMessage(),c=(u==null||(t=u.payload)==null||(t=t.content)==null?void 0:t.messageText)&&r("maybeConvertMessageTextMentionsV2ToV1")(u==null||(n=u.payload)==null||(n=n.content)==null?void 0:n.messageText);if(!(u==null||c==null||s==null)){var d=(a=c.text)!=null?a:"";o("MAWMpsGating").isFullMpsEnabled()&&!r("mwv2MessageIsEmojiOnly")(d,!0)&&(d+="*"),d=o("MAWVault").vault(d);var m={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),commands:c.commands,content:d,externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,mentionedJids:c.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,specialTextSize:(i=(l=u.metadata)==null?void 0:l.specialTextSize)!=null?i:void 0,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.TEXT};return{kind:"bridgeMsg",value:m}}}l.messageTextToBridgeMsg=e}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WAJids").createJidUtils({platform:"msgr"}),s=(function(){function t(e,t){this.message=e,this.topLevel=t}t.fromTopLevel=function(n){return new t(n,n)},t.fromSupplemental=function(n,a){var e,i=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(n.payload),l={messageId:n.messageId,payload:n.payload,senderId:r("nullthrows")((e=i.proto.metadata)==null?void 0:e.senderId),threadId:a.threadId,timestampMs:n.timestampMs};return new t(l,a)};var n=t.prototype;return n.getChatJid=function(){return o("WAJids").unsafeCoerceToChatJid(this.message.threadId)},n.getExternalId=function(){return this.message.messageId},n.getMsgId=function(){return o("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)},n.getSenderJid=function(){return e.toUserJid(this.message.senderId)},n.topLevelMetadata=function(){return t.fromTopLevel(this.topLevel)},n.isAuthorMe=function(){return o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())===this.message.senderId},n.getAuthor=function(){return this.isAuthorMe()?o("WAJids").AUTHOR_ME:this.getSenderJid()},n.getUnixTs=function(){return o("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)},n.deserialize=function(){return o("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)},t})();l.MpsMessageToBridgeWrapper=s}),98);
__d("MpsReceiverFetchInfoToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a,i,l=e.ancillary,s=e.integral,u=(n=s==null?void 0:s.receiverFetchId)!=null?n:l==null?void 0:l.receiverFetchId,c=s==null||(r=s.transport)==null||(r=r.ancillary)==null?void 0:r.mimetype;if(!(u==null||c==null)){var d=(a=l==null?void 0:l.width)!=null?a:0,m=(i=l==null?void 0:l.height)!=null?i:0;return{accessibilitySummaryText:l==null?void 0:l.accessibilityLabel,mimetype:c,msgId:t.getMsgId(),previewHeight:m,previewWidth:d,receiverFetchId:u,sortOrderMs:o("WATimeUtils").castLongIntToMillisTime(t.message.timestampMs),threadJid:t.getChatJid(),transportKey:"WhatsApp",type:"sticker"}}}function s(t,n){var r,o=(r=t.stickerMessage())==null?void 0:r.payload;if(o!=null)return e(o,n)}function u(e){var t,n=(t=e.message.deserialize().encryptedTransportMessage())==null?void 0:t.consumerMessage();if(n==null)return e;var r=s(n,e.message);return r==null||e.supplementals.push({kind:"bridgeReceiverFetchInfo",value:r}),e}l.getReceiverFetchInfoForAttachmentTransport=e,l.getReceiverFetchInfoFromConsumerMessage=s,l.processReceiverFetchInfo=u}),98);
__d("WAMedia",[],(function(t,n,r,o,a,i){"use strict";var e="Image",l="Video",s="Ptt",u="Gif",c="Sticker",d="DocumentFile",m={IMAGE:e,VIDEO:l,PTT:s,GIF:u,STICKER:c,DOCUMENT_FILE:d};i.IMAGE=e,i.VIDEO=l,i.PTT=s,i.GIF=u,i.STICKER=c,i.DOCUMENT_FILE=d,i.MEDIA_TYPE=m}),66);
__d("MpsXmaToBridge",["MAWAckLevel","MAWBridgeXMA","MAWDbMedia","MAWDbXMA","MAWParseCollapsibleIdFromXMADataClass","MAWXMAUtils","MWXMAV2IsCollapsibleXMA","MWXMAV2XmaDataClass","MpsMediaToBridge","MpsReceiverFetchInfoToBridge","WAArmadilloXMA.pb","WAHashUtils","WAJids","WALongInt","WAMedia","WATimeUtils","maybeConvertMessageTextMentionsV2ToV1","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=["actionContentBlob"];function s(e){var t,n,o;if(((t=(n=e.payload.messageText)==null?void 0:n.length)!=null?t:0)>0)return r("maybeConvertMessageTextMentionsV2ToV1")({commands:e.payload.commands,mentionedJid:e.payload.mentionedJid,mentions:e.payload.mentions,text:e.payload.messageText});var a=(o=e.associatedMessage())==null||(o=o.consumerMessage())==null||(o=o.payload)==null||(o=o.content)==null?void 0:o.messageText;if(a!=null&&a.text!=null)return r("maybeConvertMessageTextMentionsV2ToV1")(a)}function u(e){if(e!=null){var t=o("WATimeUtils").castLongIntToUnixTime(e);if(t!=null){var n=o("WATimeUtils").cappedMillisecondsUntil(t);if(n!=null){var r=n<=0;return{countdownTs:t,isExpiredXmaMsg:r,millisecondsUntilCountdownTs:n}}}}}function c(e){var t,n=e.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null?void 0:t.extendedContentMessage();if(!(n==null||r==null||o("MAWXMAUtils").isXMAStoryReply(r.payload.targetType))){var a,i=o("MWXMAV2XmaDataClass").parseXmaDataClass(r.payload.xmaDataclass);o("MWXMAV2IsCollapsibleXMA").isCollapsibleXMA(i)&&(a=o("MAWParseCollapsibleIdFromXMADataClass").parseCollapsibleIdFromXMADataClass(i));var l=s(r),c=u(r==null?void 0:r.payload.targetExpiringAtSec),d=babelHelpers.extends({ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid()},a!=null?{collapsibleId:a}:{},{commands:l==null?void 0:l.commands,content:l==null?void 0:l.text,externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isExpiredXmaMsg:c==null?void 0:c.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(r.payload.targetType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(r.payload.targetType),isForwarded:!1,isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(r.payload.targetType),isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(r.payload.targetType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(r.payload.targetType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(r.payload.targetType),isPostPrivateReply:o("MAWXMAUtils").isXMAPostPrivateReply(r.payload.targetType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(r.payload.targetType),isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(r.payload.targetType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(r.payload.targetType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(r.payload.targetType),isStoryShare:o("MAWXMAUtils").isXMAStoryShare(r.payload.targetType),mentionedJids:l==null?void 0:l.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:"XMA",xmaMessageType:r.payload.targetType});return{kind:"bridgeMsg",value:d}}}function d(t){var n,a,i,l,s,u,c,d,m,p,_=t.message,f=t.topLevel;if(f.value.type_!=="XMA")return t;var g=_.deserialize().encryptedTransportMessage(),h=g==null||(n=g.armadillo())==null?void 0:n.extendedContentMessage();if(g==null||h==null)return t;var y=h.payload.ctas.map(function(t){var n=t.actionContentBlob,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return r}),C=r("nullthrows")(h.payload.targetType),b=C===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT,v=b?[null,h.previews().at(0)]:[h.previews().at(0),h.favicon()],S=v[0],R=v[1],L=S==null||(a=S.integral)==null||(a=a.transport)==null||(a=a.integral)==null?void 0:a.fileSha256,E=L!=null?o("WAHashUtils").toPlaintextHash(L):void 0,k=R==null||(i=R.integral)==null||(i=i.transport)==null||(i=i.integral)==null?void 0:i.fileSha256,I=k!=null?o("WAHashUtils").toPlaintextHash(k):void 0,T=(l=h.headerImage())==null||(l=l.integral)==null||(l=l.transport)==null||(l=l.integral)==null?void 0:l.fileSha256,D=T!=null?o("WAHashUtils").toPlaintextHash(T):void 0,x=o("WAMedia").MEDIA_TYPE.IMAGE,$=o("MAWBridgeXMA").mediaTypeToMimeType(x),P={author:_.getAuthor(),contentRef:h.payload.contentRef,ctas:y.slice(1),defaultCTA:y.at(0),defaultPreviewMediaId:o("MAWDbMedia").convertNumberToMediaId(0),defaultPreviewMediaPlaintextHash:E,duration:null,faviconMediaId:o("MAWDbMedia").convertNumberToMediaId(0),faviconPlaintextHash:I,filesize:o("WALongInt").numberOrThrowIfTooLarge((s=S==null||(u=S.integral)==null||(u=u.transport)==null||(u=u.ancillary)==null?void 0:u.fileLength)!=null?s:0),hasMedia:E!=null,hasXmaFaviconMedia:k!=null,hasXmaHeaderMedia:T!=null,headerMediaId:o("MAWDbMedia").convertNumberToMediaId(0),headerMediaPlaintextHash:D,headerTitle:h.payload.headerTitle,maxSubtitleNumOfLines:h.payload.maxSubtitleNumOfLines,maxTitleNumOfLines:h.payload.maxTitleNumOfLines,mediaType:x,msgId:t.message.getMsgId(),offlineAttachmentId:E,overlayIconGlyph:h.payload.overlayIconGlyph,overlayTitle:h.payload.overlayTitle,playableUrlMimeType:$,previewHeight:S==null||(c=S.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.thumbnailHeight,previewHeightLarge:S==null||(d=S.ancillary)==null?void 0:d.height,previewUrlMimeType:$,previewWidth:S==null||(m=S.integral)==null||(m=m.transport)==null||(m=m.ancillary)==null||(m=m.thumbnail)==null?void 0:m.thumbnailWidth,previewWidthLarge:S==null||(p=S.ancillary)==null?void 0:p.width,subtitleText:h.payload.subtitleText,targetId:h.payload.targetId,targetType:C,targetUsername:h.payload.targetUsername,threadJid:t.message.getChatJid(),titleText:h.payload.titleText,ts:t.message.getUnixTs(),xmaDataclass:h.payload.xmaDataclass,xmaId:o("MAWDbXMA").convertNumberToXMAId(0),xmaLayoutType:h.payload.xmaLayoutType};return t.supplementals.push({kind:"bridgeXMA",value:P}),t}function m(e){var t,n,r=e.message.deserialize().encryptedTransportMessage(),a=r==null||(t=r.armadillo())==null?void 0:t.extendedContentMessage(),i=a==null||(n=a.associatedMessage())==null?void 0:n.consumerMessage();if(i==null)return e;var l=o("MpsMediaToBridge").getBridgeMediaFromConsumerMessage(i,e.message);l!=null&&e.supplementals.push({kind:"bridgeMedia",value:l});var s=o("MpsReceiverFetchInfoToBridge").getReceiverFetchInfoFromConsumerMessage(i,e.message);return s!=null&&e.supplementals.push({kind:"bridgeReceiverFetchInfo",value:s}),e}function p(e){var t,n=e.message.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null?void 0:t.extendedContentMessage(),o=u(r==null?void 0:r.payload.targetExpiringAtSec);if(o==null)return e;var a=o.countdownTs,i=o.millisecondsUntilCountdownTs;return e.supplementals.push({kind:"bridgeXMAStartCountdown",value:{msgs:[{countdownTs:a,millisecondsUntilCountdownTs:i,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),e}l.computeXmaContent=s,l.getExpiredXMAParams=u,l.xmaToBridge=c,l.processXmaAttachment=d,l.processXmaAssociatedMessageAttachment=m,l.processXmaExpiration=p}),98);
__d("MpsNoteReplyToBridge",["MAWAckLevel","MAWVault","MpsMediaToBridge","MpsReceiverFetchInfoToBridge","MpsXmaToBridge","WALongInt","WATimeUtils","getMediaTypeFromConsumerMessage","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e==null?void 0:e.videoContent(),n=e==null?void 0:e.stickerContent(),a=t!=null?t:n;if(a!=null){var i=t!=null?o("getMediaTypeFromConsumerMessage").getMediaTypeForVideo(t):void 0,l=n!=null?"sticker":void 0,s=r("nullthrows")(i!=null?i:l);return o("MpsMediaToBridge").getMediaTypeForServerMediaType(s)}}function s(t){var n,r,a=t.deserialize().encryptedTransportMessage(),i=a==null||(n=a.armadillo())==null?void 0:n.noteReply();if(!(a==null||i==null)){var l=i.payload,s=l.noteText,u=l.noteTimestampMs,c=l.textContent,d=i.payload.noteTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(i.payload.noteTimestampMs)):void 0,m=o("MpsXmaToBridge").getExpiredXMAParams(d),p=t.message.senderId,_=e(i),f={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),content:(c==null?void 0:c.text)==null?void 0:o("MAWVault").vault(c.text),editCount:0,externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isExpiredMsg:!1,isForwarded:!1,isNoteReply:!0,msgId:t.getMsgId(),replyContent:{noteContent:m!=null&&m.isExpiredXmaMsg?void 0:o("MAWVault").vault((r=s==null?void 0:s.text)!=null?r:""),replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(o("WALongInt").numberOrThrowIfTooLarge(u)):void 0,replyToMsgId:t.getMsgId(),replyToUserId:p,replyType:"LIGHTWEIGHT_STATUS"},sender:p,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:_!=null?_:"Text"};return{kind:"bridgeMsg",value:f}}}function u(e){var t,n=e.message.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.noteReplyMessage;if(n==null||r==null)return e;var a=r.noteTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(r.noteTimestampMs)):void 0,i=o("MpsXmaToBridge").getExpiredXMAParams(a);if(i==null)return e;var l=i.countdownTs,s=i.millisecondsUntilCountdownTs;return e.supplementals.push({kind:"bridgeNoteReplyStartCountdown",value:{msgs:[{countdownTs:l,millisecondsUntilCountdownTs:s,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),e}function c(t){var n,r=t.message,a=r.deserialize().encryptedTransportMessage(),i=a==null||(n=a.armadillo())==null?void 0:n.noteReply(),l=i==null?void 0:i.videoContent(),s=i==null?void 0:i.stickerContent(),u=l!=null?l:s,c=e(i);if(u==null||c==null)return t;var d=o("MpsMediaToBridge").getBridgeFromAttachmentTransport(u,c,r);if(d!=null&&t.supplementals.push({kind:"bridgeMedia",value:d}),s!=null){var m=o("MpsReceiverFetchInfoToBridge").getReceiverFetchInfoForAttachmentTransport(s,r);m!=null&&t.supplementals.push({kind:"bridgeReceiverFetchInfo",value:m})}return t}l.noteReplyToBridge=s,l.processNoteReply=u,l.processNoteReplyAttachment=c}),98);
__d("MpsRavenToBridge",["EphemeralMediaViewMode","FBLogger","MAWAckLevel","MAWDbMedia","MAWProtobufDeserializers","RavenMessagingState","WAArmadilloApplication.pb","WAHashUtils","WAMsgType","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=(t=e.deserialize().encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content,o=(n=r==null?void 0:r.ravenMessage)!=null?n:r==null?void 0:r.ravenMessageMsgr;return!!o}function s(t){if(e(t)){var n={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),content:"",externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,msgId:t.getMsgId(),sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.RAVEN};return{kind:"bridgeMsg",value:n}}}function u(e){var t,n,a,i=e.message,l=(t=i.deserialize().encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content,s=(n=l==null?void 0:l.ravenMessage)!=null?n:l==null?void 0:l.ravenMessageMsgr;if(s==null)return e;var u,c;e.supplementalMessages.forEach(function(e){var t,n,r=(t=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(e.payload).encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content;u=(n=r==null?void 0:r.ravenMessage)!=null?n:r==null?void 0:r.ravenMessageMsgr,c=r==null?void 0:r.ravenActionNotifMessage});var d=(typeof u=="object"&&u!==null||typeof u=="function")&&(typeof u.videoMessage=="object"&&u.videoMessage!==null||typeof u.videoMessage=="function")?o("WAMsgType").MSG_TYPE.VIDEO:(typeof u=="object"&&u!==null||typeof u=="function")&&(typeof u.imageMessage=="object"&&u.imageMessage!==null||typeof u.imageMessage=="function")?o("WAMsgType").MSG_TYPE.IMAGE:null;if(d==null&&c==null)return r("FBLogger")("mps").mustfix("Unsupported Raven type"),e;var m=e.message.getMsgId(),p=s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.VIEW_ONCE?r("EphemeralMediaViewMode").READ_ONCE:s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.ALLOW_REPLAY?r("EphemeralMediaViewMode").REPLAYABLE:s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.KEEP_IN_CHAT?r("EphemeralMediaViewMode").PERMANENT:s.ephemeralType===void 0?void 0:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s.ephemeralType)})(),_={duration:null,ephemeralMediaState:c==null?r("RavenMessagingState").UNSEEN:r("RavenMessagingState").SEEN,ephemeralMediaViewMode:p,filesize:100,hasMedia:!1,hasPreviewMedia:!1,mediaId:o("MAWDbMedia").convertNumberToMediaId(0),mediaType:d||o("WAMsgType").MSG_TYPE.IMAGE,messagesSortOrderMs:(a={},a[m]=e.message.topLevel.timestampMs,a),msgIds:[e.message.getMsgId()],plaintextHash:o("WAHashUtils").stringToPlaintextHash("aaa"),previewHeight:1,previewHeightLarge:1,previewWidth:1,previewWidthLarge:1,sortOrderMs:o("WATimeUtils").castLongIntToMillisTime(e.message.topLevel.timestampMs),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()};return e.supplementals.push({kind:"bridgeMedia",value:_}),e}l.isRavenMsg=e,l.ravenToBridge=s,l.processRavenAttachment=u}),98);
__d("MpsReactionToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=(t=e.deserialize().encryptedTransportMessage())==null||(t=t.consumerMessage())==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.reactionMessage;if(r!=null){var a=r.senderTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WATimeUtils").castLongIntToMillisTime(r.senderTimestampMs)):e.getUnixTs(),i=(n=r.text)!=null?n:"",l=i===""?{reaction:{actorId:e.message.senderId,chatJid:e.getChatJid(),messageId:e.topLevelMetadata().getMsgId()},type:"delete"}:{reaction:{actorId:e.message.senderId,chatJid:e.getChatJid(),messageId:e.topLevelMetadata().getMsgId(),reaction:i,ts:a},type:"upsert"};return{kind:"bridgeReactionAction",value:l}}}l.reactionMessageToBridgeMsg=e}),98);
__d("MpsReplyToBridge",["MpsToBridgeMessageId","MpsTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.message,r=e.topLevel,a=n.deserialize().encryptedTransportMessage();if(r.kind!=="bridgeMsg"||a==null)return e;var i=(t=a.proto.metadata)==null?void 0:t.quotedMessage;if(i==null||i.stanzaId==null||r.value.replyContent!=null)return e;var l=o("MpsTypes").toMessageId(i.stanzaId);return r.value=babelHelpers.extends({},r.value,{replyContent:{isBumpMsg:!1,replyToMsgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(n.message.threadId,l),replyType:"MESSAGE"}}),babelHelpers.extends({},e,{topLevel:r})}l.processReplyMessage=e}),98);
__d("MpsRevokeMessageToBridgeMsg",["MAWAckLevel","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.deserialize().encryptedTransportMessage(),r=n==null||(t=n.consumerMessage())==null||(t=t.payload)==null||(t=t.applicationData)==null?void 0:t.revoke;if(!(n==null||r==null))return{kind:"bridgeMsg",value:{ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.REVOKED}}}l.revokeMessageToBridgeMsg=e}),98);
__d("MpsScreenshotActionToBridgeMsg",["MAWAckLevel","MAWEphemeralUtils","WAArmadilloApplication.pb","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=e.deserialize().encryptedTransportMessage(),a=r==null||(t=r.armadillo())==null||(t=t.proto.payload)==null||(t=t.content)==null?void 0:t.screenshotAction;if(!(a==null||r==null)){var i=o("MAWEphemeralUtils").getEphemeralScreenshotActionData((n=a.screenshotType)!=null?n:o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE,e.getSenderJid(),e.isAuthorMe()),l={ack:o("MAWAckLevel").ACK.received,adminContent:i.ephemeralScreenshotActionContent,adminType:i.ephemeralScreenshotActionType,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:l}}}l.screenshotActionToBridgeMsg=e}),98);
__d("WAParseReadOnlyMetadataDataclassUtils",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if((e==null?void 0:e.readonlyMetadataDataclass)!=null)try{var t=JSON.parse(e==null?void 0:e.readonlyMetadataDataclass);return t}catch(e){throw r("err")("Failed to parse readonly metadata dataclass JSON")}return null}function s(t){var n,r=e(t);return(r==null||(n=r.power_up)==null?void 0:n.power_up_style)!=null}function u(t){var n,r=e(t);return(r==null||(n=r.note_metadata)==null?void 0:n.message_type)==="MENTION"}l.isPowerUp=s,l.isNoteMention=u}),98);
__d("MpsUnsupportedMessagesToBridge",["MAWAckLevel","MAWParseXMAFBConfig","MAWParseXMAUnsupportedMessageType","WACommon.pb","WAMsgType","WAParseReadOnlyMetadataDataclassUtils","gkx","justknobx","maybeConvertMessageTextMentionsV2ToV1"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i,l,s,u,c=e.deserialize().encryptedTransportMessage();if(c!=null){var d=c==null?void 0:c.consumerMessage(),m={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.FUTUREPROOF},p=(d==null||(t=d.payload)==null||(t=t.content)==null?void 0:t.messageText)&&r("maybeConvertMessageTextMentionsV2ToV1")(d==null||(n=d.payload)==null||(n=n.content)==null?void 0:n.messageText);if(p!=null){var _,f=((_=p.commands)==null?void 0:_.some(function(e){return e.commandType===o("WACommon.pb").COMMAND_COMMAND_TYPE.AI}))===!0;if(f&&!r("gkx")("12661"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"metaAiMessage"})}}var g=c==null||(a=c.armadillo())==null?void 0:a.paymentsTransactionMessage(),h=g!=null?g:c==null||(i=c.armadillo())==null?void 0:i.extendedContentMessage();if(h!=null){var y=h.payload,C=y.targetType,b=y.xmaDataclass;if(C==null||!o("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:C,xmaDataclass:b})){var v=g!=null;return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:o("MAWParseXMAUnsupportedMessageType").getXMAUnsupportedMessageType(C,b,v)})}}}var S=d==null||(l=d.stickerMessage())==null?void 0:l.payload;if(S!=null){var R,L,E=((R=S.integral)==null?void 0:R.receiverFetchId)!=null||((L=S.ancillary)==null?void 0:L.receiverFetchId)!=null;if(E&&!r("justknobx")._("3677"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"stickerReceiverFetchMessage"})}}var k=d==null||(s=d.documentMessage())==null?void 0:s.payload;if(k!=null&&r("gkx")("23924"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m)};if(o("WAParseReadOnlyMetadataDataclassUtils").isNoteMention(c.proto.metadata))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"noteMention"})};var I=d==null||(u=d.payload)==null||(u=u.content)==null?void 0:u.pollCreationMessage;if(I!=null)return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"pollCreationMessage"})}}}l.unsupportedMessagesBridgeMsg=e}),98);
__d("MpsWaAdminMsgToBridge",["MAWAckLevel","MAWGetUserDeviceChangeAdminType","MAWJids","MAWLocalizationType","MAWUserJidWrapper","WAArmadilloTransportEvent.pb","WAJids","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.deserialize(),i=(t=a.encryptedTransportEvent())==null?void 0:t.proto.event;if(i){var l=i.deviceChange,s=i.icdcAlert;if(((n=a.proto.metadata)==null?void 0:n.senderId)!=null){var u=o("WAJids").unsafeCoerceToUserJid((r=a.proto.metadata)==null?void 0:r.senderId),c=o("MAWJids").toUserJid(u),d=c===o("MAWUserJidWrapper").getMyUserJid()?[]:[o("WAJids").userIdFromJid(c)];if(s)return{kind:"bridgeMsg",value:{ack:o("MAWAckLevel").ACK.received,adminContent:d,adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ICDC_ALERT}};if(l){var m,p,_=(typeof l=="object"&&l!==null||typeof l=="function")&&"type"in l&&l.type===o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.ADDED?"add":(typeof l=="object"&&l!==null||typeof l=="function")&&"type"in l&&l.type===o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REMOVED?"remove":typeof l=="object"&&l!==null||typeof l=="function"?"update":(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+l)})();if(((m=a.proto.metadata)==null?void 0:m.senderId)==null)return;var f=o("WAJids").unsafeCoerceToUserJid((p=a.proto.metadata)==null?void 0:p.senderId),g=o("MAWJids").toUserJid(f),h=o("MAWGetUserDeviceChangeAdminType").getUserDeviceAdminType(_,g===o("MAWUserJidWrapper").getMyUserJid()),y={ack:o("MAWAckLevel").ACK.received,adminContent:d,adminType:h,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:y}}}}}l.waAdminMsgToBridgeMsg=e}),98);
__d("MpsWaPlaceholderToBridge",["MAWAckLevel","WAArmadilloTransportEvent.pb","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.deserialize().encryptedTransportEvent(),r=n==null||(t=n.proto.placeholder)==null?void 0:t.type;if(!(n==null||r==null)){var a={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:r===o("WAArmadilloTransportEvent.pb").TransportEvent$Placeholder$Type.UNAVAILABLE_MESSAGE?o("WAMsgType").MSG_TYPE.UNAVAILABLE:o("WAMsgType").MSG_TYPE.CIPHERTEXT};return{kind:"bridgeMsg",value:a}}}l.waPlaceholderToBridgeMsg=e}),98);
__d("MpsXmaMentionToBridge",["MAWUserJidWrapper","MAWXMAUtils","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.message,r=e.topLevel,a=n.deserialize().encryptedTransportMessage(),i=a==null||(t=a.armadillo())==null?void 0:t.extendedContentMessage(),l=i==null?void 0:i.payload.targetType,s=o("MAWXMAUtils").isXMAStoryMention(l)||o("MAWXMAUtils").isFBXMAPostMention(l);if(a==null||i==null||!s||r.kind!=="bridgeMsg")return e;var u=o("MAWXMAUtils").isFBXMAPostMention(l),c=o("WAJids").interpretAsUserJid(n.getChatJid()),d=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),m=c==null?d:o("WAJids").userIdFromJid(c),p={mentionedUserId:m!=null?m:d,timestampMs:o("WATimeUtils").castToMillisTime(n.message.timestampMs)},_=u?babelHelpers.extends({},p,{replyType:"FB_POST_MENTION"}):babelHelpers.extends({},p,{replyType:"FB_STORY_MENTION"});return r.value=babelHelpers.extends({},r.value,{replyContent:_}),e}l.processXmaMention=e}),98);
__d("MpsXmaStoryReplyToBridge",["MAWAckLevel","MAWDbMedia","MAWMsgType","MAWUserJidWrapper","MAWXMAUtils","MpsMediaToBridge","MpsXmaToBridge","WAHashUtils","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=(n=o("WAJids").interpretAsUserJid(t.getChatJid()))!=null?n:t.getSenderJid(),a=o("MAWUserJidWrapper").getMyUserJid();return o("MAWXMAUtils").isXMAStoryProducerReply(e.targetType)?t.isAuthorMe()?a:r:t.isAuthorMe()?r:a}function s(t){var n,r,a,i,l=t.deserialize().encryptedTransportMessage(),s=l==null||(n=l.armadillo())==null?void 0:n.extendedContentMessage();if(!(l==null||s==null||!o("MAWXMAUtils").isXMAStoryReply(s.payload.targetType))){var u=o("MpsXmaToBridge").computeXmaContent(s),c=s.previews().at(0),d=c==null||(r=c.integral)==null||(r=r.transport)==null||(r=r.integral)==null?void 0:r.fileSha256,m=d!=null?o("WAHashUtils").toPlaintextHash(d):void 0,p=(a=s.payload.ctas.at(0))==null?void 0:a.nativeUrl,_=e(s.payload,t),f=o("MAWXMAUtils").isXMAStoryProducerReply(s.payload.targetType),g=(i=s.associatedMessage())==null?void 0:i.consumerMessage(),h=g!=null?o("MpsMediaToBridge").getMediaTypeForMessage(g):null,y=o("MpsXmaToBridge").getExpiredXMAParams(s==null?void 0:s.payload.targetExpiringAtSec),C=f?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:o("MAWDbMedia").convertNumberToMediaId(1),storyMediaPlaintextHash:y!=null&&y.isExpiredXmaMsg?void 0:m,storyMsgType:o("MAWMsgType").MSG_TYPE.IMAGE,storyOwnerId:o("WAJids").extractUserId(_),storyUrl:p!=null?p:"",timestampMs:o("WATimeUtils").castToMillisTime(t.message.timestampMs)}:{replyType:"STORY",storyMediaPlaintextHash:y!=null&&y.isExpiredXmaMsg?void 0:m,storyOwnerId:o("WAJids").extractUserId(_),storyUrl:p!=null?p:"",timestampMs:o("WATimeUtils").castToMillisTime(t.message.timestampMs)},b={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),commands:u==null?void 0:u.commands,content:u==null?void 0:u.text,externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,isStoryReply:!0,mentionedJids:u==null?void 0:u.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:t.getMsgId(),replyContent:C,sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:h!=null?h:"Text"};return{kind:"bridgeMsg",value:b}}}l.storyReplyToBridge=s}),98);
__d("MpsMessageToBridge",["FBLogger","MAWMsgType","MpsAdminMsgToBridge","MpsBumpMessageToBridgeMsg","MpsEditToBridge","MpsEphemeralMessageToBridge","MpsForwardToBridge","MpsFutureproofToBridge","MpsMediaToBridge","MpsMessageTextToBridge","MpsMessageToBridgeWrapper","MpsNoteReplyToBridge","MpsRavenToBridge","MpsReactionToBridge","MpsReceiverFetchInfoToBridge","MpsReplyToBridge","MpsRevokeMessageToBridgeMsg","MpsScreenshotActionToBridgeMsg","MpsUnsupportedMessagesToBridge","MpsWaAdminMsgToBridge","MpsWaPlaceholderToBridge","MpsXmaMentionToBridge","MpsXmaStoryReplyToBridge","MpsXmaToBridge","WAGetPlatformFromStanzaId","WAJids","WAStanzaUtils","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[o("MpsUnsupportedMessagesToBridge").unsupportedMessagesBridgeMsg,o("MpsMessageTextToBridge").messageTextToBridgeMsg,o("MpsMediaToBridge").mediaToBridge,o("MpsAdminMsgToBridge").adminMsgToBridgeMsg,o("MpsScreenshotActionToBridgeMsg").screenshotActionToBridgeMsg,o("MpsRevokeMessageToBridgeMsg").revokeMessageToBridgeMsg,o("MpsBumpMessageToBridgeMsg").bumpMessageToBridgeMsg,o("MpsWaAdminMsgToBridge").waAdminMsgToBridgeMsg,(e=o("MpsXmaToBridge")).xmaToBridge,o("MpsXmaStoryReplyToBridge").storyReplyToBridge,o("MpsRavenToBridge").ravenToBridge,o("MpsNoteReplyToBridge").noteReplyToBridge,o("MpsWaPlaceholderToBridge").waPlaceholderToBridgeMsg,o("MpsFutureproofToBridge").futureproofBridgeMsg],u=[o("MpsEditToBridge").editMessageToBridgeMsg,o("MpsReactionToBridge").reactionMessageToBridgeMsg],c=[o("MpsEditToBridge").processEditedMessage,o("MpsReplyToBridge").processReplyMessage,o("MpsMediaToBridge").processAttachment,o("MpsEphemeralMessageToBridge").processEphemeralMessage,o("MpsReceiverFetchInfoToBridge").processReceiverFetchInfo,e.processXmaAttachment,e.processXmaAssociatedMessageAttachment,o("MpsXmaMentionToBridge").processXmaMention,o("MpsRavenToBridge").processRavenAttachment,o("MpsForwardToBridge").processForwarding,o("MpsNoteReplyToBridge").processNoteReply,o("MpsNoteReplyToBridge").processNoteReplyAttachment,e.processXmaExpiration];function d(e,t){for(var n of e)try{var a=n(t);if(a!=null)return a}catch(e){var i=o("WAStanzaUtils").toStanzaId(t.getExternalId()),l=o("WAJids").interpretAsGroupJid(t.getChatJid())!=null;throw r("FBLogger")("mps").catching(r("getErrorSafe")(e)).mustfixThrow("mpsMessagetoBridge failed to create a bridge object for message from platform: %s, is_group: %s",o("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(i),l)}}function m(e){var t=o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromTopLevel(e.toplevelProtobuf),n=d(s,t);if(n!=null&&!(n.kind==="bridgeMsg"&&n.value.type_===o("MAWMsgType").MSG_TYPE.ADMIN&&n.value.adminType==null)){if(n.kind==="bridgeMsg"&&n.value.type_===o("MAWMsgType").MSG_TYPE.FUTUREPROOF)return{supplementals:[],topLevel:n};var r=e.supplementalProtobufs.values().toArray().map(function(t){return d(u,o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromSupplemental(t,e.toplevelProtobuf))}).filter(Boolean),a=c.reduce(function(e,t){return t(e)},{message:t,supplementalMessages:e.supplementalProtobufs,supplementals:r,topLevel:n});return{supplementals:a.supplementals,topLevel:a.topLevel}}}l.mpsFullMessagetoBridge=m}),98);
__d("WebMpsReverbWrites",["asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";function e(e,t,r,o,a,i,l){var s=[a,o,r];return l((function(){var l=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var l,u=yield n.stores.supplemental.getByIndex("[threadId+topLevelMessageId+supplementalKey]",s);if(!(((l=u==null?void 0:u.timestampMs)!=null?l:0)>=i)){var c={messageId:e,payload:t,supplementalKey:r,threadId:a,timestampMs:i,topLevelMessageId:o};yield n.stores.supplemental.bulkUpsert("[threadId+topLevelMessageId+supplementalKey]",[{item:c,selector:s}])}});return function(e){return l.apply(this,arguments)}})())}function l(e,t,r){var o=e.messageId,a=e.threadId;return r((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r,i=yield n.stores.message.getByIndex("[threadId+messageId]",[a,o]);if(!(i!=null&&!i.isTransportErrorPlaceholder)&&!(i!=null&&i.isTransportErrorPlaceholder&&t.isTransportErrorPlaceholder)){var l=yield n.stores.deleted.getByIndex("[threadId+deletedMessageId]",[e.threadId,e.messageId]),s=babelHelpers.extends({},e,{debugFlags:t.debugFlags,expiryTimestampMs:t.expiryTimestampMs,isLocalOnlyMessage:t.isLocalOnly,isTransportErrorPlaceholder:t.isTransportErrorPlaceholder,timestampMs:(r=i==null?void 0:i.timestampMs)!=null?r:e.timestampMs});if(l)l.payload=s.payload,yield n.stores.deleted.bulkPut([l]),i!=null&&(i.timestampMs=e.timestampMs,yield n.stores.message.bulkPut([i]));else{var u=yield n.stores.message.bulkUpsert("[threadId+messageId]",[{item:s,selector:[a,o]}]),c=u[0],d=yield n.stores.tags.readIndexRange("[threadId+messageId+tag]",{only:[a,o]});d.length>0&&(yield n.stores.tags.bulkDelete(d.map(function(e){return e.pk}))),t.tags.length>0&&(yield n.stores.tags.bulkAdd(t.tags.map(function(e){return{messageId:s.messageId,messagePk:c,tag:e,threadId:s.threadId,timestampMs:s.timestampMs}})))}}});return function(e){return r.apply(this,arguments)}})())}i.upsertSupplementalToReverb=e,i.upsertTopLevelToReverb=l}),66);
__d("WebReverbSchema",["FBLogger","MAWWormOdsLogger","WAHex","Worm","WormEAR","WormIDbDriver","WormMemoryDriver"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{"[threadId+messageId]":{fields:["threadId","messageId"],unique:!0},"[threadId+timestampMs+messageId]":{fields:["threadId","timestampMs","messageId"],unique:!1},expiryTimestampMs:{fields:["expiryTimestampMs"],unique:!1},messageId:{fields:["messageId"],unique:!1},timestampMs:{fields:["timestampMs"],unique:!1}},nonEncryptedFields:["timestampMs","expiryTimestampMs","messageId","debugFlags"],primaryKey:"pk",secure:!0},s={autoIncrement:!0,indexes:{"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!0}},nonEncryptedFields:["topLevelMessageId"],primaryKey:"pk",secure:!0},u={autoIncrement:!0,indexes:{"[threadId+deletedMessageId]":{fields:["threadId","deletedMessageId"],unique:!0},"[threadId+timestampMs+deletedMessageId]":{fields:["threadId","timestampMs","deletedMessageId"],unique:!0},"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!1},deletionTimestampMs:{fields:["deletionTimestampMs"],unique:!1}},nonEncryptedFields:["topLevelMessageId","deletionTimestampMs"],primaryKey:"pk",secure:!0},c={autoIncrement:!0,indexes:{"[threadId+messageId+tag]":{fields:["threadId","messageId","tag"],unique:!0},"[threadId+tag+timestampMs]":{fields:["threadId","tag","timestampMs"],unique:!1}},nonEncryptedFields:["messageId","timestampMs","messagePk","tag"],primaryKey:"pk",secure:!0},d={autoIncrement:!1,indexes:{},primaryKey:"pk",secure:!0},m={dbMetadata:d,deleted:u,message:e,supplemental:s,tags:c};function p(e,t,n,a,i){var l=o("WAHex").parseHex(t),s="reverb",u=new(o("WormEAR")).WormEAR(m,s,l),c=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(e,s,m,u,o("MAWWormOdsLogger").wormOdsWorkerLogger,{blockingErrorThreshold:n,onBlockingError:a,onTransactionError:function(t){if(t instanceof o("WormEAR").DecryptionError){var e=t;r("FBLogger")("mps").mustfix("EAR decryption error in store: %s. Dropping corrupted entity %s",e.store,e.maybeHashedPk),c.runInTransaction([e.store],"readwrite",function(t){var n=t.stores[e.store];return e.maybeHashedPk!=null?n.delete(e.maybeHashedPk):n.clear()},"delete-corrupted-entity")}}}),i);return c}function _(e){return new(o("Worm")).WormDatabase(new(o("WormMemoryDriver")).WormMemoryDriver(m),e)}l.schema=m,l.makeWebReverbSchema=p,l.makeInMemoryReverbSchema_TEST_ONLY=_}),98);
__d("WebReverbDB",["MpsLogger","WAResolvable","WebReverbSchema","asyncToGeneratorRuntime","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;function u(e,t,n,r,o){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i,l){var u;try{var c=o("WebReverbSchema").makeWebReverbSchema(t,n,a,i,l);return e=c,u=yield c.init(),s.resolve(c),u}catch(e){throw o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("Error performing WebReverb init"),e}}),c.apply(this,arguments)}function d(){if(e==null)throw r("err")("Reverb DB is not initialized");return e}function m(){return s.promise}function p(e){return"WebReverb - "+e}l.makeWebReverb=u,l.getWebReverbDB=d,l.getDbPromise=m,l.mpsOp=p}),98);
__d("WebMpsMigrationReverbTxns",["FBLogger","MpsTypes","Promise","WebMpsReverbWrites","WebReverbDB","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return r("FBLogger")("mps").tags(["mps_migration"])};function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){try{yield o("WebReverbDB").getWebReverbDB().runInTransaction(["message","supplemental","deleted","tags","dbMetadata"],"readwrite",function(r){var o=function(t){return t(r)};return(e||(e=n("Promise"))).all(t.map(function(e){return d(e,o)}))},"mps-persist-messages-migrated-from-maw-db")}catch(e){throw r.endFail("reverb_write_failure"),e}}),c.apply(this,arguments)}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=[],i=[];a.push(o("WebMpsReverbWrites").upsertTopLevelToReverb(t.toplevelProtobuf,{actionType:o("MpsTypes").ActionType.UpsertTopLevel,debugFlags:["MAW_Migration"],isLocalOnly:!0,isTransportErrorPlaceholder:!1,tags:[],targetMessageId:t.toplevelProtobuf.messageId},r));for(var l of t.supplementalsToInsert.entries()){var u=l[0],c=l[1];a.push(o("WebMpsReverbWrites").upsertSupplementalToReverb(c.messageId,c.payload,u,t.toplevelProtobuf.messageId,t.toplevelProtobuf.threadId,c.timestampMs,r))}var d=yield(e||(e=n("Promise"))).allSettled(a),m=d.filter(function(e){return e.status==="rejected"});for(var p of m)s().mustfix("Failed to upsert a row into Reverb: %s",p.reason);if(m.length>0)throw s().mustfixThrow("Reverb upsert failed");var _=function*(){var e=f[0],o=f[1];i.push(r((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=[t.toplevelProtobuf.threadId,t.toplevelProtobuf.messageId,e],o=yield n.stores.supplemental.getByIndex("[threadId+topLevelMessageId+supplementalKey]",r);o!=null&&(yield n.stores.supplemental.bulkDelete([o.pk]))});return function(e){return r.apply(this,arguments)}})()))};for(var f of t.supplementalsToDelete.entries())yield*_();var g=yield e.allSettled(i),h=g.filter(function(e){return e.status==="rejected"});for(var y of h)s().mustfix("Failed to delete a row from Reverb: %s",y.reason);if(h.length>0)throw s().mustfixThrow("Reverb delete failed")}),m.apply(this,arguments)}function p(){return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readonly",function(e){return e.stores.dbMetadata.get("db-info")},"mps-get-db-metadata")}function _(e,t){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield t.stores.dbMetadata.bulkAdd([babelHelpers.extends({},e,{pk:"db-info"})])});return function(e){return t.apply(this,arguments)}})(),"mps-set-db-metadata")}catch(e){throw t.endFail("migration_state_write_failure"),e}}function f(e,t){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n,r,o,a,i=yield t.stores.dbMetadata.get("db-info");if(i==null)throw s().mustfixThrow("DB Metadata row does not exist, cannot update the cursor");var l=i,u=babelHelpers.extends({},l,{mawDBMigrationCurrentMessageId:(n=e.mawDBMigrationCurrentMessageId)!=null?n:l.mawDBMigrationCurrentMessageId,mawDBMigrationCurrentThread:(r=e.mawDBMigrationCurrentThread)!=null?r:l.mawDBMigrationCurrentThread,mawDBMigrationStartMs:(o=e.mawDBMigrationStartMs)!=null?o:l.mawDBMigrationStartMs,mawDBMigrationState:(a=e.mawDBMigrationState)!=null?a:l.mawDBMigrationState});yield t.stores.dbMetadata.bulkPut([u])});return function(e){return t.apply(this,arguments)}})(),"mps-update-db-metadata")}catch(e){throw t.endFail("migration_state_write_failure"),e}}l.persistMigratedMessagesFromMawDb=u,l.getMawMpsMigrationState=p,l.setInitialMawMpsMigrationState=_,l.setMawMpsMigrationState=f}),98);
__d("MpsReverbInit",["BrowserLockManager","MAWMpsMigrationStatus","MpsTypes","Promise","WebMpsMigrationReverbTxns","WebReverbDB","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s="wmi_mps_m4_non_migrated_status_lock",u="wmi_mps_new_db_status_lock",c;function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=yield o("WebReverbDB").makeWebReverb(t.name,t.strEncKey,t.blockingErrorThreshold,t.onBlockingError,t.qplEvent),i=a.isNewDb,l;if(i)l=!0;else{var d=yield o("WebMpsMigrationReverbTxns").getMawMpsMigrationState();l=(d==null?void 0:d.mawDBMigrationState)===o("MpsTypes").MawDBMigrationState.Completed}if(r("BrowserLockManager")==null){o("MAWMpsMigrationStatus").setStatus(l);return}var m=yield r("BrowserLockManager").query(),p=m.held.some(function(e){return e.name===u});if(p){o("MAWMpsMigrationStatus").setStatus(!0);return}if(l===!0){var _=m.held.some(function(e){return e.name===s})||m.pending.some(function(e){return e.name===s});_?l=!1:i===!0&&(c=r("BrowserLockManager").request(u,function(){return new(e||(e=n("Promise")))(function(){})}))}l||(c=r("BrowserLockManager").request(s,function(){return new(e||(e=n("Promise")))(function(){})})),o("MAWMpsMigrationStatus").setStatus(l)}),m.apply(this,arguments)}l.initReverb=d}),98);
__d("WAOfflineUtils",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["INIT","OFFLINE_RESUME","ONLINE"]),l=n("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});i.ServerRPCMode=e,i.WAClientInfraOfflineProgress=l}),66);
__d("groupBy",[],(function(t,n,r,o,a,i){function e(e,t){return e.reduce(function(e,n){return(e[t(n)]=e[t(n)]||[]).push(n),e},{})}i.default=e}),66);
__d("isInstamadilloEB",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("670")===!0}l.default=e}),98);/*FB_PKG_DELIM*/
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","WebDriverConfig","cr:3024","gkx","isEmpty"],(function(t,n,r,o,a,i,l){var e,s="javascript-sandbox",u="OverrideServer",c="www_sandbox",d="www_tier",m=(function(){function t(){}var o=t.prototype;return o.patchRequestHeaders=function(o){var t={},a=r("RTISubscriptionManagerConfig").bladerunner_www_sandbox,i=r("RTISubscriptionManagerConfig").is_intern;if((e||(e=r("isEmpty")))(r("WebDriverConfig").auxiliaryServiceInfo))a!=null&&(t[s]=a);else{var l,m=(l=r("WebDriverConfig").auxiliaryServiceInfo.BladeRunner)!=null?l:r("WebDriverConfig").auxiliaryServiceInfo["BladeRunner-sandcastle"];m!=null?(typeof m.ip_address=="string"?t[u]=m.ip_address+":18295":typeof m.hostname=="string"&&(t[u]=m.hostname+":18295"),typeof r("WebDriverConfig").originHost=="string"&&(t[c]="www."+r("WebDriverConfig").originHost)):a!=null&&(t[s]=a)}if(i===!0&&(t[d]="intern"),r("WebDriverConfig").isTestRunning&&r("gkx")("20919")){var p=n("cr:3024")==null?void 0:n("cr:3024").get();p!=null&&(t.is_test="true",t.original_request_id=p)}r("gkx")("20929")&&(t["Accept-Ack"]="RSAck");for(var _ in o)t[_]=o[_];return t.http_referer=window.location.href,t},t})(),p=new m,_=p;l.default=_}),98);
__d("BladeRunnerLogger",["FBLogger","ODS"],(function(t,n,r,o,a,i,l){var e,s="bladerunner_js_client",u={info:"info",warning:"warning",exception:"exception"},c=(function(){function t(){this.setFBLoggerLevel(1)}var n=t.prototype;return n.info=function(t){this.$2>=2&&r("FBLogger")(s).info("BladeRunner info: %s",t),this.$3(u.info,t)},n.warn=function(t){this.$2>=1&&r("FBLogger")(s).warn("BladeRunner warn: %s",t),this.$3(u.warning,t)},n.exception=function(t,n){n===void 0&&(n="");var e=n+" "+t.toString();this.$2>=0&&r("FBLogger")(s).warn("BladeRunner exception: %s, %s",n,t.toString()),this.$3(u.exception,e)},n.trimForLogging=function(t){var e=1024;return typeof t=="string"&&t.length>e?"[trimmed]:"+t.substring(0,e)+"...":t},n.bumpCounter=function(n,r){r===void 0&&(r=1),(e||(e=o("ODS"))).bumpEntityKey(2966,"BladeRunnerClient",n,r)},n.setClientSessionId=function(t){this.$1=t},n.setFBLoggerLevel=function(t){this.$2=t},n.$3=function(t,n){},t})(),d=new c,m=d;l.default=m}),98);
__d("BladeRunnerTypes",[],(function(t,n,r,o,a,i,l){var e={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6},s={BLADE_RUNNER:1,GATEWAY:2};l.StreamFrameType=e,l.StreamRequestType=s}),98);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(t,n,r,o,a,i,l){var e=(function(){function e(){}var t=e.prototype;return t.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")},t.getInstrumentationData=function(){if(this.instrumentationData!=null&&this.instrumentationData.length>0)try{return JSON.parse(this.instrumentationData)}catch(e){return null}else return null},t.updateRetryRequestPayload=function(t){t!=null?this.payload=r("Base64").encode(t):this.payload=null},e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.requestType=f(n.requestType),t.payload=y(n.payload),t.headers=v(n.headers),t.extraHeader=y(n.extraHeader),t.requestTarget=y(n.requestTarget),t.instrumentationData=y(n.instrumentationData),t},e})(),s=(function(){function e(){}e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.dataId=g(n.dataId),t.data=y(n.data),t.shouldAck=R(n.shouldAck),t};var t=e.prototype;return t.rawData=function(){if(this.data==null)throw new Error("Expected data");return this.data},t.rawDataSize=function(){return this.data==null?0:this.data.length},t.decodeData=function(){if(this.data==null)throw new Error("Expected data");return r("Base64").decode(this.data)},t.setData=function(t){this.data=r("Base64").encode(t)},t.getInstrumentationData=function(){return this.instrumentationData!=null?JSON.parse(this.instrumentationData):null},e})(),u=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.dataId=f(n.dataId),t.success=S(n.success),t.message=y(n.message),t.code=g(n.code),t},e})();u.ACK_CODE_LANDED_AND_ACCEPTED=20,u.ACK_CODE_LANDED_BUT_NOT_ACCEPTED=21,u.ACK_CODE_FAILED_TO_LAND=50;var c=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=g(n.streamId),t.message=y(n.message),t},e})(),d=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.status=f(n.status),t.message=y(n.message),t.code=g(n.code),t.shouldRetry=R(n.shouldRetry),t.retryDelayMs=g(n.retryDelayMs),t},e})(),m=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.newBody=y(n.newBody),t.newExtraHeader=y(n.newExtraHeader),t.patchExtraHeader=y(n.patchExtraHeader),t.killBody=R(n.killBody),t.temporary=R(n.temporary),t},e})(),p=(function(){function t(){}var n=t.prototype;return n.getRequest=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")},n.getData=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")},n.getDataAck=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")},n.getStatusUpdate=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")},n.getLog=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")},n.getRewriteRequest=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")},n.getStreamId=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck.streamId;throw new Error("Frame with unexpected type")},n.isInstrumented=function(){return this.type===o("BladeRunnerTypes").StreamFrameType.REQUEST?this.getRequest().instrumentationData!=null:this.type===o("BladeRunnerTypes").StreamFrameType.DATA?this.getData().instrumentationData!=null:!1},t.readObject=function(a){var n=new t;switch(n.type=f(a.type),n.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:n.request=e.readObject(C(a.request));break;case o("BladeRunnerTypes").StreamFrameType.DATA:n.data=s.readObject(C(a.data));break;case o("BladeRunnerTypes").StreamFrameType.DATA_ACK:n.dataAck=u.readObject(C(a.dataAck));break;case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:n.statusUpdate=d.readObject(C(a.statusUpdate));break;case o("BladeRunnerTypes").StreamFrameType.LOG:n.log=c.readObject(C(a.log));break;case o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:n.rewriteRequest=m.readObject(C(a.rewriteRequest));break;default:return r("BladeRunnerLogger").warn("Frame with unexpected type: "+n.type),null}return n},t.newRequestFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.REQUEST,e.request=n,e},t.newDataFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.DATA,e.data=n,e},t.newDataAckFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.DATA_ACK,e.dataAck=n,e},t.newStatusUpdateFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE,e.statusUpdate=n,e},t.newLogFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.LOG,e.log=n,e},t.newRewriteRequestFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST,e.rewriteRequest=n,e},t})(),_=(function(){function e(e,t,n){this.batchId=e,this.frames=t,this.instrumentationData=n}var t=e.prototype;return t.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")},t.getInstrumentationData=function(){if(this.instrumentationData!=null)try{return JSON.parse(this.instrumentationData)}catch(e){return null}else return null},t.getInstrumentationDataDfTraceId=function(){if(this.instrumentationData!=null)try{var e,t=JSON.parse(this.instrumentationData);return(e=t.dataFlowTracingData)==null?void 0:e.traceId}catch(e){return null}else return null},t.write=function(){return JSON.stringify(this)},t.isInstrumented=function(){return this.getFrames().some(function(e){return e.isInstrumented()})},e.read=function(n){var t=JSON.parse(n),r=t.batchId||0,o=[];for(var a of t.frames){var i=p.readObject(a);i!=null&&o.push(i)}var l=t.instrumentationData||null;return new e(r,o,l)},e})();function f(e){if(typeof e=="number")return e;throw new Error("Expected number")}function g(e){return e==null?null:f(e)}function h(e){if(typeof e=="string")return e;throw new Error("Expected string")}function y(e){return e==null?null:h(e)}function C(e){if(typeof e=="object"&&e!=null)return e;throw new Error("Expected object")}function b(e){if(typeof e=="object"&&e!=null){var t=e,n={};return Object.keys(t).forEach(function(e){var r=t[e];typeof r=="string"&&r!=null&&(n[e]=r)}),n}throw new Error("Expected string map")}function v(e){return e==null?null:b(e)}function S(e){if(typeof e=="boolean"&&e!=null)return e;throw new Error("Expected boolean")}function R(e){return e==null?null:S(e)}l.GatewayStreamRequest=e,l.GatewayStreamData=s,l.GatewayStreamDataAck=u,l.GatewayStreamLog=c,l.GatewayStreamStatusUpdate=d,l.GatewayStreamRewriteRequest=m,l.GatewayStreamFrame=p,l.GatewayStreamBatch=_}),98);
__d("RequestStreamE2EClientLoggerEvent",[],(function(t,n,r,o,a,i){var e=Object.freeze({RECEIVED:"received",SENT:"sent",FAILURE:"failure",PUBACK:"puback"});i.default=e}),66);
__d("RequestStreamE2EClientLoggerMessageType",[],(function(t,n,r,o,a,i){var e=Object.freeze({REQUEST_STREAM:"request_stream",AMENDMENT:"amendment",AMENDMENT_ACK:"amendment_ack",CANCEL:"cancel",RESPONSE:"response",RESPONSE_ACK:"response_ack",TIMED_REQUEST:"timed_request",INTERRUPT:"interrupt"});i.default=e}),66);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","getErrorSafe","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){var e=1e3,s=(function(){function t(e,t,n){this.$2=e,this.$1=t,this.$3=n}var n=t.prototype;return n.onProxyResponse=function(t){var e,n;this.$4(t);var a=[];for(var i of t.getFrames())this.$2.witnessFrame(i)&&a.push(i);var l=this.$2.getRequest();(e=l.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").SENT,{},(n=t.getInstrumentationData())==null?void 0:n.auxId,null,t.getInstrumentationDataDfTraceId()),a.length>0&&this.$5(new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(t.batchId,a,t.instrumentationData))},n.onDisconnect=function(){this.$2.resetErrors();var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=this.$2.getRequest().streamId,e.status=o("BladeRunnerStreamStatus").StreamStatus.CLOSED,e.shouldRetry=!0,e.retryDelayMs=0;var t=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(null,[o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(e)]);this.onProxyResponse(t)},n.$4=function(n){var t=this,a=n.getFrames().filter(function(e){return e.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(var i of a){var l=i.getStatusUpdate();if(l.status==o("BladeRunnerStreamStatus").StreamStatus.CLOSED||l.status==o("BladeRunnerStreamStatus").StreamStatus.REJECTED){this.$2.onError();var s=l.shouldRetry!=null&&l.shouldRetry,u=l.message!=null?l.message:"null";if(s&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){l.status=o("BladeRunnerStreamStatus").StreamStatus.STOPPED;var c=e;l.retryDelayMs!=null&&(c=l.retryDelayMs),r("BladeRunnerLogger").info("Can retry: stream "+l.streamId+" closed with status "+l.status+", message "+u+". Error count: "+this.$2.getErrorCount()+", retryDelay "+c+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString()),this.$2.getRetryRequestScheduled()?r("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(r("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),c>0?r("setTimeoutAcrossTransitions")(function(){return t.$6()},c):this.$6())}else r("BladeRunnerLogger").info("Will not retry: stream "+l.streamId+" closed with status "+l.status+", message "+u+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+s.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),s?r("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):r("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(l.streamId)}}},n.$6=function(){if(this.$2.setRetryRequestScheduled(!1),this.$2.isAlive()){var e=this.$1.getUpdatedRequestBody();e!=null&&this.$2.updateRetryRequestPayload(e),this.$3.sendRetryStreamRequest(this.$2)}},n.$5=function(t){r("BladeRunnerLogger").bumpCounter("send_to_handler");var e=[];this.$1.onBatch(t);for(var n of t.getFrames())try{switch(n.type){case o("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(n.getData()),e.push(n.getData());break;case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(n.getStatusUpdate().status);break;case o("BladeRunnerTypes").StreamFrameType.LOG:var a=n.getLog().message;a!=null&&this.$1.onLog(a);break;case o("BladeRunnerTypes").StreamFrameType.DATA_ACK:break;default:throw new Error("Frame with unexpected type")}}catch(e){var i=r("getErrorSafe")(e);r("BladeRunnerLogger").bumpCounter("send_to_handler_error"),r("BladeRunnerLogger").exception(i,"Failed sending frame to stream handler")}this.$7(e)},n.$7=function(t){var e=[];for(var n of t)if(n.shouldAck===!0&&n.dataId!=null){var r=new(o("BladeRunnerTypesInternal")).GatewayStreamDataAck;r.streamId=n.streamId,r.dataId=n.dataId,r.success=!0,e.push(r)}this.$3.sendDataAcks(e)},t})();l.default=s}),98);
__d("RtiRequestStreamE2eClientBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("819"),s=o("FalcoLoggerInternal").create("rti_request_stream_e2e_client_batch",e),u=s;l.default=u}),98);
__d("RtiRequestStreamE2eClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1857112"),s=o("FalcoLoggerInternal").create("rti_request_stream_e2e_client",e),u=s;l.default=u}),98);
__d("RequestStreamE2ELogger",["ConstUriUtils","FBLogger","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RtiRequestStreamE2eClientBatchFalcoEvent","RtiRequestStreamE2eClientFalcoEvent","WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="rs_debug_logging",u=["FBGQLS:COMMENT_CREATE_SUBSCRIBE","FBGQLS:COMMENT_LIKE_SUBSCRIBE","FBGQLS:FEEDBACK_COMMENT_PERMISSION_TOGGLE_SUBSCRIBE","FBGQLS:FEEDBACK_TYPING_SUBSCRIBE","GRAPHQL:CometNotificationsReceiveLiveQuery"],c=0;function d(){var e=Date.now();return c>=e?c+=1:c=e,c.toString()}var m=(function(){function e(e,t,n,r,a,i,l,s,u,c){this.$10=[],this.$11=!1,this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,this.$12=c!=null?c:!1;var d=o("ConstUriUtils").getUri(window.location.href);d&&(this.$13=d.getDomain())}var t=e.prototype;return t.logE2EEvent=function(t,n,r,o,a,i,l){if(r===void 0&&(r=null),o===void 0&&(o=null),a===void 0&&(a=null),i===void 0&&(i=null),l===void 0&&(l=null),this.$3!=="Falco"){var e={request_id:this.$1,resume_id:"0",retry_id:a,transport:this.$2,method:this.$3,use_case:this.$4,request_log_context:this.$5,force_log_context:this.$6,e2e_sample_rate:this.$7,message_type:t,event:n,timestamp_ms:d(),aux_id:o,additional_data:r,dgw_stream_group_logging_id:this.$8,dgw_count_prior_streams_in_group:this.$9,domain:this.$13,df_trace_id:i};this.$14(e,l)}},t.$14=function(t,n){if(!this.$12){r("RtiRequestStreamE2eClientFalcoEvent").log(function(){return t});return}if(this.$10.push(t),this.$11||t.event==r("RequestStreamE2EClientLoggerEvent").FAILURE||t.message_type==r("RequestStreamE2EClientLoggerMessageType").RESPONSE){var e={events:this.$10};r("RtiRequestStreamE2eClientBatchFalcoEvent").log(function(){return e}),this.$10=[],this.$11=!0}},t.getRequestId=function(){return this.$1},e})();function p(e,t,n){if(e==null||e.method==null)return null;var r=!1;if(u.includes(e.method)&&(r=!0),t==null||t.length==0)return null;var o=JSON.parse(t);return o.requestId==null?null:new m(o.requestId,n,e.method,_(e.method,e),o.requestLogContext,o.forceLogContext,o.sampleRate,o.dgwStreamGroupLoggingId,o.dgwCountPriorStreamsInGroup,r)}function _(e,t){if(e==="FBLQ"&&t.config_id)return t.config_id;if(e==="SKY"){if(t.topic){var n=t.topic.lastIndexOf("/");return n>0?t.topic.substr(0,n):t.topic}return}return e}function f(e,t,n,o,a,i){if(a===void 0&&(a=null),i===void 0&&(i=null),!(e==null||e.requestId==null||e.clientLoggingDisabled!=null)){var l={request_id:e.requestId,resume_id:"0",transport:t,e2e_sample_rate:e.sampleRate,message_type:n,event:o,timestamp_ms:d(),aux_id:e.auxId,additional_data:a,df_trace_id:i};r("RtiRequestStreamE2eClientFalcoEvent").log(function(){return l})}}l.RequestStreamE2ELogger=m,l.createStreamLogger=p,l.logRequestStreamE2EEventStatic=f}),98);
__d("RequestStreamTransport",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);i.RequestStreamTransport=e}),66);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","CurrentUser","FBMqttChannel","MqttPublishListener","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamTransport","getErrorSafe","justknobx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="Connected",u="Disconnected",c="/br_sr",d="/sr_res",m=null;function p(e){var t,n;switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:return(t=e.request)==null?void 0:t.getInstrumentationData();case o("BladeRunnerTypes").StreamFrameType.DATA:return(n=e.data)==null?void 0:n.getInstrumentationData()}return null}function _(e){switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:return r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM;case o("BladeRunnerTypes").StreamFrameType.DATA:return r("RequestStreamE2EClientLoggerMessageType").AMENDMENT}return null}function f(e){if(e===null)return null;switch(e){case o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:return"Accepted";case o("BladeRunnerStreamStatus").StreamStatus.REJECTED:return"Rejected";case o("BladeRunnerStreamStatus").StreamStatus.STARTED:return"Started";case o("BladeRunnerStreamStatus").StreamStatus.STOPPED:return"Stopped";case o("BladeRunnerStreamStatus").StreamStatus.CLOSED:return"Closed"}return null}function g(e){var t,n={};return e==null||(t=e.frames)==null||t.forEach(function(e){if(e.type===o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE){var t,r=(t=e.statusUpdate)==null?void 0:t.status,a=f(r);a!==null&&(n.flow_status=a)}}),n}function h(e,t){var n,r;switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:t.data_base64_size=(n=e.request)==null||(n=n.payload)==null||(n=n.length)==null?void 0:n.toString();break;case o("BladeRunnerTypes").StreamFrameType.DATA:t.data_base64_size=(r=e.data)==null||(r=r.rawDataSize())==null?void 0:r.toString();break}return null}function y(e,t,n){var a,i=p(e);if(i!=null){var l=_(e);if(l!=null){var s=null;switch(t){case o("MqttPublishListener").MqttPublishEvent.SENT:s=r("RequestStreamE2EClientLoggerEvent").SENT;break;case o("MqttPublishListener").MqttPublishEvent.ACKED:s=r("RequestStreamE2EClientLoggerEvent").PUBACK;break;case o("MqttPublishListener").MqttPublishEvent.NOT_ACKED:case o("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED:case o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR:s=r("RequestStreamE2EClientLoggerEvent").FAILURE,n.reason==null&&(n.reason=t);break}if(s!=null)if(h(e,n),((a=e.request)==null?void 0:a.e2eLogger)!=null&&i.clientLoggingDisabled==null){var u;(u=e.request)==null||u.e2eLogger.logE2EEvent(l,s,n,i.auxId)}else o("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(i,o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,l,s,n)}}}var C=(function(){function t(e){this.$1=[],this.$2=0,this.$3=0,this.$4=null,this.$5=0,this.$6=new Map,this.$7=e!=null?e:r("FBMqttChannel"),this.$8=new Map,r("BladeRunnerLogger").setClientSessionId(r("uuidv4")()),this.$9()}t.get=function(){return m==null&&(m=new t(r("FBMqttChannel"))),m};var a=t.prototype;return a.sendNewStreamRequest=function(n,o){var e=new(r("BladeRunnerEventHandler"))(n,o,this),a=n.getRequest();if(this.$6.set(a.streamId,e),!this.$10()){this.$11(e,a.streamId);return}this.getStreamCount()<=t.maxStreamCount?this.$12(a):(r("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),r("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(n.getRequest().getHeaders())),this.$11(e,a.streamId))},a.sendRetryStreamRequest=function(t){this.$12(t.getRequest())},a.sendCancel=function(t){r("BladeRunnerLogger").bumpCounter("socket_send_cancel");var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=t.streamId,e.status=o("BladeRunnerStreamStatus").StreamStatus.CLOSED,this.$13(e,t),this.removeStream(t.streamId)},a.sendAmendment=function(t,n,a){r("BladeRunnerLogger").bumpCounter("socket_send_amendment");var e=new(o("BladeRunnerTypesInternal")).GatewayStreamData;e.streamId=t,e.setData(n),a!=null&&(e.instrumentationData=a),this.$14(e)},a.sendAmendmentWithAck=function(a,i,l){var t=this;r("BladeRunnerLogger").bumpCounter("socket_send_amendment");var s=this.$15(),u=new(o("BladeRunnerTypesInternal")).GatewayStreamData;u.streamId=a,u.setData(i),u.shouldAck=!0,u.dataId=s,l!=null&&(u.instrumentationData=l);var c=new(e||(e=n("Promise")))(function(e,n){t.$8.set(s,{resolve:e,reject:n})});return this.$14(u),c},a.$14=function(t){this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newDataFrame(t)),this.$16()},a.sendDataAcks=function(t){r("BladeRunnerLogger").bumpCounter("socket_send_data_ack",t.length),this.$17(t)},a.removeStream=function(t){this.$6.delete(t)},a.getStreamCount=function(){return this.$6.size},a.getNextStreamId=function(){return this.$5++,this.$5},a.onMQTTStateChanged=function(t){this.$16(),!(t!=u&&t!=s||this.$4==t)&&(this.$4=t,r("BladeRunnerLogger").info("MQTTStateChanged: "+t),t==u?(r("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$18()):t==s&&r("BladeRunnerLogger").bumpCounter("mqtt_state_connected"))},a.$12=function(t){if(r("BladeRunnerLogger").bumpCounter("socket_send_request"),this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(t)),!this.$16()){var e;(e=t.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"MQTT Not Connected"})}},a.$13=function(t,n){if(this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(t)),this.$16()){var e;(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").SENT)}},a.$17=function(t){for(var e of t)this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(e));this.$16()},a.$19=function(){return this.$2++,this.$2},a.$15=function(){return this.$3++,this.$3},a.$16=function(){var e=!1;if(this.$7.getConnectionState()===s&&this.$1.length>0)try{this.$20(this.$1),e=!0}catch(e){}finally{this.$1=[]}return e},a.$20=function(t){var e=this,n=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(this.$19(),t),a=n.write();if(a.length>this.$21()){var i=Math.floor(t.length/2);if(i===0){t.forEach(function(e){return y(e,o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR,{reason:"too long"})});var l=new Error("Publish is too long: "+a.length);throw l.stack,this.$22(n,l,"Publish is too long"),l}this.$20(t.slice(0,i)),this.$20(t.slice(i,t.length))}else try{r("BladeRunnerLogger").info("send message to "+c+" ("+a.length+" bytes)");var s={qos:1,skipBuffer:!1};if(n.isInstrumented()){var u=Date.now();s.listener={onEvent:function(n){var e=(Date.now()-u).toString();t.forEach(function(t){y(t,n,{latency:e})})}}}this.$7.publish(c,a,s).catch(function(t){e.$22(n,t,"Failed publishing to MQTT")}),r("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(e){var d=r("getErrorSafe")(e);throw this.$22(n,d,"Failed publishing to MQTT"),d}},a.$9=function(){var e=this;r("BladeRunnerLogger").info("Starting socket with endpoint "+this.$7.getEndpoint()+" useragent "+navigator.userAgent),this.onMQTTStateChanged(this.$7.getConnectionState()),this.$7.subscribeChannelEvents({onMQTTStateChanged:function(n){e.onMQTTStateChanged(n)},onJSError:function(t){var e=t!=null&&typeof t.isRecoverable=="boolean"?t.isRecoverable:!1;e?r("BladeRunnerLogger").bumpCounter("mqtt_channel_recoverable_error"):(r("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof t=="object"&&t!=null?t.toString():"unknown error")+", "+JSON.stringify(t)),r("BladeRunnerLogger").bumpCounter("mqtt_channel_error"))}}),this.$7.subscribe(c,function(e){throw new Error("Unexpected response: "+c+" "+e.toString())}),this.$7.subscribe(d,function(t){e.$23(t)})},a.$23=function(t){var e=o("BladeRunnerTypesInternal").GatewayStreamBatch.read(t);this.processBatch(e)},a.$22=function(t,n,a){for(var e of t.getFrames())if(e.type===o("BladeRunnerTypes").StreamFrameType.REQUEST){var i=e.getRequest(),l=this.$6.get(i.streamId);l!=null&&this.$24(l,i.streamId,o("BladeRunnerStreamStatus").StreamStatus.CLOSED,!0,null)}else if(e.type===o("BladeRunnerTypes").StreamFrameType.DATA){var s=e.getData(),u=s.dataId;if(s.shouldAck!=null&&s.shouldAck&&u!=null){var c=new(o("BladeRunnerTypesInternal")).GatewayStreamDataAck;c.streamId=s.streamId,c.dataId=u,c.success=!1,c.code=o("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_FAILED_TO_LAND,c.message=a,this.$25(c)}}r("BladeRunnerLogger").info("Failed publishing to MQTT: "+n.message),r("BladeRunnerLogger").bumpCounter("mqtt_publish_error")},a.$25=function(t){var e=this.$8.get(t.dataId);e!=null&&(this.$8.delete(t.dataId),t.success?e.resolve(!0):t.code===o("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_LANDED_BUT_NOT_ACCEPTED?e.resolve(!1):e.reject(t.message))},a.processBatch=function(t){try{o("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(t.getInstrumentationData(),o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").RECEIVED,g(t),t.getInstrumentationDataDfTraceId()),r("BladeRunnerLogger").bumpCounter("socket_process_batch");var e=JSON.stringify(t);r("BladeRunnerLogger").info("Received batch ("+e.length+" bytes)");var n=null;for(var a of t.getFrames()){var i=a.getStreamId();if(n==null&&(n=i),i!=null&&n!=i)throw new Error("Received batch with frames for multiple streams");a.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.$25(a.getDataAck())}if(n!=null){var l=this.$6.get(n);l!=null?l.onProxyResponse(t):r("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+n)}else r("BladeRunnerLogger").info("Received batch with no frames")}catch(e){var s=r("getErrorSafe")(e);throw r("BladeRunnerLogger").exception(s,"Failed processing batch from MQTT"),r("BladeRunnerLogger").bumpCounter("socket_process_batch_error"),s}},a.$18=function(){this.$6.forEach(function(e,t,n){e.onDisconnect()})},a.$11=function(t,n){this.$24(t,n,o("BladeRunnerStreamStatus").StreamStatus.REJECTED,!1,0)},a.$24=function(t,n,r,a,i){var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=n,e.status=r,e.shouldRetry=a,e.retryDelayMs=i;var l=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(null,[o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(e)]);t.onProxyResponse(l)},a.$10=function(){return r("CurrentUser").isLoggedIn()?!0:(r("BladeRunnerLogger").bumpCounter("request_stream_user_logged_out"),!1)},a.$21=function(){var e=1048576,t=512*1024;try{var n=r("justknobx")._("317");t=n*e}catch(e){}return Math.max(t-1024,0)},t})();C.maxStreamCount=2e3,l.default=C}),98);
__d("BladeRunnerStream",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){var e,l=(function(){function t(e){this.$1=e}var r=t.prototype;return r.getStreamHandler=function(){return this.$1},r.cancel=function(){},r.amendWithAck=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return!1});function t(t){return e.apply(this,arguments)}return t})(),r.amendFireAndForget=function(t){},r.amendWithoutAck=function(t){},r.start=function(){return(e||(e=n("Promise"))).resolve()},r.isAlive=function(){return!1},r.canAmend=function(){return!1},r.getStatus=function(){return null},r.getStreamId=function(){return 0},t})();i.default=l}),66);
__d("BladeRunnerStreamState",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$1=e,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var t=e.prototype;return t.getRequest=function(){return this.$1},t.updateRetryRequestPayload=function(t){this.$1.updateRetryRequestPayload(t)},t.isAlive=function(){return!(this.$2==o("BladeRunnerStreamStatus").StreamStatus.CLOSED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.REJECTED)},t.canAmend=function(){return this.$2==o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.STARTED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.STOPPED},t.getLastStatus=function(){return this.$2},t.setLastStatus=function(t){this.$2=t},t.onError=function(){this.$3+=1},t.getErrorCount=function(){return this.$3},t.resetErrors=function(){this.$3=0},t.getRetryRequestScheduled=function(){return this.$6},t.setRetryRequestScheduled=function(t){this.$6=t},t.witnessFrame=function(t){switch(t.type){case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var e=t.getStatusUpdate(),n=!0;switch(e.status){case o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:n=!this.$4,this.$4||(this.$4=!0);break;case o("BladeRunnerStreamStatus").StreamStatus.STARTED:n=this.getLastStatus()!=o("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case o("BladeRunnerStreamStatus").StreamStatus.STOPPED:n=this.getLastStatus()==o("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case o("BladeRunnerStreamStatus").StreamStatus.CLOSED:case o("BladeRunnerStreamStatus").StreamStatus.REJECTED:default:n=!0}return this.setLastStatus(e.status),n;case o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:return this.$7(t.getRewriteRequest()),!1;default:return!0}},t.setRetriesAllowed=function(t){this.$5=t},t.getRetriesAllowed=function(){return this.$5},t.$7=function(t){if(!(t.temporary!=null||t.temporary==!0)){if(t.newBody!=null&&(this.$1.payload=t.newBody),t.newExtraHeader!=null&&(this.$1.extraHeader=t.newExtraHeader,this.$1.headers=JSON.parse(t.newExtraHeader)),t.patchExtraHeader!=null)try{var e=JSON.parse(t.patchExtraHeader),n=this.$1.extraHeader!=null?JSON.parse(this.$1.extraHeader):{};this.$1.headers==null&&(this.$1.headers={});for(var o of Object.keys(e))this.$1.headers[o]=e[o],n[o]=e[o];this.$1.extraHeader=JSON.stringify(n)}catch(e){r("BladeRunnerLogger").warn("Failed to patch header: "+t.patchExtraHeader)}t.killBody!=null&&t.killBody==!0&&(this.$1.payload=null)}},e})();l.default=e}),98);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerStreamStatus","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","asyncToGeneratorRuntime","uuidv4"],(function(t,n,r,o,a,i,l){var e,s=4,u={reason:"stream_dead"},c=(function(t){function a(e,n,o){var a;return a=t.call(this,e)||this,a.$BladeRunnerSocketStream$p_1=o,a.$BladeRunnerSocketStream$p_2=new(r("BladeRunnerStreamState"))(n),a.$BladeRunnerSocketStream$p_2.setRetriesAllowed(s),a}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i.start=function(){var t=this;return new(e||(e=n("Promise")))(function(e){t.send(),e()})},i.send=function(){var e,t,n=this.$BladeRunnerSocketStream$p_2.getRequest();(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_base64_size:(t=n.payload)==null||(t=t.length)==null?void 0:t.toString()}),this.$BladeRunnerSocketStream$p_1.sendNewStreamRequest(this.$BladeRunnerSocketStream$p_2,this.getStreamHandler())},i.amendWithAck=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var o,a=this.$BladeRunnerSocketStream$p_2.getRequest(),i=a.getInstrumentationData();if(i){var l,s;i.auxId=r("uuidv4")(),(l=a.e2eLogger)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:t==null||(s=t.length)==null?void 0:s.toString()},i.auxId)}if(this.canAmend()){if(i){var c,d;(c=a.e2eLogger)==null||c.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:t==null||(d=t.length)==null?void 0:d.toString()},i.auxId)}return this.$BladeRunnerSocketStream$p_1.sendAmendmentWithAck(a.streamId,this.$BladeRunnerSocketStream$p_3(t),i==null?null:JSON.stringify(i))}return(o=a.e2eLogger)==null||o.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,u,i==null?void 0:i.auxId),(e||(e=n("Promise"))).reject("Stream is closed or not accepted")});function o(e){return t.apply(this,arguments)}return o})(),i.amendFireAndForget=function(t){var e=this.$BladeRunnerSocketStream$p_2.getRequest(),n=e.getInstrumentationData();if(n){var o,a;n.auxId=r("uuidv4")(),(o=e.e2eLogger)==null||o.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:t==null||(a=t.length)==null?void 0:a.toString()},n.auxId)}if(this.canAmend()){if(this.$BladeRunnerSocketStream$p_1.sendAmendment(this.$BladeRunnerSocketStream$p_2.getRequest().streamId,this.$BladeRunnerSocketStream$p_3(t),n==null?null:JSON.stringify(n)),n){var i,l;(i=e.e2eLogger)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:t==null||(l=t.length)==null?void 0:l.toString()},n.auxId)}}else{var s;throw(s=e.e2eLogger)==null||s.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,u,n==null?void 0:n.auxId),new Error("Stream is closed or not accepted")}},i.amendWithoutAck=function(t){this.amendFireAndForget(t)},i.$BladeRunnerSocketStream$p_3=function(t){return typeof t=="object"?btoa(new TextDecoder("utf8").decode(t)):t},i.cancel=function(){var e,t=this.$BladeRunnerSocketStream$p_2.getRequest();(e=t.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").RECEIVED),this.isAlive()&&(this.$BladeRunnerSocketStream$p_1.sendCancel(this.$BladeRunnerSocketStream$p_2.getRequest()),this.$BladeRunnerSocketStream$p_2.setLastStatus(o("BladeRunnerStreamStatus").StreamStatus.CLOSED),this.getStreamHandler().onClientCancel())},i.isAlive=function(){return this.$BladeRunnerSocketStream$p_2.isAlive()},i.canAmend=function(){return this.$BladeRunnerSocketStream$p_2.canAmend()},i.getStatus=function(){return this.$BladeRunnerSocketStream$p_2.getLastStatus()},i.getStreamId=function(){return this.$BladeRunnerSocketStream$p_2.getRequest().streamId},a})(r("BladeRunnerStream"));l.default=c}),98);
__d("RequestStreamE2ESampling",["invariant","Random","RequestStreamE2EClientSamplingConfig","uuidv4"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return e==null?!1:e.requestId!=null&&typeof e.requestId=="string"&&e.forceLogContext!=null&&typeof e.forceLogContext=="string"}function u(e,t){var n=r("RequestStreamE2EClientSamplingConfig").sampleRate;if(n>1&&e!=null){var o=r("RequestStreamE2EClientSamplingConfig").methodToSamplingMultiplier[e];o==0?n=0:o!=null&&(n/=o)}return n==1?1:n/t}function c(e,t,n,o){var a=r("uuidv4")();(t.requestId==null||t.requestId===""||typeof t.requestId!="string")&&(e.requestId!=null&&typeof e.requestId=="string"?t.requestId=e.requestId:t.requestId=a),t.requestId+="/_"+a.substring(0,4),t.resumeId="0",n!=null?t.sampleRate=n:t.sampleRate=void 0;var i="";o!=null&&o.length>0&&(i=o),i.length>0&&(t.requestLogContext!=null&&t.requestLogContext.length>0?t.requestLogContext+=":":t.requestLogContext="",t.requestLogContext+=i),(e==null?void 0:e.method)==="Falco"&&(t.clientLoggingDisabled="Falco");var l={};for(var s of Object.keys(t).sort())l[s]=t[s];return JSON.stringify(l)}function d(t,n,o,a){n&&(!n.requestId.includes("/")&&!n.requestId.includes("#")||s(0,41721));var i=u(t.method,a!=null?a:1);return r("Random").coinflip(i)?c(t,n||{requestId:""},i,o):e(n)?c(t,n||{requestId:""},null,o):""}l.isForceLogged=e,l.getSampleRateForLogging=u,l.normalizeInstrumentationData=c,l.validateInstrumentationData=d}),98);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamTransport","cr:2046346"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){this.$2=o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,this.$1=e!=null?e:r("BladeRunnerSocket").get(),t&&(this.$2=t)}var t=e.prototype;return t.createStream=function(t,n,r,o){return this.$3(t,n,r,o)},t.requestStream=function(t,r,o,a){var e=this.$3(t,r,o,a);return e.send(),n("cr:2046346")!=null&&n("cr:2046346").startPulsarTest(),e},t.logInfo=function(t){r("BladeRunnerLogger").info(t)},t.bumpCounter=function(t){r("BladeRunnerLogger").bumpCounter(t)},t.$3=function(t,n,a,i){var e=new(o("BladeRunnerTypesInternal")).GatewayStreamRequest;return e.streamId=this.$1.getNextStreamId(),e.requestType=o("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER,e.headers=r("BladeRunnerConfig").patchRequestHeaders(t),e.extraHeader=JSON.stringify(e.headers),e.payload=n!=null?r("Base64").encode(n):null,i!=null&&(i.transport="WEB_RS_MQTT"),e.instrumentationData=o("RequestStreamE2ESampling").validateInstrumentationData(e.headers||{},i),e.e2eLogger=o("RequestStreamE2ELogger").createStreamLogger(e.headers,e.instrumentationData,this.$2),new(r("BladeRunnerSocketStream"))(a,e,this.$1)},e})();l.default=e}),98);
__d("CometRelayEF",["Bootloader","BootloaderEvents","ClientConsistencyEventEmitter","CometRouterSSREntrypoint","cometAsyncFetch","gkx","performanceAbsoluteNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map;function u(t){if(r("gkx")("26332")){var n=t.filter(function(e){return!s.has(e)});if(n.length!==0){n.forEach(function(e){o("BootloaderEvents").notifyHasteResponseEFStart("relay_3d",e)});var a=(e||(e=r("performanceAbsoluteNow")))(),i=r("cometAsyncFetch")("/ajax/relay-ef/",{data:{queries:n},method:"POST"}).then(function(t){return{fetchPredictionsEnd:(e||(e=r("performanceAbsoluteNow")))(),fetchPredictionsStart:a,payload:t}});n.forEach(function(e){return s.set(e,i)})}}}function c(e,t){var n=o("CometRouterSSREntrypoint").processRootEntryPoint(e,t);u(n.map(function(e){var t=e.name;return t}))}function d(t){if(r("gkx")("26332")){u(t);var n=(e||(e=r("performanceAbsoluteNow")))();t.forEach(function(e){var t=s.get(e);t&&t!==!0&&r("promiseDone")(t,function(t){var a=t.fetchPredictionsEnd,i=t.fetchPredictionsStart,l=t.payload;if(l!=null&&typeof l=="object"){var s,u;r("Bootloader").loadPredictedResourceMap(l.predictions[e],{onLog:function(r){return o("BootloaderEvents").notifyHasteResponseEF("relay_3d",e,{fetchPredictionsEnd:a,fetchPredictionsStart:i,fetchRsrcsStart:n,tierOne:r})}},(s=(u=l.consistency)==null?void 0:u.rev)!=null?s:null),l.consistency!=null&&r("ClientConsistencyEventEmitter").emit("newEntry",l.consistency)}}),s.set(e,!0)})}}function m(e,t){var n=o("CometRouterSSREntrypoint").processRootEntryPoint(e,t),r=n.map(function(e){var t=e.name;return t});d(r)}var p={fetchPredictedResources:m,fetchPredictedResourcesForQueries:d,fetchPredictions:c,fetchPredictionsForQueries:u};l.default=p}),98);
__d("ContextualConfigConstants",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=", ",s={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"},u={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"},c=[],d=[],m=[],p={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"},_=10,f=", ",g={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};i.ANALYTICS_SAMPLE_RATE=e,i.BUCKET_DELIMITER=l,i.CONTEXT_BUCKET_STRATEGY=s,i.CONFIG_TYPE=u,i.EMPTY_RESOLVED_CONTEXTS=c,i.EMPTY_RESOLVED_MONITORS=d,i.EMPTY_RESULT_PARAMS=m,i.ERROR=p,i.JSON_SUB_SAMPLE_RATE=_,i.LIST_DELIMITER=f,i.TYPE=g}),66);
__d("ContextualConfigResolvedContextsUtils",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e=[];for(var n of t){var r=n.bucketIndex;if(r==null)break;e.push(r)}return e},l=function(t){var e=[];for(var n of t){var r=n.bucketName;if(r===void 0)break;e.push(r)}return e},s=function(t){return t.name},u=function(t){return t.map(s)},c=function(t){var e=[];for(var n of t){var r=n.value;if(r===void 0)break;e.push(r)}return e};i.getBucketIndices=e,i.getBucketNames=l,i.getContextNames=u,i.getContextValues=c}),66);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=["cfg_ver_timestamp","policy_id","version","sample_rate"],s=function(t){return t.join(o("ContextualConfigConstants").LIST_DELIMITER)},u=function(n,r){for(var t of e)r[t]!=null&&(n[t]=r[t]);r.name&&(n.config_name=r.name)},c=function(t,n){var e=n[0],r=n[1],a=n[2],i=n[3];e!=null&&(t.exception=e.message),t.result=s(r.map(function(e){return e.value}))||"INVALID",t.context=s(o("ContextualConfigResolvedContextsUtils").getContextNames(a)),t.context_value=s(o("ContextualConfigResolvedContextsUtils").getContextValues(a)),t.bucket_name=s(o("ContextualConfigResolvedContextsUtils").getBucketNames(a)),t.monitor=s(o("ContextualConfigResolvedContextsUtils").getContextNames(i)),t.monitor_value=s(o("ContextualConfigResolvedContextsUtils").getContextValues(i))};function d(e,t,n){var r={sample_rate:o("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};return u(r,e),c(r,t),n&&(r.config_contents=JSON.stringify(e)),r}l.default=d}),98);
__d("ContextualConfigExposureEvent",["Random"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$2=e,this.$4=o("Random").random()<1/e.sample_rate,this.$3=t,this.$1=n}var t=e.prototype;return t.getData=function(){return this.$2},t.log=function(t){var e=this.$2,n=this.$3,r=this.$4;return t&&n(e),r&&this.$1(e),this},t.isSampled=function(){return this.$4},e})();l.default=e}),98);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$2=e,this.$1=t}var t=e.prototype;return t.createEvent=function(t){var e=new(r("ContextualConfigExposureEvent"))(t,this.$2,this.$1);return e},e})();function s(t,n){return new e(t,n)}l.default=s}),98);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(t,n,r,o,a,i){var e="client_event",l="navigation",s=18e4,u="marauder",c="marauder_last_event_time",d="marauder_last_session_id",m={},p=[],_=!1,f=null,g=null,h=null,y=0,C,b,v=!1,S=null;function R(){P().set(c,L())}n("Banzai").subscribe(n("Banzai").SHUTDOWN,R);function L(){return C=C||P().get(c)||0,C}function E(){v||(b=P().get(d),v=!0);var e=Date.now();return(!b||e-s>L())&&(b=e.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),P().set(d,b)),b}function k(){return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:window.screen.devicePixelRatio||null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function I(){return{locale:navigator.language}}function T(e,t,n,r,o,a,i){var l=i!=null&&i!=0?i:Date.now();C=i!=null&&i!=0?Date.now():l;var s=t!=null&&t!=""?t:f;return{name:e,time:l/1e3,module:s,obj_type:r,obj_id:o,uuid:a,extra:n}}function D(e,t,n){return T("content",null,{flags:t},null,null,e,n)}function x(e){var t=window.__mrdr;if(t)for(var n in t){var r=t[n];if(r[3]!==0){if(delete t[n],n==="1")if(h!==null)n=h;else continue;e.push(D(n,1,r[1])),e.push(D(n,2,r[2])),e.push(D(n,3,r[3]))}}}function $(t,r){if(x(t),t.length!==0){_&&t.push(T("counters",null,m));var o=n("Banzai").BASIC;r==="vital"&&(o=n("Banzai").VITAL);var a=n("MarauderConfig").gk_enabled;if(y===0&&a&&(t.push(T("device_status",null,I())),o={delay:5e3}),r==="signal"&&(o={signal:!0}),a&&Math.random()<.01&&t.push(T("device_info",null,k())),h!==null)for(var i=0;i<t.length;i++){var l=t[i];l.uuid==null&&(l.uuid=h)}var s={app_ver:n("MarauderConfig").app_version,data:t,device_id:void 0,log_type:e,seq:y++,session_id:E()},c=P().get("device_id");c&&(s.device_id=c),m={},_=!1,n("Banzai").post(u,s,o)}}function P(){return S||(S=new(n("CacheStorage"))("localstorage","")),S}function N(e){m[e]||(m[e]=0),m[e]++,_=!0}function M(e,t,n,r,o,a,i,l){$([T(e,t,n,r,o,a,i)],l)}function w(e,t){f!==t&&(p.push(T(l,f,{dest_module:t,source_url:g,destination_url:e})),f=t,g=e)}function A(e,t){f!==t&&(h=null,w(e,t))}function F(e,t,n){M(t?"show_module":"hide_module",e,n)}function O(e){f=e}function B(){return f}function W(e){h===null&&(h=e,e!==null&&($(p),p=[]))}a.exports={count:N,log:M,navigateTo:A,navigateWithinSession:w,toggleModule:F,setUUID:W,setNavigationModule:O,getNavigationModule:B}}),null);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){},s=function(t){o("MarauderLogger").log("contextual_config_exposure","",t)},u=r("ContextualConfigExposureLoggerFactory")(e,s);l.default=u}),98);
__d("ContextualConfigAssert",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e===!1)throw new Error(t)}i.default=e}),66);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return Array.isArray(t)},s=function(t){return typeof t=="boolean"},u=function(t){return t!=null},c=function(t){return(function(e){return Object.prototype.hasOwnProperty.call(t,e)})},d=function(t){return p(t)&&t%1===0},m=function(t){return _(t)&&t.length>0},p=function(t){return typeof t=="number"&&!isNaN(t)&&t!==1/0&&t!==-1/0},_=function(t){return typeof t=="string"},f=function(t){switch(t){case o("ContextualConfigConstants").TYPE.BOOL:case o("ContextualConfigConstants").TYPE.FLOAT:case o("ContextualConfigConstants").TYPE.INT:case o("ContextualConfigConstants").TYPE.STRING:return!0;default:return!1}};l.isArray=e,l.isBoolean=s,l.isDefined=u,l.isKey=c,l.isInteger=d,l.isNonEmptyString=m,l.isNumber=p,l.isString=_,l.isType=f}),98);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(o("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}l.default=e}),98);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n;switch(t){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var a=r("ContextualConfigParseBoolean")(e);n=function(t){return t===a};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:n=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:n=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:n=function(t){return!0};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(e){return n(e)}}l.default=e}),98);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,u=function(t){return s.test(t)};function c(t){(e||(e=r("ContextualConfigAssert")))(u(t),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);var n=parseFloat(t);return e(o("ContextualConfigValidators").isNumber(n),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),n}l.default=c}),98);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=/^[-\+]?([1-9]\d*|0)$/,u=function(t){return s.test(t)};function c(t){(e||(e=r("ContextualConfigAssert")))(u(t),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);var n=parseInt(t,10);return e(o("ContextualConfigValidators").isNumber(n),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),n}l.default=c}),98);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(n>0,o("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},u=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n===a,o("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},c=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n<a,o("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)};l.assertHasValues=s,l.assertNumberOfValues=u,l.assertValueOrder=c}),98);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i){var l=a.map(i?r("ContextualConfigParseInteger"):e||(e=r("ContextualConfigParseFloat"))),s;switch(n){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var u=i?r("ContextualConfigParseInteger")(t):(e||(e=r("ContextualConfigParseFloat")))(t);s=function(t){return i&&!o("ContextualConfigValidators").isInteger(t)?!1:t===u};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:s=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:s=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:s=function(t){return!0};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,2),o("ContextualConfigPredAssertions").assertValueOrder(l[0],l[1]),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>=l[0]&&t<l[1]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t<l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t<=l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t===l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t!==l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>=l[0]};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(e){return s(e)}}l.default=s}),98);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=/^\/(.+)\/(.*)$/;function s(t){try{var n=t.match(e);return n!=null?new RegExp(n[1],n[2]):new RegExp(t)}catch(e){throw new Error(o("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}l.default=s}),98);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){if(typeof t!="string")throw new Error(o("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return t},s=function(n){var t=[];for(var r of n)t.push(e(r));return t};function u(e,t,n){var a=s(n),i;switch(t){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:i=function(n){return typeof n!="string"?!1:n===e};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:i=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:i=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:i=function(t){return!0};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:o("ContextualConfigPredAssertions").assertHasValues(a.length),i=function(t){return typeof t!="string"?!1:a.indexOf(t)!==-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:o("ContextualConfigPredAssertions").assertHasValues(a.length),i=function(t){return typeof t!="string"?!1:a.indexOf(t)===-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:o("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1),i=function(t){return typeof t!="string"?!1:t.indexOf(a[0])!==-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:o("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1);var l=r("ContextualConfigParseRegExp")(a[0]);i=function(t){return typeof t!="string"?!1:l.test(t)};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(e){return i(e)}}l.default=u}),98);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},c=o("ContextualConfigValidators").isKey(o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isString(n)&&c(n.toUpperCase()),o("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},m=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},p=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},_=function(t,n){var e=n.name;p(e);var a=n.strategy;d(a);var i=n.values||[];switch(m(i),t){case o("ContextualConfigConstants").TYPE.BOOL:return r("ContextualConfigParsePredBoolean")(e,a);case o("ContextualConfigConstants").TYPE.FLOAT:return r("ContextualConfigParsePredNumeric")(e,a,i,!1);case o("ContextualConfigConstants").TYPE.INT:return r("ContextualConfigParsePredNumeric")(e,a,i,!0);case o("ContextualConfigConstants").TYPE.STRING:return r("ContextualConfigParsePredString")(e,a,i);default:throw new Error(o("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},f=function(t,n){s(n);var e=n.name;return p(e),{name:e,pred:_(t,n)}};function g(e,t){return u(t),t.map(function(t){return f(e,t)})}l.default=g}),98);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n)&&n.length>0,o("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(t){s(t);var e=t.name,n=t.type,o=t.buckets;return c(e),d(n),{name:e,type:n,buckets:r("ContextualConfigParseContextBuckets")(n,o)}};function p(e){return u(e),e.map(m)}l.default=p}),98);
__d("ContextualConfigIsEqualParams",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n+=1){var r=e[n],o=t[n];if(r.name!==o.name||r.type!==o.type)return!1}return!0}i.default=e}),66);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isString(n),o("ContextualConfigConstants").ERROR.INVALID_STRING)};function c(e,t){switch(u(t),e){case o("ContextualConfigConstants").TYPE.BOOL:return r("ContextualConfigParseBoolean")(t);case o("ContextualConfigConstants").TYPE.FLOAT:return(s||(s=r("ContextualConfigParseFloat")))(t);case o("ContextualConfigConstants").TYPE.INT:return r("ContextualConfigParseInteger")(t);case o("ContextualConfigConstants").TYPE.STRING:return t;default:throw new Error(o("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}l.default=c}),98);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_RESULTS)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},m=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},p=function(t,n){for(var e of t)if(e.name===n)return e.type;throw new Error(o("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},_=function(t){return(function(e){c(e);var n=e.name;d(n);var o=p(t,n);m(o);var a=(s||(s=r("ContextualConfigParseResultParamValue")))(o,e.value);return{name:n,type:o,value:a}})};function f(e,t){return u(t),t.map(_(e))}l.default=f}),98);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n,a){return(e||(e=r("ContextualConfigAssert")))(r("ContextualConfigIsEqualParams")(n,a),o("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};function u(e,t){var n=r("ContextualConfigParseResultParams")(e,t.map(function(t,n){return{name:e[n].name,value:t}}));return s(e,n),n}l.default=u}),98);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){try{return r("ContextualConfigParseDenseResultParams")(e,t)}catch(e){throw new Error(o("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}l.default=e}),98);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(t){s(t);var e=t.name,n=t.type;return c(e),d(n),{name:e,type:n}};function p(e){return u(e),e.map(m)}l.default=p}),98);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(m(n),o("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},m=function(t){var e={};for(var n of t){if(e[n.name])return!1;e[n.name]=!0}return!0},p=function(t){return c(t.name),u(t.type),t};function _(e){s(e);var t=e.map(p);return d(t),t}l.default=_}),98);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_VECTOR)},c=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n===a,o("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},d=function(t,n){c(t.length,n.length);for(var e=0;e<t.length;e+=1){var o=t[e].type,a=n[e];(s||(s=r("ContextualConfigParseResultParamValue")))(o,a)}},m=function(t){return t.reduce(function(e,t){var n=t.buckets;return e*n.length},1)};function p(e,t,n){u(n);var r=m(t),o=e.length;c(r*o,n.length);for(var a=0;a<r;a+=1){var i=a*o;d(e,n.slice(i,i+o))}return n}l.default=p}),98);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){for(var e=0;e<t.length;e+=1){var r=t[e];try{if(r.pred(n))return[r.name,e]}catch(e){return null}}return null};function s(t,n,r){var a=null,i=t.map(function(t){var i=t.name,l={name:i};if(a!=null)return l;var s;if(r[i]!=null?s=r[i]:n[i]!=null?s=n[i]():s=null,l.value=s,t.buckets!=null){var u=e(t.buckets,s);if(u==null)return a=new Error(o("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH),l;var c=u[0],d=u[1];l.bucketName=c,l.bucketIndex=d}return l});return[a,i]}l.default=s}),98);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},u=function(t){for(var e=[],n=1,r=t.length-1;r>=0;r-=1)e.push(n),n*=t[r].buckets.length;return e.reverse()},c=function(t,n,o,a){try{var e=n.slice(o,o+t.length);return[null,r("ContextualConfigParseDenseResultParams")(t,e)]}catch(e){return[r("getErrorSafe")(e),a]}},d=function(n,o,a){try{var t=a.reduce(function(t,o,a){return(e||(e=r("ContextualConfigAssert")))(a<n.length,"Auxillery index out of range."),t+n[a]*o},0);return[null,t*o]}catch(e){return[r("getErrorSafe")(e),-1]}},m=(function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs),o=r("ContextualConfigParseContexts")(e.contexts);this.aux=u(o),this.contexts=o,this.defaults=r("ContextualConfigParseDenseDefaults")(n,e.vectorDefaults),this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.outputs=n,this.vector=r("ContextualConfigParseVector")(n,o,e.vector)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[r("getErrorSafe")(e),this.defaults,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.aux,n=this.globalContextProviders,a=this.contexts,i=this.defaults,l=this.monitors,s=this.outputs,u=this.vector,m=r("ContextualConfigResolveContexts")(a,n,t),p=m[0],_=m[1];if(p!=null)return[p,i,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var f=d(e,s.length,o("ContextualConfigResolvedContextsUtils").getBucketIndices(_)),g=f[0],h=f[1];if(g!=null)return[g,i,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var y=c(s,u,h,i),C=y[0],b=y[1];if(C!=null)return[C,b,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var v=r("ContextualConfigResolveContexts")(l,n,t),S=v[0],R=v[1];return S!=null?[S,b,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,b,_,R]},e})();l.default=m}),98);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},u=(function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs);this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.values=r("ContextualConfigParseResultParams")(n,e.values)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[r("getErrorSafe")(e),this.values,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.globalContextProviders,n=this.monitors,a=this.values,i=r("ContextualConfigResolveContexts")(n,e,t),l=i[0],s=i[1];return l!=null?[l,a,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,a,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,s]},e})();l.default=u}),98);
__d("ContextualConfigMergePartialResultParams",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n={};for(var r of t)n[r.name]=r;var o=[];for(var a of e){var i=n[a.name];o.push(i!=null&&i.name===a.name&&i.type===a.type?i:a)}return o}i.default=e}),66);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n,a){return(e||(e=r("ContextualConfigAssert")))(r("ContextualConfigIsEqualParams")(n,a),o("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};function u(e,t){var n=r("ContextualConfigParseResultParams")(e,t);return s(e,n),n}l.default=u}),98);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},m=function(t,n){u(n);var e=n.bucket,o=n.values;return c(e),d(o),{bucket:e,values:r("ContextualConfigParseResultParams")(t,o)}};function p(e,t){return s(t),t.reduce(function(t,n){var r=m(e,n);return t[r.bucket]=r.values,t},{})}l.default=p}),98);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[],u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},c=(function(){function e(e,t){u(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs);this.contexts=r("ContextualConfigParseContexts")(e.contexts),this.defaults=r("ContextualConfigParseDefaults")(n,e.defaults),this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.table=r("ContextualConfigParseTable")(n,e.table)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[e,this.defaults,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.globalContextProviders,n=this.contexts,a=this.defaults,i=this.monitors,l=this.table,u=r("ContextualConfigResolveContexts")(n,e,t),c=u[0],d=u[1];if(c!=null)return[c,a,d,[]];var m=o("ContextualConfigResolvedContextsUtils").getBucketNames(d).join(o("ContextualConfigConstants").BUCKET_DELIMITER),p=l[m]||s,_=r("ContextualConfigMergePartialResultParams")(a,p),f=r("ContextualConfigResolveContexts")(i,e,t),g=f[0],h=f[1];return g!=null?[g,_,d,[]]:[null,_,d,h]},e})();l.default=c}),98);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[1],u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n)&&o("ContextualConfigValidators").isDefined(n.version),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(s.indexOf(n)!==-1,o("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};function d(e,t){switch(u(e),c(e.version),e.cctype){case o("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(r("DenseContextualConfig"))(e,t);case o("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(r("MultiOutputResolvedContextualConfig"))(e,t);case o("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(r("TableContextualConfig"))(e,t);default:throw new Error(o("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}l.default=d}),98);
__d("ContextualConfigWarn",[],(function(t,n,r,o,a,i){"use strict";function e(e){}i.default=e}),66);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.reduce(function(e,t){var n=t.name,r=t.value;return e[n]=r,e},{}),this.$2=e}var t=e.prototype;return t.get=function(t,n){try{var e=this.$1[t];return typeof e!=typeof n?(r("ContextualConfigWarn")(o("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND),n):e}catch(e){return r("ContextualConfigWarn")(r("getErrorSafe")(e).message),n}},t.getParams=function(){return this.$2},e})();l.default=e}),98);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.error=e}var t=e.prototype;return t.resolve=function(t){return[this.error,o("ContextualConfigConstants").EMPTY_RESULT_PARAMS,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]},e})();l.default=e}),98);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=1/o("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,s=1,u=(function(){function t(e,t){t===void 0&&(t={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=e,this.$2=t}var n=t.prototype;return n.$5=function(){if(this.$1)return this.$1;var e=this.$2,t=this.$4,n;try{n=r("ContextualConfigParseConfig")(t,e)}catch(e){n=new(r("ErrorContextualConfig"))(r("getErrorSafe")(e))}return this.$1=n,n},n.$6=function(n){var t=this.isDebugLoggingEnabled,a=this.$3,i=!a&&o("Random").random()<e;i&&(this.$3=!0);var l=r("ContextualConfigCollateExposureData")(this.$4,n,i),s=r("ContextualConfigExposureLogger").createEvent(l);s.log(t)},n.resolve=function(t){t===void 0&&(t={});var e=this.$1||this.$5(),n=e.resolve(t);return this.$6(n),new(r("ContextualConfigResult"))(n[s])},t})();l.default=u}),98);
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1755537"),s=o("FalcoLoggerInternal").create("dgw_client",e),u=s;l.default=u}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(t,n,r,o,a,i,l){"use strict";var e,s="dgw_client",u=n("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),c={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function d(e){switch(e){case u.GROUPED_STREAM_COMPONENT:case u.ACK_MANAGER_COMPONENT:return!0;default:return!1}}var m=(function(){function t(e,t,n,r,o,a,i){a===void 0&&(a=!1),i===void 0&&(i=!1),this.$5=""+e,this.$1=t,this.$4=n,this.$3=r,this.sgTransportId=o,this.$2=a,this.$6=i}t.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}};var n=t.prototype;return n.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=this.$4+"."+n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}},n.logEvent=function(t,n,r,o,a){o===void 0&&(o=!1),this.$2||this.$7(t,n,null,c.INFO,r,o,a)},n.$7=function(t,n,o,a,i,l,s){var e=this;l===void 0&&(l=!1),!(l&&!this.$6)&&(d(t)&&this.$1!=null||!d(t)&&this.sgTransportId!=null)&&r("DgwClientFalcoEvent").log(function(){return{event:n,logging_id:s!=null?s:e.$1,dgw_version:e.$5,message:o,severity:a,uuid:e.$3,dgw_component:t,extra_info:i,destination_tier:e.$4,sg_transport_id:e.sgTransportId,source:2}})},n.logError=function(t,n,r,o,a,i){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.ERROR,o,a,i)},n.logWarn=function(t,n,r,o,a){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.WARNING,o,a)},t})();l.DGW_MODULE=s,l.DGWLoggingComponent=u,l.DGWLoggingContext=m}),98);
__d("DGWAckManager",["DGWLoggingContext","Promise","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function e(e,t,n){var r=this;this.$3=n,this.sendId=e,this.$2=t,this.handleAckReceived=function(){r.stopTracking(!0)},this.$1=window.setTimeout(function(){r.stopTracking(!1)},t)}var t=e.prototype;return t.stopTracking=function(t){window.clearTimeout(this.$1),this.$3(t)},e})(),u=(function(){function t(e){this.$1=new Map,this.$2=e}var a=t.prototype;return a.waitForAck=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");var i=this.$1;try{var l=yield new(e||(e=n("Promise")))(function(e,n){i.set(t,new s(t,a,e))});return l===!0?this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+t,!0):(this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+t+" timed out after "+a+"ms")),i.delete(t),l}catch(e){var u=r("getErrorSafe")(e);throw this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error"),i.delete(t),u}});function a(e,n){return t.apply(this,arguments)}return a})(),a.handleAckReceived=function(t){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var e=this.$1.get(t);if(e===void 0){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+t+" which was not being tracked");return}e.handleAckReceived()},a.clearPendingAcks=function(){var e=this;this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size),this.$1.forEach(function(t,n,r){e.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+t.sendId,null,!0),t.stopTracking(!1),r.delete(n)})},t})();l.DGWAckManager=u}),98);
__d("DGWStream",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","TRANSPORT_ESTABLISHMENT_ERROR","TRANSPORT_ESTABLISHMENT_TIMEOUT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR","ACK_TIMEOUT"]);function l(t){switch(t){case e.UNAUTHENTICATED:case e.UNAUTHORIZED:case e.REJECTED:case e.BAD_REQUEST:case e.UNKNOWN_ERROR:case e.SERVER_INTERNAL_ERROR:return!1;default:return!0}}i.StreamError=e,i.isRetryableError=l}),66);
__d("DGWCppBridge",[],(function(t,n,r,o,a,i){var e=(function(){var e=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return(function(t){t=t||{};var t=typeof t!="undefined"?t:{},n=(function(){function e(){}function t(e,t){return function(){e.apply(t,arguments)}}function n(e){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function r(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,n._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?o:a)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){a(t.promise,e);return}o(t.promise,r)})}function o(e,r){try{if(r===e)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var o=r.then;if(r instanceof n){e._state=3,e._value=r,i(e);return}else if(typeof o=="function"){s(t(o,r),e);return}}e._state=1,e._value=r,i(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,i(e)}function i(e){e._state===2&&e._deferreds.length===0&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var t=0,o=e._deferreds.length;t<o;t++)r(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=n}function s(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(t,n){var o=new this.constructor(e);return r(this,new l(t,n,o)),o},n.all=function(e){return new n(function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(r.length===0)return t([]);var o=r.length;function a(e,i){try{if(i&&(typeof i=="object"||typeof i=="function")){var l=i.then;if(typeof l=="function"){l.call(i,function(t){a(e,t)},n);return}}r[e]=i,--o===0&&t(r)}catch(e){n(e)}}for(var i=0;i<r.length;i++)a(i,r[i])})},n.resolve=function(e){return e&&typeof e=="object"&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,r){if(!Array.isArray(e))return r(new TypeError("Promise.race accepts an array"));for(var o=0,a=e.length;o<a;o++)n.resolve(e[o]).then(t,r)})},n._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){setTimeout(e,0)},n._unhandledRejectionFn=function(t){},n})(),r,o;t.ready=new n(function(e,t){r=e,o=t});var a={},i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);var l=[],s="./this.program",u=function(t,n){throw n},c=!0,d=!1,m="";function p(e){return t.locateFile?t.locateFile(e,m):m+e}var _,f,g,h;typeof document!="undefined"&&document.currentScript&&(m=document.currentScript.src),e&&(m=e),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",_=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){var n=ge(t);if(n)return pe(n);throw e}},f=function(t,n,r){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){if(e.status==200||e.status==0&&e.response){n(e.response);return}var o=ge(t);if(o){n(o.buffer);return}r()},e.onerror=r,e.send(null)},h=function(t){document.title=t};var y=t.print||console.log.bind(console),C=t.printErr||console.warn.bind(console);for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);a=null,t.arguments&&(l=t.arguments),t.thisProgram&&(s=t.thisProgram),t.quit&&(u=t.quit);var b;t.wasmBinary&&(b=t.wasmBinary);var v=t.noExitRuntime||!0,S={Memory:function(t){this.buffer=new ArrayBuffer(t.initial*65536)},Module:function(t){},Instance:function(t,n){this.exports=(function(t){function e(e){return e.set=function(e,t){this[e]=t},e.get=function(e){return this[e]},e}for(var n,r=new Uint8Array(123),o=25;o>=0;--o)r[48+o]=52+o,r[65+o]=o,r[97+o]=26+o;r[43]=62,r[47]=63;function a(e,t,n){for(var o,a,i=0,l=t,s=n.length,u=t+(s*3>>2)-(n[s-2]=="=")-(n[s-1]=="=");i<s;i+=4)o=r[n.charCodeAt(i+1)],a=r[n.charCodeAt(i+2)],e[l++]=r[n.charCodeAt(i)]<<2|o>>4,l<u&&(e[l++]=o<<4|a>>2),l<u&&(e[l++]=a<<6|r[n.charCodeAt(i+3)])}function i(e){a(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),a(n,1372,"gAkQ")}function l(t){var r=t.a,o=r.buffer;r.grow=Le;var a=new Int8Array(o),l=new Int16Array(o),s=new Int32Array(o),u=new Uint8Array(o),c=new Uint16Array(o),d=new Uint32Array(o),m=new Float32Array(o),p=new Float64Array(o),_=Math.imul,f=Math.fround,g=Math.abs,h=Math.clz32,y=Math.min,C=Math.max,b=Math.floor,v=Math.ceil,S=Math.trunc,R=Math.sqrt,L=t.abort,E=NaN,k=1/0,I=t.b,T=1051008,D=0;function x(e,t,n,r,o,i){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0;var m=0,p=0,f=0;m=T-80|0,T=m,s[m+72>>2]=e,s[m+68>>2]=t,s[m+64>>2]=n,s[m+60>>2]=r,s[m+56>>2]=o,s[m+52>>2]=i;e:{if(!s[m+52>>2]||!s[m+56>>2]|(!s[m+72>>2]|!s[m+68>>2]|(!s[m+64>>2]|!s[m+60>>2]))){s[m+76>>2]=5;break e}s[s[m+64>>2]>>2]=0,s[s[m+60>>2]>>2]=0,t=s[m+68>>2],n=s[m+56>>2],r=s[m+52>>2],e=T+-64|0,T=e,s[e+56>>2]=s[m+72>>2],s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=0,s[e+36>>2]=s[e+56>>2];t:{n:{r:{for(;;){if(!s[e+52>>2])break n;if(s[e+32>>2]=s[e+36>>2],a[e+31|0]=u[s[e+36>>2]],s[e+52>>2]=s[e+52>>2]-1,s[e+36>>2]=s[e+36>>2]+1,u[e+31|0]==10||u[e+31|0]==2|u[e+31|0]==4|u[e+31|0]==9){s[e+40>>2]=s[e+40>>2]+1;continue}if(s[e+24>>2]=1,J(u[e+31|0])&1){if(p=e,f=ee(u[e+31|0])&1,a[p+23|0]=f,s[e+16>>2]=a[e+23|0]&1?1:2,d[e+52>>2]<d[e+16>>2]){s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}if(s[e+52>>2]=s[e+52>>2]-s[e+16>>2],s[e+24>>2]=s[e+16>>2]+s[e+24>>2],s[e+36>>2]=s[e+16>>2]+s[e+36>>2],!(u[e+31|0]!=14&&u[e+31|0]!=8)){s[e+40>>2]=s[e+40>>2]+1;continue}}if(d[e+52>>2]<3)break r;if(s[e+12>>2]=0,t=s[e+36>>2],n=u[t|0]|u[t+1|0]<<8,a[e+12|0]=n,a[e+13|0]=n>>>8,a[e+14|0]=u[t+2|0],s[e+52>>2]=s[e+52>>2]-3,s[e+24>>2]=s[e+24>>2]+3,s[e+36>>2]=s[e+36>>2]+3,d[e+12>>2]<=d[e+52>>2]){s[e+40>>2]=s[e+40>>2]+1,s[e+36>>2]=s[e+12>>2]+s[e+36>>2],s[e+52>>2]=s[e+52>>2]-s[e+12>>2];continue}break}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+44>>2]>>2]=s[e+52>>2]}if(s[e+60>>2]=s[e+40>>2],T=e- -64|0,s[m+48>>2]=s[e+60>>2],!s[m+48>>2]){s[m+76>>2]=0;break e}if(p=m,f=$(_(s[m+48>>2],20)),s[p+44>>2]=f,!s[m+44>>2]){s[m+76>>2]=3;break e}for(s[m+40>>2]=s[m+44>>2],s[m+36>>2]=s[m+72>>2],s[m+32>>2]=s[m+68>>2]-s[s[m+52>>2]>>2],s[m+28>>2]=0;;){if(d[m+28>>2]<d[m+48>>2]){if(d[m+32>>2]<1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}a[m+27|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;t:{if(!u[m+27|0]|u[m+27|0]==1|(u[m+27|0]==2|u[m+27|0]==3)|(u[m+27|0]==4|u[m+27|0]==9|u[m+27|0]==10)||J(u[m+27|0])&1)break t;V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=6;break e}e=s[m+40>>2],s[e>>2]=u[m+27|0]&15|s[e>>2]&-16;t:{if(u[m+27|0]==10||u[m+27|0]==2|u[m+27|0]==4|u[m+27|0]==9){e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441,s[m+40>>2]=s[m+40>>2]+20;break t}if(J(u[m+27|0])&1){e=T-48|0,T=e,s[e+40>>2]=s[m+40>>2],s[e+36>>2]=m+36,s[e+32>>2]=m+32;n:{if(!(J(s[s[e+40>>2]>>2]&15)&1)){s[e+44>>2]=1;break n}if(p=e,f=ee(s[s[e+40>>2]>>2]&15)&1,a[p+31|0]=f,s[e+24>>2]=a[e+31|0]&1?1:2,d[s[e+32>>2]>>2]<d[e+24>>2]){s[e+44>>2]=1;break n}if(ae(s[e+40>>2]+4|0,s[s[e+36>>2]>>2],s[e+24>>2]),t=s[e+36>>2],s[t>>2]=s[e+24>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+24>>2],(s[s[e+40>>2]>>2]&15)==8){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==14){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if(d[s[e+32>>2]>>2]<3){s[e+44>>2]=11;break n}if(s[e+20>>2]=0,t=s[s[e+36>>2]>>2],n=u[t|0]|u[t+1|0]<<8,a[e+20|0]=n,a[e+21|0]=n>>>8,a[e+22|0]=u[t+2|0],t=s[e+36>>2],s[t>>2]=s[t>>2]+3,t=s[e+32>>2],s[t>>2]=s[t>>2]-3,t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441|(s[e+20>>2]&16777215)<<4,d[s[e+32>>2]>>2]<d[e+20>>2]){s[e+44>>2]=11;break n}if((s[s[e+40>>2]>>2]&15)==15){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==5){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}r:{if(!((s[s[e+40>>2]>>2]&15)!=6&&(s[s[e+40>>2]>>2]&15)!=7)){if(p=e,f=G(s[e+36>>2],s[e+32>>2],e+19|0,e+18|0),s[p+12>>2]=f,s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}break r}if(!((s[s[e+40>>2]>>2]&15)!=13&&(s[s[e+40>>2]>>2]&15)!=12)){n=s[e+32>>2],t=T-32|0,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=e+19,s[t+12>>2]=e+16,l[t+10>>1]=0;o:{if(d[s[t+20>>2]>>2]<2){s[t+28>>2]=1;break o}n=s[s[t+24>>2]>>2],n=u[n|0]|u[n+1|0]<<8,a[t+10|0]=n,a[t+11|0]=n>>>8,n=s[t+24>>2],s[n>>2]=s[n>>2]+2,n=s[t+20>>2],s[n>>2]=s[n>>2]-2,a[s[t+16>>2]]=(c[t+10>>1]&32768)==32768,l[s[t+12>>2]>>1]=c[t+10>>1]&32767,s[t+28>>2]=0}if(s[e+12>>2]=s[t+28>>2],s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}}}if((s[s[e+40>>2]>>2]&15)==12){t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==7){t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==13){n=s[e+32>>2],r=s[e+20>>2],o=s[e+40>>2]+12|0,i=s[e+40>>2],t=T-32|0,T=t,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=r,s[t+12>>2]=o,s[t+8>>2]=i+16;r:{if(d[t+16>>2]<2){s[t+28>>2]=9;break r}if(s[s[t+8>>2]>>2]=s[t+16>>2]-2,d[s[t+20>>2]>>2]<d[s[t+8>>2]>>2]){s[t+28>>2]=1;break r}if(n=$(s[s[t+8>>2]>>2]),s[s[t+12>>2]>>2]=n,!s[s[t+12>>2]>>2]){s[t+28>>2]=3;break r}ae(s[s[t+12>>2]>>2],s[s[t+24>>2]>>2],s[s[t+8>>2]>>2]),n=s[t+24>>2],s[n>>2]=s[s[t+8>>2]>>2]+s[n>>2],n=s[t+20>>2],s[n>>2]=s[n>>2]-s[s[t+8>>2]>>2],s[t+28>>2]=0}if(T=t+32|0,s[e+8>>2]=s[t+28>>2],s[e+8>>2]){s[e+44>>2]=s[e+8>>2];break n}t=s[e+40>>2],l[t+8>>1]=a[e+19|0]&1|c[t+8>>1]&65534,t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==6){if(p=e,f=q(s[e+36>>2],s[e+32>>2],s[e+20>>2],s[e+40>>2]+12|0,s[e+40>>2]+16|0),s[p+4>>2]=f,s[e+4>>2]){s[e+44>>2]=s[e+4>>2];break n}t=s[e+40>>2],a[t+8|0]=a[e+19|0]&1|u[t+8|0]&254,t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}s[e+44>>2]=1}if(T=e+48|0,s[m+20>>2]=s[e+44>>2],!s[m+20>>2]){s[m+40>>2]=s[m+40>>2]+20;break t}V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+20>>2];break e}if(s[m+16>>2]=0,d[m+32>>2]<3){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}if(e=s[m+36>>2],t=u[e|0]|u[e+1|0]<<8,a[m+16|0]=t,a[m+17|0]=t>>>8,a[m+18|0]=u[e+2|0],s[m+36>>2]=s[m+36>>2]+3,s[m+32>>2]=s[m+32>>2]-3,!(s[m+16>>2]==1|u[m+27|0]!=1)){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=7;break e}if(e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441|(s[m+16>>2]&16777215)<<4,u[m+27|0]==3){if(s[m+16>>2]!=1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=10;break e}if(a[m+15|0]=0,d[m+32>>2]<1){O(s[m+44>>2]),s[m+76>>2]=1;break e}a[m+15|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;n:{if(u[m+15|0]<=4){a[s[m+40>>2]+4|0]=u[m+15|0];break n}a[s[m+40>>2]+4|0]=4}s[m+40>>2]=s[m+40>>2]+20;break t}if(p=m,f=G(m+36|0,m+32|0,m+14|0,m+13|0),s[p+8>>2]=f,s[m+8>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+8>>2];break e}if(u[m+27|0]==1){e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20;break t}if(!u[m+27|0]){if(p=m,f=q(m+36|0,m+32|0,s[m+16>>2],s[m+40>>2]+8|0,s[m+40>>2]+12|0),s[p+4>>2]=f,s[m+4>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+4>>2];break e}e=s[m+40>>2],a[e+4|0]=a[m+14|0]&1|u[e+4|0]&254,e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20}}s[m+28>>2]=s[m+28>>2]+1;continue}break}if(s[m+32>>2]){V(s[m+44>>2],s[m+48>>2]),s[m+76>>2]=1;break e}s[s[m+64>>2]>>2]=s[m+44>>2],s[s[m+60>>2]>>2]=s[m+48>>2],s[m+76>>2]=0}return T=m+80|0,s[m+76>>2]}function $(e){var t=0,n=0,r=0,o=0,a=0,i=0,l=0,u=0,c=0,d=0,m=0;c=8;e:{t:{if(e>>>0>4294967239)break t;for(;;){c=c>>>0>8?c:8,n=s[603],a=n,o=s[602],l=o,e=e>>>0>8?e+3&-4:8;n:{if(e>>>0<=127){i=(e>>>3|0)-1|0;break n}if(r=h(e),i=((e>>>29-r^4)-(r<<2)|0)+110|0,e>>>0<=4095)break n;r=((e>>>30-r^2)-(r<<1)|0)+71|0,i=r>>>0<63?r:63}if(t=i,r=t&31,(t&63)>>>0>=32?(t=0,n=n>>>r|0):(t=n>>>r|0,n=((1<<r)-1&n)<<32-r|l>>>r),r=t,n|t){for(;;){a=n,t=r;n:{if(t|n){o=t-1|0,u=o+1|0,l=o,o=n-1|0,l=(o|0)!=-1?u:l,o=h(n^o)+32|0,n=h(t^l),n=(n|0)==32?o:n,t=63-n|0,D=0-(n>>>0>63)|0;break n}D=0,t=64}o=t,t=o,n=t&31,(t&63)>>>0>=32?(t=0,l=r>>>n|0):(t=r>>>n|0,l=((1<<n)-1&r)<<32-n|a>>>n),r=t,i=o+i|0,a=i<<4,t=s[a+1384>>2],o=a+1376|0;n:{if((t|0)!=(o|0)){if(n=F(t,c,e),n)break t;n=s[t+4>>2],s[n+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=n,s[t+8>>2]=o,n=a+1380|0,s[t+4>>2]=s[n>>2],s[n>>2]=t,s[s[t+4>>2]+8>>2]=t,i=i+1|0,n=(r&1)<<31|l>>>1,r=r>>>1|0;break n}d=s[603],t=i,u=t&63,n=u,a=n&31,n>>>0>=32?(n=0,o=-1>>>a|0):(n=-1>>>a|0,o=(1<<a)-1<<32-a|-1>>>a),o=o&-2,a=u&31,u>>>0>=32?(n=o<<a,u=0):(n=(1<<a)-1&o>>>32-a|n<<a,u=o<<a),a=n,o=0-t&63,n=o,t=n&31,n>>>0>=32?(n=-1<<t,t=0):(n=(1<<t)-1&-1>>>32-t|-1<<t,t=-1<<t),m=t&-2,t=o&31,o>>>0>=32?(o=0,t=n>>>t|0):(o=n>>>t|0,t=((1<<t)-1&n)<<32-t|m>>>t),n=t|u,D=a|o,s[602]=s[602]&n,s[603]=D&d,n=l^1}if(!(n|r))break}o=s[602],a=s[603]}n:{if(a|o){r=h(a),r=63-((r|0)==32?h(o)+32|0:r)<<4,t=r+1376|0,r=s[r+1384>>2];r:{if(!a&o>>>0<1073741824||(i=98,(t|0)==(r|0)))break r;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],!i)break r;if(i=i-1|0,(t|0)==(r|0))break}}if(M(e+48|0))break n;if(!r|(t|0)==(r|0))break e;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],(t|0)==(r|0))break}break e}if(!M(e+48|0))break e}if(n=0,e>>>0>4294967239)break t;for(r=c,t=0;;){if(i=t,r){r=r-1&r,t=t+1|0;continue}break}if(!(i>>>0<=1))break}}return n}return 0}function P(e,t,n,r,o,i,m){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0,m=m|0;var p=0,_=0,f=0;p=T-32|0,T=p,l[p+26>>1]=e,s[p+20>>2]=t,s[p+16>>2]=n,a[p+15|0]=r,l[p+12>>1]=o,s[p+8>>2]=i,s[p+4>>2]=m;e:{if(!(!(a[p+15|0]&1)|c[p+12>>1]<=32767)){s[p+28>>2]=4;break e}t=s[p+20>>2],n=s[p+16>>2],r=s[p+8>>2],o=s[p+4>>2],i=a[p+15|0]&1,e=T+-64|0,T=e,s[e+56>>2]=p+26,s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=o,a[e+39|0]=2,a[e+38|0]=13,s[e+32>>2]=p+12,a[e+31|0]=i,a[e+30|0]=2;t:{n:{if(!(!s[e+52>>2]|(!s[e+44>>2]|!s[e+40>>2]))&&d[e+48>>2]<=16777215)break n;s[e+60>>2]=5;break t}if(s[e+24>>2]=s[e+48>>2]+(u[e+39|0]+(u[e+30|0]+4|0)|0),_=e,f=$(s[e+24>>2]),s[_+20>>2]=f,!s[e+20>>2]){s[e+60>>2]=3;break t}if(s[e+16>>2]=s[e+20>>2],a[s[e+16>>2]]=u[e+38|0],s[e+16>>2]=s[e+16>>2]+1,ae(s[e+16>>2],s[e+56>>2],u[e+30|0]),s[e+16>>2]=u[e+30|0]+s[e+16>>2],s[e+12>>2]=u[e+39|0]+s[e+48>>2],d[e+12>>2]<d[e+48>>2]){O(s[e+20>>2]),s[e+60>>2]=9;break t}if(t=s[e+16>>2],n=u[e+12|0]|u[e+13|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+14|0],s[e+16>>2]=s[e+16>>2]+3,a[e+31|0]&1)n:{if(u[e+38|0]==6){t=s[e+32>>2],a[t|0]=u[t|0]|128;break n}r:{if(u[e+38|0]==13){t=s[e+32>>2],l[t>>1]=c[t>>1]|32768;break r}O(s[e+20>>2]),s[e+60>>2]=1;break t}}ae(s[e+16>>2],s[e+32>>2],u[e+39|0]),s[e+16>>2]=u[e+39|0]+s[e+16>>2],ae(s[e+16>>2],s[e+52>>2],s[e+48>>2]),s[s[e+44>>2]>>2]=s[e+20>>2],s[s[e+40>>2]>>2]=s[e+24>>2],s[e+60>>2]=0}T=e- -64|0,s[p+28>>2]=s[e+60>>2]}return T=p+32|0,s[p+28>>2]}function N(e,t,n,r,o){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0;var i=0,c=0,m=0;i=T-32|0,T=i,l[i+30>>1]=e,s[i+24>>2]=t,s[i+20>>2]=n,s[i+16>>2]=r,s[i+12>>2]=o,t=s[i+24>>2],n=s[i+20>>2],r=s[i+16>>2],o=s[i+12>>2],e=T-48|0,T=e,s[e+40>>2]=i+30,s[e+36>>2]=t,s[e+32>>2]=n,s[e+28>>2]=r,s[e+24>>2]=o,a[e+23|0]=2,a[e+22|0]=15;e:{if(!(s[e+24>>2]&&s[e+28>>2])){s[e+44>>2]=5;break e}if(s[s[e+28>>2]>>2]=0,s[s[e+24>>2]>>2]=0,!(d[e+32>>2]<=16777215&&s[e+36>>2])){s[e+44>>2]=5;break e}if(s[e+16>>2]=s[e+32>>2]+(u[e+23|0]+4|0),c=e,m=$(s[e+16>>2]),s[c+12>>2]=m,!s[e+12>>2]){s[e+44>>2]=3;break e}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+22|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],t=s[e+8>>2],n=u[e+32|0]|u[e+33|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+34|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+36>>2],s[e+32>>2]),s[e+8>>2]=s[e+32>>2]+s[e+8>>2],s[s[e+28>>2]>>2]=s[e+12>>2],s[s[e+24>>2]>>2]=s[e+16>>2],s[e+44>>2]=0}return T=e+48|0,T=i+32|0,s[e+44>>2]}function M(e){var t=0,n=0,r=0,o=0,i=0,l=0;r=s[343],n=e+3&-4,t=r+n|0;e:{t:{if(t>>>0<=r>>>0&&n||t>>>0>Re()<<16>>>0&&!(I(t|0)|0))break t;s[343]=t;break e}s[604]=48,r=-1}if((r|0)!=-1){n=e+r|0,t=n-16|0,s[t+12>>2]=16,s[t>>2]=16,e=s[600],e?l=s[e+8>>2]:l=0;e:{t:{if((l|0)==(r|0)){if(o=r-(s[r-4>>2]&-2)|0,i=s[o-4>>2],s[e+8>>2]=n,e=o-(i&-2)|0,n=-16,!(a[(e+s[e>>2]|0)-4|0]&1))break t;n=s[e+4>>2],s[n+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=n,t=t-e|0,s[e>>2]=t;break e}s[r+12>>2]=16,s[r>>2]=16,s[r+8>>2]=n,s[r+4>>2]=e,s[600]=r,n=16}e=r+n|0,t=t-e|0,s[e>>2]=t}s[((t&-4)+e|0)-4>>2]=t|1,l=e,o=s[e>>2]-8|0;e:{if(o>>>0<=127){t=(o>>>3|0)-1|0;break e}if(i=h(o),t=((o>>>29-i^4)-(i<<2)|0)+110|0,o>>>0<=4095)break e;t=((o>>>30-i^2)-(i<<1)|0)+71|0,t=t>>>0<63?t:63}n=t<<4,s[l+4>>2]=n+1376,n=n+1384|0,s[e+8>>2]=s[n>>2],s[n>>2]=e,s[s[e+8>>2]+4>>2]=e,n=s[603],e=t&31,(t&63)>>>0>=32?(t=1<<e,e=0):(t=(1<<e)-1&1>>>32-e,e=1<<e),s[602]=e|s[602],s[603]=t|n}return(r|0)!=-1}function w(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0;var o=0,i=0,d=0;o=T-16|0,T=o,l[o+10>>1]=e,l[o+8>>1]=t,s[o+4>>2]=n,s[o>>2]=r;e:{if(c[o+8>>1]>32767){s[o+12>>2]=4;break e}t=s[o+4>>2],n=s[o>>2],e=T-48|0,T=e,s[e+40>>2]=o+10,s[e+36>>2]=t,s[e+32>>2]=n,a[e+31|0]=2,a[e+30|0]=12,s[e+24>>2]=o+8,a[e+23|0]=2;t:{if(!(s[e+32>>2]&&s[e+36>>2])){s[e+44>>2]=5;break t}if(s[e+16>>2]=u[e+31|0]+(u[e+23|0]+4|0),i=e,d=$(s[e+16>>2]),s[i+12>>2]=d,!s[e+12>>2]){s[e+44>>2]=3;break t}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+30|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],s[e+4>>2]=u[e+31|0],t=s[e+8>>2],n=u[e+4|0]|u[e+5|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+6|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+24>>2],u[e+31|0]),s[s[e+32>>2]>>2]=s[e+16>>2],s[s[e+36>>2]>>2]=s[e+12>>2],s[e+44>>2]=0}T=e+48|0,s[o+12>>2]=s[e+44>>2]}return T=o+16|0,s[o+12>>2]}function A(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,a=0,i=0,l=0;a=T+-64|0,T=a,o=1;e:{if(j(e,t,0)||(o=0,!t))break e;r=T+-64|0,T=r,o=s[t>>2],i=s[o-4>>2],l=s[o-8>>2],s[r+20>>2]=0,s[r+16>>2]=1084,s[r+12>>2]=t,s[r+8>>2]=1132,o=0,ie(r+24|0,39),t=t+l|0;t:{if(j(i,1132,0)){s[r+56>>2]=1,Se[s[s[i>>2]+20>>2]](i,r+8|0,t,t,1,0),o=s[r+32>>2]==1?t:0;break t}Se[s[s[i>>2]+24>>2]](i,r+8|0,t,1,0);n:switch(s[r+44>>2]){case 0:o=s[r+48>>2]==1&&s[r+36>>2]==1&&s[r+40>>2]==1?s[r+28>>2]:0;break t;case 1:break n;default:break t}if(s[r+48>>2]|s[r+36>>2]!=1|s[r+40>>2]!=1&&s[r+32>>2]!=1)break t;o=s[r+24>>2]}if(T=r- -64|0,t=o,o=0,!t)break e;ie(a+8|4,52),s[a+56>>2]=1,s[a+20>>2]=-1,s[a+16>>2]=e,s[a+8>>2]=t,Se[s[s[t>>2]+28>>2]](t,a+8|0,s[n>>2],1),e=s[a+32>>2],(e|0)==1&&(s[n>>2]=s[a+24>>2]),o=(e|0)==1}return e=o,T=a- -64|0,e|0}function F(e,t,n){var r=0,o=0,a=0,i=0;if(r=e+4|0,o=(r+t|0)-1&0-t,t=s[e>>2],o+n>>>0<=(t+e|0)-4>>>0){a=s[e+4>>2],s[a+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=a,(r|0)!=(o|0)&&(o=o-r|0,a=e-(s[e-4>>2]&-2)|0,r=o+s[a>>2]|0,s[a>>2]=r,s[(a+(r&-4)|0)-4>>2]=r,e=e+o|0,t=t-o|0,s[e>>2]=t);e:{if(n+24>>>0<=t>>>0){r=(e+n|0)+8|0,t=(t-n|0)-8|0,s[r>>2]=t,s[(r+(t&-4)|0)-4>>2]=t|1,i=r,a=s[r>>2]-8|0;t:{if(a>>>0<=127){o=(a>>>3|0)-1|0;break t}if(t=h(a),o=((a>>>29-t^4)-(t<<2)|0)+110|0,a>>>0<=4095)break t;t=((a>>>30-t^2)-(t<<1)|0)+71|0,o=t>>>0<63?t:63}t=o,o=t<<4,s[i+4>>2]=o+1376,o=o+1384|0,s[r+8>>2]=s[o>>2],s[o>>2]=r,s[s[r+8>>2]+4>>2]=r,o=s[603],r=t&31,(t&63)>>>0>=32?(t=1<<r,i=0):(t=(1<<r)-1&1>>>32-r,i=1<<r),s[602]=i|s[602],s[603]=t|o,t=n+8|0,s[e>>2]=t,s[((t&-4)+e|0)-4>>2]=t;break e}s[(e+t|0)-4>>2]=t}e=e+4|0}else e=0;return e}function O(e){var t=0,n=0,r=0,o=0,a=0;if(e){n=e-4|0,o=s[n>>2],r=o,t=n,a=s[e-8>>2],e=a&-2,(e|0)!=(a|0)&&(t=n-e|0,r=s[t+4>>2],s[r+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=r,r=e+o|0),e=n+o|0,n=s[e>>2],(n|0)!=s[(e+n|0)-4>>2]&&(o=s[e+4>>2],s[o+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=o,r=r+n|0),s[t>>2]=r,s[((r&-4)+t|0)-4>>2]=r|1,a=t,r=s[t>>2]-8|0;e:{if(r>>>0<=127){e=(r>>>3|0)-1|0;break e}if(o=h(r),e=((r>>>29-o^4)-(o<<2)|0)+110|0,r>>>0<=4095)break e;e=((r>>>30-o^2)-(o<<1)|0)+71|0,e=e>>>0<63?e:63}n=e<<4,s[a+4>>2]=n+1376,n=n+1384|0,s[t+8>>2]=s[n>>2],s[n>>2]=t,s[s[t+8>>2]+4>>2]=t,n=s[603],t=e&31,(e&63)>>>0>=32?(e=1<<t,t=0):(e=(1<<t)-1&1>>>32-t,t=1<<t),s[602]=t|s[602],s[603]=e|n}}function B(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-48|0,T=r,s[r+40>>2]=e,s[r+36>>2]=t,s[r+32>>2]=n;e:{if(!(s[r+32>>2]&&s[r+36>>2])){s[r+44>>2]=5;break e}if(d[r+40>>2]>4){s[r+44>>2]=8;break e}if(s[r+28>>2]=5,o=r,i=$(s[r+28>>2]),s[o+24>>2]=i,!s[r+24>>2]){s[r+44>>2]=3;break e}s[r+20>>2]=s[r+24>>2],a[r+19|0]=3,a[s[r+20>>2]]=u[r+19|0],s[r+20>>2]=s[r+20>>2]+1,s[r+12>>2]=1,e=s[r+20>>2],t=u[r+12|0]|u[r+13|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,a[e+2|0]=u[r+14|0],s[r+20>>2]=s[r+20>>2]+3,a[r+11|0]=s[r+40>>2],a[s[r+20>>2]]=u[r+11|0],s[s[r+36>>2]>>2]=s[r+24>>2],s[s[r+32>>2]>>2]=s[r+28>>2],s[r+44>>2]=0}return T=r+48|0,s[r+44>>2]}function W(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(j(e,s[t>>2],o)){if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+32>>2]=r;t:{if(s[t+44>>2]==4)break t;if(l[t+52>>1]=0,e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,n,1,o),u[t+53|0]){if(s[t+44>>2]=3,!u[t+52|0])break t;break e}s[t+44>>2]=4}if(s[t+20>>2]=n,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2)break e;a[t+54|0]=1;return}e=s[e+8>>2],Se[s[s[e>>2]+24>>2]](e,t,n,r,o)}}function q(e,t,n,r,o){var a=0;a=T-32|0,T=a,s[a+24>>2]=e,s[a+20>>2]=t,s[a+16>>2]=n,s[a+12>>2]=r,s[a+8>>2]=o;e:{if(d[a+16>>2]<1){s[a+28>>2]=9;break e}if(s[s[a+8>>2]>>2]=s[a+16>>2]-1,d[s[a+20>>2]>>2]<d[s[a+8>>2]>>2]){s[a+28>>2]=1;break e}if(e=$(s[s[a+8>>2]>>2]),s[s[a+12>>2]>>2]=e,!s[s[a+12>>2]>>2]){s[a+28>>2]=3;break e}ae(s[s[a+12>>2]>>2],s[s[a+24>>2]>>2],s[s[a+8>>2]>>2]),e=s[a+24>>2],s[e>>2]=s[s[a+8>>2]>>2]+s[e>>2],e=s[a+20>>2],s[e>>2]=s[e>>2]-s[s[a+8>>2]>>2],s[a+28>>2]=0}return T=a+32|0,s[a+28>>2]}function U(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-32|0,T=r,l[r+26>>1]=e,s[r+20>>2]=t,s[r+16>>2]=n,s[s[r+16>>2]>>2]=3,o=r,i=$(s[s[r+16>>2]>>2]),s[o+12>>2]=i;e:{if(!s[r+12>>2]){s[r+28>>2]=3;break e}s[s[r+20>>2]>>2]=s[r+12>>2],a[r+11|0]=14,a[s[r+12>>2]]=u[r+11|0],s[r+12>>2]=s[r+12>>2]+1,e=s[r+12>>2],t=u[r+26|0]|u[r+27|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,s[r+28>>2]=0}return T=r+32|0,s[r+28>>2]}function V(e,t){var n=0;for(n=T-16|0,T=n,s[n+12>>2]=e,s[n+8>>2]=t,s[n+4>>2]=0;;){if(d[n+4>>2]<d[n+8>>2]){s[n>>2]=s[n+12>>2]+_(s[n+4>>2],20);e:{if(!(s[s[n>>2]>>2]&15)){O(s[s[n>>2]+8>>2]);break e}t:{if((s[s[n>>2]>>2]&15)==5){O(s[s[n>>2]+8>>2]);break t}(s[s[n>>2]>>2]&15)==6&&O(s[s[n>>2]+12>>2])}}s[n+4>>2]=s[n+4>>2]+1;continue}break}O(s[n+12>>2]),T=n+16|0}function H(e,t,n,r){a[e+53|0]=1;e:{if(s[e+4>>2]!=(n|0))break e;if(a[e+52|0]=1,n=s[e+16>>2],!n){if(s[e+36>>2]=1,s[e+24>>2]=r,s[e+16>>2]=t,(r|0)!=1|s[e+48>>2]!=1)break e;a[e+54|0]=1;return}if((t|0)==(n|0)){if(n=s[e+24>>2],(n|0)==2&&(s[e+24>>2]=r,n=r),s[e+48>>2]!=1|(n|0)!=1)break e;a[e+54|0]=1;return}a[e+54|0]=1,s[e+36>>2]=s[e+36>>2]+1}}function G(e,t,n,r){var o=0;o=T-32|0,s[o+24>>2]=e,s[o+20>>2]=t,s[o+16>>2]=n,s[o+12>>2]=r,a[o+11|0]=0;e:{if(d[s[o+20>>2]>>2]<1){s[o+28>>2]=1;break e}a[o+11|0]=u[s[s[o+24>>2]>>2]],e=s[o+24>>2],s[e>>2]=s[e>>2]+1,e=s[o+20>>2],s[e>>2]=s[e>>2]-1,a[s[o+16>>2]]=(u[o+11|0]&128)==128,a[s[o+12>>2]]=u[o+11|0]&127,s[o+28>>2]=0}return s[o+28>>2]}function z(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(!j(e,s[t>>2],o))break e;if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+20>>2]=n,s[t+32>>2]=r,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2||(a[t+54|0]=1),s[t+44>>2]=4}}function j(e,t,n){var r=0;if(!n)return s[e+4>>2]==s[t+4>>2];if((e|0)==(t|0))return 1;n=s[e+4>>2],e=u[n|0],t=s[t+4>>2],r=u[t|0];e:{if(!e|(r|0)!=(e|0))break e;for(;;){if(r=u[t+1|0],e=u[n+1|0],!e)break e;if(t=t+1|0,n=n+1|0,(e|0)!=(r|0))break}}return(e|0)==(r|0)}function K(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=9,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Q(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=10,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function X(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=2,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Y(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=4,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function J(e){var t=0;t=T-16|0,T=t,s[t+12>>2]=e,e=1;e:{if(ee(s[t+12>>2])&1||(e=1,s[t+12>>2]==15)||(e=1,s[t+12>>2]==13)||(e=1,s[t+12>>2]==12))break e;e=s[t+12>>2]==14}return T=t+16|0,e}function Z(e,t,n){var r=0;if(r=s[e+16>>2],!r){s[e+36>>2]=1,s[e+24>>2]=n,s[e+16>>2]=t;return}e:{if((t|0)==(r|0)){if(s[e+24>>2]!=2)break e;s[e+24>>2]=n;return}a[e+54|0]=1,s[e+24>>2]=2,s[e+36>>2]=s[e+36>>2]+1}}function ee(e){var t=0;t=T-16|0,s[t+12>>2]=e,e=1;e:{if(s[t+12>>2]==5||(e=1,s[t+12>>2]==6)||(e=1,s[t+12>>2]==7))break e;e=s[t+12>>2]==8}return e}function te(e,t,n,r,o,a){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)){H(t,n,r,o);return}e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,r,o,a)}function ne(){for(var e=0,t=0,n=0;t=e<<4,n=t+1376|0,s[t+1380>>2]=n,s[t+1384>>2]=n,e=e+1|0,(e|0)!=64;);M(48)}function re(e,t,n,r){if(e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)){Z(t,n,r);return}e=s[e+8>>2],Se[s[s[e>>2]+28>>2]](e,t,n,r)}function oe(e,t,n,r,o,a){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)&&H(t,n,r,o)}function ae(e,t,n){if(n)for(;a[e|0]=u[t|0],e=e+1|0,t=t+1|0,n=n-1|0,!!n;);}function ie(e,t){if(t)for(;a[e|0]=0,e=e+1|0,t=t-1|0,!!t;);}function le(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)&&Z(t,n,r)}function se(e,t,n){s[e+28>>2]==1|s[e+4>>2]!=(t|0)||(s[e+28>>2]=n)}function ue(e,t){return e=e|0,t=t|0,_(t,20)+e|0}function ce(e){return e=e|0,c[e+8>>1]>>>1|0}function de(e){return e=e|0,l[e+8>>1]&1}function me(e){return e=e|0,s[e+12>>2]}function pe(e){return e=e|0,s[e>>2]&15}function _e(e){return e=e|0,s[e+16>>2]}function fe(e){return e=e|0,c[e+4>>1]}function ge(e){return e=e|0,s[e+8>>2]}function he(e){return e=e|0,u[e+4|0]}function ye(e){return e=e|0,e|0}function Ce(e){return $(e)}function be(e){e=e|0,O(e)}function ve(e){e=e|0}n=u,i(t);var Se=e([null,ye,be,ve,ve,A,oe,z,le,be,te,W,re]);function Re(){return o.byteLength/65536|0}function Le(e){e=e|0;var t=Re()|0,i=t+e|0;if(t<i&&i<65536){var f=new ArrayBuffer(_(i,65536)),g=new Int8Array(f);g.set(a),a=new Int8Array(f),l=new Int16Array(f),s=new Int32Array(f),u=new Uint8Array(f),c=new Uint16Array(f),d=new Uint32Array(f),m=new Float32Array(f),p=new Float64Array(f),o=f,r.buffer=o,n=u}return t}return{c:ne,d:Ce,e:be,f:X,g:Y,h:B,i:N,j:U,k:P,l:w,m:K,n:Q,o:x,p:pe,q:he,r:ue,s:fe,t:ge,u:me,v:me,w:_e,x:ce,y:de,z:ce,A:Se}}return l(t)})(he)},instantiate:function(t,n){return{then:function(n){var e=new S.Module(t);n({instance:new S.Instance(e)})}}},RuntimeError:Error};b=[],typeof S!="object"&&ne("no native wasm support detected");var R,L=!1,E;function k(e,t){e||ne("Assertion failed: "+t)}function I(e,t){return e%t>0&&(e+=t-e%t),e}var T,D,x,$,P,N,M,w,A;function F(e){T=e,t.HEAP8=D=new Int8Array(e),t.HEAP16=$=new Int16Array(e),t.HEAP32=N=new Int32Array(e),t.HEAPU8=x=new Uint8Array(e),t.HEAPU16=P=new Uint16Array(e),t.HEAPU32=M=new Uint32Array(e),t.HEAPF32=w=new Float32Array(e),t.HEAPF64=A=new Float64Array(e)}var O=t.INITIAL_MEMORY||2097152;t.wasmMemory?R=t.wasmMemory:R=new S.Memory({initial:O/65536,maximum:32768}),R&&(T=R.buffer),O=T.byteLength,F(T);var B,W=[],q=[],U=[],V=!1;function H(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)j(t.preRun.shift());ue(W)}function G(){V=!0,ue(q)}function z(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Q(t.postRun.shift());ue(U)}function j(e){W.unshift(e)}function K(e){q.unshift(e)}function Q(e){U.unshift(e)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(t,n){var e=t>>>16,r=t&65535,o=n>>>16,a=n&65535;return r*a+(e*a+r*o<<16)|0}),!Math.fround){var X=new Float32Array(1);Math.fround=function(e){return X[0]=e,X[0]}}Math.clz32||(Math.clz32=function(e){var t=32,n=e>>16;return n&&(t-=16,e=n),n=e>>8,n&&(t-=8,e=n),n=e>>4,n&&(t-=4,e=n),n=e>>2,n&&(t-=2,e=n),n=e>>1,n?t-2:t-e}),Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)});var Y=0,J=null,Z=null;function ee(e){Y++,t.monitorRunDependencies&&t.monitorRunDependencies(Y)}function te(e){if(Y--,t.monitorRunDependencies&&t.monitorRunDependencies(Y),Y==0&&(J!==null&&(clearInterval(J),J=null),Z)){var n=Z;Z=null,n()}}t.preloadedImages={},t.preloadedAudios={};function ne(e){t.onAbort&&t.onAbort(e),e+="",C(e),L=!0,E=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new S.RuntimeError(e);throw o(n),n}var re="data:application/octet-stream;base64,";function oe(e){return e.startsWith(re)}var ae="dgwcppbridge.wasm";oe(ae)||(ae=p(ae));function ie(e){try{if(e==ae&&b)return new Uint8Array(b);var t=ge(e);if(t)return t;if(g)return g(e);throw"both async and sync fetching of the wasm failed"}catch(e){ne(e)}}function le(){return!b&&(c||d)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ae+"'";return e.arrayBuffer()}).catch(function(){return ie(ae)}):n.resolve().then(function(){return ie(ae)})}function se(){var e={a:he};function n(e,n){var r=e.exports;t.asm=r,B=t.asm.A,K(t.asm.c),te("wasm-instantiate")}ee("wasm-instantiate");function r(e){n(e.instance)}function a(t){return le().then(function(t){var n=S.instantiate(t,e);return n}).then(t,function(e){C("failed to asynchronously prepare wasm: "+e),ne(e)})}function i(){return!b&&typeof S.instantiateStreaming=="function"&&!oe(ae)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(t){var n=S.instantiateStreaming(t,e);return n.then(r,function(e){return C("wasm streaming compile failed: "+e),C("falling back to ArrayBuffer instantiation"),a(r)})}):a(r)}if(t.instantiateWasm)try{var l=t.instantiateWasm(e,n);return l}catch(e){return C("Module.instantiateWasm callback failed with error: "+e),!1}return i().catch(o),{}}function ue(e){for(;e.length>0;){var n=e.shift();if(typeof n=="function"){n(t);continue}var r=n.func;typeof r=="number"?n.arg===void 0?B.get(r)():B.get(r)(n.arg):r(n.arg===void 0?null:n.arg)}}function ce(e){try{return R.grow(e-T.byteLength+65535>>>16),F(R.buffer),1}catch(e){}}function de(e){var t=x.length;e=e>>>0;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var a=Math.min(n,I(Math.max(e,o),65536)),i=ce(a);if(i)return!0}return!1}var me=!1;function pe(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r>255&&(r&=255),t.push(String.fromCharCode(r))}return t.join("")}var _e=typeof atob=="function"?atob:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",r,o,a,i,l,s,u,c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=t.indexOf(e.charAt(c++)),l=t.indexOf(e.charAt(c++)),s=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),r=i<<2|l>>4,o=(l&15)<<4|s>>2,a=(s&3)<<6|u,n=n+String.fromCharCode(r),s!==64&&(n=n+String.fromCharCode(o)),u!==64&&(n=n+String.fromCharCode(a));while(c<e.length);return n};function fe(e){try{for(var t=_e(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(e){throw new Error("Converting base64 string to bytes failed.")}}function ge(e){if(oe(e))return fe(e.slice(re.length))}var he={b:de,a:R},ye=se(),Ce=t.___wasm_call_ctors=function(){return(Ce=t.___wasm_call_ctors=t.asm.c).apply(null,arguments)},be=t.__malloc=function(){return(be=t.__malloc=t.asm.d).apply(null,arguments)},ve=t.__free=function(){return(ve=t.__free=t.asm.e).apply(null,arguments)},Se=t.__DgwCodecEncodeEmpty=function(){return(Se=t.__DgwCodecEncodeEmpty=t.asm.f).apply(null,arguments)},Re=t.__DgwCodecEncodeDeauth=function(){return(Re=t.__DgwCodecEncodeDeauth=t.asm.g).apply(null,arguments)},Le=t.__DgwCodecEncodeDrain=function(){return(Le=t.__DgwCodecEncodeDrain=t.asm.h).apply(null,arguments)},Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=t.asm.i).apply(null,arguments)},ke=t.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(ke=t.__DgwCodecEncodeStreamGroup_EndOfData=t.asm.j).apply(null,arguments)},Ie=t.__DgwCodecEncodeStreamGroup_Data=function(){return(Ie=t.__DgwCodecEncodeStreamGroup_Data=t.asm.k).apply(null,arguments)},Te=t.__DgwCodecEncodeStreamGroup_Ack=function(){return(Te=t.__DgwCodecEncodeStreamGroup_Ack=t.asm.l).apply(null,arguments)},De=t.__DgwCodecEncodePing=function(){return(De=t.__DgwCodecEncodePing=t.asm.m).apply(null,arguments)},xe=t.__DgwCodecEncodePong=function(){return(xe=t.__DgwCodecEncodePong=t.asm.n).apply(null,arguments)},$e=t.__DgwCodecDecode=function(){return($e=t.__DgwCodecDecode=t.asm.o).apply(null,arguments)},Pe=t.__getFrameType=function(){return(Pe=t.__getFrameType=t.asm.p).apply(null,arguments)},Ne=t.__getDrainReasonFromDrainFrame=function(){return(Ne=t.__getDrainReasonFromDrainFrame=t.asm.q).apply(null,arguments)},Me=t.__getDGWFramePtr=function(){return(Me=t.__getDGWFramePtr=t.asm.r).apply(null,arguments)},we=t.__getStreamIdFromStreamGroupFrame=function(){return(we=t.__getStreamIdFromStreamGroupFrame=t.asm.s).apply(null,arguments)},Ae=t.__getEncodedParamsFromEstablishStreamFrame=function(){return(Ae=t.__getEncodedParamsFromEstablishStreamFrame=t.asm.t).apply(null,arguments)},Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=t.asm.u).apply(null,arguments)},Oe=t.__getDataFromGroupedStreamDataFrame=function(){return(Oe=t.__getDataFromGroupedStreamDataFrame=t.asm.v).apply(null,arguments)},Be=t.__getDataSizeFromGroupedStreamDataFrame=function(){return(Be=t.__getDataSizeFromGroupedStreamDataFrame=t.asm.w).apply(null,arguments)},We=t.__getAckIdFromGroupedStreamDataFrame=function(){return(We=t.__getAckIdFromGroupedStreamDataFrame=t.asm.x).apply(null,arguments)},qe=t.__getRequiresAckFromGroupedStreamDataFrame=function(){return(qe=t.__getRequiresAckFromGroupedStreamDataFrame=t.asm.y).apply(null,arguments)},Ue=t.__getAckIdFromGroupedStreamAckFrame=function(){return(Ue=t.__getAckIdFromGroupedStreamAckFrame=t.asm.z).apply(null,arguments)},Ve;Z=function e(){Ve||He(),Ve||(Z=e)};function He(e){if(e=e||l,Y>0||(H(),Y>0))return;function n(){Ve||(Ve=!0,t.calledRun=!0,!L&&(G(),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),z()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),n()},1)):n()}if(t.run=He,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return He(),t.ready})})();typeof i=="object"&&typeof a=="object"?a.exports=e:typeof define=="function"&&define.amd?define([],function(){return e}):typeof i=="object"&&(i.Module=e)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Promise","Random","URI","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=4;function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=o("Random").random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function d(e){var t=new TextDecoder,n=t.decode(e),o=r("Base64").encode(n),a=o.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return a}var m=null,p=null;function _(){return p==null&&(p=(s||(s=n("Promise"))).resolve().then(function(){return r("DGWCppBridge")()}).then(function(e){m=e})),p}var f=(function(){function t(){}return t.initialize=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return _()});function t(){return e.apply(this,arguments)}return t})(),t.constructConnectUrl=function(n){var t,a,i=n.appId,l=n.appVersion,s=n.authType,u=n.deviceId,c=n.dgwVersion,m=n.fbId,p=n.tier,_=n.loggingId,f=n.headers,g=n.endpoint,h=n.serviceId,y=n.regionHint,C=n.establishStreamFrame,b=n.trafficTracing,v=n.authToken,S=(t={},t[(a=o("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=i,t[a.HEADER_CONSTANTS.HEADER_APPVERSION]=l,t[a.HEADER_CONSTANTS.HEADER_AUTHTYPE]=s,t[a.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+c,t[a.HEADER_CONSTANTS.HEADER_UUID]=m,t[a.HEADER_CONSTANTS.HEADER_TARGET_TIER]=p,t);C!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=d(C)),_!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=_),y!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=y),u!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=u),b!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.TRAFFIC_TRACING]="debug:"+b),v!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_AUTHTOKEN]=v),Object.keys(f).forEach(function(e){var t=o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+e;Object.prototype.hasOwnProperty.call(S,t)||(S[t]=f[e])});var R=new(e||(e=r("URI")))(g);return R.setQueryData(S),R.setPath(R.getPath()+"/"+h),R.toString().length>2e3&&(delete S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],R.setQueryData(S)),R.toStringRawQuery()},t})(),g=(function(){function e(e,t,n){this.$1=null,this.$2=e,this.$3=t,this.$4=n}e.initialize=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return _()});function t(){return e.apply(this,arguments)}return t})();var t=e.prototype;return t.malloc=function(t){try{var e=m.__malloc(t);if(e===0){var n;return(n=this.$2)==null||n.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0"),-1}return e}catch(e){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",r("getErrorSafe")(e).message),-1}},t.free=function(t){m.__free(t)},t.append=function(t){if(this.$1==null){this.$1=t;return}var e=this.$1.length,n=new Uint8Array(e+t.length);n.set(this.$1,0),n.set(t,e),this.$1=n},t.processData=function(){var e=this;if(this.$1!=null){var t=this.$1.length,n=this.malloc(t);if(n!==-1){var r=m.HEAPU8.subarray(n,n+t);if(this.$1)for(var a=0;a<r.length;++a)r[a]=this.$1[a];var i=this.malloc(u*4);if(i!==-1){var l=i,s=l+u,c=s+u,d=c+u,p=m.__DgwCodecDecode(n,t,l,s,c,d);if(this.free(n),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;this.free(i),(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p));return}var f=m.HEAPU32.subarray(d/u,d/u+1)[0];if(this.$1==null){this.free(i);return}var g=this.$1.length-f;if(this.$1&&this.$1.length>g){var h;this.$1=new Uint8Array(((h=this.$1)==null?void 0:h.subarray(g))||[])}else this.$1=null;for(var y=m.HEAPU32.subarray(s/u,s/u+1)[0],C=m.HEAPU32.subarray(l/u,l/u+1)[0],b=[],v=function(){var t=m.__getDGWFramePtr(C,S),n=m.__getFrameType(t);switch(n){case o("DGWConstants").DgwFrameType.DgwFrameType_Drain:{var r,a=m.__getDrainReasonFromDrainFrame(t),i=o("DGWConstants").drainReasonToDrainReasonString(a);(r=e.$2)==null||r.logEvent(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+i),b.push(function(){var t;return(t=e.$3)==null?void 0:t.receivedDrainSignal(i)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:{var l=m.__getStreamIdFromStreamGroupFrame(t),s=m.__getEncodedParamsFromEstablishStreamFrame(t),u=new Uint8Array(m.HEAPU8.subarray(s,s+m.__getEncodedParamsSizeFromEstablishStreamFrame(t)));e.free(s),b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEstablishStreamReceived(l,u)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:{var c=m.__getStreamIdFromStreamGroupFrame(t),d=m.__getDataFromGroupedStreamDataFrame(t),p=new Uint8Array(m.HEAPU8.subarray(d,d+m.__getDataSizeFromGroupedStreamDataFrame(t)));e.free(d);var _=m.__getRequiresAckFromGroupedStreamDataFrame(t)?m.__getAckIdFromGroupedStreamDataFrame(t):null;b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamDataReceived(c,p,_)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:{var f=m.__getStreamIdFromStreamGroupFrame(t),g=m.__getAckIdFromGroupedStreamAckFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamAckReceived(f,g)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:{var h=m.__getStreamIdFromStreamGroupFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEndOfDataReceived(h)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Ping:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPingReceived()});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Pong:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPongReceived()});break}default:break}e.free(t)},S=0;S<y;++S)v();this.free(i);for(var R=0;R<b.length;R++)b[R]()}}}},t.encodeData=function(t,n,r,a){var e=this.malloc(t.length);if(e===-1)return null;for(var i=m.HEAPU8.subarray(e,e+t.length),l=0;l<i.length;++l)i[l]=t[l];var s=this.malloc(u*2),c=s,d=s+u,p=m.__DgwCodecEncodeStreamGroup_Data(a,e,i.length,n,r,c,d);if(this.free(e),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;return(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p)),null}var f=m.HEAPU32.subarray(c/u,c/u+1)[0],g=m.HEAPU32.subarray(d/u,d/u+1)[0],h=new Uint8Array(m.HEAPU8.subarray(f,f+g));return this.free(f),this.free(s),h},t.encodeAck=function(t,n){var e=this.malloc(u*2);if(e===-1)return null;var r=e,a=e+u,i=m.__DgwCodecEncodeStreamGroup_Ack(n,t,r,a);if(i!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var l;return(l=this.$2)==null||l.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(i)),null}var s=m.HEAPU32.subarray(r/u,r/u+1)[0],c=m.HEAPU32.subarray(a/u,a/u+1)[0],d=new Uint8Array(m.HEAPU8.subarray(s,s+c));return this.free(s),this.free(e),d},t.encodeDrain=function(t){var e=this.malloc(u*2);if(e===-1)return null;var n=e,r=e+u,a=m.__DgwCodecEncodeDrain(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=m.HEAPU32.subarray(r/u,r/u+1)[0],c=new Uint8Array(m.HEAPU8.subarray(l,l+s));return this.free(l),this.free(e),c},t.encodeEstablishStream=function(t,n){var e=this.malloc(n.length);if(e===-1)return null;for(var r=m.HEAPU8.subarray(e,e+n.length),a=0;a<n.length;++a)r[a]=n[a];var i=this.malloc(u*2),l=i,s=i+u,c=m.__DgwCodecEncodeStreamGroup_EstabStream(t,e,n.length,l,s);if(this.free(e),c!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var d;return(d=this.$2)==null||d.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(c)+" for StreamId "+t),null}var p=m.HEAPU32.subarray(l/u,l/u+1)[0],_=m.HEAPU32.subarray(s/u,s/u+1)[0],f=new Uint8Array(m.HEAPU8.subarray(p,p+_));return this.free(p),this.free(i),f},t.encodeEndOfData=function(t){var e=this.malloc(u*2);if(e===-1)return null;var n=e,r=e+u,a=m.__DgwCodecEncodeStreamGroup_EndOfData(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=m.HEAPU32.subarray(r/u,r/u+1)[0],c=new Uint8Array(m.HEAPU8.subarray(l,l+s));return this.free(l),this.free(e),c},t.encodePing=function(){var e=this.malloc(u*2);if(e===-1)return null;var t=e,n=e+u,r=m.__DgwCodecEncodePing(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=m.HEAPU32.subarray(t/u,t/u+1)[0],l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=new Uint8Array(m.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),s},t.encodePong=function(){if(this.$5!=null)return this.$5;var e=this.malloc(u*2);if(e===-1)return null;var t=e,n=e+u,r=m.__DgwCodecEncodePong(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=m.HEAPU32.subarray(t/u,t/u+1)[0],l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=new Uint8Array(m.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),this.$5=s,s},e})();l.uuidv4=c,l.Uint8ArrayToBase64UrlStr=d,l.DGWUtils=f,l.DGWCodec=g}),98);
__d("DGWExponentialBackoff",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e,l={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},s=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.errors=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){t===void 0&&(t=l);try{return yield d(e,t)}catch(e){throw e.errors[e.errors.length-1]}}),c.apply(this,arguments)}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){for(var n=0,r=[],o=t.baseRetryInterval,a=t.backoffFactor;n<=t.maxRetries;){try{var i=yield e();return i}catch(e){r.push(e)}yield p(o*Math.pow(a,n)),++n}throw new s("Max call count exceeded",r)}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield new(e||(e=n("Promise")))(function(e){return window.setTimeout(e,t)})}),_.apply(this,arguments)}i.callWithExponentialBackoff=u}),66);
__d("DGWGlobalLogger",["gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){var e=this;this.tabID=r("uuidv4")(),this.isTabClosed=!1,this.otherTabs=new Map,this.thisTab={realtime:0,lightspeed:0},this.broadcastChannel=this.$1("DGWGlobalLogger"),this.broadcastChannel.onmessage=function(t){var n=JSON.parse(String(t.data)),r=!e.otherTabs.has(n.key);n.event==="DELETE"?e.otherTabs.delete(n.key):n.event==="UPDATE"&&n.value!=null&&(e.otherTabs.set(n.key,n.value),r&&e.$2())}}var t=e.prototype;return t.$1=function(t){return window.BroadcastChannel!=null?new BroadcastChannel(t):{onmessage:function(t){},postMessage:function(t){}}},t.streamRequested=function(t){switch(t){case"realtime":this.thisTab.realtime++;break;case"lightspeed":this.thisTab.lightspeed++;break}this.$2()},t.streamClosed=function(t){switch(t){case"realtime":this.thisTab.realtime=Math.max(0,this.thisTab.realtime-1);break;case"lightspeed":this.thisTab.lightspeed=Math.max(0,this.thisTab.lightspeed-1);break}this.$2()},t.tabClosed=function(){if(!this.isTabClosed){this.isTabClosed=!0;var e={key:this.tabID,event:"DELETE"};this.broadcastChannel.postMessage(JSON.stringify(e))}},t.getGlobalState=function(){var e={realtime:this.thisTab.realtime,lightspeed:this.thisTab.lightspeed};return this.otherTabs.forEach(function(t){e.realtime+=t.realtime,e.lightspeed+=t.lightspeed}),e},t.$2=function(){var e={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.postMessage(JSON.stringify(e))},e})(),s=r("gkx")("4337")?new e:{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{realtime:-1,lightspeed:-1}}},u=function(){return s};l.getInstance=u}),98);
__d("DGWPinger",["DGWLoggingContext"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$4=t,this.$5=n,this.$3=!1}var t=e.prototype;return t.$6=function(){var e=this;if(this.$3){var t;(t=o("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout_fired.reset"),this.$3=!1,this.$4(),t.DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1)}else o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()},t.reset=function(){var e=this;this.$3=!0,this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null),this.$1>0&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1))},t.cancel=function(){this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)},e})();l.DGWPinger=e}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8,TRANSPORT_NORMAL_CLOSURE:9});function l(t){switch(t){case e.TRANSPORT_SERVER_INTERNAL_ERROR:return"TRANSPORT_SERVER_INTERNAL_ERROR";case e.TRANSPORT_ABNORMAL_CLOSURE:return"TRANSPORT_ABNORMAL_CLOSURE";case e.TRANSPORT_GOING_AWAY:return"TRANSPORT_GOING_AWAY";case e.TRANSPORT_UNKNOWN_ERROR:return"TRANSPORT_UNKNOWN_ERROR";case e.TRANSPORT_KEEPALIVE_TIMEOUT:return"TRANSPORT_KEEPALIVE_TIMEOUT";case e.TRANSPORT_UNAUTHORIZED:return"TRANSPORT_UNAUTHORIZED";case e.TRANSPORT_REJECTED:return"TRANSPORT_REJECTED";case e.TRANSPORT_BAD_REQUEST:return"TRANSPORT_BAD_REQUEST";case e.TRANSPORT_DGW_SERVER_ERROR:return"TRANSPORT_DGW_SERVER_ERROR";case e.TRANSPORT_NORMAL_CLOSURE:return"TRANSPORT_NORMAL_CLOSURE"}}function s(t){switch(t){case e.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}var u=(function(){function e(){}var t=e.prototype;return t.onStreamGroupError=function(){},t.onStreamGroupMustDrain=function(){},t.onStreamGroupTransportClose=function(){},e})();i.DGWStreamGroupError=e,i.dgwStreamGroupErrorToString=l,i.isRetryableError=s,i.NoOpDGWStreamGroupCallbacks=u}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$3=e}var t=e.prototype;return t.transportEstablished=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open",t),this.$2=Date.now(),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")},t.transportPingSent=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Ping Frame Sent",t,!0)},t.transportPongReceived=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Pong Frame Received",t,!0)},t.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")},t.transportClosed=function(t,n,r){this.$4=Date.now(),t?(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",n,r))},t.transportEstablishmentFailure=function(t){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+t.code+" reason: "+t.reason+" wasClean: "+String(t.wasClean)),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")},t.streamEstablishmentTimeout=function(t,n,a){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",t,"streamId:"+n+", onLine:"+String(r("NetworkStatus").isOnline()),!1,a),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")},t.streamEstablishmentPending=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")},t.streamEstablishmentSuccess=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")},t.transportError=function(t,n,r){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,t,n,r)},t.receivedFrameForInactiveStream=function(t,n,r){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+t+", streamID: "+n,r)},t.ranOutOfStreamIds=function(t){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",t)},e})();l.DGWTransportEvents=e}),98);
__d("DGWWebSocketTransport",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=new WebSocket(e);return t.binaryType="arraybuffer",t.onopen=function(){},t.onclose=function(){},t.onerror=function(){},t}i.getWebSocketConnection=e}),66);
__d("DGWStreamEvents",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n){this.$4=new Map,this.$5=new Map,this.$6=e,this.$1=t,n!=null&&(this.$8="streamId:"+n+"::")}var t=e.prototype;return t.dataSent=function(t,n,r){var e,o=n?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,o,((e=this.$8)!=null?e:"")+"sendId:"+r+", payloadSize:"+t,!0),this.$4.set(r,{ackRequested:n,payloadSize:t,sendTimestamp:Date.now()})},t.ackReceived=function(t){var e;this.$6.logEvent(this.$1,"AckReceived",((e=this.$8)!=null?e:"")+"sendId:"+t,!0),this.$6.bumpODSKey(this.$1,"ack_received");var n=this.$4.get(t);n!=null&&(n.ackReceivedTimestamp=Date.now())},t.ackSent=function(t){var e;this.$6.bumpODSKey(this.$1,"ack_sent"),this.$6.logEvent(this.$1,"ACK sent",((e=this.$8)!=null?e:"")+"ackId:"+t,!0)},t.drainSent=function(t){var e;this.$6.logEvent(this.$1,"Drain sent",((e=this.$8)!=null?e:"")+"drainReason: "+t)},t.dataReceived=function(t,n,r){var e;this.$6.bumpODSKey(this.$1,"data_received"),this.$6.logEvent(this.$1,"Data received",((e=this.$8)!=null?e:"")+"sendId:"+(r!=null?r:"null")+", ackRequested:"+n.toString()+", payloadSize:"+t,!0),r!=null&&this.$5.set(r,{ackRequested:n,payloadSize:t,receiveTimestamp:Date.now()})},t.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)},t.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)},t.streamClosed=function(t,n){this.$7=Date.now();var e=this.$9();if(t){var r;this.$6.bumpODSKey(this.$1,"stream_closed_gracefully"),this.$6.logEvent(this.$1,"Stream closed gracefully",""+((r=this.$8)!=null?r:"")+e)}else{var o;this.$6.bumpODSKey(this.$1,"stream_closed_with_error"),this.$6.logError(this.$1,"Stream closed abnormally",n,""+((o=this.$8)!=null?o:"")+e)}},t.connectionEstablishmentFailure=function(t){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+t)},t.streamEstablishmentFailure=function(t,n){var e;this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+t.toString(),""+((e=this.$8)!=null?e:"")+n),this.$6.bumpODSKey(this.$1,"stream_establishment_failure")},t.error=function(t,n){var e={msg:n,state:this.$9()};this.$6.logError(this.$1,t,JSON.stringify(e),this.$8)},t.$9=function(){var e={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(e)},e})();i.DGWStreamEvents=e}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","Promise","QuickPerformanceLogger","Random","asyncToGeneratorRuntime","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("qpl")._(701242292,"2919"),c=(function(){function t(e,t,n,a,i,l,c){this.$1=e,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=t,this.$7=n,this.$8=a,this.$2=l,this.$9=i,this.$10=new(o("DGWAckManager")).DGWAckManager(this.$9),this.$12=new(o("DGWStreamEvents")).DGWStreamEvents(this.$9,o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=c,this.$14=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),(s||(s=r("QuickPerformanceLogger"))).markerStart(u,this.$14)}var a=t.prototype;return a.send=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=this.$11++%o("DGWConstants").MAX_ACK_ID,r=this.$15(e,!0,n);if(!this.$16(r,!0,n))return!1;var a=yield this.$10.waitForAck(n,t!=null?t:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return a});function t(t,n){return e.apply(this,arguments)}return t})(),a.sendFrame=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a){var i=this.$11++%o("DGWConstants").MAX_ACK_ID,l=this.$15(r,!0,i);if(l==null)return!1;var s=new Uint8Array(t.length+l.length);if(s.set(t),s.set(l,t.length),!this.$16(s,!0,i))return!1;var u=yield this.$10.waitForAck(i,a!=null?a:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return this.__markerPoint(u?"ack_recevied":"ack_timeout"),u||(this.__endMarker(3),(e||(e=n("Promise"))).reject(o("DGWStream").StreamError.ACK_TIMEOUT))});function r(e,n,r){return t.apply(this,arguments)}return r})(),a.sendAndForget=function(t){var e=this.$15(t,!1,0);return this.$16(e,!1,0)},a.sendFrameAndForget=function(t,n){var e=this.$15(n,!1,0);if(e==null)return!1;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),this.$16(r,!1,0)},a.close=function(){var e=this.$2.encodeEndOfData(this.$1);if(e==null){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}var t=this.$8.send(e);if(!t){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent(),this.$5=!0,this.$4&&this.$17()},a.loggingContext=function(){return this.$9},a.__sendDrain=function(t){var e=o("DGWConstants").drainReasonToDrainReasonString(t);if(this.$5)return!1;var n=this.$2.encodeDrain(t);if(n==null)return!1;this.$12.drainSent(e);var r=this.$8.send(n);return r},a.__transportCloseHook=function(t){this.$13(),this.$10.clearPendingAcks(),t?(this.$12.error("Received StreamError","StreamErrorType: "+t),this.$6.onError(t)):this.$5&&this.$4?this.$17():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(o("DGWStream").StreamError.PREMATURE_CLOSE))},a.$17=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)},a.__dataReceivedHook=function(t,n){this.$12.dataReceived(t.length,n!=null,n),n!=null&&this.$18(n),this.$6.onDataReceived(t)},a.__ackReceivedHook=function(t){this.$12.ackReceived(t),this.$10.handleAckReceived(t)},a.__drainReceivedHook=function(t){this.$3===!1&&(this.$6.onStreamMustDrain(this,t),this.$3=!0)},a.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$17():this.$6.onServerHasFinishedSendingData(this)},a.__markerPoint=function(t){var e=this.$14;(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,t,{instanceKey:e})},a.__markerAnnotate=function(t){var e=this.$14;(s||(s=r("QuickPerformanceLogger"))).markerAnnotate(u,t,{instanceKey:e})},a.__endMarker=function(t){(s||(s=r("QuickPerformanceLogger"))).markerEnd(u,t,this.$14)},a.$15=function(t,n,r){return this.$2.encodeData(t,n,r,this.$1)},a.$16=function(t,n,r){if(this.__markerPoint("send_data_start"),this.$5)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally"),!1;if(t==null)return!1;var e=this.$8.send(t);return e?(this.__markerPoint("send_data_end"),this.$12.dataSent(t.length,n,r),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString()),!1)},a.$18=function(t){var e=this.$2.encodeAck(t,this.$1);if(e==null)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+t),!1;var n=this.$8.send(e);return n?(this.$12.ackSent(t),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+t),!1)},t})();l.GroupedStream=c}),98);
__d("StreamIdGenerator",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=65535,s=(function(){function t(){this.$1=new Set,this.$2=0}var n=t.prototype;return n.getNextStreamId=function(){var t;if(!this.streamIdAvailable())throw r("err")("Max number of stream IDs reached");if(this.$2<=e)return this.$2++;var n=(t=this.$1.values().next().value)!=null?t:0;return this.$1.delete(n),n},n.putBackStreamId=function(t){this.$1.add(t)},n.streamIdAvailable=function(){return this.$1.size>0||this.$2<=e},t})();l.MAX_STREAM_ID=e,l.StreamIdGeneratorImpl=s}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWGlobalLogger","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","Promise","QuickPerformanceLogger","Random","Run","StreamIdGenerator","asyncToGeneratorRuntime","err","getErrorSafe","qex","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=r("qpl")._(701238781,"3037"),d=(e=r("qex")._("2103"))!=null?e:!1,m=function(t,n,r,a,i){var e=this;this.groupedStream=t,this.$1=window.setTimeout(function(){r(o("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},a),this.handleEstablishFrameReceived=function(){window.clearTimeout(e.$1),n(e.groupedStream)},this.abortStream=function(e){i(),r(e)}},p=(function(){function e(t,n,a,i,l,s,d,m){var p=this,_;this.$18=-1,this.$15=l,this.$17=this.__getStreamIdGenerator(),this.$5=new Map,this.$6=new Map,this.$7=i.keepAliveMs,this.$8=!1,this.$9=!1,this.$3=!0,this.$4=!1,this.$21=!1,this.$22=!1,this.$13=a,this.$11=new TextEncoder,this.$12=new TextDecoder,this.$14=i;var f={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(t){p.$9||(p.$9=!0,p.$15(),p.$13.transportClosed(!0,""),p.$14.streamGroupCallbacks.onStreamGroupMustDrain(t),p.$5.forEach(function(e){e.__drainReceivedHook(t)}),p.onClose(o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE))},onGroupedStreamDataReceived:function(t,n,r){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__dataReceivedHook(n,r)}else p.$13.receivedFrameForInactiveStream("Data",t,"sendAckID: "+(r!=null?r:"null"))},onGroupedStreamAckReceived:function(t,n){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__ackReceivedHook(n)}else p.$13.receivedFrameForInactiveStream("ACK",t,"ackId: "+(n!=null?n:"null"))},onGroupedStreamEndOfDataReceived:function(t){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__endOfDataHook()}else p.$13.receivedFrameForInactiveStream("EndOfData",t)},onGroupedStreamEstablishStreamReceived:function(t,n){if(p.$6.has(t)){var e=p.$6.get(t);p.$6.delete(t);var r=JSON.parse(p.$12.decode(n));(r.code===void 0||r.code!==200)&&(e==null||e.abortStream(o("DGWStream").StreamError.ABNORMAL_CLOSURE)),e==null||e.handleEstablishFrameReceived()}else p.$13.receivedFrameForInactiveStream("EstablishStream",t,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var e=p.$2.encodePing();e!=null&&p.send(e)},onPongReceived:function(){p.$3=!1,p.$22||(p.$22=!0,p.__markerPoint("auth_success")),p.$13.transportPongReceived("readyState:"+p.$1.readyState+", bufferedAmount:"+p.$1.bufferedAmount)}};this.$2=new(o("DGWUtils")).DGWCodec(s,f,i.dgwVersion),this.$20=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),this.$23=o("DGWGlobalLogger").getInstance(),this.$24=(_=i.connectTimeoutMs)!=null?_:2e4;var g=o("Run").onUnload(function(){p.$23.tabClosed()});if(i.enableFirstStreamOnWsHandshake){var h,y,C,b;if(d===void 0)throw r("err")("Missing grouped stream options");if(m===void 0)throw r("err")("Missing grouped stream callbacks");var v=this.$17.getNextStreamId(),S=this.createEstablishStreamFrame(v,d),R=o("DGWUtils").DGWUtils.constructConnectUrl({appId:i.appId,appVersion:i.appVersion,authType:i.authType,deviceId:(h=i.deviceId)!=null?h:void 0,dgwVersion:i.dgwVersion,fbId:i.fbId,tier:i.tier,loggingId:(y=i.loggingId)!=null?y:void 0,headers:e.__prefixAppHeaders(i.headers),endpoint:i.connectEndpoint,serviceId:i.serviceId,regionHint:(C=i.regionHint)!=null?C:void 0,establishStreamFrame:S,authToken:(b=i.authToken)!=null?b:void 0});if(this.$1=n(R),!R.includes(o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;var L=new(o("DGWLoggingContext")).DGWLoggingContext(this.$14.dgwVersion,d.loggingId,this.$14.serviceId,this.$14.fbId,this.$14.loggingId,d.disableFalcoLogging),E=this.__createGroupedStream(v,m,d,L);this.$16=this.waitForEstablishStream(v,E,d,function(e){p.$5.set(v,e)},function(){p.$17.putBackStreamId(v)})}else this.$1=n(t);this.$23.streamRequested(i.serviceId),(u||(u=r("QuickPerformanceLogger"))).markerStart(c,this.$20),this.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId}})}var t=e.prototype;return t.send=function(t){try{return this.$1.send(t),!0}catch(e){return this.$13.transportError("Failed to send over transport","readyState: "+this.$1.readyState,r("getErrorSafe")(e).message),!1}},t.close=function(){var e;this.$23.streamClosed(this.$14.serviceId),this.__markerPoint("teardown"),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.onopen=function(e){},this.$1.onmessage=function(e){},this.$1.onerror=function(e){},this.$1.onclose=function(e){},this.$1.close()},t.onClose=function(t){var e;this.$23.streamClosed(this.$14.serviceId),this.__markerPoint("abort"),this.__markerAnnotate({int:{abort_code:t}}),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.close(t)},t.abort=function(t,n,r,o,a){this.$8||(this.$23.streamClosed(this.$14.serviceId),this.$8=!0,this.$13.transportClosed(!1,o,a),this.$5.forEach(function(e){e.__transportCloseHook(n)}),this.$6.forEach(function(e){e.abortStream(n)}),this.$14.streamGroupCallbacks.onStreamGroupError(t),this.$5.clear(),this.$6.clear(),this.$15(),this.onClose(r))},e.getTransportWithInitialStream=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i,l){yield o("DGWUtils").DGWCodec.initialize();var s=new(o("DGWTransportEvents")).DGWTransportEvents(a);s.transportEstablishmentPending();var u=function(){return e.$25("",r,s,i,a,t,n)};try{var c=yield o("DGWExponentialBackoff").callWithExponentialBackoff(u,l),d=c.$16!=null?c.$16:c.establishGroupedStream(n,t,new(o("DGWLoggingContext")).DGWLoggingContext(r.dgwVersion,t.loggingId,r.serviceId,r.fbId,r.loggingId,t.disableFalcoLogging));return{transport:c,streamPromise:d}}catch(e){throw e}});function r(e,n,r,o,a,i){return t.apply(this,arguments)}return r})(),e.getTransport_DEPRECATED=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i){yield o("DGWUtils").DGWCodec.initialize();var l=new(o("DGWTransportEvents")).DGWTransportEvents(r);l.transportEstablishmentPending();var s=function(){return e.$25(t,n,l,a,r)};try{return yield o("DGWExponentialBackoff").callWithExponentialBackoff(s,i)}catch(e){throw e}});function r(e,n,r,o,a){return t.apply(this,arguments)}return r})(),t.establishGroupedStream=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,o,a,i,l){var u=this;i===void 0&&(i=!0);var c=this.getStreamId(),d=this.createEstablishStreamFrame(c,t),m=this.__createGroupedStream(c,e,t,o);m.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId,streamId:t.streamTraceId}}),l!=null&&m.__markerAnnotate(l);var p=this.waitForEstablishStream(c,m,t,function(e){u.$5.set(c,e)},function(){u.$17.putBackStreamId(c)});if(a!=null){var _;m.__markerPoint("send_payload_start"),m.__markerAnnotate({int:{establishStreamPayloadSize:a.byteLength}});var f=(_=t.ackTimeoutMs)!=null?_:3e4,g=i?yield m.sendFrame(d,a,f):m.sendFrameAndForget(d,a);return g?(m.__markerPoint("send_payload_end"),m.__endMarker(2),(s||(s=n("Promise"))).resolve(m)):(m.__endMarker(3),(s||(s=n("Promise"))).reject("Failed to send data when establishing stream"))}if(m.__markerPoint("send_establish_stream_start"),!this.send(d))throw m.__endMarker(3),r("err")("Websocket connection closed before stream established");m.__markerPoint("send_establish_stream_end");var h=yield p;return m.__endMarker(2),h});function t(t,n,r,o,a,i){return e.apply(this,arguments)}return t})(),e.__prefixAppHeaders=function(t){return Object.keys(t).reduce(function(e,n){return e[""+o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+n]=t[n],e},{})},t.waitForEstablishStream=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,o,a){var i=this;this.$13.streamEstablishmentPending(e,r.loggingId);try{var l=yield new(s||(s=n("Promise")))(function(n,r){i.$6.set(e,new m(t,n,r,3e4,function(){i.streamEndCallback(e)}))});return o(t),this.$13.streamEstablishmentSuccess(e,r.loggingId),l}catch(t){throw a(),this.$13.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,e,r.loggingId),t}});function t(t,n,r,o,a){return e.apply(this,arguments)}return t})(),e.$25=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i,l,s){var u=new e(t,o("DGWWebSocketTransport").getWebSocketConnection,r,n,a,i,l,s);u.$1.onmessage=e.$26(u),u.$1.onopen=function(){u.__markerPoint("onopen"),r.transportEstablished(t),u.$10!=null&&u.$10.cancel(),u.$7!=null&&(u.$10=new(o("DGWPinger")).DGWPinger(u.$7,function(){u.$27()},function(){u.abort(o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,o("DGWStream").StreamError.KEEPALIVE_TIMEOUT,o("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+u.$1.readyState+", bufferedAmount:"+u.$1.bufferedAmount)}))},u.$1.onerror=function(){u.__markerPoint("onerror"),u.$13.transportError("onerror","readyState: "+u.$1.readyState)},u.$1.onclose=e.$28(u);var c=yield e.getTransportPromise(u);return c});function r(e,n,r,o,a,i,l){return t.apply(this,arguments)}return r})(),e.getTransportPromise=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield new(s||(s=n("Promise")))(function(t,n){var r=e.$1.onerror,a=e.$1.onmessage,i=e.$1.onclose;e.$19=window.setTimeout(function(){e.$15(),e.$13.transportClosed(!1,"TIMEOUT"),e.__markerPoint("connect_timeout"),e.close(),n(o("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT)},e.$24),e.$1.onerror=function(){e.$19!=null&&(window.clearTimeout(e.$19),e.$19=null),r(),e.close(),d||n(o("DGWStream").StreamError.ESTABLISHMENT_ERROR)},e.$1.onclose=function(t){e.$19!=null&&(window.clearTimeout(e.$19),e.$19=null),i(t),t.code===o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?n(o("DGWStream").StreamError.UNAUTHORIZED):n(t.code+":"+t.reason)},e.$1.onmessage=function(n){a(n),e.$19!=null&&!e.$3&&(window.clearTimeout(e.$19),e.$19=null,e.__markerPoint("connect_success"),t(e))}});return t});function t(t){return e.apply(this,arguments)}return t})(),e.$26=function(t){return function(e){var n;if(t.$21||(t.$21=!0,t.__markerPoint("onmessage")),(n=t.$10)==null||n.reset(),!(e.data instanceof ArrayBuffer)){t.$13.transportError("Incorrect Data Protocol","Received "+typeof e.data+" instead of ArrayBuffer");return}t.$2.append(new Uint8Array(e.data)),t.$2.processData()}},e.$28=function(t){return function(e){var n,r=t.$23.getGlobalState();if(t.__markerPoint("onclose"),t.__markerAnnotate({string:{reason:e.reason},int:{code:e.code,realtimeWebSockets:r.realtime,lightspeedWebSockets:r.lightspeed}}),t.__endMarker(e.code===o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE?2:3),(n=t.$10)==null||n.cancel(),!(t.$8===!0||t.$4)){if(t.$23.streamClosed(t.$14.serviceId),t.$8=!0,t.$3===!0){t.$13.transportEstablishmentFailure(e),t.$5.clear(),t.$15();return}if(t.$15(),t.$3=!0,e.code!==o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){t.$13.transportClosed(!1,"Websocket connection failure with code: "+e.code+" reason: "+e.reason+" wasClean: "+String(e.wasClean));var a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;switch(e.code){case o("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_NORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case o("DGWConstants").WebsocketCloseCodes.GOING_AWAY:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY,i=o("DGWStream").StreamError.GOING_AWAY;break;case o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED,i=o("DGWStream").StreamError.UNAUTHORIZED;break;case o("DGWConstants").WebsocketCloseCodes.REJECTED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED,i=o("DGWStream").StreamError.REJECTED;break;case o("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST,i=o("DGWStream").StreamError.BAD_REQUEST;break;case o("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.DGW_SERVER_ERROR,a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;break}t.$14.streamGroupCallbacks.onStreamGroupError(a),t.$5.forEach(function(e){e.__transportCloseHook(i)}),t.$6.forEach(function(e){e.abortStream(i)})}else t.$13.transportClosed(!0,""),t.$14.streamGroupCallbacks.onStreamGroupTransportClose(),t.$5.forEach(function(e){e.__transportCloseHook()}),t.$6.forEach(function(e){e.abortStream(o("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});t.$5.clear(),t.$6.clear()}}},t.$27=function(){var e=this.$2.encodePing();if(e==null)throw r("err")("Failed to encode Ping Frame");var t=this.send(e);this.$18=this.$1.bufferedAmount,this.$13.transportPingSent("readyState:"+this.$1.readyState+", bufferedAmount:"+this.$18+", payloadSize:"+(e==null?void 0:e.byteLength)+", sent:"+String(t))},t.isClosedLocally=function(){return this.$3||this.$8||this.$4},t.streamEndCallback=function(t){this.$5.delete(t),this.$6.delete(t),this.$17.putBackStreamId(t)},t.canCreateGroupedStream=function(){return this.$17.streamIdAvailable()},t.createEstablishStreamFrame=function(n,a){var t=e.__prefixAppHeaders(a.groupedStreamHeaders);a.streamTraceId!=null&&(t[o("DGWConstants").HEADER_CONSTANTS.HEADER_STREAM_TRACE_ID]=a.streamTraceId);var i=this.$2.encodeEstablishStream(n,new Uint8Array(this.$11.encode(JSON.stringify(t))));if(i==null)throw this.$17.putBackStreamId(n),r("err")("Failed to encode EstablishStreamFrame");return i},t.getStreamId=function(){try{return this.$17.getNextStreamId()}catch(e){throw this.$13.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size),e}},t.__createGroupedStream=function(t,n,r,a){var e=this;return new(o("GroupedStream")).GroupedStream(t,n,r,this,a,this.$2,function(){e.streamEndCallback(t)})},t.__getStreamIdGenerator=function(){return new(o("StreamIdGenerator")).StreamIdGeneratorImpl},t.__markerPoint=function(t){var e=this.$20;(u||(u=r("QuickPerformanceLogger"))).markerPoint(c,t,{instanceKey:e})},t.__markerAnnotate=function(t){var e=this.$20;(u||(u=r("QuickPerformanceLogger"))).markerAnnotate(c,t,{instanceKey:e})},t.__endMarker=function(t){(u||(u=r("QuickPerformanceLogger"))).markerEnd(c,t,this.$20)},e})();l.StreamGroupWebSocketTransport=p}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e={maxRetries:r("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},s=(function(){function t(e,t,n,r,a,i,l,s,u){var c,d,m,p,_,f,g,h,y;this.$2=u,this.$1=u.getNewStreamGroupId();var C=(c=l.overrideUrl)!=null?c:a;this.$5=null,this.$3={appId:e,appVersion:t,authType:(d=l.authType)!=null?d:n,deviceId:l.deviceId,dgwVersion:r,headers:l.streamGroupAppHeaders,tier:(m=l.serviceTier)!=null?m:o("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:C,fbId:i,loggingId:l.loggingId,serviceId:l.serviceId,streamGroupCallbacks:s,keepAliveMs:l.keepAliveMs,regionHint:l.regionHint,enableFirstStreamOnWsHandshake:!1,authToken:l.authToken,connectTimeoutMs:l.connectTimeoutMs},this.$4=l,this.streamGroupLoggingContext=new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(p=l.verboseLoggingEnabled)!=null?p:!1),this.$6=o("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(_=this.$3.deviceId)!=null?_:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers.extends({},this.$3.headers),loggingId:(f=this.$3.loggingId)!=null?f:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(g=this.$3.regionHint)!=null?g:void 0,trafficTracing:(h=this.$4.trafficTracing)!=null?h:void 0,authToken:(y=this.$4.authToken)!=null?y:void 0})}var r=t.prototype;return r.initTransport=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this,t={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){e.$2.removeStreamGroupAndTransport(e.$1)},t);var n;try{n=yield this.$5,this.$5=null}catch(e){throw this.$5=null,e}return this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,n),n});function t(){return e.apply(this,arguments)}return t})(),r.establishStream=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i){var l=this;if(this.$2.containsStreamGroup(this.$1)===!1)if(this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream"),this.$3.enableFirstStreamOnWsHandshake){var u=yield o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(t,n,this.$3,this.streamGroupLoggingContext,function(){l.$2.removeStreamGroupAndTransport(l.$1)},e);return this.$2.setStreamGroupAndTransport(this.$1,u.transport),u.streamPromise}else{this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){l.$2.removeStreamGroupAndTransport(l.$1)},e);var s;try{s=yield this.$5,this.$5=null}catch(e){throw this.$5=null,e}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,s)}return this.establishStreamWithTransport(t,n,r,a,i)});function r(e,n,r,o,a){return t.apply(this,arguments)}return r})(),r.establishStreamWithTransport=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a){var i,l=e.loggingId;this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream","initialData:"+String(n!=null),!0,l);var s=yield this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(t,e,new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,l,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,e.disableFalcoLogging,(i=e.verboseLoggingEnabled)!=null?i:!1),n,r,a);return s});function t(t,n,r,o,a){return e.apply(this,arguments)}return t})(),r.canCreateGroupedStream=function(){var e=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var t=this.$2.getStreamGroupTransport(this.$1);e=t.canCreateGroupedStream()}return o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,e?"can_create":"cannot_create"),e},r.close=function(){if(this.$2.containsStreamGroup(this.$1)){var e=this.$2.getStreamGroupTransport(this.$1);e.close()}},t})();l.StreamGroup=s}),98);
__d("StreamGroupRegistry",["Random","err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new Map,this.$2=new Set}var t=e.prototype;return t.setStreamGroupAndTransport=function(t,n){this.$1.set(t,n)},t.containsStreamGroup=function(t){return this.$1.has(t)},t.removeStreamGroupAndTransport=function(t){this.$1.delete(t)},t.getStreamGroupTransport=function(t){var e=this.$1.get(t);if(e==null)throw r("err")("No stream group transport");return e},t.getNewStreamGroupId=function(){for(var e=o("Random").uint32();this.$2.has(e);)e=o("Random").uint32();return this.$2.add(e),e},e})();l.StreamGroupRegistry=e}),98);
__d("RawDGWClient",["CurrentUser","DGWAuth","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.appId,n=e.appVersion,r=e.authType,a=e.dgwVersion,i=e.endpoint,l=e.fbId,s=e.authToken;this.$1=t,this.$2=n,this.$3=r,this.$5=a,this.$6=i,this.$7=l,this.$8=new(o("StreamGroupRegistry")).StreamGroupRegistry,this.$4=s}var t=e.prototype;return t.createStreamGroup=function(t,n){var e,r;this.handleUserChecks((e=n.authType)!=null?e:this.$3);var a=(r=n.authToken)!=null?r:this.$4;return a!=null&&this.$3===o("DGWAuth").DGWAuth.GUEST&&(n.authToken=a),new(o("StreamGroup")).StreamGroup(this.$1,this.$2,this.$3,this.$5,this.$6,this.$7,n,t,this.$8)},t.handleUserChecks=function(t){if(!r("CurrentUser").isLoggedInNow()&&o("DGWAuth").fromDGWAuthToString(t)!=="GUEST"&&!r("isFastRefreshEnabledForCurrentDomain")())throw o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated"),o("DGWStream").StreamError.UNAUTHENTICATED},e})();l.RawDGWClient=e}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("RawDGWClient")).RawDGWClient({appId:r("DGWWebConfig").appId,appVersion:r("DGWWebConfig").appVersion,authType:o("DGWAuth").fromStringToDGWAuth((e=r("DGWEnvUtil")).getDGWAuthType()),dgwVersion:e.getDGWVersion(),endpoint:e.getDGWEndpoint(),fbId:r("DGWWebConfig").fbId,authToken:e.getDGWAuthToken()});function u(){if(r("DGWEnvUtil").isDGWEnvCompatible())return s;throw r("err")("unsupported_environment_retry_with_mqtt")}l.default=u}),98);
__d("DGWRequestStreamUtils",["Base64","WebDriverConfig","cr:3024","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,o,a){var i={};for(var l of Object.entries(e)){var s=l[0],u=l[1];typeof u=="string"?i["XRSS-"+s]=u:typeof u=="number"?i["XRSN-"+s]=u.toString():typeof u=="boolean"?i["XRSB-"+s]=u.toString():typeof u=="object"&&u!=null&&(i["XRSO-"+s]=r("Base64").encode(JSON.stringify(u)))}if(t&&(i["xrs-body"]="true"),o!=null&&o.length>0&&(i["xrs-instrumentation"]=r("Base64").encode(o)),i["XRS-Accept-Ack"]="RSAck",a!=null&&a.ackTimeoutSec!=null&&(i["XRS-SRAck-Timeout"]=a.ackTimeoutSec.toString()),i["XRSS-http_referer"]=window.location.href,r("WebDriverConfig").isTestRunning&&r("gkx")("20919")){var c=n("cr:3024")==null?void 0:n("cr:3024").get();c!=null&&(i["XRSB-is_test"]="true",i["XRSS-original_request_id"]=c)}return i}function s(e){return Object.keys(e).reduce(function(t,n){return(typeof e[n]=="string"||typeof e[n]=="boolean"||typeof e[n]=="number"||typeof e[n]=="object")&&(t[n]=e[n]),t},{})}function u(e){if(e.response&&e.response.instrumentation_data!=null&&e.response.instrumentation_data.length>0)try{var t,n=JSON.parse(new TextDecoder("utf-8").decode(e.response.instrumentation_data));return{auxId:n.auxId,dfTraceId:(t=n.dataFlowTracingData)==null?void 0:t.traceId}}catch(e){}return null}function c(e,t){var n=e.headers,r=e.body;if(t.kill_body===!0&&(r=null),t.new_body!=null&&(r=t.new_body),t.new_headers!=null)try{n=s(JSON.parse(t.new_headers))}catch(e){}if(t.patch_headers!=null)try{n=babelHelpers.extends({},n,s(JSON.parse(t.patch_headers)))}catch(e){}return{headers:n,body:r}}l.convertHeaders=e,l.cleanHeaders=s,l.getInstrumentationDataFieldsFromPayload=u,l.transformContextWithRewriteDelta=c}),98);
__d("DGWStreamHandler",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n,r,o){this.$2=e,this.$3=t,this.$4=n,this.$5=r,this.$6=o,this.$1=!0}var t=e.prototype;return t.onClose=function(t){this.$1&&this.$2(t)},t.onDataReceived=function(t){this.$1&&this.$3(t)},t.onError=function(t){this.$1&&this.$4(t)},t.onStreamMustDrain=function(t,n){this.$1&&this.$5(t,n)},t.onServerHasFinishedSendingData=function(t){this.$1&&this.$6(t)},t.stop=function(){this.$1=!1},t.isStopped=function(){return!this.$1},e})();i.default=e}),66);
__d("InflightAmends",["Deferred","err"],(function(t,n,r,o,a,i,l){"use strict";var e="inflight_amends_timeout",s="inflight_amends_duplicate_id",u=(function(){function t(e,t,n){this.$1=e,this.$3=t,this.$4=n,this.$2=new Map}var n=t.prototype;return n.add=function(n){var t=this;if(this.$2.has(n))throw r("err")(s);var o=new(r("Deferred")),a=Date.now(),i=setTimeout(function(){t.$2.has(n)&&t.reject(n,r("err")(e))},this.$1);return this.$2.set(n,{id:n,deferred:o,createdTimestampMs:a,timeoutId:i}),o.getPromise()},n.getPromise=function(t){var e;return(e=this.$5(t))==null?void 0:e.deferred.getPromise()},n.resolve=function(t,n){var e=this.$5(t);e&&(e.deferred.resolve==null||e.deferred.resolve(n),this.$3(e.id,Date.now()-e.createdTimestampMs),this.$6(e))},n.reject=function(t,n){var e=this.$5(t);e&&(e.deferred.reject==null||e.deferred.reject(n),this.$4(e.id,n),this.$6(e))},n.rejectAll=function(t){for(var e of this.$2.entries()){var n=e[0],r=e[1];this.reject(n,t)}},n.getSize=function(){return this.$2.size},n.getAllPromises=function(){var e=[];for(var t of this.$2.values())e.push(t.deferred.getPromise());return e},n.$6=function(t){clearTimeout(t.timeoutId),this.$2.delete(t.id)},n.$5=function(t){return this.$2.get(t)},t})();l.default=u}),98);
__d("RequestStreamCloseReason",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDataEnd","ServerDrain","ReestablishError","ClientError"]);i.RequestStreamCloseReason=e}),66);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{expected_existing_headers:"",patch_headers_if_match:""}}function c(){return{bytes:Uint8Array.of()}}function d(){return{message:""}}function m(){return{reason:o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}}function p(){return{}}function _(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}}function f(){return{caller_timestamp_ms:"0"}}function g(){return{original_ping_timestamp_ms:"0"}}function h(){return{}}function y(t,n){n.writeStructBegin("ResponseRewriteRequest"),t.new_headers!=null&&(n.writeFieldBegin({fname:"new_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.new_headers),n.writeFieldEnd()),t.new_body!=null&&(n.writeFieldBegin({fname:"new_body",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.new_body),n.writeFieldEnd()),t.patch_headers!=null&&(n.writeFieldBegin({fname:"patch_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.patch_headers),n.writeFieldEnd()),t.kill_body!=null&&(n.writeFieldBegin({fname:"kill_body",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:4}),n.writeBool(t.kill_body),n.writeFieldEnd()),t.temporary!=null&&(n.writeFieldBegin({fname:"temporary",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:5}),n.writeBool(t.temporary),n.writeFieldEnd()),t.conditional_patch_headers!=null&&(n.writeFieldBegin({fname:"conditional_patch_headers",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),C(t.conditional_patch_headers,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){if(n.writeStructBegin("ResponseRewriteConditionalPatchHeaders"),n.writeFieldBegin({fname:"expected_existing_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.expected_existing_headers!=null)n.writeString(t.expected_existing_headers);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"patch_headers_if_match",ftype:e.STRING,fid:2}),t.patch_headers_if_match!=null)n.writeString(t.patch_headers_if_match);else{var a="";n.writeString(a)}n.writeFieldEnd(),t.patch_headers_otherwise!=null&&(n.writeFieldBegin({fname:"patch_headers_otherwise",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.patch_headers_otherwise),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function b(t,n){if(n.writeStructBegin("ResponseData"),n.writeFieldBegin({fname:"bytes",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.bytes!=null)n.writeBinary(t.bytes);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.metadata!=null&&(n.writeFieldBegin({fname:"metadata",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.metadata),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function v(t,n){if(n.writeStructBegin("LogMessage"),n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.message!=null)n.writeString(t.message);else{var o="";n.writeString(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function S(t,n){if(n.writeStructBegin("Termination"),n.writeFieldBegin({fname:"reason",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.reason!=null){var a;n.writeI32((a=t.reason)!=null?a:0)}else{var i=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.message!=null&&(n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.message),n.writeFieldEnd()),t.retry_delay_ms!=null&&(n.writeFieldBegin({fname:"retry_delay_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(r("jsbi").BigInt(t.retry_delay_ms)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function R(t,n){n.writeStructBegin("AmendStreamAck"),t.amendment_id!=null&&(n.writeFieldBegin({fname:"amendment_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.amendment_id)),n.writeFieldEnd()),t.accepted!=null&&(n.writeFieldBegin({fname:"accepted",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:2}),n.writeBool(t.accepted),n.writeFieldEnd()),t.result!=null&&(n.writeFieldBegin({fname:"result",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function L(t,n){if(n.writeStructBegin("StreamCheck"),n.writeFieldBegin({fname:"stream_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.stream_id!=null)n.writeI64(r("jsbi").BigInt(t.stream_id));else{var a="0";n.writeI64(r("jsbi").BigInt(a))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"last_sequencer",ftype:e.I32,fid:2}),t.last_sequencer!=null)n.writeI32(t.last_sequencer);else{var i=0;n.writeI32(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"amendment_count",ftype:e.I32,fid:4}),t.amendment_count!=null)n.writeI32(t.amendment_count);else{var l=0;n.writeI32(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"last_status",ftype:e.I32,fid:3}),t.last_status!=null){var s;n.writeI32((s=t.last_status)!=null?s:0)}else{var u=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);n.writeI32(u!=null?u:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function E(t,n){if(n.writeStructBegin("Ping"),n.writeFieldBegin({fname:"caller_timestamp_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.caller_timestamp_ms!=null)n.writeI64(r("jsbi").BigInt(t.caller_timestamp_ms));else{var o="0";n.writeI64(r("jsbi").BigInt(o))}if(n.writeFieldEnd(),t.streams_to_check!=null){n.writeFieldBegin({fname:"streams_to_check",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.streams_to_check.length});for(var a of t.streams_to_check)L(a,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function k(t,n){if(n.writeStructBegin("Pong"),n.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.original_ping_timestamp_ms!=null)n.writeI64(r("jsbi").BigInt(t.original_ping_timestamp_ms));else{var o="0";n.writeI64(r("jsbi").BigInt(o))}if(n.writeFieldEnd(),t.stream_ids_missing!=null){n.writeFieldBegin({fname:"stream_ids_missing",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.I64,size:t.stream_ids_missing.length});for(var a of t.stream_ids_missing)n.writeI64(r("jsbi").BigInt(a));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_behind!=null){n.writeFieldBegin({fname:"stream_ids_behind",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:3}),n.writeListBegin({etype:e.I64,size:t.stream_ids_behind.length});for(var i of t.stream_ids_behind)n.writeI64(r("jsbi").BigInt(i));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_with_lost_amendments!=null){n.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:4}),n.writeListBegin({etype:e.I64,size:t.stream_ids_with_lost_amendments.length});for(var l of t.stream_ids_with_lost_amendments)n.writeI64(r("jsbi").BigInt(l));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_with_wrong_status!=null){n.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:5}),n.writeListBegin({etype:e.I64,size:t.stream_ids_with_wrong_status.length});for(var s of t.stream_ids_with_wrong_status)n.writeI64(r("jsbi").BigInt(s));n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function I(t,n){if(n.writeStructBegin("StreamResponseDelta"),t.flow_status!=null){var o;n.writeFieldBegin({fname:"flow_status",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32((o=t.flow_status)!=null?o:0),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.log!=null){n.writeFieldBegin({fname:"log",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),v(t.log,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.rewrite!=null){n.writeFieldBegin({fname:"rewrite",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),y(t.rewrite,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.data!=null){n.writeFieldBegin({fname:"data",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),b(t.data,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.termination!=null){n.writeFieldBegin({fname:"termination",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),S(t.termination,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.amend_ack!=null){n.writeFieldBegin({fname:"amend_ack",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),R(t.amend_ack,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function T(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.new_headers=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.new_body=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).BOOL?n.kill_body=t.readBool():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).BOOL?n.temporary=t.readBool():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRUCT?n.conditional_patch_headers=D(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function D(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.expected_existing_headers=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers_if_match=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers_otherwise=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.expected_existing_headers===void 0&&(n.expected_existing_headers=""),n.patch_headers_if_match===void 0&&(n.patch_headers_if_match=""),n}function x(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.bytes=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.metadata=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.bytes===void 0&&(n.bytes=Uint8Array.of()),n}function $(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.message===void 0&&(n.message=""),n}function P(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.reason=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I64?n.retry_delay_ms=t.readI64().toString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.reason===void 0&&(n.reason=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)),n}function N(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.amendment_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).BOOL?n.accepted=t.readBool():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.result=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function M(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.stream_id=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.last_sequencer=t.readI32():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.amendment_count=t.readI32():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.last_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.stream_id===void 0&&(n.stream_id="0"),n.last_sequencer===void 0&&(n.last_sequencer=0),n.amendment_count===void 0&&(n.amendment_count=0),n.last_status===void 0&&(n.last_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)),n}function w(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.caller_timestamp_ms=t.readI64().toString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.streams_to_check=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=M(t);n.streams_to_check.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.caller_timestamp_ms===void 0&&(n.caller_timestamp_ms="0"),n}function A(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.original_ping_timestamp_ms=t.readI64().toString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_missing=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readI64().toString();n.stream_ids_missing.push(u)}}else t.skip(a);break;case 3:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_behind=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=t.readI64().toString();n.stream_ids_behind.push(m)}}else t.skip(a);break;case 4:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_with_lost_amendments=[];for(var p=t.readListBegin(),_=0;_<p.size;_++){var f=t.readI64().toString();n.stream_ids_with_lost_amendments.push(f)}}else t.skip(a);break;case 5:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_with_wrong_status=[];for(var g=t.readListBegin(),h=0;h<g.size;h++){var y=t.readI64().toString();n.stream_ids_with_wrong_status.push(y)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.original_ping_timestamp_ms===void 0&&(n.original_ping_timestamp_ms="0"),n}function F(t){var n,a={};for(t.readStructBegin();;){var i=t.readFieldBegin(),l=i.ftype,s=i.fid;if(l===(e||(e=r("ThriftTypes"))).STOP)break;switch(s){case 1:if(l===(e||(e=r("ThriftTypes"))).I32)if(n==null)a.flow_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(t.readI32()),n="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+n);else t.skip(l);break;case 2:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.log=$(t),n="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+n);else t.skip(l);break;case 3:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.rewrite=T(t),n="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+n);else t.skip(l);break;case 4:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.data=x(t),n="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+n);else t.skip(l);break;case 5:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.termination=P(t),n="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+n);else t.skip(l);break;case 6:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.amend_ack=N(t),n="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+n);else t.skip(l);break;default:t.skip(l)}t.readFieldEnd()}return t.readStructEnd(),a}l.ResponseRewriteRequest$DefaultConstructor=s,l.ResponseRewriteConditionalPatchHeaders$DefaultConstructor=u,l.ResponseData$DefaultConstructor=c,l.LogMessage$DefaultConstructor=d,l.Termination$DefaultConstructor=m,l.AmendStreamAck$DefaultConstructor=p,l.StreamCheck$DefaultConstructor=_,l.Ping$DefaultConstructor=f,l.Pong$DefaultConstructor=g,l.StreamResponseDelta$DefaultConstructor=h,l.serializeResponseRewriteRequest=y,l.serializeResponseRewriteConditionalPatchHeaders=C,l.serializeResponseData=b,l.serializeLogMessage=v,l.serializeTermination=S,l.serializeAmendStreamAck=R,l.serializeStreamCheck=L,l.serializePing=E,l.serializePong=k,l.serializeStreamResponseDelta=I,l.deserializeResponseRewriteRequest=T,l.deserializeResponseRewriteConditionalPatchHeaders=D,l.deserializeResponseData=x,l.deserializeLogMessage=$,l.deserializeTermination=P,l.deserializeAmendStreamAck=N,l.deserializeStreamCheck=M,l.deserializePing=w,l.deserializePong=A,l.deserializeStreamResponseDelta=F}),98);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500}),l=n("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});a.exports={Ack:e,Payload$Types:l}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{body:Uint8Array.of()}}function c(){return{amendment:Uint8Array.of()}}function d(){return{ack:o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}}function m(){return{delta:[]}}function p(){return{}}function _(t,n){n.writeStructBegin("RequestStreamHeaders"),t.headers!=null&&(n.writeFieldBegin({fname:"headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeBinary(t.headers),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function f(t,n){if(n.writeStructBegin("RequestStreamBody"),n.writeFieldBegin({fname:"body",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.body!=null)n.writeBinary(t.body);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function g(t,n){if(n.writeStructBegin("AmendStream"),t.amendment_id!=null&&(n.writeFieldBegin({fname:"amendment_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.amendment_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"amendment",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),t.amendment!=null)n.writeBinary(t.amendment);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.is_query!=null&&(n.writeFieldBegin({fname:"is_query",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:3}),n.writeBool(t.is_query),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function h(t,n){if(n.writeStructBegin("StreamResponseAck"),t.response_id!=null&&(n.writeFieldBegin({fname:"response_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"ack",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),t.ack!=null){var a;n.writeI32((a=t.ack)!=null?a:0)}else{var i=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.query_result!=null&&(n.writeFieldBegin({fname:"query_result",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.query_result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function y(t,n){if(n.writeStructBegin("StreamResponse"),t.response_id!=null&&(n.writeFieldBegin({fname:"response_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"delta",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),t.delta!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.delta.length});for(var a of t.delta)o("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(a,n);n.writeListEnd()}else{var i=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:i.length});for(var l of i)o("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(l,n);n.writeListEnd()}if(n.writeFieldEnd(),t.ack_level!=null){var s;n.writeFieldBegin({fname:"ack_level",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32((s=t.ack_level)!=null?s:0),n.writeFieldEnd()}t.query_request!=null&&(n.writeFieldBegin({fname:"query_request",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.query_request),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){if(n.writeStructBegin("Payload"),t.request_headers!=null){n.writeFieldBegin({fname:"request_headers",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),_(t.request_headers,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.request_body!=null){n.writeFieldBegin({fname:"request_body",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),f(t.request_body,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.amend!=null){n.writeFieldBegin({fname:"amend",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),g(t.amend,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ack!=null){n.writeFieldBegin({fname:"ack",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),h(t.ack,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.response!=null){n.writeFieldBegin({fname:"response",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),y(t.response,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ping!=null){n.writeFieldBegin({fname:"ping",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),o("RequestStreamCommonRequestStreamCommonSerializers").serializePing(t.ping,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.pong!=null){n.writeFieldBegin({fname:"pong",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:7}),o("RequestStreamCommonRequestStreamCommonSerializers").serializePong(t.pong,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function b(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.headers=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function v(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.body=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.body===void 0&&(n.body=Uint8Array.of()),n}function S(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.amendment_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.amendment=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.is_query=t.readBool():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.amendment===void 0&&(n.amendment=Uint8Array.of()),n}function R(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.response_id=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.ack=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.query_result=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.ack===void 0&&(n.ack=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)),n}function L(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.response_id=t.readI64().toString():t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.delta=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=o("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(t);n.delta.push(c)}}else t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.ack_level=o("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(t.readI32()):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.query_request=t.readBinary():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.delta===void 0&&(n.delta=[]),n}function E(t){var n,a={};for(t.readStructBegin();;){var i=t.readFieldBegin(),l=i.ftype,s=i.fid;if(l===(e||(e=r("ThriftTypes"))).STOP)break;switch(s){case 1:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.request_headers=b(t),n="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+n);else t.skip(l);break;case 2:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.request_body=v(t),n="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+n);else t.skip(l);break;case 3:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.amend=S(t),n="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+n);else t.skip(l);break;case 4:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.ack=R(t),n="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+n);else t.skip(l);break;case 5:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.response=L(t),n="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+n);else t.skip(l);break;case 6:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.ping=o("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(t),n="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+n);else t.skip(l);break;case 7:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.pong=o("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(t),n="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+n);else t.skip(l);break;default:t.skip(l)}t.readFieldEnd()}return t.readStructEnd(),a}l.RequestStreamHeaders$DefaultConstructor=s,l.RequestStreamBody$DefaultConstructor=u,l.AmendStream$DefaultConstructor=c,l.StreamResponseAck$DefaultConstructor=d,l.StreamResponse$DefaultConstructor=m,l.Payload$DefaultConstructor=p,l.serializeRequestStreamHeaders=_,l.serializeRequestStreamBody=f,l.serializeAmendStream=g,l.serializeStreamResponseAck=h,l.serializeStreamResponse=y,l.serializePayload=C,l.deserializeRequestStreamHeaders=b,l.deserializeRequestStreamBody=v,l.deserializeAmendStream=S,l.deserializeStreamResponseAck=R,l.deserializeStreamResponse=L,l.deserializePayload=E}),98);
__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(t){case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:return e.seenAccepted||e.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?e:{flowStatus:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:return!e.seenAccepted||e.flowStatus===t?e:{flowStatus:t,seenAccepted:!0}}}l.getNextState=e}),98);
__d("StreamRetryState",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=120*1e3,s=(function(){function t(){this.$1=0}var n=t.prototype;return n.resetErrorAndRetryCount=function(){this.$1=0},n.onRetry=function(){this.$1+=1},n.getRetryCount=function(){return this.$1},n.getBackoffDelayMs=function(){if(this.$1<=1)return 0;if(this.$1===2)return e*Math.random();var t=e*Math.pow(2,this.$1-3),n=t*Math.random(),r=t+n;return Math.min(r,l)},t})();i.default=s}),66);
__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamHandler","InflightAmends","ODS","Promise","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","RtiWebRequestStreamClient","StreamRetryState","asyncToGeneratorRuntime","err","gkx","justknobx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=4,m=0,p=1e3,_=2,f=r("gkx")("20915")?3e4:5e3,g="dgw_stream_send_ack_failure",h=(e=r("qex")._("2097"))!=null?e:!1,y=(s=r("qex")._("2100"))!=null?s:!1;function C(e){if(!e){var t=r("err")(g);throw t.stack,t}}function b(e,t){if(e==null||e.length===0)return null;var n=JSON.parse(e);return n.auxId=t,new TextEncoder().encode(JSON.stringify(n))}function v(e){var t={},n=e.delta;return n.forEach(function(e){if(e.flow_status)switch(t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Flow_status,e.flow_status){case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:t.flow_status="Accepted";break;case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:t.flow_status="Started";break;case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:t.flow_status="Stopped";break}else e.log?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Log:e.rewrite?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Rewrite:e.data?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Data:e.termination?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Termination:e.amend_ack&&(t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Amend_ack)}),t}var S=(function(){function e(e,t,n,a,i,l){var s=this,u,c,m;this.$6=null,this.$7={},this.$10=!1,this.$15=new(r("StreamRetryState")),this.$16=0,this.$17=0,this.$18=0,this.$21=0;var p=null;typeof t=="string"?p=new TextEncoder().encode(t):typeof t=="object"&&(p=t),this.$1={headers:e,body:p},this.$3=n,this.$4=a,this.$12=d,this.$9=!1,this.$14=!1,this.$20=l;var _=a==null?void 0:a.serviceId;i!=null&&(this.$22()||(i.dgwStreamGroupLoggingId=this.$20.getStreamGroupLoggingId(_)),i.dgwCountPriorStreamsInGroup=this.$20.guessStreamGroupPriorStreamCount(_),i.transport="WEB_RS_STARGATE"),this.$5=o("RequestStreamE2ESampling").validateInstrumentationData(e,i,a==null?void 0:a.requestLogContext,a==null?void 0:a.upsampleMultiplier),this.$22()?this.$7.disableFalcoLogging=!0:this.$6=o("RequestStreamE2ELogger").createStreamLogger(e,this.$5,o("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE),(a==null?void 0:a.deviceId)!=null&&(this.$7.deviceId=a.deviceId),this.$6&&(this.$7.loggingId=this.$6.getRequestId()),a&&a.overrideUrl!=null&&(this.$7.overrideUrl=a.overrideUrl),_!=null&&(this.$7.serviceId=_),this.$8={flowStatus:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1},this.$19=new(r("InflightAmends"))(f,function(e,t){var n;(n=s.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,r("RequestStreamE2EClientLoggerEvent").RECEIVED,babelHelpers.extends({},s.$23(),{latency:t.toString()}),e)},function(e,t){if(t.message!==g){var n;(n=s.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,r("RequestStreamE2EClientLoggerEvent").FAILURE,babelHelpers.extends({},s.$23(),{reason:t.message}),e)}}),(u=this.$6)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(c=t==null||(m=t.length)==null?void 0:m.toString())!=null?c:"0"},"0","0")}var t=e.prototype;return t.getInstrumentationData=function(){return this.$5},t.getE2EClientLogger=function(){return this.$6},t.amendWithAck=function(t){var e=this.$24(t,!0);return e==null?(c||(c=n("Promise"))).resolve(!1):this.$19.getPromise(e)||(c||(c=n("Promise"))).resolve(!1)},t.amendWithoutAck=function(t){this.$24(t,!1)},t.cancel=function(){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").RECEIVED),this.$9=!0,this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)},t.start=function(t){var e=this;t===void 0&&(t=!1);var a=String(this.$16++),i=Date.now();return this.$26(a).then(function(){var t;e.$14=!1,e.$21=0;var n=(Date.now()-i).toString();(t=e.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:n},a,String(e.$18))}).catch(function(i){if(i.stack,!(i.message===g&&e.$10))if(e.$14=!1,i!==o("DGWStream").StreamError.ESTABLISHMENT_ERROR){var l,s=i.message;if(i===o("DGWStream").StreamError.UNAUTHENTICATED?s="UNAUTHENTICATED":i===o("DGWStream").StreamError.UNAUTHORIZED&&(s="UNAUTHORIZED"),(l=e.$6)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:s},a,String(e.$18)),e.$25(t?o("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:o("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,s,!0),i===o("DGWStream").StreamError.UNAUTHENTICATED||i===o("DGWStream").StreamError.UNAUTHORIZED)return;throw i}else{var u,d;(u=e.$6)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:(d=i.message)!=null?d:i},a,String(e.$18)),e.$15.onRetry();var m=r("gkx")("20916")?e.$15.getBackoffDelayMs():p*Math.pow(_,e.$21);return new(c||(c=n("Promise")))(function(e){return window.setTimeout(e,m)}).then(function(){return e.$21++,e.$18++,e.start()})}})},t.getFlowStatus=function(){return this.$8.flowStatus},t.shouldTerminateOrRetry=function(t,a,i,l){var e=this;if(!this.$14){var s=a;if(this.$12||(s="cannot retry for error: "+a+" because of hit max retry limitation"),t!==o("RequestStreamCloseReason").RequestStreamCloseReason.ClientError){var u;(u=this.$6)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:s},null,String(this.$18))}var d=i&&(r("gkx")("20916")||this.$12);if(this.$25(t,s,!d),d){var p=r("gkx")("20916")?Math.max(l!=null?l:0,this.$15.getBackoffDelayMs()):l!=null?l:m;return this.$14=!0,new(c||(c=n("Promise")))(function(e){return window.setTimeout(e,p)}).then(function(){return e.$27()}).catch(function(e){})}}},t.$28=function(){return this.$11!=null},t.$24=function(t,n){var e,a=this,i=typeof t=="string"?new TextEncoder().encode(t):t,l=String(this.$17++);(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{},l);var s=b(this.$5,l),u={amend:{amendment:i,instrumentation_data:s}};n&&u.amend&&(u.amend.amendment_id=l);var c=o("CompactSerializerPolyfill").serialize(u,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload),d=Date.now();if(this.$29()&&this.$11!=null){var m,p,_;return n&&this.$19.add(l),this.$11.send(c).then(function(e){var t;C(e);var n=(Date.now()-d).toString();(t=a.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:n},l)}).catch(function(e){var t;(t=a.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:e.message},l),a.$19.reject(l,e)}),(m=this.$6)==null||m.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:(p=t==null||(_=t.length)==null?void 0:_.toString())!=null?p:"0"},l),l}else{var f;(f=this.$6)==null||f.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},l)}},t.$26=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=this;if(this.$9)throw new Error("stream_already_canceled");var n,a=this.$2||this.$1;try{var i=this.$30();this.$13=i;var l=a.headers.graphiql_sandbox,s=babelHelpers.extends({},a.headers,this.$31());l!=null&&(s=babelHelpers.extends({},s,{www_sandbox:l,distillery_sandbox:l+":8086"}));var u=o("DGWRequestStreamUtils").convertHeaders(s,a.body!=null,this.$5);this.$11=yield this.$20.establishStream(u,i,this.$7)}catch(e){if(e===o("DGWStream").StreamError.ESTABLISHMENT_ERROR||o("DGWStream").StreamError.isValid(e)&&!o("DGWStream").isRetryableError(e))throw e;if(o("DGWStream").StreamError.isValid(e)&&o("DGWStream").isRetryableError(e)){this.$32(e);return}throw e}if(this.$9){this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0);return}var c=new Uint8Array([]);if(a.body!=null){var m={request_body:{body:a.body}};c=o("CompactSerializerPolyfill").serialize(m,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload)}if(!this.$11)throw new Error("dgwstream_is_null");var p=this.$11.send(c).then(function(e){C(e),t.$9&&t.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)});return(n=this.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").SENT,{},e,String(this.$18)),this.$12=d,p});function t(t){return e.apply(this,arguments)}return t})(),t.$29=function(){return this.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted},t.$25=function(t,n,r){var e;this.$11&&t!==o("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&t!==o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close(),(e=this.$13)==null||e.stop(),this.$11=null,this.$10=!0,this.$33(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped),r&&!this.$9&&this.$3.onTermination("terminate stream because "+t+" with msg : "+n)},t.$33=function(t){var e=this.$8;return this.$8=o("RequestStreamState").getNextState(e,t),e!==this.$8},t.$27=function(){return this.$12--,this.$18++,this.$15.onRetry(),this.start(!0)},t.$34=function(t){var e=this,n=o("CompactSerializerPolyfill").deserialize(t,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(n.response){var a,i,l=o("DGWRequestStreamUtils").getInstrumentationDataFieldsFromPayload(n),s=l==null?void 0:l.auxId,c=l==null?void 0:l.dfTraceId;if(!this.$28()){var d;(d=this.$6)==null||d.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},s,String(this.$18),c);return}var m;(a=this.$6)==null||a.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").RECEIVED,v(n.response),s,String(this.$18),c,m);var p=n.response.delta;p.forEach(function(t){if(t.data)e.$15.resetErrorAndRetryCount(),r("justknobx")._("4109")?e.$3.onData(new TextDecoder("utf-8").decode(t.data.bytes)):e.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?e.$3.onData(new TextDecoder("utf-8").decode(t.data.bytes)):(u||(u=o("ODS"))).bumpEntityKey(110,"RequestStream","data_before_started_"+(e.$22()?"falco":"graphql"));else if(t.flow_status){var n=t.flow_status;n===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&e.$15.resetErrorAndRetryCount(),e.$33(n)&&e.$3.onFlowStatus(n)}else if(t.termination){var a,i=(a=t.termination.message)!=null?a:"unknown termination msg";e.$2=null,e.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,i,t.termination.reason===o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,t.termination.retry_delay_ms!=null?parseInt(t.termination.retry_delay_ms,10):null)}else if(t.log)e.$3.onLog(t.log.message);else if(t.amend_ack){var l=t.amend_ack.amendment_id;if(l!=null){var s=t.amend_ack.accepted||!1;e.$19.resolve(l,s)}}else if(t.rewrite){var c=o("DGWRequestStreamUtils").transformContextWithRewriteDelta(e.$1,t.rewrite);t.rewrite.temporary===!0?e.$2=c:e.$1=c}}),(i=this.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").SENT,v(n.response),s,String(this.$18),c),n.response.ack_level===o("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&n.response.response_id!=null&&this.$35(n.response.response_id,s)}else{var _;(_=this.$6)==null||_.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"},null,String(this.$18))}},t.$35=function(t,n){var e={ack:{response_id:t,ack:o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}},a=o("CompactSerializerPolyfill").serialize(e,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$11!=null){var i;this.$11.send(a),(i=this.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,r("RequestStreamE2EClientLoggerEvent").SENT,{},n,String(this.$18))}else{var l;(l=this.$6)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},n,String(this.$18))}},t.$22=function(){return this.$1.headers.method==="Falco"},t.$30=function(){return new(r("DGWStreamHandler"))(this.$36.bind(this),this.$37.bind(this),this.$32.bind(this),this.$38.bind(this),this.$39.bind(this))},t.$39=function(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Has FinishedSendingData"},null,String(this.$18)),this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.ServerDataEnd,"Client receive OnServerHasFinishedSendingData and Server will not send more data",!0)},t.$36=function(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Close Connection"},null,String(this.$18)),this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)},t.$37=function(t){try{this.$34(t)}catch(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:t.message},null,String(this.$18)),this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,t.message,!1)}},t.$32=function(t){var e="",n=o("DGWStream").isRetryableError(t);e="StreamError: Received "+t;var r=h?this.$12>0:n,a=y?p*_:void 0;this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,e,r,a)},t.$38=function(t,n){this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,n,!0)},t.$31=function(){return r("RtiWebRequestStreamClient").overrideHeaders},t.$23=function(){var e={};return r("gkx")("20918")&&(e.pending_amendments_size=this.$19.getSize().toString()),e},e})();l.default=S}),98);
__d("DGWStreamGroupHandler",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$2=t,this.$3=n}var t=e.prototype;return t.onStreamGroupError=function(t){this.$1(t)},t.onStreamGroupMustDrain=function(t){this.$2(t)},t.onStreamGroupTransportClose=function(){this.$3()},e})();i.default=e}),66);
__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","Promise","gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="realtime",u=1e4,c=null,d=(function(){function t(){this.$1={}}t.get=function(){return c==null&&(c=new t),c};var o=t.prototype;return o.$2=function(t){var e;this.$1=(e={},e[t]={dgwStreamGroup:null,multiStreamGroupLoggingId:null,multiStreamGroupPriorStreamCountGuess:0},e)},o.getStreamGroupLoggingId=function(t){var e;return t===void 0&&(t=null),(e=this.$1[t!=null?t:s])==null?void 0:e.multiStreamGroupLoggingId},o.guessStreamGroupPriorStreamCount=function(t){var e;return t===void 0&&(t=null),((e=this.$1[t!=null?t:s])==null?void 0:e.multiStreamGroupPriorStreamCountGuess)||0},o.establishStream=function(o,a,i){var t,l=this,c=i.serviceId==null?s:i.serviceId,d=(t=this.$1[c])==null?void 0:t.dgwStreamGroup;if(d==null||!d.canCreateGroupedStream()){var m={deviceId:i.deviceId,serviceId:c,disableFalcoLogging:i.disableFalcoLogging,streamGroupAppHeaders:{"stream-group":"group1"},authToken:i.authToken,authType:i.authType};i.overrideUrl!=null&&(m.overrideUrl=i.overrideUrl),m.keepAliveMs=u,r("gkx")("20920")&&(m.loggingId=r("uuidv4")());try{d=r("DGWClient")().createStreamGroup(new(r("DGWStreamGroupHandler"))(function(){l.$2(c)},function(){l.$2(c)},function(){l.$2(c)}),m),this.$1[c]={dgwStreamGroup:d,multiStreamGroupLoggingId:m.loggingId,multiStreamGroupPriorStreamCountGuess:0}}catch(t){return(e||(e=n("Promise"))).reject(t)}}return this.$1[c].multiStreamGroupPriorStreamCountGuess++,d.establishStream({loggingId:i.loggingId,disableFalcoLogging:i.disableFalcoLogging,groupedStreamHeaders:o},a)},t})();l.default=d}),98);
__d("DGWRequestStreamClient",["DGWRequestStreamRef","DGWStreamFactory","Promise","cr:2046346"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$1=e!=null?e:r("DGWStreamFactory").get()}var o=t.prototype;return o.createStream=function(o,a,i,l,s){return n("cr:2046346")!=null&&n("cr:2046346").startPulsarTest(),(e||(e=n("Promise"))).resolve(new(r("DGWRequestStreamRef"))(o,a,l,s,i,this.$1))},t})();l.default=s}),98);
__d("InstagramODSObserver",["BaseEventEmitter"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("BaseEventEmitter")),s=e;l.default=s}),98);
__d("InstagramODSImpl",["InstagramODSObserver","ODS"],(function(t,n,r,o,a,i,l){"use strict";var e,s="instagram",u={addListener:function(t){r("InstagramODSObserver").addListener("event",t)},incr:function(n,a){a===void 0&&(a=1),(e||(e=o("ODS"))).bumpEntityKey(5588,s,n,a),r("InstagramODSObserver").emit("event",{count:a,key:n})},incr_CAREFUL_WHEN_USE_DYNAMIC_KEY:function(t,n){u.incr(t,n)}},c=u;l.default=c}),98);/*FB_PKG_DELIM*/
__d("ArmadilloTaskHandlers",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e,s={add:(e=r("JSResourceForInteraction"))("AddTaskHandler").__setRef("ArmadilloTaskHandlers"),get_messenger_db_dump_attachments_for_bug_reporting:e("GetMessengerDBDumpAttachments").__setRef("ArmadilloTaskHandlers"),maw_get_devices:e("MAWGetDevicesTaskHandler").__setRef("ArmadilloTaskHandlers"),preload_messenger_db_dump_attachments_for_bug_reporting:e("PreloadDBDumpAttachments").__setRef("ArmadilloTaskHandlers"),test:e("TestNativeTaskHandler").__setRef("ArmadilloTaskHandlers"),zenon_send_chatd_mws_message:e("MAWZenonSendMultiwayMsgChatdTaskHandler").__setRef("ArmadilloTaskHandlers")};l.TASK_HANDLERS_RESOURCES=s}),98);
__d("InstamadilloTaskHandlers",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e,s={33:(e=r("JSResourceForInteraction"))("IGDUnsendMessageTaskHandler").__setRef("InstamadilloTaskHandlers"),46:e("IGDSendMessageTaskHandler").__setRef("InstamadilloTaskHandlers"),igd_edit_message:e("IGDEditMessageTaskHandler").__setRef("InstamadilloTaskHandlers"),igd_react_message:e("IGDSendRemoveReactionTaskHandler").__setRef("InstamadilloTaskHandlers"),igd_send_media_message:e("IGDSendMediaMessageTaskHandler").__setRef("InstamadilloTaskHandlers"),igd_send_xma_receiver_fetch:e("IGDSendXmaReceiverFetchTaskHandler").__setRef("InstamadilloTaskHandlers")};l.TASK_HANDLERS_RESOURCES=s}),98);
__d("CometTaskHandlers",["ArmadilloTaskHandlers","InstamadilloTaskHandlers"],(function(t,n,r,o,a,i,l){"use strict";var e=babelHelpers.extends({},o("ArmadilloTaskHandlers").TASK_HANDLERS_RESOURCES,o("InstamadilloTaskHandlers").TASK_HANDLERS_RESOURCES);l.TASK_HANDLERS_RESOURCES=e}),98);
__d("WorkerBootstrap",["HasteSupportData","ServerJSDefine"],(function(t,n,r,o,a,i,l){"use strict";function e(e){Object.keys(e).forEach(function(t){r("ServerJSDefine").handleDefine(t,[],e[t],-1,null)})}function s(t,r){var i,l;t.hsdp&&o("HasteSupportData").handle(t.hsdp);var s=(i=(l=t.jsmods)!=null?l:t.dynamicModules)!=null?i:{};e(s);var u=n.call(null,r);if(t.rds!=null&&t.rds.length>0&&a.call(null,t.rds,function(){}),typeof u=="function"||u!==null)try{for(var c=arguments.length,d=new Array(c>2?c-2:0),m=2;m<c;m++)d[m-2]=arguments[m];u.apply(void 0,d)}catch(e){}}function u(e){var t=e;if(typeof t=="function"||t!==null)try{t()}catch(e){}}l.initDynamicModules=e,l.start=s,l.startServerJS=u}),98);
__d("CurrentSharedWorker",["HasteSupportData","QPLUserFlow","SharedWorkerStatusLock","WorkerBootstrap","emptyFunction","err","justknobx","qpl","structuredClone"],(function(t,n,r,o,a,i,l){"use strict";var e=null,s=[],u=new Set,c=[],d=!1,m=!1,p=null,_=!1,f=r("qpl")._(931609794,"2369");r("QPLUserFlow").start(f);var g=o("SharedWorkerStatusLock").getStatusLock();r("QPLUserFlow").addPoint(f,"status_lock"),r("QPLUserFlow").addAnnotations(f,{string:{id:self.worker_id}}),self.setTimeout(function(){if(!_){try{var e;(e=u.values().next().value)==null||e.postMessage({type:"self-terminate",response:{from:"bundle",workerID:self.worker_id}})}catch(e){r("QPLUserFlow").endFailure(f,"timeout_termination_error"),E(e)}self.close()}},3e5);function h(){m=!0,p=null,e!==null&&(r("QPLUserFlow").addPoint(f,"process_message_buffer"),r("QPLUserFlow").addAnnotations(f,{int:{message_buffer_size:s.length}}),s.forEach(function(e){return e()}),s=[]),r("QPLUserFlow").endSuccess(f)}function y(t,i){var l=t.data;if(typeof l=="object"&&(l==null?void 0:l.type)==="execute-worker"){var c=!d;try{if(!d&&l.args instanceof Array){var C,b=l.args[0],v=b.hsdp,S=b.jsmods,R=b.dynamicModules,L=b.rds;r("QPLUserFlow").addPoint(f,"first_init"),v!=null&&o("HasteSupportData").handle(v),o("WorkerBootstrap").initDynamicModules((C=S!=null?S:R)!=null?C:{}),L!=null&&L.length>0&&a.call(null,L,function(){}),g.init({requestWorkerIdStatusLockToo:r("justknobx")._("4202")}),r("QPLUserFlow").addPoint(f,"status_lock_init"),d=!0,p!=null&&(p(),h())}var E=n.call(n,"SiteData");u.size>1&&i.postMessage({type:"execute-worker-imports",response:{}}),i.postMessage({type:"execute-worker-ack",response:{firstInit:c,workerRevision:E.client_revision,spinMode:E.spin,spinTime:E.__spin_t}}),_=!0}catch(e){r("QPLUserFlow").endFailure(f,"worker_init_error"),g.release(),i.postMessage({type:"execute-worker-ack",response:{firstInit:c,error:e.message}}),self.close()}}else if(typeof l=="object"&&(l==null?void 0:l.type)==="sw-get-rev")try{var I=n.call(n,"SiteData");i.postMessage({type:"sw-get-rev",response:{workerRevision:I.client_revision,spinMode:I.spin,spinTime:I.__spin_t}})}catch(e){i.postMessage({type:"sw-get-rev",response:{error:e.message}})}else if(typeof l=="object"&&(l==null?void 0:l.type)==="sw-shutdown"){var T=Array.isArray(l.args)?l.args[0]:null;typeof T=="object"&&(T==null?void 0:T.upgrade)===!0?k("requested-upgrade"):typeof T=="object"&&typeof(T==null?void 0:T.reason)=="string"?k(T==null?void 0:T.reason):k()}else if(typeof l=="object"&&(l==null?void 0:l.type)==="sw-uptime-tracking"){var D,x=typeof(l==null?void 0:l.args)=="object"?(D=l.args)==null?void 0:D.trackerID:null;i.postMessage({type:"sw-uptime-tracking",response:{trackerID:x}})}else typeof l=="object"&&(l==null?void 0:l.type)==="ww-hrp-init"?i.postMessage({type:"ww-hrp-init",response:{}}):typeof l=="object"&&(l==null?void 0:l.type)==="ww-connection-ack"?i.postMessage({type:"connection-ack",response:{from:"bundle",workerID:self.worker_id,hrpStatus:"processed"}}):e!==null&&m?e(l):s.push(function(){return y(t,i)})}function C(t){var n=e==null;e=t!=null?t:r("emptyFunction"),n&&m&&(s.forEach(function(e){return e()}),s=[])}function b(e,t){u.forEach(function(n){try{n.postMessage(e,t)}catch(t){n.postMessage(e)}})}function v(e){if(d){r("QPLUserFlow").addPoint(f,"init_complete_handler_ran"),e(),h();return}r("QPLUserFlow").addPoint(f,"init_complete_handler_attached"),p=e}["log","error","info","debug","warn"].forEach(function(e){if(self.console[e]==null)throw r("err")('"'+e+'" is not a valid console method.');var t=self.console[e];self.console[e]=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t.apply(void 0,o);var i=!1;try{r("structuredClone")!=null&&r("structuredClone")(o),i=!0}catch(e){}if(!i){b({type:"console",response:{method:"error",args:["DataCloneError: Failed to forward console message from web worker due to args not being serializable."]}});return}b({type:"console",response:{method:e,args:o}})}});try{r("QPLUserFlow").addPoint(f,"bootstrap_start");var S=self.shared_worker_bootstrap_buffer==null?void 0:self.shared_worker_bootstrap_buffer(k);if(S!=null){var R=S.ports,L=S.messages;r("QPLUserFlow").addAnnotations(f,{int:{bootstrap_ports_num:R.length}}),R==null||R.forEach(function(e){try{e.postMessage({type:"connection-ack",response:{from:"bundle",workerID:self.worker_id,hrpStatus:"processed"}}),e.addEventListener("message",function(t){return y(t,e)}),u.add(e)}catch(e){r("QPLUserFlow").addPoint(f,"connection_fail"),E(e)}}),L==null||L.forEach(function(e){try{y(e.e,e.port)}catch(o){var t,n;r("QPLUserFlow").addPoint(f,"message_processing_fail"),r("QPLUserFlow").addAnnotations(f,{string:{failed_msg_type:(t=(n=e.e.data)==null?void 0:n.type)!=null?t:"unknown"}}),E(o)}r("QPLUserFlow").addAnnotations(f,{int:{msg_num:L.length},string_array:{msgs:L.map(function(e){var t;return(t=e.e.data)==null?void 0:t.type})}})})}else r("QPLUserFlow").addPoint(f,"bootstrap_buffer_empty")}catch(e){E(e),r("QPLUserFlow").endFailure(f,"uncaught_bootstrap_error")}function E(e){try{b({type:"sw-uncaught-error",e:{message:e.message,lineno:e.lineno,colno:e.colno,filename:e.filename,error:e.error}})}catch(e){var t;r("QPLUserFlow").addPoint(f,"sending_error_failed"),r("QPLUserFlow").addAnnotations(f,{string:{error:String((t=e.message)!=null?t:e)}})}}self.addEventListener("error",function(e){if(u.size===0){c.push(e);return}E(e)}),self.addEventListener("connect",function(e){var t=e.ports[0];t.postMessage({type:"connection-ack",response:{from:"bundle",workerID:self.worker_id,hrpStatus:"processed"}}),t.addEventListener("message",function(e){return y(e,t)}),t.start(),u.add(t),c.length>0&&(c.forEach(E),c.splice(0,c.length))});function k(e){g.release(),b({type:"sw-shutdown",response:{reason:e,workerID:self.worker_id,isInitialized:_}}),self.close()}l.setMessageHandler=C,l.postMessage=b,l.onInitComplete=v,l.shutdownWorker=k}),98);
__d("CurrentSharedWorkerAdapter",["CurrentSharedWorker","FBLogger"],(function(t,n,r,o,a,i,l){var e=(function(){function e(){}var t=e.prototype;return t.addEventListener=function(t,n,a){switch(t){case"message":o("CurrentSharedWorker").setMessageHandler(function(e){return n({data:e})});break;case"error":break;default:r("FBLogger")("worker").mustfix("Unexpected message type %",t)}},t.removeEventListener=function(t,n,a){switch(t){case"message":o("CurrentSharedWorker").setMessageHandler(null);break;case"error":break;default:r("FBLogger")("worker").mustfix("Unexpected message type %",t)}},t.postMessage=function(t,n){o("CurrentSharedWorker").postMessage(t,n)},t.close=function(){},e})();l.CurrentSharedWorkerAdapter=e}),98);
__d("EARInitType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["EB_INIT","LS_INIT","MAW_INIT","MAW_RP_INIT","MAW_IN_UI_INIT"]),l=e;i.default=l}),66);
__d("EBLSResignCdnUrlDeferred",["gkx","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("EBLSResignCdnUrl").__setRef("EBLSResignCdnUrlDeferred");function s(t){return e.load().then(function(e){return r("gkx")("12896")?e.resignCdnUrlUsingEbdb(t):e.DEPRECATED_eblsResignCdnUrlWithGraphQL(t)})}l.eblsResignCdnUrlWithGraphQL=s}),98);
__d("EncryptedBackupsDYIFileUtils",["FBLogger","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e="media",s="messages.zip";function u(){if(navigator.storage!=null&&navigator.storage.getDirectory!=null)return navigator.storage.getDirectory();throw r("FBLogger")("wmi_eb").mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.")}function c(){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield u();return t.getDirectoryHandle(e,{create:!0})}),d.apply(this,arguments)}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var o=yield e.getFileHandle(t,{create:!0});try{var a=yield o.createSyncAccessHandle();a.write(n),a.flush(),a.close()}catch(e){if(e instanceof Error){if(e instanceof TypeError)try{var i=yield o.createWritable();yield i.write(n),yield i.close();return}catch(e){throw e instanceof Error?e instanceof TypeError?r("FBLogger")("wmi_eb").mustfixThrow("Write operation is not supported. Please try one of the supported browsers."):r("FBLogger")("wmi_eb").mustfixThrow("Failed to write using writable: %e",e.message):e}throw r("FBLogger")("wmi_eb").mustfixThrow("Failed to write using sync access handle: %s",e.message)}throw e}}),p.apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.getFileHandle(t);try{var o=yield n.createSyncAccessHandle(),a=new ArrayBuffer(o.getSize());return o.read(a),o.close(),new Blob([a])}catch(e){if(e instanceof Error){if(e instanceof TypeError)return n.getFile();throw r("FBLogger")("wmi_eb").mustfixThrow("Failed to read file %s, %s",t,e.message)}throw e}}),f.apply(this,arguments)}l.DyiMediaFolder=e,l.DyiArchiveFilename=s,l.getRootFolderHandle=u,l.getMediaFolderHandle=c,l.writeFile=m,l.readFile=_}),98);
__d("MAWThreadKeyUtils",["I64","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=o("I64"))).to_string(t)}function u(e){return e}function c(e){return r("vulture")("9DZDuAw4Bd5gY57CNHpZSR8vpLc="),e}function d(t){return(e||(e=o("I64"))).of_string(t)}function m(e){return e}l.stringThreadKeyFromThreadKey=s,l.toStringThreadKey=u,l.stringThreadKeyFromString=c,l.stringThreadKeyToI64=d,l.stringThreadKeyToString=m}),98);
__d("EncryptedBackupsDYIGenerateThreadMetadata",["CurrentUser","EncryptedBackupsDYISingleton","I64","IGDWebUtils","LSMessagingThreadTypeUtil","MAWThreadKeyUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(){return o("IGDWebUtils").isOnInstagramWeb()?(c||(c=o("I64"))).of_string(r("CurrentUser").getEIMU()):(c||(c=o("I64"))).of_string(r("CurrentUser").getAccountID())}function m(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(o("MAWThreadKeyUtils").stringThreadKeyToI64(t)))}function p(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(t))}function _(e,t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.contacts).filter(function(e){return t.has((c||(c=o("I64"))).to_string(e.id))}))}function f(e,t){var n;return(n=o("ReQL")).toArrayAsync(n.leftJoin(n.fromTableAscending(e.tables.participants,["contactId"]).getKeyRange(t),n.fromTableAscending(e.tables.contacts,["name"])))}function g(e){return o("LSMessagingThreadTypeUtil").isOneToOne(e)||o("LSMessagingThreadTypeUtil").isOpenOneToOne(e)}function h(e,t,n){if(n!=null&&n.trim()!=="")return n+"_"+t;switch(e.length){case 0:return"Thread_"+t;case 1:return e[0]+"_"+t;case 2:return e[0]+"and"+e[1]+"_"+t;case 3:return""+e[0]+e[1]+"and"+e[2]+"_"+t;case 4:return""+e[0]+e[1]+e[2]+"and1other_"+t;default:return""+e[0]+e[1]+e[2]+"and"+(e.length-3)+"others_"+t}}function y(e,t,n,r,o,a){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i,l){var s=[],u=[i],d=yield m(r,t);if(d!=null)if(g(d.threadType)){var _=n.getThreadIdForThreadKey(t);if(_==null){n.getLogger().WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),t);return}var y=yield p(r,(c||(c=o("I64"))).of_string(_));(y==null?void 0:y.id)!=null&&(y==null?void 0:y.name)!=null&&n.setContactNameForContactId((c||(c=o("I64"))).to_string(y.id),y.name);var C=(y==null?void 0:y.name)||"Unknown User";s.push(C),u.push(C),n.setThreadMetaDataByThreadKey(t,u,h(s,l,d.threadName))}else{var b=yield f(r,d.threadKey);b.forEach(function(e){var t=e[0],r=e[1];if((t==null?void 0:t.contactId)!=null&&(r==null?void 0:r.name)!=null&&n.setContactNameForContactId((c||(c=o("I64"))).to_string(t.contactId),r.name),!(c||(c=o("I64"))).equal(t.contactId,a)){var i=(r==null?void 0:r.name)||"Unknown User";s.push(i),u.push(i)}}),n.setThreadMetaDataByThreadKey(t,u,h(s,l,d.threadName))}else n.setThreadMetaDataByThreadKey(t,u,h(s,l))}),C.apply(this,arguments)}function b(e){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,r,a=o("EncryptedBackupsDYISingleton").getSingleton(),i=a.getLogger(),l=yield a.getDB(),m=yield p(l,d()),_=(t=m==null?void 0:m.id)!=null?t:(c||(c=o("I64"))).zero,f=(r=m==null?void 0:m.name)!=null?r:"Me";return a.setContactNameForContactId((c||(c=o("I64"))).to_string(_),f),e.reduce((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){yield e;var r=a.getThreadIdForThreadKey(t);return r==null&&i.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),t),y(t,a,l,_,f,n)});return function(t,n,r){return e.apply(this,arguments)}})(),(u||(u=n("Promise"))).resolve())}),v.apply(this,arguments)}l.getAllUnmappedContacts=_,l.EncryptedBackupsDYIGenerateThreadMetadata=b}),98);
__d("EncryptedBackupsDYITypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({NotStarted:0,InProgress:1,Completed:2,Failed:3}),l=n("$InternalEnum")({Armadillo:0,Instamadillo:1});i.EncryptedBackupsDYIState=e,i.EncryptedBackupsDYIConfig=l}),66);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("fflate-0.6.10",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){var t,n="";try{t={}.Worker}catch(e){}e.default=t?function(e,r,o,a,i){var l=!1,s=new t(e+n,{eval:!0}).on("error",function(e){return i(e,null)}).on("message",function(e){return i(null,e)}).on("exit",function(e){e&&!l&&i(new Error("exited with code "+e),null)});return s.postMessage(o,a),s.terminate=function(){return l=!0,t.prototype.terminate.call(s)},s}:function(e,t,n,r,o){setImmediate(function(){return o(new Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});var a=function(){};return{terminate:a,postMessage:a}}}var u=!1;function c(){return u||(u=!0,s()),l.exports}var d={},m={exports:d};function p(){var e=c(),t=Uint8Array,n=Uint16Array,r=Uint32Array,o=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(e,t){for(var o=new n(31),a=0;a<31;++a)o[a]=t+=1<<e[a-1];for(var i=new r(o[30]),a=1;a<30;++a)for(var l=o[a];l<o[a+1];++l)i[l]=l-o[a]<<5|a;return[o,i]},s=l(o,2),u=s[0],m=s[1];u[28]=258,m[258]=28;for(var p=l(a,0),_=p[0],f=p[1],g=new n(32768),h=0;h<32768;++h){var y=(h&43690)>>>1|(h&21845)<<1;y=(y&52428)>>>2|(y&13107)<<2,y=(y&61680)>>>4|(y&3855)<<4,g[h]=((y&65280)>>>8|(y&255)<<8)>>>1}for(var C=(function(e,t,r){for(var o=e.length,a=0,i=new n(t);a<o;++a)++i[e[a]-1];var l=new n(t);for(a=0;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;var s;if(r){s=new n(1<<t);var u=15-t;for(a=0;a<o;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],m=l[e[a]-1]++<<d,p=m|(1<<d)-1;m<=p;++m)s[g[m]>>>u]=c}else for(s=new n(o),a=0;a<o;++a)e[a]&&(s[a]=g[l[e[a]-1]++]>>>15-e[a]);return s}),b=new t(288),h=0;h<144;++h)b[h]=8;for(var h=144;h<256;++h)b[h]=9;for(var h=256;h<280;++h)b[h]=7;for(var h=280;h<288;++h)b[h]=8;for(var v=new t(32),h=0;h<32;++h)v[h]=5;var S=C(b,9,0),R=C(b,9,1),L=C(v,5,0),E=C(v,5,1),k=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},I=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},T=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},D=function(e){return(e/8|0)+(e&7&&1)},x=function(e,o,a){(o==null||o<0)&&(o=0),(a==null||a>e.length)&&(a=e.length);var i=new(e instanceof n?n:e instanceof r?r:t)(a-o);return i.set(e.subarray(o,a)),i},$=function(e,n,r){var l=e.length;if(!l||r&&!r.l&&l<5)return n||new t(0);var s=!n||r,c=!r||r.i;r||(r={}),n||(n=new t(l*3));var d=function(e){var r=n.length;if(e>r){var o=new t(Math.max(r*2,e));o.set(n),n=o}},m=r.f||0,p=r.p||0,f=r.b||0,g=r.l,h=r.d,y=r.m,b=r.n,v=l*8;do{if(!g){r.f=m=I(e,p,1);var S=I(e,p+1,3);if(p+=3,S)if(S==1)g=R,h=E,y=9,b=5;else if(S==2){var N=I(e,p,31)+257,M=I(e,p+10,15)+4,w=N+I(e,p+5,31)+1;p+=14;for(var A=new t(w),F=new t(19),O=0;O<M;++O)F[i[O]]=I(e,p+O*3,7);p+=M*3;for(var B=k(F),W=(1<<B)-1,q=C(F,B,1),O=0;O<w;){var U=q[I(e,p,W)];p+=U&15;var L=U>>>4;if(L<16)A[O++]=L;else{var V=0,H=0;for(L==16?(H=3+I(e,p,3),p+=2,V=A[O-1]):L==17?(H=3+I(e,p,7),p+=3):L==18&&(H=11+I(e,p,127),p+=7);H--;)A[O++]=V}}var G=A.subarray(0,N),z=A.subarray(N);y=k(G),b=k(z),g=C(G,y,1),h=C(z,b,1)}else throw"invalid block type";else{var L=D(p)+4,$=e[L-4]|e[L-3]<<8,P=L+$;if(P>l){if(c)throw"unexpected EOF";break}s&&d(f+$),n.set(e.subarray(L,P),f),r.b=f+=$,r.p=p=P*8;continue}if(p>v){if(c)throw"unexpected EOF";break}}s&&d(f+131072);for(var j=(1<<y)-1,K=(1<<b)-1,Q=p;;Q=p){var V=g[T(e,p)&j],X=V>>>4;if(p+=V&15,p>v){if(c)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(X<256)n[f++]=X;else if(X==256){Q=p,g=null;break}else{var Y=X-254;if(X>264){var O=X-257,J=o[O];Y=I(e,p,(1<<J)-1)+u[O],p+=J}var Z=h[T(e,p)&K],ee=Z>>>4;if(!Z)throw"invalid distance";p+=Z&15;var z=_[ee];if(ee>3){var J=a[ee];z+=T(e,p)&(1<<J)-1,p+=J}if(p>v){if(c)throw"unexpected EOF";break}s&&d(f+131072);for(var te=f+Y;f<te;f+=4)n[f]=n[f-z],n[f+1]=n[f+1-z],n[f+2]=n[f+2-z],n[f+3]=n[f+3-z];f=te}}r.l=g,r.p=Q,r.b=f,g&&(m=1,r.m=y,r.d=h,r.n=b)}while(!m);return f==n.length?n:x(n,0,f)},P=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},N=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},M=function(e,r){for(var o=[],a=0;a<e.length;++a)e[a]&&o.push({s:a,f:e[a]});var i=o.length,l=o.slice();if(!i)return[q,0];if(i==1){var s=new t(o[0].s+1);return s[o[0].s]=1,[s,1]}o.sort(function(e,t){return e.f-t.f}),o.push({s:-1,f:25001});var u=o[0],c=o[1],d=0,m=1,p=2;for(o[0]={s:-1,f:u.f+c.f,l:u,r:c};m!=i-1;)u=o[o[d].f<o[p].f?d++:p++],c=o[d!=m&&o[d].f<o[p].f?d++:p++],o[m++]={s:-1,f:u.f+c.f,l:u,r:c};for(var _=l[0].s,a=1;a<i;++a)l[a].s>_&&(_=l[a].s);var f=new n(_+1),g=w(o[m-1],f,0);if(g>r){var a=0,h=0,y=g-r,C=1<<y;for(l.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});a<i;++a){var b=l[a].s;if(f[b]>r)h+=C-(1<<g-f[b]),f[b]=r;else break}for(h>>>=y;h>0;){var v=l[a].s;f[v]<r?h-=1<<r-f[v]++-1:++a}for(;a>=0&&h;--a){var S=l[a].s;f[S]==r&&(--f[S],++h)}g=r}return[new t(f),g]},w=function(e,t,n){return e.s==-1?Math.max(w(e.l,t,n+1),w(e.r,t,n+1)):t[e.s]=n},A=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new n(++t),o=0,a=e[0],i=1,l=function(e){r[o++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(a),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(a);i=1,a=e[s]}return[r.subarray(0,o),t]},F=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},O=function(e,t,n){var r=n.length,o=D(t+2);e[o]=r&255,e[o+1]=r>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var a=0;a<r;++a)e[o+a+4]=n[a];return(o+4+r)*8},B=function(e,t,r,l,s,u,c,d,m,p,_){P(t,_++,r),++s[256];for(var f=M(s,15),g=f[0],h=f[1],y=M(u,15),R=y[0],E=y[1],k=A(g),I=k[0],T=k[1],D=A(R),x=D[0],$=D[1],w=new n(19),B=0;B<I.length;++B)w[I[B]&31]++;for(var B=0;B<x.length;++B)w[x[B]&31]++;for(var W=M(w,7),q=W[0],U=W[1],V=19;V>4&&!q[i[V-1]];--V);var H=p+5<<3,G=F(s,b)+F(u,v)+c,z=F(s,g)+F(u,R)+c+14+3*V+F(w,q)+(2*w[16]+3*w[17]+7*w[18]);if(H<=G&&H<=z)return O(t,_,e.subarray(m,m+p));var j,K,Q,X;if(P(t,_,1+(z<G)),_+=2,z<G){j=C(g,h,0),K=g,Q=C(R,E,0),X=R;var Y=C(q,U,0);P(t,_,T-257),P(t,_+5,$-1),P(t,_+10,V-4),_+=14;for(var B=0;B<V;++B)P(t,_+3*B,q[i[B]]);_+=3*V;for(var J=[I,x],Z=0;Z<2;++Z)for(var ee=J[Z],B=0;B<ee.length;++B){var te=ee[B]&31;P(t,_,Y[te]),_+=q[te],te>15&&(P(t,_,ee[B]>>>5&127),_+=ee[B]>>>12)}}else j=S,K=b,Q=L,X=v;for(var B=0;B<d;++B)if(l[B]>255){var te=l[B]>>>18&31;N(t,_,j[te+257]),_+=K[te+257],te>7&&(P(t,_,l[B]>>>23&31),_+=o[te]);var ne=l[B]&31;N(t,_,Q[ne]),_+=X[ne],ne>3&&(N(t,_,l[B]>>>5&8191),_+=a[ne])}else N(t,_,j[l[B]]),_+=K[l[B]];return N(t,_,j[256]),_+K[256]},W=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q=new t(0),U=function(e,i,l,s,u,c){var d=e.length,p=new t(s+d+5*(1+Math.ceil(d/7e3))+u),_=p.subarray(s,p.length-u),g=0;if(!i||d<8)for(var h=0;h<=d;h+=65535){var y=h+65535;y<d?g=O(_,g,e.subarray(h,y)):(_[h]=c,g=O(_,g,e.subarray(h,d)))}else{for(var C=W[i-1],b=C>>>13,v=C&8191,S=(1<<l)-1,R=new n(32768),L=new n(S+1),E=Math.ceil(l/3),k=2*E,I=function(t){return(e[t]^e[t+1]<<E^e[t+2]<<k)&S},T=new r(25e3),$=new n(288),P=new n(32),N=0,M=0,h=0,w=0,A=0,F=0;h<d;++h){var U=I(h),V=h&32767,H=L[U];if(R[V]=H,L[U]=V,A<=h){var G=d-h;if((N>7e3||w>24576)&&G>423){g=B(e,_,0,T,$,P,M,w,F,h-F,g),w=N=M=0,F=h;for(var z=0;z<286;++z)$[z]=0;for(var z=0;z<30;++z)P[z]=0}var j=2,K=0,Q=v,X=V-H&32767;if(G>2&&U==I(h-X))for(var Y=Math.min(b,G)-1,J=Math.min(32767,h),Z=Math.min(258,G);X<=J&&--Q&&V!=H;){if(e[h+j]==e[h+j-X]){for(var ee=0;ee<Z&&e[h+ee]==e[h+ee-X];++ee);if(ee>j){if(j=ee,K=X,ee>Y)break;for(var te=Math.min(X,ee-2),ne=0,z=0;z<te;++z){var re=h-X+z+32768&32767,oe=R[re],ae=re-oe+32768&32767;ae>ne&&(ne=ae,H=re)}}}V=H,H=R[V],X+=V-H+32768&32767}if(K){T[w++]=268435456|m[j]<<18|f[K];var ie=m[j]&31,le=f[K]&31;M+=o[ie]+a[le],++$[257+ie],++P[le],A=h+j,++N}else T[w++]=e[h],++$[e[h]]}}g=B(e,_,c,T,$,P,M,w,F,h-F,g),!c&&g&7&&(g=O(_,g+1,q))}return x(p,0,s+D(g)+u)},V=(function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(n&1&&-306674912)^n>>>1;e[t]=n}return e})(),H=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=V[n&255^t[r]]^n>>>8;e=n},d:function(){return~e}}},G=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,a=n.length,i=0;i!=a;){for(var l=Math.min(i+2655,a);i<l;++i)o+=r+=n[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|e>>>8<<16|(t&255)<<8|t>>>8}}},z=function(e,t,n,r,o){return U(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,n,r,!o)},j=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},K=function(e,t,n){for(var r=e(),o=e.toString(),a=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),i=0;i<r.length;++i){var l=r[i],s=a[i];if(typeof l=="function"){t+=";"+s+"=";var u=l.toString();if(l.prototype)if(u.indexOf("[native code]")!=-1){var c=u.indexOf(" ",8)+1;t+=u.slice(c,u.indexOf("(",c))}else{t+=u;for(var d in l.prototype)t+=";"+s+".prototype."+d+"="+l.prototype[d].toString()}else t+=u}else n[s]=l}return[t,n]},Q=[],X=function(e){var o=[];for(var a in e)(e[a]instanceof t||e[a]instanceof n||e[a]instanceof r)&&o.push((e[a]=new e[a].constructor(e[a])).buffer);return o},Y=function(t,n,r,o){var a;if(!Q[r]){for(var i="",l={},s=t.length-1,u=0;u<s;++u)a=K(t[u],i,l),i=a[0],l=a[1];Q[r]=K(t[s],i,l)}var c=j({},Q[r][1]);return e.default(Q[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+n.toString()+"}",r,c,X(c),o)},J=function(){return[t,n,r,o,a,i,u,_,R,E,g,C,k,I,T,D,x,$,Ie,oe,ae]},Z=function(){return[t,n,r,o,a,i,m,f,S,b,L,v,g,W,q,C,P,N,M,w,A,F,O,B,D,x,U,z,Re,oe]},ee=function(){return[pe,ge,me,H,V]},te=function(){return[_e,fe]},ne=function(){return[he,me,G]},re=function(){return[ye]},oe=function(e){return postMessage(e,[e.buffer])},ae=function(e){return e&&e.size&&new t(e.size)},ie=function(e,t,n,r,o,a){var i=Y(n,r,o,function(e,t){i.terminate(),a(e,t)});return i.postMessage([e,t],t.consume?[e.buffer]:[]),function(){i.terminate()}},le=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},se=function(e,t,n,r,o){var a,i=Y(e,r,o,function(e,n){e?(i.terminate(),t.ondata.call(t,e)):(n[1]&&i.terminate(),t.ondata.call(t,e,n[0],n[1]))});i.postMessage(n),t.push=function(e,n){if(a)throw"stream finished";if(!t.ondata)throw"no stream handler";i.postMessage([e,a=n],[e.buffer])},t.terminate=function(){i.terminate()}},ue=function(e,t){return e[t]|e[t+1]<<8},ce=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},de=function(e,t){return ce(e,t)+ce(e,t+4)*4294967296},me=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},pe=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&me(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},_e=function(e){if(e[0]!=31||e[1]!=139||e[2]!=8)throw"invalid gzip data";var t=e[3],n=10;t&4&&(n+=e[10]|(e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},fe=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},ge=function(e){return 10+(e.filename&&e.filename.length+1||0)},he=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},ye=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ce(e,t){return!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,e}var be=(function(){function e(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(z(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e})();d.Deflate=be;var ve=(function(){function e(e,t){se([Z,function(){return[le,be]}],this,Ce.call(this,e,t),function(e){var t=new be(e.data);onmessage=le(t)},6)}return e})();d.AsyncDeflate=ve;function Se(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z],function(e){return oe(Re(e.data[0],e.data[1]))},0,n)}d.deflate=Se;function Re(e,t){return z(e,t||{},0,0)}d.deflateSync=Re;var Le=(function(){function e(e){this.s={},this.p=new t(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var n=this.p.length,r=new t(n+e.length);r.set(this.p),r.set(e,n),this.p=r},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=$(this.p,this.o,this.s);this.ondata(x(n,t,this.s.b),this.d),this.o=x(n,this.s.b-32768),this.s.b=this.o.length,this.p=x(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e})();d.Inflate=Le;var Ee=(function(){function e(e){this.ondata=e,se([J,function(){return[le,Le]}],this,0,function(){var e=new Le;onmessage=le(e)},7)}return e})();d.AsyncInflate=Ee;function ke(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J],function(e){return oe(Ie(e.data[0],ae(e.data[1])))},1,n)}d.inflate=ke;function Ie(e,t){return $(e,t)}d.inflateSync=Ie;var Te=(function(){function e(e,t){this.c=H(),this.l=0,this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=z(e,this.o,this.v&&ge(this.o),t&&8,!t);this.v&&(pe(n,this.o),this.v=0),t&&(me(n,n.length-8,this.c.d()),me(n,n.length-4,this.l)),this.ondata(n,t)},e})();d.Gzip=Te,d.Compress=Te;var De=(function(){function e(e,t){se([Z,ee,function(){return[le,be,Te]}],this,Ce.call(this,e,t),function(e){var t=new Te(e.data);onmessage=le(t)},8)}return e})();d.AsyncGzip=De,d.AsyncCompress=De;function xe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ee,function(){return[$e]}],function(e){return oe($e(e.data[0],e.data[1]))},2,n)}d.gzip=xe,d.compress=xe;function $e(e,t){t||(t={});var n=H(),r=e.length;n.p(e);var o=z(e,t,ge(t),8),a=o.length;return pe(o,t),me(o,a-8,n.d()),me(o,a-4,r),o}d.gzipSync=$e,d.compressSync=$e;var Pe=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){var n=this.p.length>3?_e(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Le.prototype.c.call(this,t)},e})();d.Gunzip=Pe;var Ne=(function(){function e(e){this.ondata=e,se([J,te,function(){return[le,Le,Pe]}],this,0,function(){var e=new Pe;onmessage=le(e)},9)}return e})();d.AsyncGunzip=Ne;function Me(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,te,function(){return[we]}],function(e){return oe(we(e.data[0]))},3,n)}d.gunzip=Me;function we(e,n){return $(e.subarray(_e(e),-8),n||new t(fe(e)))}d.gunzipSync=we;var Ae=(function(){function e(e,t){this.c=G(),this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=z(e,this.o,this.v&&2,t&&4,!t);this.v&&(he(n,this.o),this.v=0),t&&me(n,n.length-4,this.c.d()),this.ondata(n,t)},e})();d.Zlib=Ae;var Fe=(function(){function e(e,t){se([Z,ne,function(){return[le,be,Ae]}],this,Ce.call(this,e,t),function(e){var t=new Ae(e.data);onmessage=le(t)},10)}return e})();d.AsyncZlib=Fe;function Oe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ne,function(){return[Be]}],function(e){return oe(Be(e.data[0],e.data[1]))},4,n)}d.zlib=Oe;function Be(e,t){t||(t={});var n=G();n.p(e);var r=z(e,t,2,4);return he(r,t),me(r,r.length-4,n.d()),r}d.zlibSync=Be;var We=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Le.prototype.c.call(this,t)},e})();d.Unzlib=We;var qe=(function(){function e(e){this.ondata=e,se([J,re,function(){return[le,Le,We]}],this,0,function(){var e=new We;onmessage=le(e)},11)}return e})();d.AsyncUnzlib=qe;function Ue(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,re,function(){return[Ve]}],function(e){return oe(Ve(e.data[0],ae(e.data[1])))},5,n)}d.unzlib=Ue;function Ve(e,t){return $((ye(e),e.subarray(2,-4)),t)}d.unzlibSync=Ve;var He=(function(){function e(e){this.G=Pe,this.I=Le,this.Z=We,this.ondata=e}return e.prototype.push=function(e,n){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,n);else{if(this.p&&this.p.length){var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var o=this,a=function(){o.ondata.apply(o,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(a):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(a):new this.Z(a),this.s.push(this.p,n),this.p=null}}},e})();d.Decompress=He;var Ge=(function(){function e(e){this.G=Ne,this.I=Ee,this.Z=qe,this.ondata=e}return e.prototype.push=function(e,t){He.prototype.push.call(this,e,t)},e})();d.AsyncDecompress=Ge;function ze(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return e[0]==31&&e[1]==139&&e[2]==8?Me(e,t,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?ke(e,t,n):Ue(e,t,n)}d.decompress=ze;function je(e,t){return e[0]==31&&e[1]==139&&e[2]==8?we(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?Ie(e,t):Ve(e,t)}d.decompressSync=je;var Ke=function(e,n,r,o){for(var a in e){var i=e[a],l=n+a;i instanceof t?r[l]=[i,o]:Array.isArray(i)?r[l]=[i[0],j(o,i[1])]:Ke(i,l+"/",r,o)}},Qe=typeof TextEncoder!="undefined"&&new TextEncoder,Xe=typeof TextDecoder!="undefined"&&new TextDecoder,Ye=0;try{Xe.decode(q,{stream:!0}),Ye=1}catch(e){}var Je=function(e){for(var t="",n=0;;){var r=e[n++],o=(r>127)+(r>223)+(r>239);if(n+o>e.length)return[t,x(e,n-1)];o?o==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}},Ze=(function(){function e(e){this.ondata=e,Ye?this.t=new TextDecoder:this.p=q}return e.prototype.push=function(e,n){if(!this.ondata)throw"no callback";if(n=!!n,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),n),n){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var o=Je(r),a=o[0],i=o[1];if(n){if(i.length)throw"invalid utf-8 data";this.p=null}else this.p=i;this.ondata(a,n)},e})();d.DecodeUTF8=Ze;var et=(function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(tt(e),this.d=t||!1)},e})();d.EncodeUTF8=et;function tt(e,n){if(n){for(var r=new t(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}if(Qe)return Qe.encode(e);for(var a=e.length,i=new t(e.length+(e.length>>1)),l=0,s=function(e){i[l++]=e},o=0;o<a;++o){if(l+5>i.length){var u=new t(l+8+(a-o<<1));u.set(i),i=u}var c=e.charCodeAt(o);c<128||n?s(c):c<2048?(s(192|c>>6),s(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|e.charCodeAt(++o)&1023,s(240|c>>18),s(128|c>>12&63),s(128|c>>6&63),s(128|c&63)):(s(224|c>>12),s(128|c>>6&63),s(128|c&63))}return x(i,0,l)}d.strToU8=tt;function nt(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else{if(Xe)return Xe.decode(e);var o=Je(e),a=o[0],i=o[1];if(i.length)throw"invalid utf-8 data";return a}}d.strFromU8=nt;var rt=function(e){return e==1?3:e<6?2:e==9?1:0},ot=function(e,t){return t+30+ue(e,t+26)+ue(e,t+28)},at=function(e,t,n){var r=ue(e,t+28),o=nt(e.subarray(t+46,t+46+r),!(ue(e,t+8)&2048)),a=t+46+r,i=ce(e,t+20),l=n&&i==4294967295?it(e,a):[i,ce(e,t+24),ce(e,t+42)],s=l[0],u=l[1],c=l[2];return[ue(e,t+10),s,u,o,a+ue(e,t+30)+ue(e,t+32),c]},it=function(e,t){for(;ue(e,t)!=1;t+=4+ue(e,t+2));return[de(e,t+12),de(e,t+4),de(e,t+20)]},lt=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},st=function(e,t,n,r,o,a,i,l){var s=r.length,u=n.extra,c=l&&l.length,d=lt(u);me(e,t,i!=null?33639248:67324752),t+=4,i!=null&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(a==null&&8),e[t++]=o&&8,e[t++]=n.compression&255,e[t++]=n.compression>>8;var m=new Date(n.mtime==null?Date.now():n.mtime),p=m.getFullYear()-1980;if(p<0||p>119)throw"date not in range 1980-2099";if(me(e,t,p<<25|m.getMonth()+1<<21|m.getDate()<<16|m.getHours()<<11|m.getMinutes()<<5|m.getSeconds()>>>1),t+=4,a!=null&&(me(e,t,n.crc),me(e,t+4,a),me(e,t+8,n.size)),me(e,t+12,s),me(e,t+14,d),t+=16,i!=null&&(me(e,t,c),me(e,t+6,n.attrs),me(e,t+10,i),t+=14),e.set(r,t),t+=s,d)for(var _ in u){var f=u[_],g=f.length;me(e,t,+_),me(e,t+2,g),e.set(f,t+4),t+=4+g}return c&&(e.set(l,t),t+=c),t},ut=function(e,t,n,r,o){me(e,t,101010256),me(e,t+8,n),me(e,t+10,n),me(e,t+12,r),me(e,t+16,o)},ct=(function(){function e(e){this.filename=e,this.c=H(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e})();d.ZipPassThrough=ct;var dt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new be(t,function(e,t){n.ondata(null,e,t)}),this.compression=8,this.flag=rt(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.ZipDeflate=dt;var mt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new ve(t,function(e,t,r){n.ondata(e,t,r)}),this.compression=8,this.flag=rt(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.AsyncZipDeflate=mt;var pt=(function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var n=this;if(this.d&2)throw"stream finished";var r=tt(e.filename),o=r.length,a=e.comment,i=a&&tt(a),l=o!=e.filename.length||i&&a.length!=i.length,s=o+lt(e.extra)+30;if(o>65535)throw"filename too long";var u=new t(s);st(u,0,e,r,l);var c=[u],d=function(){for(var e=0,t=c;e<t.length;e++){var r=t[e];n.ondata(null,r,!1)}c=[]},m=this.d;this.d=0;var p=this.u.length,_=j(e,{f:r,u:l,o:i,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),m){var e=n.u[p+1];e?e.r():n.d=1}m=1}}),f=0;e.ondata=function(r,o,a){if(r)n.ondata(r,o,a),n.terminate();else if(f+=o.length,c.push(o),a){var i=new t(16);me(i,0,134695760),me(i,4,e.crc),me(i,8,f),me(i,12,e.size),c.push(i),_.c=f,_.b=s+f+16,_.crc=e.crc,_.size=e.size,m&&_.r(),m=1}else m&&d()},this.u.push(_)},e.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,n=0,r=0,o=0,a=this.u;o<a.length;o++){var i=a[o];r+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0)}for(var l=new t(r+22),s=0,u=this.u;s<u.length;s++){var i=u[s];st(l,e,i,i.f,i.u,i.c,n,i.o),e+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0),n+=i.b}ut(l,e,this.u.length,r,n),this.ondata(null,l,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var n=t[e];n.t()}this.d=2},e})();d.Zip=pt;function _t(e,n,r){if(r||(r=n,n={}),typeof r!="function")throw"no callback";var o={};Ke(e,"",o,n);var a=Object.keys(o),i=a.length,l=0,s=0,u=i,c=new Array(i),d=[],m=function(){for(var e=0;e<d.length;++e)d[e]()},p=function(){var e=new t(s+22),n=l,o=s-l;s=0;for(var a=0;a<u;++a){var i=c[a];try{var d=i.c.length;st(e,s,i,i.f,i.u,d);var m=30+i.f.length+lt(i.extra),p=s+m;e.set(i.c,p),st(e,l,i,i.f,i.u,d,s,i.m),l+=16+m+(i.m?i.m.length:0),s=p+d}catch(e){return r(e,null)}}ut(e,l,c.length,o,n),r(null,e)};i||p();for(var _=function(e){var t=a[e],n=o[t],u=n[0],_=n[1],f=H(),g=u.length;f.p(u);var h=tt(t),y=h.length,C=_.comment,b=C&&tt(C),v=b&&b.length,S=lt(_.extra),R=_.level==0?0:8,L=function(n,o){if(n)m(),r(n,null);else{var a=o.length;c[e]=j(_,{size:g,crc:f.d(),c:o,f:h,m:b,u:y!=t.length||b&&C.length!=v,compression:R}),l+=30+y+S+a,s+=76+2*(y+S)+(v||0)+a,--i||p()}};if(y>65535&&L("filename too long",null),!R)L(null,u);else if(g<16e4)try{L(null,Re(u,_))}catch(e){L(e,null)}else d.push(Se(u,_,L))},f=0;f<u;++f)_(f);return m}d.zip=_t;function ft(e,n){n||(n={});var r={},o=[];Ke(e,"",r,n);var a=0,i=0;for(var l in r){var s=r[l],u=s[0],c=s[1],d=c.level==0?0:8,m=tt(l),p=m.length,_=c.comment,f=_&&tt(_),g=f&&f.length,h=lt(c.extra);if(p>65535)throw"filename too long";var y=d?Re(u,c):u,C=y.length,b=H();b.p(u),o.push(j(c,{size:u.length,crc:b.d(),c:y,f:m,m:f,u:p!=l.length||f&&_.length!=g,o:a,compression:d})),a+=30+p+h+C,i+=76+2*(p+h)+(g||0)+C}for(var v=new t(i+22),S=a,R=i-a,L=0;L<o.length;++L){var m=o[L];st(v,m.o,m,m.f,m.u,m.c.length);var E=30+m.f.length+lt(m.extra);v.set(m.c,m.o+E),st(v,a,m,m.f,m.u,m.c.length,m.o,m.m),a+=16+E+(m.m?m.m.length:0)}return ut(v,a,o.length,R,S),v}d.zipSync=ft;var gt=(function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e})();d.UnzipPassThrough=gt;var ht=(function(){function e(){var e=this;this.i=new Le(function(t,n){e.ondata(null,t,n)})}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(n){this.ondata(n,e,t)}},e.compression=8,e})();d.UnzipInflate=ht;var yt=(function(){function e(e,t){var n=this;t<32e4?this.i=new Le(function(e,t){n.ondata(null,e,t)}):(this.i=new Ee(function(e,t,r){n.ondata(e,t,r)}),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=x(e,0)),this.i.push(e,t)},e.compression=8,e})();d.AsyncUnzipInflate=yt;var Ct=(function(){function e(e){this.onfile=e,this.k=[],this.o={0:gt},this.p=q}return e.prototype.push=function(e,n){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var o=Math.min(this.c,e.length),a=e.subarray(0,o);if(this.c-=o,this.d?this.d.push(a,!this.c):this.k[0].push(a),e=e.subarray(o),e.length)return this.push(e,n)}else{var i=0,l=0,s=void 0,u=void 0;this.p.length?e.length?(u=new t(this.p.length+e.length),u.set(this.p),u.set(e,this.p.length)):u=this.p:u=e;for(var c=u.length,d=this.c,m=d&&this.d,p=function(){var e,t=ce(u,l);if(t==67324752){i=1,s=l,_.d=null,_.c=0;var n=ue(u,l+6),o=ue(u,l+8),a=n&2048,m=n&8,p=ue(u,l+26),f=ue(u,l+28);if(c>l+30+p+f){var g=[];_.k.unshift(g),i=2;var h=ce(u,l+18),y=ce(u,l+22),C=nt(u.subarray(l+30,l+=30+p),!a);h==4294967295?(e=m?[-2]:it(u,l),h=e[0],y=e[1]):m&&(h=-1),l+=f,_.c=h;var b,v={name:C,compression:o,start:function(){if(!v.ondata)throw"no callback";if(!h)v.ondata(null,q,!0);else{var e=r.o[o];if(!e)throw"unknown compression type "+o;b=h<0?new e(C):new e(C,h,y),b.ondata=function(e,t,n){v.ondata(e,t,n)};for(var t=0,n=g;t<n.length;t++){var a=n[t];b.push(a,!1)}r.k[0]==g&&r.c?r.d=b:b.push(q,!0)}},terminate:function(){b&&b.terminate&&b.terminate()}};h>=0&&(v.size=h,v.originalSize=y),_.onfile(v)}return"break"}else if(d){if(t==134695760)return s=l+=12+(d==-2&&8),i=3,_.c=0,"break";if(t==33639248)return s=l-=4,i=3,_.c=0,"break"}},_=this;l<c-4;++l){var f=p();if(f==="break")break}if(this.p=q,d<0){var g=i?u.subarray(0,s-12-(d==-2&&8)-(ce(u,s-16)==134695760&&4)):u.subarray(0,l);m?m.push(g,!!i):this.k[+(i==2)].push(g)}if(i&2)return this.push(u.subarray(l),n);this.p=u.subarray(l)}if(n){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(e){this.o[e.compression]=e},e})();d.Unzip=Ct;function bt(e,n){if(typeof n!="function")throw"no callback";for(var r=[],o=function(){for(var e=0;e<r.length;++e)r[e]()},a={},i=e.length-22;ce(e,i)!=101010256;--i)if(!i||e.length-i>65558){n("invalid zip file",null);return}var l=ue(e,i+8);l||n(null,{});var s=l,u=ce(e,i+16),c=u==4294967295;if(c){if(i=ce(e,i-12),ce(e,i)!=101075792){n("invalid zip file",null);return}s=l=ce(e,i+32),u=ce(e,i+48)}for(var d=function(i){var s=at(e,u,c),d=s[0],m=s[1],p=s[2],_=s[3],f=s[4],g=s[5],h=ot(e,g);u=f;var y=function(e,t){e?(o(),n(e,null)):(a[_]=t,--l||n(null,a))};if(!d)y(null,x(e,h,h+m));else if(d==8){var C=e.subarray(h,h+m);if(m<32e4)try{y(null,Ie(C,new t(p)))}catch(e){y(e,null)}else r.push(ke(C,{size:p},y))}else y("unknown compression type "+d,null)},m=0;m<s;++m)d(m);return o}d.unzip=bt;function vt(e){for(var n={},r=e.length-22;ce(e,r)!=101010256;--r)if(!r||e.length-r>65558)throw"invalid zip file";var o=ue(e,r+8);if(!o)return{};var a=ce(e,r+16),i=a==4294967295;if(i){if(r=ce(e,r-12),ce(e,r)!=101075792)throw"invalid zip file";o=ce(e,r+32),a=ce(e,r+48)}for(var l=0;l<o;++l){var s=at(e,a,i),u=s[0],c=s[1],d=s[2],m=s[3],p=s[4],_=s[5],f=ot(e,_);if(a=p,!u)n[m]=x(e,f,f+c);else if(u==8)n[m]=Ie(e.subarray(f,f+c),new t(d));else throw"unknown compression type "+u}return n}d.unzipSync=vt}var _=!1;function f(){return _||(_=!0,p()),m.exports}function g(e){switch(e){case void 0:return f()}}a.exports=g}),null);
__d("fflate",["fflate-0.6.10"],(function(t,n,r,o,a,i){a.exports=n("fflate-0.6.10")()}),null);
__d("EncryptedBackupsDYIZipUtils",["EncryptedBackupsDYIFileUtils","asyncToGeneratorRuntime","fflate"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m;function p(e,t,n,r,o,a){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i,l){var p=yield o("EncryptedBackupsDYIFileUtils").getRootFolderHandle(),_=yield p.getFileHandle("messages.zip",{create:!0});a("stream_file_start");var g=yield _.createWritable({keepExisting:!1,mode:"exclusive"}),h=new(o("fflate")).Zip,y=0;h.ondata=function(t,n,o){if(t){r.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Generic stream error"]))),a("stream_file_error"),l(t);return}y++,y%1e3===0&&r.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Writing chunk #",""])),y),g.write(n).catch(function(e){r.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error during data event"]))),a("stream_file_error"),l(e)}),o&&(r.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Finished ZIP file generation. Saving the results"]))),a("stream_file_end"),a("write_file_start"),g.close().then(function(){a("write_file_end"),r.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Closed the writing stream"]))),i()}).catch(function(e){r.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Error during end event"]))),a("write_file_error"),l(e)}))};for(var C of t){var b=C.threadName+".json",v=new(o("fflate")).ZipDeflate(b,{level:9}),S=new TextEncoder().encode(JSON.stringify(C,null,2));h.add(v),v.push(S,!0)}for(var R of n)yield f(h,R);h.end()}),_.apply(this,arguments)}function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.split("/").pop(),r=yield o("EncryptedBackupsDYIFileUtils").getMediaFolderHandle(),a=yield o("EncryptedBackupsDYIFileUtils").readFile(r,n!=null?n:t),i=yield a.arrayBuffer(),l=new Uint8Array(i),s=new(o("fflate")).ZipPassThrough(t);e.add(s),s.push(l,!0)}),g.apply(this,arguments)}l.generateZipFile=p}),98);
__d("EncryptedBackupsDYISingleton",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYIGenerateThreadMetadata","EncryptedBackupsDYISingletonFactory","EncryptedBackupsDYITypes","EncryptedBackupsDYIZipUtils","FBLogger","I64","LSIntEnum","MAWBridge","MAWQplProxy","WAHashUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=["senderId"],s,u,c,d,m,p,_,f,g,h,y,C,b,v=null;function S(){try{return WorkerGlobalScope!==void 0&&self instanceof WorkerGlobalScope}catch(e){return!1}}function R(e,t,n){if(v==null)switch(e){case o("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Armadillo:if(S())throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Armadillo can only be initialised in the main thread");v=o("EncryptedBackupsDYISingletonFactory").getMAWEncryptedBackupsDYISingleton(t,n);break;case o("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Instamadillo:if(!S())throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Instamadillo can only be initialised in the worker");v=o("EncryptedBackupsDYISingletonFactory").getIGDEncryptedBackupsDYISingleton(t,n);break}}function L(){if(v==null)throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton is not initialised. Please call EncryptedBackupsDYISingleton.initSingleton() first.");return v}var E=(function(){function t(e,t,n,r){this.$5=new Map,this.$6=new Set,this.$7=new Set,this.$8=new Map,this.$9=new Map,this.$10=new Map,this.$11=new Map,this.$12=new Map,this.$1=e,this.$2=t,this.$3=n,this.$4=r}var r=t.prototype;return r.getDB=function(){return this.$1()},r.getLogger=function(){return this.$4},r.getAllMediaUrls=function(){return Array.from(this.$5.values())},r.$13=function(t){return this.$5.get(t)},r.setMediaUrlByPlainTextHash=function(t,n){this.$5.has(t)||this.$5.set(t,n)},r.addThreadKeyToThreadsRestoreInProgress=function(t){this.$6.add(t)},r.isThreadRestoreInProgressForThreadKey=function(t){return this.$6.has(t)},r.deleteThreadKeyFromThreadsRestoreInProgress=function(t){this.$6.delete(t),this.$4.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Finished handling message range queries for thread with thread key ",". "," threads left"])),t,this.$6.size),this.$14()&&(this.$4.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),this.$15())},r.isThreadsRestoreComplete=function(){return this.$6.size===0},r.addPlaintextHashToAttachmentDownloadsInProgress=function(t){this.$7.add(t),this.$4.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Started processing attachment with plaintext hash ","."])),o("WAHashUtils").sanitisePlaintextHash(t))},r.deletePlaintextHashFromAttachmentDownloadsInProgress=function(t){this.$7.delete(t),this.$4.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Finished processing attachment with plaintext hash ",". "," attachments left"])),o("WAHashUtils").sanitisePlaintextHash(t),this.$7.size),this.$7.size<30&&this.$4.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Remaining attachments: ",""])),Array.from(this.$7).map(o("WAHashUtils").sanitisePlaintextHash).join(", ")),this.$14()&&(this.$4.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),this.$15())},r.isAttachmentDownloadInProgressForPlaintextHash=function(t){return this.$7.has(t)},r.isAttachmentDownloadCompleteForPlaintextHash=function(t){return!!this.$5.get(t)},r.isAttachmentDownloadComplete=function(){return this.$7.size===0},r.setMessagesByThreadKey=function(t,n,r){var e=this.getMessagesByThreadKey(t);e.set(n,r)},r.getMessagesByThreadKey=function(t){return this.$16(t)||this.$8.set(t,new Map),this.$8.get(t)},r.$16=function(t){return this.$8.has(t)},r.hasMessage=function(t,n){var e=this.$8.get(t);return e==null?!1:e.has(n)},r.getThreadIdForThreadKey=function(t){return this.$10.get(t)},r.getThreadKeyForThreadId=function(t){return this.$11.get(t)},r.setThreadMapping=function(t,n){this.$10.set(t,n),this.$11.set(n,t)},r.setThreadMetaDataByThreadKey=function(t,n,r){this.$9.set(t,{participants:n,threadName:r})},r.getThreadMetadataMap=function(){return this.$9},r.setContactNameForContactId=function(t,n){this.$12.set(t,n)},r.getContactNameForContactId=function(t){return this.$12.get(t)},r.getContactNameMap=function(){return this.$12},r.getOutput=function(){var t=this;return Array.from(this.getThreadMetadataMap(),function(n){var r=n[0],o=n[1],a=t.$16(r),i=a?Array.from(t.getMessagesByThreadKey(r),function(e){var n=e[0],r=e[1];return babelHelpers.extends({},r,{media:Array.from(r.media,function(e){var n=t.$13(e);return{uri:n!=null?"./"+n:"Failed to download media"}})})}):[];i=i.map(function(n){var r=n.senderId,o=babelHelpers.objectWithoutPropertiesLoose(n,e);if(r!=null&&o.senderName==="Unknown User"){var a=t.getContactNameForContactId(r);if(a!=null)return babelHelpers.extends({},o,{senderName:a})}return n});var l=i.sort(function(e,t){return typeof e.timestamp=="number"&&typeof t.timestamp=="number"?e.timestamp-t.timestamp:0});return babelHelpers.extends({},o,{messages:l})})},r.$14=function(){return this.isAttachmentDownloadComplete()&&this.isThreadsRestoreComplete()},r.$17=function(t){switch(t){case 0:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.InProgress;case 1:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed;case 2:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed;case-1:default:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.NotStarted}},r.updateDYIStatus=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,r=yield this.getDB();yield r.runInTransaction((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield t.encrypted_backups_dyi_backup_restore_status.put({currentStatus:(C||(C=o("LSIntEnum"))).ofNumber(e),pk:(b||(b=o("I64"))).zero})});return function(e){return t.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":521"),o("MAWBridge").getBridge().fireAndForget("event","updateDYIStatus",{qplEvent:this.$2,qplInstanceKeyE2E:(t=this.$3)!=null?t:void 0,status:this.$17(e)})});function t(t){return e.apply(this,arguments)}return t})(),r.$18=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this,t=new Set;this.getContactNameMap().forEach(function(e,n){e==="Unknown User"&&t.add(n)});var n=yield this.getDB(),r=yield o("EncryptedBackupsDYIGenerateThreadMetadata").getAllUnmappedContacts(n,t);r.forEach(function(t){var n=(b||(b=o("I64"))).to_string(t.id);e.setContactNameForContactId(n,t.name)}),this.$4.LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Fetched remaining contact names, total of "," contacts"])),this.getContactNameMap().size.toString())});function t(){return e.apply(this,arguments)}return t})(),r.$15=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this;this.logDYIQPLPoint("complete_dyi_flow_start"),yield this.$18(),this.$4.LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Generating output"])));var t=this.getOutput(),r=Array.from(this.$5.values());this.$4.LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Generating zip file"]))),yield o("EncryptedBackupsDYIZipUtils").generateZipFile(t,r,this.$4,function(t,n){e.logDYIQPLPoint(t,n)},n("asyncToGeneratorRuntime").asyncToGenerator(function*(){e.logDYIQPLPoint("complete_dyi_flow_end"),yield e.updateDYIStatus(1),e.clear()}),(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){e.$4.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate zip file: ",""])),t),e.logDYIQPLPoint("complete_dyi_flow_error"),yield e.updateDYIStatus(2),e.clear()});return function(e){return t.apply(this,arguments)}})())});function t(){return e.apply(this,arguments)}return t})(),r.exitDYIEarly=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){t!=null&&this.$4.LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["DYI Exiting Early - Found "," instamadillo threads"])),t),this.logDYIQPLPoint("dyi_exit_early",{int:{dyi_threads:t}}),yield this.updateDYIStatus(e?2:1),this.clear()});function t(t,n){return e.apply(this,arguments)}return t})(),r.clear=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.$5=new Map,this.$6=new Set,this.$7=new Set,this.$8=new Map,this.$9=new Map;var e=yield o("EncryptedBackupsDYIFileUtils").getRootFolderHandle();yield e.removeEntry(o("EncryptedBackupsDYIFileUtils").DyiMediaFolder,{recursive:!0})});function t(){return e.apply(this,arguments)}return t})(),r.logDYIQPLPoint=function(t,n){this.$3!=null&&o("MAWQplProxy").sendQplPointThroughBridge(this.$2,t,{annotations:n,instanceKey:this.$3})},t})();l.initSingleton=R,l.getSingleton=L,l.EncryptedBackupsDYISingleton=E}),98);
__d("EncryptedBackupsDYISingletonFactory",["EncryptedBackupsDYISingleton","WATagsLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return new(o("EncryptedBackupsDYISingleton")).EncryptedBackupsDYISingleton(e,r("qpl")._(521478596,"1329"),t,o("WATagsLogger").TAGS(["labyrinth_web","labyrinth_dyi",t==null?"":t.toString()]))}function s(e,t){return new(o("EncryptedBackupsDYISingleton")).EncryptedBackupsDYISingleton(e,r("qpl")._(521479842,"2163"),t,o("WATagsLogger").TAGS(["igd_labyrinth_web","igd_dyi",t==null?"":t.toString()]))}l.getMAWEncryptedBackupsDYISingleton=e,l.getIGDEncryptedBackupsDYISingleton=s}),98);
__d("EncryptedBackupsDYIMediaDownloadHandlers",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYISingleton","FBLogger","Promise","WAResultOrError","asyncToGeneratorRuntime","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i=yield o("EncryptedBackupsDYIFileUtils").getMediaFolderHandle(),l=t.split("/")[1],s=r("uuidv4")()+"."+l;yield o("EncryptedBackupsDYIFileUtils").writeFile(i,s,n);var u=o("EncryptedBackupsDYISingleton").getSingleton();return u.setMediaUrlByPlainTextHash(e,o("EncryptedBackupsDYIFileUtils").DyiMediaFolder+"/"+s),u.deletePlaintextHashFromAttachmentDownloadsInProgress(e),o("WAResultOrError").makeResult()});return function(n,r,o,a){return e.apply(this,arguments)}})(),u=function(){return r("FBLogger")("wmi_eb").debug("[DYIMediaPreviewHandler] Skipping previews for DYI"),(e||(e=n("Promise"))).resolve(o("WAResultOrError").makeResult())};l.DYIMediaDownloadHandler=s,l.DYIMediaPreviewHandler=u}),98);
__d("MAWHandleMediaPreviewBeforeDownloadApi",["MAWMediaPreviewDownloadManager","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r){return o("MAWMediaPreviewDownloadManager").markMediaPreviewAsDownloading(r),(e||(e=n("Promise"))).resolve()};l.handleMediaPreviewBeforeDownload=s}),98);
__d("MAWHandleMediaPreviewDownloadApi",["MAWBridgeTypesCreators","MAWDbMediaTxns","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWLoggerUtils","MAWMediaAfterTxns","MAWMediaDownloadStatus","MAWMediaDownloadStatusForUI","MAWMediaPreviewDownloadManager","MAWMediaUtils","MAWTransactionMode","MWFBLogger","WACryptoSha256","WAHashUtils","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MWFBLogger").MWMediaLogger().tags([o("MAWLoggerUtils").Tag.MediaDownload,o("MAWLoggerUtils").Tag.MessageReceive,"MediaPreview"]),c=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i=o("WAHashUtils").toPlaintextHash(yield o("WACryptoSha256").sha256(t));o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download",hash:e,status:r("MAWMediaDownloadStatus").DOWNLOADING,type:"preview"});var l=o("MAWMediaPreviewDownloadManager").getMediaPreviewDownloadingResolvable(e);return l!=null&&(l.resolve(new Blob([t],{type:"image/jpeg"})),o("MAWMediaPreviewDownloadManager").removeMediaPreviewDownloadingResolvable(e)),d(e,i,t,n,a)});return function(n,r,o,a){return e.apply(this,arguments)}})(),d=o("MAWIndexedDb").makeMsgrTransactor({media:o("MAWTransactionMode").READWRITE,messages:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"handleMediaPreviewDownload",function(t){return(function(n,a,i,l,c){return o("MAWDexieTable").dexieAll([o("MAWDbMediaTxns").maybeGetMediaFromPlaintextHash(t,n),o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(t,c)]).then(function(c){var d=c[0],m=c[1];if(u.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Handling preview for main hash ","... preview hash ","..."])),o("WAHashUtils").sanitisePlaintextHash(n),o("WAHashUtils").sanitisePlaintextHash(a)),d==null)return o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"missing_media_on_save",hash:n,status:r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,type:"preview"}),u.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Main media for preview is null. Type: ",""])),l),o("WAResultOrError").makeError("missing-media-on-save");var p=function(){switch(l){case"image":return t.media.update(d.mediaId,babelHelpers.extends({},d,{validatedImageInfo:babelHelpers.extends({},d.validatedImageInfo,{jpegThumbnail:i})}));case"video":return t.media.update(d.mediaId,babelHelpers.extends({},d,{validatedVideoInfo:babelHelpers.extends({},d.validatedVideoInfo,{jpegThumbnail:i})}));default:return o("MAWDexieTable").dexieResolve()}};return o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download_success",hash:n,status:r("MAWMediaDownloadStatus").SUCCESS,type:"preview"}),p().then(function(){return t.messages.where("msgId").anyOf(d.msgIds).toArray().then(function(e){return t.threads.where("jid").anyOf(e.map(function(e){return e.threadJid})).toArray().then(function(n){return o("MAWDexieTable").dexieAll(n.map(function(n){var r=o("MAWMediaUtils").createHdTypesForBridgeMedia(e),a=o("MAWBridgeTypesCreators").createBridgeMedia({chatJid:n.jid,filteredMsgIds:o("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(e,n.jid),hasMediaForUI:!0,hdTypes:r,media:d,sortOrderMs:m==null?void 0:m.sortOrderMs});return o("MAWMediaAfterTxns").handleNewMediaAfterTxnWithBridgeMedia(t,a,e)})).then(function(){return o("WAResultOrError").makeResult()})})})})})})});l.handleMediaPreviewDownload=c}),98);
__d("MAWHandleMediaPreviewDownloadAsFailedApi",["MAWMediaPreviewDownloadManager","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a){return o("MAWMediaPreviewDownloadManager").markMediaPreviewAsFailed(r,a),(e||(e=n("Promise"))).resolve()};l.handleMediaPreviewDownloadFailed=s}),98);
__d("MebWAMediaDownloader",["MAWHandleMediaPreviewBeforeDownloadApi","MAWHandleMediaPreviewDownloadApi","MAWHandleMediaPreviewDownloadAsFailedApi","WAAPI","WAIsMediaExpiredError","WALogger","WAStartMediaDownloadQplFlow","WATimeUtils","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e,t,n){this.mediaDownloadMetadata=e,this.downloadCallbacks=t,this.waApiDownloadCall=n}var a=t.prototype;return a.handle=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t,n=this.mediaDownloadMetadata.mediaEntry.mediaKeyTimestamp;if(n==null)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][WAMediaDownloader] Cannot download media - missing mediaKeyTimestamp"]))),this.handleError();var a=!o("WATimeUtils").happenedWithin(n,29*o("WATimeUtils").DAY_SECONDS),i=(t=this.mediaDownloadMetadata.isUrlRenewed)!=null?t:!1;if(!i&&(a||r("gkx")("23960")))return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] downloading media from MI directly"]))),this.handleUrlExpired();var l=this.mediaDownloadMetadata,u=l.hash,c=l.mediaEntry,d=l.protocolMsgId,m=yield this.waApiDownloadCall(u,c,d);return m.success?this.downloadCallbacks.onDownloadSuccess({mimeType:m.value.mimeType,plaintext:m.value.plaintext}):o("WAIsMediaExpiredError").isMediaExpiredError(m.error)?this.handleUrlExpired():this.handleError()});function a(){return t.apply(this,arguments)}return a})(),a.handleUrlExpired=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;return yield this.downloadCallbacks.onUrlExpired(),(e=this.mediaDownloadHandler)==null?void 0:e.handle()});function t(){return e.apply(this,arguments)}return t})(),a.handleError=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;return yield this.downloadCallbacks.onDownloadError(),(e=this.mediaDownloadHandler)==null?void 0:e.handle()});function t(){return e.apply(this,arguments)}return t})(),a.getDownloadMetadata=function(){return this.mediaDownloadMetadata},a.setNextHandler=function(t){this.mediaDownloadHandler=t},t})(),c=function(t,n,a){var e=o("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"MebWAMediaDownloader",msgType:null,protocolMsgId:a,triggerUIView:null});return r("WAAPI").downloadMedia({downloadMediaMetric:e,handleMediaPreviewBeforeDownload:o("MAWHandleMediaPreviewBeforeDownloadApi").handleMediaPreviewBeforeDownload,handleMediaPreviewDownload:o("MAWHandleMediaPreviewDownloadApi").handleMediaPreviewDownload,handleMediaPreviewDownloadFailed:o("MAWHandleMediaPreviewDownloadAsFailedApi").handleMediaPreviewDownloadFailed,hash:t,mediaEntry:n,protocolMsgId:a})};l.MebWAMediaDownloader=u,l.MebWADownloadMediaFromWorker=c}),98);
__d("EncryptedBackupsDYIMessageProcessingUtils",["EncryptedBackupsDYIMediaDownloadHandlers","EncryptedBackupsDYISingleton","FBLogger","MAWBridge","MAWFrontendMediaUtils","MebWAMediaDownloader","Promise","WAHashUtils","WAJids","WALongInt","WAMediaUtils","WAProgressiveJpegGetScanLengths","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h;function y(e,t){return{isUnsent:!1,media:new Set,reactions:[],senderName:C(e),text:"",timestamp:t!=null?t:0,type:""}}function C(e){var t=o("EncryptedBackupsDYISingleton").getSingleton(),n="Unknown User";if(e!=null){var r=t.getContactNameForContactId(e);r!=null&&(n=r)}return n}function b(e,t,n,r){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i=o("EncryptedBackupsDYISingleton").getSingleton(),l=i.getLogger(),s=l.TAGS([o("WAHashUtils").sanitisePlaintextHash(e)]);r("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Sending the media download bridge call for plaintext hash: %s",o("WAHashUtils").sanitisePlaintextHash(e));var u=yield o("MAWBridge").getBridge().sendAndReceive("backend","dyiDownloadMediaV2",{mediaEntry:a,plaintextHash:e,protocolMsgId:t,sortOrderMs:n});if(r("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Received the media download result from the bridge for plaintext hash: %s, success: %s, error: %s",o("WAHashUtils").sanitisePlaintextHash(e),u.success?"true":"false",u.error),u.success){var c=u.value,d=c.unvalidatedMimeType,m=c.validatedResult,h=m.skipValidation?d:m.mimeType,y=yield o("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(e,h,m.validatedPlaintext,t);if(!y.success){s.WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),y.error,y.payload),l.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),y.error,y.payload),i.deletePlaintextHashFromAttachmentDownloadsInProgress(e);return}}else{s.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),u.error,u.payload),l.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),u.error,u.payload),i.deletePlaintextHashFromAttachmentDownloadsInProgress(e);return}}),v.apply(this,arguments)}function S(t,r,a,i,l,p,_,f,g,y,C){var b=o("EncryptedBackupsDYISingleton").getSingleton(),v=b.getLogger(),S=v.TAGS([o("WAHashUtils").sanitisePlaintextHash(g)]),R={author:o("WAJids").toMsgrUserJid(_),chat:o("WAJids").toMsgrUserJid(l),externalId:f},L={hash:g,isUrlRenewed:!1,mediaEntry:i,protocolMsgId:R,sortOrderMs:y},E={onDownloadError:function(){return S.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"]))),v.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"]))),b.deletePlaintextHashFromAttachmentDownloadsInProgress(L.hash),(h||(h=n("Promise"))).resolve()},onDownloadSuccess:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){S.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Successfully downloaded media"])));var t=e.mimeType,n=e.plaintext;yield o("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(L.hash,t,n,R)});function t(t){return e.apply(this,arguments)}return t})(),onUrlExpired:function(){return S.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Media CDN URL has expired and should be renewed"]))),(h||(h=n("Promise"))).resolve()}},k=new(o("MebWAMediaDownloader")).MebWAMediaDownloader(L,E,t),I=i.serverMediaType,T=i.objectId;if(I!=null&&T!=null&&typeof y=="number"){var D={backupEntFbid:r,deliveryObjectId:T,hash:g,mediaType:I,messageId:f,productType:a,sortOrder:y,threadId:l,threadKey:p},x={onResignCdnUrlFailure:function(t){return S.WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),t.message),v.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),t.message),b.deletePlaintextHashFromAttachmentDownloadsInProgress(L.hash),(h||(h=n("Promise"))).resolve()},onResignCdnUrlSuccess:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function t(){return e.apply(this,arguments)}return t})()},$=C(D,x);k.setNextHandler($),$.setNextHandler(new(o("MebWAMediaDownloader")).MebWAMediaDownloader(L,E,t))}k.handle()}function R(e,t,n){var r,a,i,l,s,u,c,d,m,p,_,f=(r=e.integral)==null||(r=r.transport)==null||(r=r.ancillary)==null?void 0:r.mimetype;if(f==null)return o("WAResultOrError").makeError("mime-type-missing");var g=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(f,t).serverMediaType;if(g==null)return o("WAResultOrError").makeError("server-media-type-missing");var h=(a=e.integral)==null||(a=a.transport)==null||(a=a.integral)==null?void 0:a.directPath;if(h==null)return o("WAResultOrError").makeError("direct-path-missing");var y=(i=e.integral)==null||(i=i.transport)==null||(i=i.integral)==null?void 0:i.fileSha256;if(y==null)return o("WAResultOrError").makeError("plaintext-hash-missing");var C=o("WALongInt").maybeNumber((l=e.integral)==null||(l=l.transport)==null||(l=l.integral)==null?void 0:l.mediaKeyTimestamp);if(C==null)return o("WAResultOrError").makeError("media-key-timestamp-missing");var b;if(((s=e.ancillary)==null?void 0:s.scanLengths)!=null&&((u=e.ancillary)==null?void 0:u.scansSidecar)!=null){var v=e.ancillary,S=v.scanLengths,R=v.scansSidecar;b={scanLengths:S.map(o("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength),sidecar:R}}var L;if(((c=e.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.downloadableThumbnail)!=null){var E=e.integral.transport.ancillary.thumbnail.downloadableThumbnail,k=E.directPath,I=E.fileEncSha256,T=E.fileSha256,D=E.mediaKey,x=E.mediaKeyTimestamp,$=E.objectId;L={directPath:k,fileEncSha256:I,fileSha256:T,mediaKey:D,mediaKeyTimestamp:o("WALongInt").maybeNumber(x),objectId:$}}var P={directPath:h,downloadableThumbnail:L,fileEncSha256:(d=e.integral)==null||(d=d.transport)==null||(d=d.integral)==null?void 0:d.fileEncSha256,filename:n,fileSha256:y,mediaKey:(m=e.integral)==null||(m=m.transport)==null||(m=m.integral)==null?void 0:m.mediaKey,mediaKeyTimestamp:o("WATimeUtils").castToUnixTime(C),objectId:(p=e.integral)==null||(p=p.transport)==null||(p=p.ancillary)==null?void 0:p.objectId,progressiveJpegDetails:b,serverMediaType:g,size:o("WALongInt").maybeNumber((_=e.integral)==null||(_=_.transport)==null||(_=_.ancillary)==null?void 0:_.fileLength)};return o("WAResultOrError").makeResult(o("WAMediaUtils").rawDataToMediaEntry(P))}l.buildBaseDyiMessage=y,l.getSenderName=C,l.downloadMediaWithMediaManager=b,l.startMediaDownloadChain=S,l.decodeMediaEntryFromAttachmentPayload=R}),98);
__d("IndexedDbPolyfills",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.emit=function(t){for(var e=this.$1.get(t),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(e!==void 0)for(var a of e)a.apply(void 0,r);var i=this["on"+t];i!=null&&i.apply(void 0,r)},t.addEventListener=function(t,n,r){var e=this;r===void 0&&(r={});var o=r,a=o.signal,i=this.$1.get(t);i===void 0&&(i=new Set,this.$1.set(t,i)),i.add(n),a!=null&&(a.onabort=function(){e.removeEventListener(t,n)})},t.removeEventListener=function(t,n){var e=this.$1.get(t);e!==void 0&&e.delete(n)},e})(),l=function(){return function(t,n){var r=this.openCursor(t!=null?t:null),o=[],a=new e;return r.onsuccess=function(e){var t=e.target.result;if(t!=null&&(n===void 0||o.length<n))o.push(t.value),t.continue();else{a.result=o,a.onsuccess==null||a.onsuccess({target:{readyState:"done",result:o}});return}},r.onerror=function(e){a.onerror==null||a.onerror(e)},a}},s=typeof window!="undefined"?window:self;typeof s.IDBObjectStore!="undefined"&&s.IDBObjectStore.prototype.getAll===void 0&&(s.IDBObjectStore.prototype.getAll=l()),i.IDBRequest=e,i.getAll=l}),66);
__d("InstamadilloCoreTypeActionLog.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={},s={};e.name="ActionLog",e.internalSpec={actionLogReaction:[1,o("WAProtoConst").TYPES.MESSAGE,s],__oneofs__:{actionLogSubtype:["actionLogReaction"]}},s.name="ActionLogReaction",s.internalSpec={emojiUnicode:[1,o("WAProtoConst").TYPES.STRING]},l.ActionLogSpec=e,l.ActionLogReactionSpec=s}),98);
__d("InstamadilloCoreTypeAdminMessage.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={DEVICE_ADMIN_MESSAGE_TYPE_NONE:0,DEVICE_ADMIN_MESSAGE_TYPE_LOCAL_USER_CHANGED_IDENTITY_KEY_NAMED_DEVICE:1,DEVICE_ADMIN_MESSAGE_TYPE_SECURITY_ALERT_PARTICIPANT_KEY_CHANGE:2,DEVICE_ADMIN_MESSAGE_TYPE_SECURITY_ALERT_PARTICIPANT_NEW_LOGIN:3},s={},u={};s.name="AdminMessage",s.internalSpec={deviceAdminMessage:[1,o("WAProtoConst").TYPES.MESSAGE,u],__oneofs__:{adminMessageSubtype:["deviceAdminMessage"]}},u.name="DeviceAdminMessage",u.internalSpec={deviceAdminMessageType:[1,o("WAProtoConst").TYPES.ENUM,e],deviceName:[2,o("WAProtoConst").TYPES.STRING]},l.DEVICE_ADMIN_MESSAGE_TYPE=e,l.AdminMessageSpec=s,l.DeviceAdminMessageSpec=u}),98);
__d("InstamadilloCoreTypeMedia.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={PJPEG_SCAN_CONFIGURATION_UNSPECIFIED:0,PJPEG_SCAN_CONFIGURATION_WA:1,PJPEG_SCAN_CONFIGURATION_E15:2,PJPEG_SCAN_CONFIGURATION_E35:3},u={RAVEN_VIEW_MODEL_UNSPECIFIED:0,RAVEN_VIEW_MODEL_ONCE:1,RAVEN_VIEW_MODEL_REPLAYABLE:2,RAVEN_VIEW_MODEL_PERMANENT:3},c={UNSET:0,NONE:1,NUDE:2},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={};d.name="Media",d.internalSpec={staticPhoto:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,m],voice:[2,e.TYPES.MESSAGE,p],video:[3,e.TYPES.MESSAGE,_],raven:[4,e.TYPES.MESSAGE,h],gif:[5,e.TYPES.MESSAGE,f],avatarSticker:[6,e.TYPES.MESSAGE,g],__oneofs__:{media:["staticPhoto","voice","video","raven","gif","avatarSticker"]}},m.name="StaticPhoto",m.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],height:[2,e.TYPES.INT32],width:[3,e.TYPES.INT32],scanLengths:[4,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.INT32],thumbnail:[5,e.TYPES.MESSAGE,C],pjpegScanConfiguration:[6,e.TYPES.ENUM,s]},p.name="Voice",p.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],duration:[2,e.TYPES.INT32],waveforms:[3,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.FLOAT],waveformSamplingFrequencyHz:[4,e.TYPES.INT32]},_.name="Video",_.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],height:[2,e.TYPES.INT32],width:[3,e.TYPES.INT32],thumbnail:[4,e.TYPES.MESSAGE,C],videoExtraMetadata:[5,e.TYPES.MESSAGE,v]},f.name="Gif",f.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],height:[2,e.TYPES.INT32],width:[3,e.TYPES.INT32],isSticker:[4,e.TYPES.BOOL],stickerId:[5,e.TYPES.STRING],gifUrl:[6,e.TYPES.STRING],gifSize:[7,e.TYPES.INT32],isRandom:[8,e.TYPES.BOOL]},g.name="AvatarSticker",g.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],isAnimated:[2,e.TYPES.BOOL],stickerId:[3,e.TYPES.STRING],stickerTemplate:[4,e.TYPES.STRING],nuxType:[5,e.TYPES.INT32]},h.name="Raven",h.internalSpec={viewMode:[1,e.TYPES.ENUM,u],content:[2,e.TYPES.MESSAGE,y]},y.name="RavenContent",y.internalSpec={staticPhoto:[1,e.TYPES.MESSAGE,m],video:[2,e.TYPES.MESSAGE,_],__oneofs__:{ravenContent:["staticPhoto","video"]}},C.name="Thumbnail",C.internalSpec={mediaTransport:[1,e.TYPES.MESSAGE,b],height:[2,e.TYPES.INT32],width:[3,e.TYPES.INT32]},b.name="CommonMediaTransport",b.internalSpec={mediaId:[1,e.TYPES.STRING],fileSha256:[2,e.TYPES.STRING],mediaKey:[3,e.TYPES.STRING],fileEncSha256:[4,e.TYPES.STRING],directPath:[5,e.TYPES.STRING],mediaKeyTimestamp:[6,e.TYPES.STRING],sidecar:[7,e.TYPES.STRING],fileLength:[8,e.TYPES.INT32],mimetype:[9,e.TYPES.STRING],objectId:[10,e.TYPES.STRING]},v.name="VideoExtraMetadata",v.internalSpec={uploadMosClientScore:[1,e.TYPES.FLOAT]},l.PJPEG_SCAN_CONFIGURATION=s,l.RAVEN_VIEW_MODE=u,l.MEDIA_INTERVENTION_TYPE=c,l.MediaSpec=d,l.StaticPhotoSpec=m,l.VoiceSpec=p,l.VideoSpec=_,l.GifSpec=f,l.AvatarStickerSpec=g,l.RavenSpec=h,l.RavenContentSpec=y,l.ThumbnailSpec=C,l.CommonMediaTransportSpec=b,l.VideoExtraMetadataSpec=v}),98);
__d("InstamadilloCoreTypeCollection.pb",["InstamadilloCoreTypeMedia.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="Collection",e.internalSpec={name:[1,o("WAProtoConst").TYPES.STRING],media:[2,o("WAProtoConst").FLAGS.REPEATED|o("WAProtoConst").TYPES.MESSAGE,o("InstamadilloCoreTypeMedia.pb").MediaSpec]},l.CollectionSpec=e}),98);
__d("InstamadilloCoreTypeLink.pb",["InstamadilloCoreTypeMedia.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.name="Link",s.internalSpec={text:[1,(e=o("WAProtoConst")).TYPES.STRING],linkContext:[2,e.TYPES.MESSAGE,u]},u.name="LinkContext",u.internalSpec={linkImageUrl:[1,e.TYPES.MESSAGE,c],linkPreviewTitle:[2,e.TYPES.STRING],linkUrl:[3,e.TYPES.STRING],linkSummary:[4,e.TYPES.STRING],linkMusicPreviewUrl:[5,e.TYPES.STRING],linkMusicPreviewCountriesAllowed:[6,e.FLAGS.REPEATED|e.TYPES.STRING],linkPreviewThumbnail:[7,e.TYPES.MESSAGE,o("InstamadilloCoreTypeMedia.pb").ThumbnailSpec],linkPreviewBody:[8,e.TYPES.STRING]},c.name="ImageUrl",c.internalSpec={url:[1,e.TYPES.STRING],width:[2,e.TYPES.INT32],height:[3,e.TYPES.INT32]},l.LinkSpec=s,l.LinkContextSpec=u,l.ImageUrlSpec=c}),98);
__d("InstamadilloCoreTypeText.pb",["InstamadilloCoreTypeMedia.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={TEXT_FORMAT_STYLE_UNSPECIFIED:0,TEXT_FORMAT_STYLE_BOLD:1,TEXT_FORMAT_STYLE_ITALIC:2,TEXT_FORMAT_STYLE_STRIKETHROUGH:3,TEXT_FORMAT_STYLE_UNDERLINE:4,TEXT_FORMAT_STYLE_INVALID:5},u={},c={},d={},m={},p={};u.name="Text",u.internalSpec={text:[1,(e=o("WAProtoConst")).TYPES.STRING],isSuggestedReply:[2,e.TYPES.BOOL],postbackPayload:[3,e.TYPES.STRING],powerUpData:[4,e.TYPES.MESSAGE,c],commands:[5,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d],animatedEmojiCharacterRanges:[6,e.FLAGS.REPEATED|e.TYPES.MESSAGE,p]},c.name="PowerUpsData",c.internalSpec={style:[1,e.TYPES.INT32],mediaAttachment:[2,e.TYPES.MESSAGE,o("InstamadilloCoreTypeMedia.pb").CommonMediaTransportSpec]},d.name="CommandRangeData",d.internalSpec={offset:[1,e.TYPES.INT32],length:[2,e.TYPES.INT32],type:[3,e.TYPES.INT32],fbid:[4,e.TYPES.STRING],userOrThreadFbid:[5,e.TYPES.STRING]},m.name="FormattedText",m.internalSpec={offset:[1,e.TYPES.INT32],length:[2,e.TYPES.INT32],style:[3,e.TYPES.ENUM,s]},p.name="AnimatedEmojiCharacterRange",p.internalSpec={offset:[1,e.TYPES.INT32],length:[2,e.TYPES.INT32]},l.TEXT_FORMAT_STYLE=s,l.TextSpec=u,l.PowerUpsDataSpec=c,l.CommandRangeDataSpec=d,l.FormattedTextSpec=m,l.AnimatedEmojiCharacterRangeSpec=p}),98);
__d("InstamadilloXmaContentRef.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={XMA_ACTION_TYPE_UNSPECIFIED:0,XMA_ACTION_TYPE_SHARE:1,XMA_ACTION_TYPE_REPLY:2,XMA_ACTION_TYPE_REACT:3,XMA_ACTION_TYPE_MENTION:4},u={RECEIVER_FETCH_CONTENT_TYPE_UNSPECIFIED:0,RECEIVER_FETCH_CONTENT_TYPE_NOTE:1,RECEIVER_FETCH_CONTENT_TYPE_STORY:2,RECEIVER_FETCH_CONTENT_TYPE_PROFILE:3,RECEIVER_FETCH_CONTENT_TYPE_CLIP:4,RECEIVER_FETCH_CONTENT_TYPE_FEED:5,RECEIVER_FETCH_CONTENT_TYPE_LIVE:6,RECEIVER_FETCH_CONTENT_TYPE_COMMENT:7,RECEIVER_FETCH_CONTENT_TYPE_LOCATION_SHARE:8,RECEIVER_FETCH_CONTENT_TYPE_REELS_AUDIO:9,RECEIVER_FETCH_CONTENT_TYPE_MEDIA_NOTE:10,RECEIVER_FETCH_CONTENT_TYPE_STORY_HIGHLIGHT:11,RECEIVER_FETCH_CONTENT_TYPE_SOCIAL_CONTEXT:12},c={MEDIA_NOTE_FETCH_PARAMS_MESSAGE_TYPE_UNSPECIFIED:0,MEDIA_NOTE_FETCH_PARAMS_MESSAGE_TYPE_MENTION:1,MEDIA_NOTE_FETCH_PARAMS_MESSAGE_TYPE_REPLY:2},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={};d.name="XmaContentRef",d.internalSpec={actionType:[1,(e=o("WAProtoConst")).TYPES.ENUM,s],contentType:[2,e.TYPES.ENUM,u],targetUrl:[3,e.TYPES.STRING],userName:[4,e.TYPES.STRING],ownerFbid:[5,e.TYPES.STRING],fetchParams:[6,e.TYPES.MESSAGE,m]},m.name="ReceiverFetchXmaFetchParams",m.internalSpec={noteFetchParams:[1,e.TYPES.MESSAGE,p],storyFetchParams:[2,e.TYPES.MESSAGE,_],profileFetchParams:[3,e.TYPES.MESSAGE,f],clipFetchParams:[4,e.TYPES.MESSAGE,g],feedFetchParams:[5,e.TYPES.MESSAGE,h],liveFetchParams:[6,e.TYPES.MESSAGE,y],commentFetchParams:[7,e.TYPES.MESSAGE,C],locationShareFetchParams:[8,e.TYPES.MESSAGE,b],reelsAudioFetchParams:[9,e.TYPES.MESSAGE,v],mediaNoteFetchParams:[10,e.TYPES.MESSAGE,S],socialContextFetchParams:[11,e.TYPES.MESSAGE,R],__oneofs__:{receiverFetchXmaFetchParams:["noteFetchParams","storyFetchParams","profileFetchParams","clipFetchParams","feedFetchParams","liveFetchParams","commentFetchParams","locationShareFetchParams","reelsAudioFetchParams","mediaNoteFetchParams","socialContextFetchParams"]}},p.name="ReceiverFetchXmaNoteFetchParams",p.internalSpec={noteIgid:[1,e.TYPES.STRING]},_.name="ReceiverFetchXmaStoryFetchParams",_.internalSpec={storyIgid:[1,e.TYPES.STRING],reelId:[2,e.TYPES.STRING]},f.name="ReceiverFetchXmaProfileFetchParams",f.internalSpec={profileIgid:[1,e.TYPES.STRING]},g.name="ReceiverFetchXmaClipFetchParams",g.internalSpec={mediaIgid:[1,e.TYPES.STRING]},h.name="ReceiverFetchXmaFeedFetchParams",h.internalSpec={mediaIgid:[1,e.TYPES.STRING],carouselShareChildMediaIgid:[2,e.TYPES.STRING]},y.name="ReceiverFetchXmaLiveFetchParams",y.internalSpec={liveIgid:[1,e.TYPES.STRING]},C.name="ReceiverFetchXmaCommentFetchParams",C.internalSpec={commentFbid:[1,e.TYPES.STRING]},b.name="ReceiverFetchXmaLocationShareFetchParams",b.internalSpec={locationIgid:[1,e.TYPES.STRING]},v.name="ReceiverFetchXmaReelsAudioFetchParams",v.internalSpec={audioIgid:[1,e.TYPES.STRING]},S.name="ReceiverFetchXmaMediaNoteFetchParams",S.internalSpec={mediaNoteIgid:[1,e.TYPES.STRING],messageType:[2,e.TYPES.ENUM,c]},R.name="ReceiverFetchXmaSocialContextFetchParams",R.internalSpec={mediaIgid:[1,e.TYPES.STRING]},l.XMA_ACTION_TYPE=s,l.RECEIVER_FETCH_CONTENT_TYPE=u,l.MEDIA_NOTE_FETCH_PARAMS_MESSAGE_TYPE=c,l.XmaContentRefSpec=d,l.ReceiverFetchXmaFetchParamsSpec=m,l.ReceiverFetchXmaNoteFetchParamsSpec=p,l.ReceiverFetchXmaStoryFetchParamsSpec=_,l.ReceiverFetchXmaProfileFetchParamsSpec=f,l.ReceiverFetchXmaClipFetchParamsSpec=g,l.ReceiverFetchXmaFeedFetchParamsSpec=h,l.ReceiverFetchXmaLiveFetchParamsSpec=y,l.ReceiverFetchXmaCommentFetchParamsSpec=C,l.ReceiverFetchXmaLocationShareFetchParamsSpec=b,l.ReceiverFetchXmaReelsAudioFetchParamsSpec=v,l.ReceiverFetchXmaMediaNoteFetchParamsSpec=S,l.ReceiverFetchXmaSocialContextFetchParamsSpec=R}),98);
__d("InstamadilloAddMessage.pb",["InstamadilloCoreTypeActionLog.pb","InstamadilloCoreTypeAdminMessage.pb","InstamadilloCoreTypeCollection.pb","InstamadilloCoreTypeLink.pb","InstamadilloCoreTypeMedia.pb","InstamadilloCoreTypeText.pb","InstamadilloXmaContentRef.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={PLACEHOLDER_TYPE_NONE:0,PLACEHOLDER_TYPE_DECRYPTION_FAILURE:1,PLACEHOLDER_TYPE_NOT_SUPPORTED_NEED_UPDATE:2,PLACEHOLDER_TYPE_DEVICE_UNAVAILABLE:3,PLACEHOLDER_TYPE_NOT_SUPPORTED_NOT_RECOVERABLE:4},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={};u.name="AddMessagePayload",u.internalSpec={content:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,c],metadata:[2,e.TYPES.MESSAGE,d]},c.name="AddMessageContent",c.internalSpec={text:[1,e.TYPES.MESSAGE,o("InstamadilloCoreTypeText.pb").TextSpec],like:[2,e.TYPES.MESSAGE,h],link:[3,e.TYPES.MESSAGE,o("InstamadilloCoreTypeLink.pb").LinkSpec],receiverFetchXma:[4,e.TYPES.MESSAGE,y],media:[5,e.TYPES.MESSAGE,o("InstamadilloCoreTypeMedia.pb").MediaSpec],placeholder:[6,e.TYPES.MESSAGE,C],collection:[7,e.TYPES.MESSAGE,o("InstamadilloCoreTypeCollection.pb").CollectionSpec],adminMessage:[8,e.TYPES.MESSAGE,o("InstamadilloCoreTypeAdminMessage.pb").AdminMessageSpec],actionLog:[9,e.TYPES.MESSAGE,o("InstamadilloCoreTypeActionLog.pb").ActionLogSpec],__oneofs__:{addMessageContent:["text","like","link","receiverFetchXma","media","placeholder","collection","adminMessage","actionLog"]}},d.name="AddMessageMetadata",d.internalSpec={sendSilently:[1,e.TYPES.BOOL],privateReplyInfo:[2,e.TYPES.MESSAGE,_],repliedToMessage:[3,e.TYPES.MESSAGE,m],forwardingParams:[4,e.TYPES.MESSAGE,f],ephemeralityParams:[5,e.TYPES.MESSAGE,g]},m.name="RepliedToMessage",m.internalSpec={repliedToMessageOtid:[1,e.TYPES.STRING],repliedToMessageWaServerTimeSec:[2,e.TYPES.STRING],repliedToMessageCollectionItemId:[3,e.TYPES.STRING],omMicroSecTs:[4,e.TYPES.MESSAGE,p]},p.name="OpenMessageMicroSecondTimestamp",p.internalSpec={timestampMs:[1,e.TYPES.INT64],microSecondsBits:[2,e.TYPES.INT32]},_.name="PrivateReplyInfo",_.internalSpec={commentId:[1,e.TYPES.STRING],postLink:[2,e.TYPES.STRING]},f.name="ForwardingParams",f.internalSpec={forwardedThreadId:[1,e.TYPES.STRING]},g.name="EphemeralityParams",g.internalSpec={ephemeralDurationSec:[1,e.TYPES.INT64]},h.name="Like",h.internalSpec={},y.name="ReceiverFetchXma",y.internalSpec={contentRef:[1,e.TYPES.STRING],text:[2,e.TYPES.STRING],media:[3,e.TYPES.MESSAGE,o("InstamadilloCoreTypeMedia.pb").MediaSpec],xmaContentRef:[4,e.TYPES.MESSAGE,o("InstamadilloXmaContentRef.pb").XmaContentRefSpec]},C.name="Placeholder",C.internalSpec={placeholderType:[1,e.TYPES.ENUM,s]},l.PLACEHOLDER_TYPE=s,l.AddMessagePayloadSpec=u,l.AddMessageContentSpec=c,l.AddMessageMetadataSpec=d,l.RepliedToMessageSpec=m,l.OpenMessageMicroSecondTimestampSpec=p,l.PrivateReplyInfoSpec=_,l.ForwardingParamsSpec=f,l.EphemeralityParamsSpec=g,l.LikeSpec=h,l.ReceiverFetchXmaSpec=y,l.PlaceholderSpec=C}),98);
__d("InstamadilloDeleteMessage.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="DeleteMessagePayload",e.internalSpec={messageOtid:[1,o("WAProtoConst").TYPES.STRING]},l.DeleteMessagePayloadSpec=e}),98);
__d("InstamadilloSupplementMessage.pb",["InstamadilloCoreTypeMedia.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={};s.name="SupplementMessagePayload",s.internalSpec={targetMessageOtid:[1,(e=o("WAProtoConst")).TYPES.STRING],uniquingKeyForSupplementalData:[2,e.TYPES.STRING],content:[3,e.TYPES.MESSAGE,u],targetMessageWaServerTimeSec:[4,e.TYPES.STRING],targetWaThreadId:[5,e.TYPES.STRING]},u.name="SupplementMessageContent",u.internalSpec={reaction:[1,e.TYPES.MESSAGE,d],contentView:[2,e.TYPES.MESSAGE,m],editText:[3,e.TYPES.MESSAGE,p],mediaReaction:[4,e.TYPES.MESSAGE,c],originalTransportPayload:[5,e.TYPES.MESSAGE,_],mediaInterventions:[6,e.TYPES.MESSAGE,f],__oneofs__:{supplementMessageContent:["reaction","contentView","editText","mediaReaction","originalTransportPayload","mediaInterventions"]}},c.name="MediaReaction",c.internalSpec={mediaId:[1,e.TYPES.STRING],reaction:[2,e.TYPES.MESSAGE,d]},d.name="Reaction",d.internalSpec={reactionType:[1,e.TYPES.STRING],reactionStatus:[2,e.TYPES.STRING],emoji:[3,e.TYPES.STRING],superReactType:[4,e.TYPES.STRING],actionLogOtid:[5,e.TYPES.STRING]},m.name="ContentView",m.internalSpec={seen:[1,e.TYPES.BOOL],screenshotted:[2,e.TYPES.BOOL],replayed:[3,e.TYPES.BOOL],mimetype:[4,e.TYPES.STRING],objectId:[5,e.TYPES.STRING]},p.name="EditText",p.internalSpec={newContent:[1,e.TYPES.STRING],editCount:[2,e.TYPES.INT32]},_.name="OriginalTransportPayload",_.internalSpec={originalTransportPayload:[1,e.TYPES.BYTES]},f.name="MediaInterventions",f.internalSpec={mediaId:[1,e.TYPES.STRING],interventionType:[2,e.TYPES.ENUM,o("InstamadilloCoreTypeMedia.pb").MEDIA_INTERVENTION_TYPE]},l.SupplementMessagePayloadSpec=s,l.SupplementMessageContentSpec=u,l.MediaReactionSpec=c,l.ReactionSpec=d,l.ContentViewSpec=m,l.EditTextSpec=p,l.OriginalTransportPayloadSpec=_,l.MediaInterventionsSpec=f}),98);
__d("InstamadilloTransportPayload.pb",["InstamadilloAddMessage.pb","InstamadilloDeleteMessage.pb","InstamadilloSupplementMessage.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={PAYLOAD_CREATOR_UNSPECIFIED:0,PAYLOAD_CREATOR_IGIOS:1,PAYLOAD_CREATOR_IG4A:2,PAYLOAD_CREATOR_WWW:3,PAYLOAD_CREATOR_IGLITE:4},u={},c={};u.name="TransportPayload",u.internalSpec={franking:[4,(e=o("WAProtoConst")).TYPES.MESSAGE,c],openEb:[5,e.TYPES.BOOL],isE2EeAttributed:[6,e.TYPES.BOOL],payloadCreator:[7,e.TYPES.ENUM,s],add:[1,e.TYPES.MESSAGE,o("InstamadilloAddMessage.pb").AddMessagePayloadSpec],delete:[2,e.TYPES.MESSAGE,o("InstamadilloDeleteMessage.pb").DeleteMessagePayloadSpec],supplement:[3,e.TYPES.MESSAGE,o("InstamadilloSupplementMessage.pb").SupplementMessagePayloadSpec],__oneofs__:{transportPayload:["add","delete","supplement"]}},c.name="Franking",c.internalSpec={frankingKey:[1,e.TYPES.BYTES],frankingVersion:[2,e.TYPES.INT32]},l.PAYLOAD_CREATOR=s,l.TransportPayloadSpec=u,l.FrankingSpec=c}),98);
__d("MAWBridgeSearchMsg",["MAWCurrentUser","MAWVault","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t===void 0&&(t=!0);var n=e,r=o("MAWCurrentUser").getID(),a=e.author,i=e.externalId,l=e.msgId,s=e.threadJid;if(s==null)return null;var u=n.content,c=n.sortOrderMs,d={chatJid:s,externalId:i,msg:{msgId:l,sender:o("WAJids").authorToUserId(a,r),ts:e.canonicalTs},sortOrderMs:c},m=u;return babelHelpers.extends({},d,{msg:babelHelpers.extends({},d.msg,{content:m!=null?o("MAWVault").isVaulted(m)?t?m:o("MAWVault").unvault(m):t?o("MAWVault").vault(m):m:void 0})})}var s="message_content_search",u="non_message_content_search";l.createBridgeSearchMsg=e,l.MESSAGE_CONTENT_SEARCH=s,l.NON_MESSAGE_CONTENT_SEARCH=u}),98);
__d("MAWCatQuery.graphql",["cr:11203"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:11203")}),34);
__d("MAWCatQuery",["MAWCatQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("MAWCatQuery.graphql"),u=s;l.default=u}),98);
__d("MAWCatQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29559957360285299"}),null);
__d("MAWCatQuery.instagram.graphql",["MAWCatQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"SecureMessageOverWACATGraphResult",kind:"LinkedField",name:"secure_message_over_wa_cat_query",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_serialized_cat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_seconds",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWCatQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MAWCatQuery",selections:e},params:{id:n("MAWCatQuery_instagramRelayOperation"),metadata:{},name:"MAWCatQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("MAWCryptoAuthToken",["FBLogger","MAWCatQuery","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null||e.secure_message_over_wa_cat_query==null||e.secure_message_over_wa_cat_query.encrypted_serialized_cat==null||e.secure_message_over_wa_cat_query.expiration_time_in_seconds==null){var t,n;return r("FBLogger")("maw_device_reg").warn("Crypto Auth Token was null or incomplete %s:%s:%s:%s",e==null,(e==null?void 0:e.secure_message_over_wa_cat_query)==null,(e==null||(t=e.secure_message_over_wa_cat_query)==null?void 0:t.encrypted_serialized_cat)==null,e==null||(n=e.secure_message_over_wa_cat_query)==null?void 0:n.expiration_time_in_seconds),{error:"Crypto Auth Token was null or incomplete"}}return{success:{encrypted_serialized_cat:e.secure_message_over_wa_cat_query.encrypted_serialized_cat,expiration_time_in_seconds:e.secure_message_over_wa_cat_query.expiration_time_in_seconds}}}function s(t){return o("relay-runtime").fetchQuery(t,r("MAWCatQuery"),{}).toPromise().then(e).then(function(e){if(e.error!==null&&e.error!==void 0)throw r("FBLogger")("maw_device_reg").mustfixThrow("[MAWCryptoAuthToken] Error while fetching CAT from GraphQL: %s",e.error);return e.success})}l.processCatResponse=e,l.fetchFreshCAT=s}),98);
__d("MAWEncryptionIndexedDbV2",["BrowserLockManager","EARInitType","ExecutionEnvironment","FBLogger","IndexedDbPolyfills","MAWCurrentUser","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWQplProxy","MWEARKeychainV3","Promise","QPLUserFlow","WALogger","WAWorkerGlobalScope","err","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;n("IndexedDbPolyfills");var c="browserEncryptionMetaV2",d="version",m=1,p=6e4,_=null,f=null,g=null;function h(){return _}function y(){return _!=null}var C=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function b(e,t){t===void 0&&(t=0);var a=o("MAWCurrentUser").getID();return t>m?(L(e,"ear_idb_retry_failed_max_reached"),(u||(u=n("Promise"))).reject(new C)):_!=null?(L(e,"ear_db_exists"),(u||(u=n("Promise"))).resolve()):indexedDB==null?(L(e,"ear_idb_unavailable"),(u||(u=n("Promise"))).reject(r("err")("IndexedDB API not available"))):(L(e,"ear_db_open_start",{bool:{browserLockEnabled:r("BrowserLockManager")!=null}}),new(u||(u=n("Promise")))(function(n,i){var l=function(o){b(e,t+1).then(n).catch(function(e){if(e instanceof C)return i(o);i(e)})};try{g=o("MAWIndexedDbMetadata").encryptionDbName(a);var u=indexedDB.open(g),m=o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("IndexedDB initialisation timeout in %s flow, isInWorker: %s, openRequest: %s",String(e),(s||(s=r("ExecutionEnvironment"))).isInWorker?"true":"false",u.readyState))},p);u.onupgradeneeded=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),L(e,"ear_db_upgrade_start");var n=t.target.result;if(!n.objectStoreNames.contains(c)){var r=n.createObjectStore(c,{autoIncrement:!0,keyPath:"id"});r.createIndex(d,d,{unique:!0})}L(e,"ear_db_upgrade_end")},u.onblocked=function(){L(e,"ear_db_open_blocked"),o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("EAR Open timed out while blocked"))},2e3)},u.onsuccess=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);var a=t.target.result;if(!a.objectStoreNames.contains(c)){var s=u.result.objectStoreNames.contains(c);return r("FBLogger")("messenger_web").warn("Missing encryption meta table. Is store present: %s",s),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),S(a,"missing_encryption_meta_table").then(function(){l(r("err")("Malformed encryption DB"))}).catch(function(t){return L(e,"ear_idb_retry_failed_delete_failed"),i(r("err")("Failed to delete malformed encryption DB: "+t.message))})}a.onversionchange=function(){a.close(),r("FBLogger")("messenger_web").info("EAR onversionchange triggered"),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),f==null||f()},L(e,"ear_db_open_end"),_=a,o("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("global_ear",_),n()},u.onerror=function(){if(o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),u.error.name==="UnknownError")return L(e,"ear_db_open_error_unknown_error"),l(u.error);L(e,"ear_db_open_error"),i(u.error)}}catch(t){L(e,"ear_db_error"),i(t)}}))}function v(e){f=f==null?e:f}function S(e,t){return e===void 0&&(e=_),r("FBLogger")("messenger_web").warn("EAR DB deletion triggered: %s",t),e!=null&&e.close(),o("MAWIndexedDBDeletion").deleteDB(g,"ear")}function R(t){switch(t){case r("EARInitType").EB_INIT:return r("qpl")._(521477507,"1406");case r("EARInitType").MAW_INIT:return r("qpl")._(25310776,"6155");case r("EARInitType").MAW_RP_INIT:return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Armadillo Web Remote Presence] MAW RP Initialising EAR"]))),r("qpl")._(25310776,"6155");case r("EARInitType").LS_INIT:return r("qpl")._(25305590,"1127");case r("EARInitType").MAW_IN_UI_INIT:return null}}function L(e,t,n){var a=R(e);a!=null&&((s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(a,"worker_"+t,{annotations:n}):(r("QPLUserFlow").addPoint(a,t),n!=null&&r("QPLUserFlow").addAnnotations(a,n)))}l.storeName=c,l.ENCRYPTION_MAW_STORES_INDEX=d,l.getEncryptionDB=h,l.isEncryptionDBInited=y,l.makeEncryptionDB=b,l.maybeSetEncryptionDbOnVersionChange=v,l.deleteEncryptionDB_UNSAFE=S}),98);
__d("MAWKeychain",["MWEARKeychainV3"],(function(t,n,r,o,a,i,l){"use strict";var e={getDbEncryptionKey:o("MWEARKeychainV3").getDbEncryptionKey,getLatestVersion:o("MWEARKeychainV3").getLatestVersion,init:o("MWEARKeychainV3").init};l.default=e}),98);
__d("MWSetupDBEncryption",["BrowserLockManager","ExecutionEnvironment","FBLogger","MAWEncryptionIndexedDbV2","MAWKeychain","MWEARKeychainV3","Promise","WAResultOrError","asyncToGeneratorRuntime","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(t,n){return n()};function c(e){u=e}var d="mw_ear_db";function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{return yield o("MAWEncryptionIndexedDbV2").makeEncryptionDB(e),yield u("init_setup_keychain",function(){return r("MAWKeychain").init("global_ear",e)})}catch(n){var t=n instanceof Error?n:r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(t).mustfix("[%s] EAR setup error",String(e)),o("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",t)}}),p.apply(this,arguments)}function _(e){return o("MAWEncryptionIndexedDbV2").getEncryptionDB()!=null&&o("MWEARKeychainV3").isKeychainInitialised("global_ear")?(s||(s=n("Promise"))).resolve(o("WAResultOrError").makeResult(o("MWEARKeychainV3").getLatestVersion("global_ear"))):r("BrowserLockManager")!=null?new(s||(s=n("Promise")))(function(t,o){r("promiseDone")(r("BrowserLockManager").request(d,n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var n=yield m(e);t(n)}catch(e){o(e)}})),function(e){},function(e){o(e)})}):m(e)}function f(e,t){t===void 0&&(t=function(t){return!0});var r=null;return function(a){return r==null&&(r=e(a).then(function(e){return r=t(e)?(s||(s=n("Promise"))).resolve(e):null,e}).catch(function(e){throw r=null,e})),r}}var g=f(function(t){return _(t)},function(e){return(e==null?void 0:e.success)===!0}),h=(e||(e=r("ExecutionEnvironment"))).isInWorker?g:_;l.setPerformanceMeasurementTool=c,l.init=h}),98);
__d("MAWDBKeychain",["BrowserLockManager","EARInitType","ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWDexie","MAWIndexedDbMetadata","MWEARKeychainV3","MWSetupDBEncryption","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=["id"],s,u,c="encryptionMetaV3",d=function(t){t===void 0&&(t=o("MWEARKeychainV3").logMawInitPoint),t("maw_ear_check_mawdb_start");var e=o("MAWCurrentUser").getID(),n=o("MAWIndexedDbMetadata").dbName(e),a=new(r("MAWDexie"))(n,{addons:[]});return a.open().then(function(e){return t("maw_ear_check_mawdb_end"),e}).catch("NoSuchDatabaseError",function(){return t("maw_ear_check_mawdb_no_db"),null}).catch(function(e){throw t("maw_ear_check_mawdb_error"),e})},m=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){e===void 0&&(e=o("MWEARKeychainV3").logMawInitPoint);var t=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t;try{if(t=yield d(e),!t)return r("FBLogger")("messenger_web").info("MAWDB is missing for MAW EAR worker init."),e("maw_ear_new_user"),{isNewUser:!0,reinitEAR:!0,useMawEAR:!0};if(!t.backendDB().objectStoreNames.contains(c))return t.close(),r("FBLogger")("messenger_web").info("MAW EAR is missing for MAW EAR worker init."),e("maw_ear_missing_ear_table"),{reinitEAR:!0,useMawEAR:!0};var n=yield _(t.backendDB());n.length===0&&(r("FBLogger")("messenger_web").info("Migrating global EAR to MAW EAR"),e("maw_ear_migrating"),yield p(t.backendDB())),o("MWEARKeychainV3").setNamespaceSourceDbWithoutMarkingDbReady("maw_ear",t.backendDB()),e("maw_ear_init_keychain");var a=yield o("MWEARKeychainV3").init("maw_ear",r("EARInitType").MAW_INIT,e);if(a.success===!1)throw a.payload!=null?a.payload:r("FBLogger")("messenger_web").mustfixThrow("Failed to init MAW EAR Keychain.");return e("maw_ear_success"),r("FBLogger")("messenger_web").info("MAW EAR worker successfully initialised."),{useMawEAR:!0}}finally{var i;o("MWEARKeychainV3").setNamespaceSourceDbWithoutMarkingDbReady("maw_ear",null),(i=t)==null||i.close()}});return function(){return t.apply(this,arguments)}})();return new(u||(u=n("Promise")))(function(e,n){return r("BrowserLockManager")!=null?r("BrowserLockManager").request("mawdb_keychain_init_ear",function(){return t().then(e).catch(n)}):t().then(e).catch(n)}).catch(function(t){throw e("maw_ear_failure"),r("FBLogger")("messenger_web").catching(t).mustfixThrow("Failed to init MAW EAR Worker.")})});return function(n){return e.apply(this,arguments)}})(),p=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=yield o("MWSetupDBEncryption").init(r("EARInitType").MAW_INIT);if(!a.success)throw a.payload!=null?a.payload:r("FBLogger")("messenger_web").mustfixThrow("Failed to init global EAR.");var i=o("MWEARKeychainV3").getKeychain("global_ear");if(i.databaseEncryptionKeys.size===0)throw r("FBLogger")("messenger_web").mustfixThrow("Global EAR data is missing.");var l=Array.from(i.databaseEncryptionKeys.entries()).map(function(t){var n=t[0],r=t[1].dbEntry,o=r.id,a=babelHelpers.objectWithoutPropertiesLoose(r,e);return a});return new(u||(u=n("Promise")))(function(e,n){var r=t.transaction(c,"readwrite");l.forEach(function(e){r.objectStore(c).add(e)}),r.onerror=function(){return n(r.error)},r.oncomplete=function(){return e()}})});return function(n){return t.apply(this,arguments)}})();function _(e){return new(u||(u=n("Promise")))(function(t,n){var r=e.transaction(c,"readonly"),o=r.objectStore(c).getAll();o.onsuccess=function(){return t(o.result)},o.onerror=function(){return n(o.error)}})}function f(e,t){if(e.encryptionMetaV3!=null){var n=o("MWEARKeychainV3").getKeychainInitStatus("maw_ear");if(n==="none"&&t!=null){o("MWEARKeychainV3").logMawInitPoint("maw_ear_populate_unstored_key"),e.encryptionMetaV3.add(t);return}var a=o("MWEARKeychainV3").isKeychainSettled("maw_ear")?"maw_ear":"global_ear",i=Array.from(o("MWEARKeychainV3").getKeychain(a).databaseEncryptionKeys).map(function(e){var t=e[0],n=e[1].dbEntry;return n});if(i.length>0)r("FBLogger")("messenger_web").info("DB re-populated after external DB deletion. Namespace: %s. isWorker: %s",a,(s||(s=r("ExecutionEnvironment"))).isInWorker),e.encryptionMetaV3.bulkPut(i),o("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("maw_ear",e.db.backendDB());else throw r("FBLogger")("messenger_web").mustfixThrow("No encryption keys to populate MAWDB. Namespace: %s. HasUnstoredKey: %s. isWorker: %s",a,!!t,(s||(s=r("ExecutionEnvironment"))).isInWorker)}}l.STORENAME=c,l.checkMawDbExists=d,l.initEAR=m,l.getEncryptionKeys=_,l.onDbPopulateMAWKeychain=f}),98);
__d("MAWEncryptedBackupsStateManager",["MAWEBSwitch"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case 1:return;case 3:r("MAWEBSwitch").set(!0);return;case 2:case 4:default:r("MAWEBSwitch").set(!1);return}}function s(e){return e===4||e===3}l.setEncryptedBackupsState=e,l.eligibleForEBUX=s}),98);
__d("MAWGetReStoreDBError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.message=t,n.name="MAWGetReStoreDBError",n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.default=e}),66);
__d("MAWHandleEchoProtobufsRestoreApi",["EBLogger","EchoMessageMediaFieldUtils","EncryptedBackupsDYIMessageProcessingUtils","LSMEBTaskCreationSource","MAWJids","MAWMediaUtils","MAWMsg","MAWMsgType","MAWODSProxy","MAWUnstoredContentToUnstoredDbContentUtils","MessageBackupSupplementalKeyGenerator","WAAckLevel","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WABase64","WAConsumerApplication.pb","WAHashUtils","WAJids","WAMediaTransport.pb","WAMsgApplication.pb","WAMsgType","WAOdsEnums","WAParseMediaTransportProtocol","WAParseMessageApplication","WAStanzaUtils","WATimeUtils","decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D=o("EBLogger").EBLogger().tags(["ProtobufRestore"]);function x(t){var n=t.isMediaGalleryRestore,a=t.taskSource,i;return n!=null&&n?(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_RESTORE,key:"is_media_gallery_restore_param"}),D.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["isMediaGalleryRestore is deprecated. Consider using taskSource insted"]))),i=r("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE):i=a!=null?a:r("LSMEBTaskCreationSource").UNKNOWN,babelHelpers.extends({},t,{isMediaGalleryRestore:void 0,taskSource:i})}function $(e,t,n){var r={author:n,chat:t,externalId:e};return r}function P(e,t,n,r,a,i,l,p,_,f,g,h,y,C,b,v){if(e===o("MAWMsgType").MSG_TYPE.TEXT)if(l==null){D.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Text content cannot be null for msg type text - unable to restore msg"])));return}else{var S={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,msgContent:{content:l,mentionedJids:p!=null?p.map(o("WAJids").validateUserJid).filter(Boolean):void 0},ts:t,type:o("MAWMsgType").MSG_TYPE.TEXT};return S}else if(e===o("MAWMsgType").MSG_TYPE.VIDEO){var R={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.VIDEO};return R}else if(e===o("MAWMsgType").MSG_TYPE.GIF){var L={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.GIF};return L}else if(e===o("MAWMsgType").MSG_TYPE.IMAGE){var E={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.IMAGE};return E}else if(e===o("MAWMsgType").MSG_TYPE.STICKER){var k={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.STICKER};return k}else if(e===o("MAWMsgType").MSG_TYPE.PTT){var I={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.PTT};return I}else if(e===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE){var T={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE};return T}else if(e===o("MAWMsgType").MSG_TYPE.XMA){var x={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,ts:t,type:o("MAWMsgType").MSG_TYPE.XMA};return x}else if(e===o("MAWMsgType").MSG_TYPE.REVOKED){if(_==null){D.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["No revoked msg external id found for revoked msg"])));return}var $={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,ebTimestampMs:null,id:r,msgContent:void 0,revokedExternalId:_,ts:t,type:o("MAWMsgType").MSG_TYPE.REVOKED,unsendMsgContentDeleteTs:t};return $}else if(e===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE){var P={ack:o("WAAckLevel").ACK.SENT,id:r,ts:t,type:o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE};return P}else if(e===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH){var N={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,ts:t,type:o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH};return N}else if(e===o("MAWMsgType").MSG_TYPE.RAVEN){if(f==null){D.MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["No raven msg ephemeral type found for raven msg"])));return}if(g==null){D.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["No raven msg media type found for raven msg"])));return}var M={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,id:r,mediaId:h,ravenEphemeralMediaState:o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN,ravenEphemeralType:f,ravenMediaType:g,ts:t,type:o("MAWMsgType").MSG_TYPE.RAVEN};return M}else if(e===o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE){if(y==null||C==null||b==null||v==null){D.MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] One of the mandatory fields is missing for the group poll creation msg"])));return}var w={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,id:r,ts:t,type:o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE};return w}}function N(e,t,n,r,a){var i,l,s,u,c,d,m,C,b=e.metadata,v=e.msgType;if(b==null){D.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Missing required metadata, unable to create db msg from protobuf"])));return}if(v==null){D.MUSTFIX(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Missing required msg type, unable to create db msg from protobuf"])));return}var S=b.messageId,R=b.senderId,L=(i=e.decodedPayload)==null?void 0:i.text,E=(l=e.decodedPayload)==null?void 0:l.mentionedJid;if(S==null){D.MUSTFIX(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Missing required message id, unable to create db msg from protobuf"])));return}if(R==null){D.MUSTFIX(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Missing required author, unable to create db msg from protobuf"])));return}var k=o("WATimeUtils").castMilliSecondsToUnixTime(e.sortOrderMs),I=o("MAWJids").toUserJid(R),T=o("WAStanzaUtils").toStanzaId(S),x=I===n?o("WAJids").AUTHOR_ME:I,N=$(T,t,I);if(e.editMsgData.length>0){var M=k;e.editMsgData.forEach(function(e){var t;if(e.ts>M&&((t=e.editMsgContent.message)==null?void 0:t.text)!=null){var n,r;M=e.ts,L=(n=e.editMsgContent.message)==null?void 0:n.text,E=(r=e.editMsgContent.message)==null?void 0:r.mentionedJid}})}var w=P(v,k,x,N,e.isForwarded,e.forwardingScore,L,E,e.revokedMsgExternalId,e.ravenMsgEphemeralType,e.ravenMsgMediaType,(s=e.ravenUnstoredMedia)==null?void 0:s.plaintextHash,(u=e.groupPollInfo)==null?void 0:u.encKey,(c=e.groupPollInfo)==null?void 0:c.name,(d=e.groupPollInfo)==null?void 0:d.options,(m=e.groupPollInfo)==null?void 0:m.selectableOptionsCount);if(w==null){D.MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Missing required fields, unable to create db msg from protobuf for thread jid "," and otid ",""])),t,T);return}var A;if(e.xmaData!=null&&((C=e.xmaData)==null?void 0:C.targetType)!=null){var F,O={author:I,externalId:T,targetType:(F=e.xmaData)==null?void 0:F.targetType,threadJid:t};A={unstoredAssociatedMedia:void 0,unstoredAssociatedMsg:void 0,unstoredFavicon:void 0,unstoredHeaderMedia:void 0,unstoredPreviews:void 0,xma:O}}var B={unstoredGroupPollCreateInfo:e.groupPollInfo,unstoredMedia:void 0,unstoredMsg:w,unstoredQuotedMedia:void 0,unstoredReceiverFetchInfo:e.receiverFetchInfo,unstoredXMA:A};w.type===o("MAWMsgType").MSG_TYPE.RAVEN&&e.ravenUnstoredMedia!=null&&(B.unstoredMedia=e.ravenUnstoredMedia);var W=o("MAWUnstoredContentToUnstoredDbContentUtils").unstoredContentToUnstoredDbContent(B);if(W.unstoredDbMsg!=null){var q=W.unstoredDbMsg;q.sortOrderMs=e.sortOrderMs,q.serverTs=o("WATimeUtils").castToUnixTime(e.sortOrderMs/1e3),e.noteReply!=null&&(q.quote={content:e.noteReply,remoteJid:void 0});var U=r.get(S);q.author!=null&&n===q.author&&q.author!==o("WAJids").AUTHOR_SYSTEM&&(q.author=o("WAJids").AUTHOR_ME),U!=null&&(q.quoteExternalId=o("WAStanzaUtils").toStanzaId(U)),v===o("MAWMsgType").MSG_TYPE.TEXT&&(q.editCount=e.editMsgData.length);var V={author:q.author,stanzaId:T,unstoredDbContent:W};return W.unstoredDbMedia!=null&&a!=null&&a.set(T,W.unstoredDbMedia),V}D.MUSTFIX(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Failed to create db msg from protobuf"])))}function M(e){switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.GIF;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.STICKER;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_MP4;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_WAV;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;default:return null}}function w(e){switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return o("EchoMessageMediaFieldUtils").AttachmentType.IMAGE;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return o("EchoMessageMediaFieldUtils").AttachmentType.GIF;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return o("EchoMessageMediaFieldUtils").AttachmentType.STICKER;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return o("EchoMessageMediaFieldUtils").AttachmentType.VIDEO;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return o("EchoMessageMediaFieldUtils").AttachmentType.PTT;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return o("EchoMessageMediaFieldUtils").AttachmentType.XMA;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:return o("EchoMessageMediaFieldUtils").AttachmentType.DOCUMENT;default:return null}}function A(e){var t;switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:t="image/jpeg";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:t="audio/wav";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:t="video/mp4";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:t="image/gif";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:t="image/webp";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:t="image/jpeg";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:t="application/octet-stream";break;default:D.MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Unsupported media type, cannot get mimetype for attachment"])))}return t}function F(e,t,n){var r,a,i,l,s,u,c,d,m,p,_=t,f=e.ancillary,g=e.integral,h=g==null||(r=g.transport)==null||(r=r.integral)==null?void 0:r.fileSha256,y=g==null||(a=g.transport)==null||(a=a.integral)==null?void 0:a.fileEncSha256,C=g==null||(i=g.transport)==null||(i=i.integral)==null?void 0:i.mediaKey,S=(g==null||(l=g.transport)==null||(l=l.integral)==null?void 0:l.mediaKeyTimestamp)!=null&&typeof(g==null||(s=g.transport)==null?void 0:s.integral.mediaKeyTimestamp)=="number"?g==null||(u=g.transport)==null?void 0:u.integral.mediaKeyTimestamp:void 0;o("MAWMediaUtils").isTransportLegacyGif(e)&&(_=o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF);var R=g==null||(c=g.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.thumbnailHeight,L=g==null||(d=g.transport)==null||(d=d.ancillary)==null||(d=d.thumbnail)==null?void 0:d.thumbnailWidth,E=M(_),k=w(_);if(k===null){D.MUSTFIX(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Invalid attachment type, cannot restore attachment"])));return}var I=o("EncryptedBackupsDYIMessageProcessingUtils").decodeMediaEntryFromAttachmentPayload(e,k===o("EchoMessageMediaFieldUtils").AttachmentType.XMA,n);I.success||D.WARN(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Cannot generate media entry data, ",""])),I.error);var T={attachmentObjectId:g==null||(m=g.transport)==null||(m=m.ancillary)==null?void 0:m.objectId,attachmentType:k,directPath:g==null||(p=g.transport)==null||(p=p.integral)==null?void 0:p.directPath,encryptedHash:y!=null?o("WAHashUtils").toPlaintextHash(y):void 0,filename:n,height:f==null?void 0:f.height,mediaEntryData:I.value,mediaKey:C!=null?o("WABase64").encodeB64UrlSafe(C):void 0,mediaKeyTimestamp:S,mediaPlayableDuration:f==null?void 0:f.seconds,plaintextHash:h!=null?o("WAHashUtils").toPlaintextHash(h):void 0,width:f==null?void 0:f.width,xAttachmentType:_,xContentType:"full"},x=A(_);return x!=null&&(T.mediaContentType=x),E!=null&&(T.previewContentType=E,T.previewContentHeight=R,T.previewContentWidth=L),o("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(T,"protobuf")}function O(e,t,n){var r,a=F(e,t,n);if(a==null)return{mediaMetadata:void 0,previewMetadata:null};var i=e.integral,l=null,s=i==null||(r=i.transport)==null||(r=r.ancillary)==null||(r=r.thumbnail)==null?void 0:r.downloadableThumbnail;if(s!=null){var u=s.fileSha256,c=s.fileEncSha256,d=s.mediaKey,m=typeof s.mediaKeyTimestamp=="number"?s.mediaKeyTimestamp:void 0;return l={attachmentObjectId:s.objectId,attachmentType:o("EchoMessageMediaFieldUtils").AttachmentType.IMAGE,directPath:s.directPath,encryptedHash:c!=null?o("WAHashUtils").toPlaintextHash(c):void 0,filename:void 0,height:void 0,mediaKey:d!=null?o("WABase64").encodeB64UrlSafe(d):void 0,mediaKeyTimestamp:m,mediaPlayableDuration:void 0,plaintextHash:u!=null?o("WAHashUtils").toPlaintextHash(u):void 0,width:void 0,xAttachmentType:o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.MESSENGER_PREVIEW,xContentType:"preview"},{mediaMetadata:a,previewMetadata:o("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(l,"protobuf")}}return{mediaMetadata:a,previewMetadata:null}}function B(e,t,n,r,a,i){i===void 0&&(i=null),t!=null&&e!=null&&(n.push({mediaMetadata:t,mediaRestoreType:r,previewMetadata:i}),a.set(o("WAStanzaUtils").toStanzaId(e),n))}function W(e){switch(e){case 0:return o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE;case 1:return o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY;case 2:return o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT;default:return}}function q(e,t,n,r,a,i,l,s,u,c,d){var m,p,_,f,g,h,y,C,b,v,I=V(e,i,l,s),T=I==null||(m=I.obj.payload)==null?void 0:m.content,x={editMsgData:[],externalId:r,forwardingScore:(p=I==null||(_=I.metadata)==null?void 0:_.forwardingScore)!=null?p:0,isForwarded:(f=I==null||(g=I.metadata)==null?void 0:g.isForwarded)!=null?f:!1,metadata:e.metadata,reactionData:[],sortOrderMs:t,unknownFieldCount:e.$$unknownFieldCount},$,P=[];if(T!=null){if(T.messageText!=null)return x.msgType=o("MAWMsgType").MSG_TYPE.TEXT,x.decodedPayload=T.messageText,x;if(T.extendedContentMessage!=null){var N,M,w;if(x.msgType=o("MAWMsgType").MSG_TYPE.XMA,x.xmaData=T.extendedContentMessage,((N=T.extendedContentMessage)==null?void 0:N.headerImage)!=null){var A,q=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,(A=T.extendedContentMessage)==null?void 0:A.headerImage.payload),H=F(q,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);B(r,H,P,"xma_header",u)}if(((M=T.extendedContentMessage)==null?void 0:M.favicon)!=null){var G,z=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,(G=T.extendedContentMessage)==null?void 0:G.favicon.payload),j=F(z,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);B(r,j,P,"xma_favicon",u)}if(((w=T.extendedContentMessage)==null?void 0:w.previews)!=null){var K;(K=T.extendedContentMessage)==null||K.previews.forEach(function(e){var t=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,e.payload),n=F(t,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);x.mediaMetadata=n,B(r,n,P,"xma_preview",u)})}return x}else if(T.audioMessage!=null){var Q,X=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,(Q=T.audioMessage)==null||(Q=Q.audio)==null?void 0:Q.payload);return $=F(X,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO),x.msgType=o("MAWMsgType").MSG_TYPE.PTT,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(T.videoMessage!=null){var Y,J=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,(Y=T.videoMessage)==null||(Y=Y.video)==null?void 0:Y.payload),Z=O(J,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO),ee=Z.mediaMetadata,te=Z.previewMetadata;return $=ee,$!=null&&$.xAttachmentType===o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?x.msgType=o("MAWMsgType").MSG_TYPE.GIF:x.msgType=o("MAWMsgType").MSG_TYPE.VIDEO,x.mediaMetadata=$,B(r,$,P,"attachment",u,te),x}else if(T.imageMessage!=null){var ne,re=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(ne=T.imageMessage)==null||(ne=ne.image)==null?void 0:ne.payload),oe=O(re,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE),ae=oe.mediaMetadata,ie=oe.previewMetadata;return $=ae,x.msgType=o("MAWMsgType").MSG_TYPE.IMAGE,x.mediaMetadata=$,B(r,$,P,"attachment",u,ie),x}else if(T.stickerMessage!=null){var le,se,ue=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,(le=T.stickerMessage)==null||(le=le.sticker)==null?void 0:le.payload);if(((se=ue.integral)==null?void 0:se.receiverFetchId)!=null){var ce=o("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(ue);return ce==null?(D.MUSTFIX(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[MAWHandleEchoProtobufsRestoreApi] consumerMessage has no sticker receiver fetch info"]))),x):(x.msgType=o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH,x.receiverFetchInfo=ce,x)}return $=F(ue,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER),x.msgType=o("MAWMsgType").MSG_TYPE.STICKER,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(T.documentMessage!=null){var de,me,pe=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,(de=T.documentMessage)==null||(de=de.document)==null?void 0:de.payload);return $=F(pe,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT,(me=T.documentMessage)==null?void 0:me.fileName),x.msgType=o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}}else if((I==null||(h=I.obj.payload)==null||(h=h.applicationData)==null?void 0:h.revoke)!=null){var _e,fe=I==null||(_e=I.obj.payload)==null||(_e=_e.applicationData)==null||(_e=_e.revoke)==null||(_e=_e.key)==null?void 0:_e.id;if(fe==null)D.MUSTFIX(R||(R=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve revoked message external id"])));else return x.revokedMsgExternalId=o("WAStanzaUtils").toStanzaId(fe),x.msgType=o("MAWMsgType").MSG_TYPE.REVOKED,x}if((I==null||(y=I.obj.payload)==null||(y=y.content)==null?void 0:y.bumpExistingMessage)!=null){var ge,he,ye,Ce=I==null||(ge=I.obj.payload)==null||(ge=ge.content)==null?void 0:ge.bumpExistingMessage,be=(he=Ce.key)==null?void 0:he.id;be!=null&&(l.has(be)||i.add(be),s.set(r,be));var ve=(ye=Ce.key)==null?void 0:ye.participant;if(ve==null){var Se;ve=(Se=Ce.key)==null?void 0:Se.remoteJid}if(ve==null)D.MUSTFIX(L||(L=babelHelpers.taggedTemplateLiteralLoose(["No author found for original message that was bumped - unable to restore"])));else{var Re=o("WAJids").unsafeCoerceToUserJid(ve),Le=Re===n?o("WAJids").AUTHOR_ME:Re;return c.set(o("WAStanzaUtils").toStanzaId(r),Le),x.msgType=o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,x}}if((I==null||(C=I.obj)==null||(C=C.payload)==null||(C=C.content)==null?void 0:C.noteReplyMessage)!=null){var Ee,ke,Ie=I==null||(Ee=I.obj)==null||(Ee=Ee.payload)==null||(Ee=Ee.content)==null?void 0:Ee.noteReplyMessage,Te=Ie.noteTimestampMs,De=Ie.noteText,xe=(ke=e.metadata)==null?void 0:ke.senderId;if(Te!=null&&typeof Te=="number"&&xe!=null&&a!=null){var $e=o("MAWJids").toUserJid(xe),Pe=o("MAWJids").toUserJid(a),Ne=Pe===$e?n:Pe,Me={author:Ne===n?o("WAJids").AUTHOR_ME:Ne,externalId:o("WAStanzaUtils").toStanzaId(r),ts:o("WATimeUtils").castMilliSecondsToUnixTime(Te),type:o("WAMsgType").NOTE_REPLY};if((De==null?void 0:De.text)!=null){var we={content:De==null?void 0:De.text,mentionedJids:De==null?void 0:De.mentionedJid.map(function(e){return o("MAWJids").toUserJid(e)})};Me.msgContent=we}x.noteReply=Me}if(Ie.textContent!=null)return x.msgType=o("MAWMsgType").MSG_TYPE.TEXT,x.decodedPayload=Ie.textContent,x;if(Ie.stickerContent!=null){var Ae=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,Ie.stickerContent.payload);return $=F(Ae,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER),x.msgType=o("MAWMsgType").MSG_TYPE.STICKER,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(Ie.videoContent!=null){var Fe=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,Ie.videoContent.payload);return $=F(Fe,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO),$!=null&&$.xAttachmentType===o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?x.msgType=o("MAWMsgType").MSG_TYPE.GIF:x.msgType=o("MAWMsgType").MSG_TYPE.VIDEO,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}}if((I==null||(b=I.obj)==null||(b=b.payload)==null||(b=b.content)==null?void 0:b.ravenMessageMsgr)!=null){var Oe,Be,We;if(x.ravenMsgEphemeralType=W(I==null||(Oe=I.obj)==null||(Oe=Oe.payload)==null||(Oe=Oe.content)==null||(Oe=Oe.ravenMessageMsgr)==null?void 0:Oe.ephemeralType),(I==null||(Be=I.obj)==null||(Be=Be.payload)==null||(Be=Be.content)==null||(Be=Be.ravenMessageMsgr)==null?void 0:Be.imageMessage)!=null){if(d==null||!d){var qe;x.ravenUnstoredMedia=o("WAParseMediaTransportProtocol").decodeImageTransport(I==null||(qe=I.obj)==null||(qe=qe.payload)==null||(qe=qe.content)==null||(qe=qe.ravenMessageMsgr)==null||(qe=qe.imageMessage)==null?void 0:qe.payload,o("WATimeUtils").castMilliSecondsToUnixTime(x.sortOrderMs),"image")}x.ravenMsgMediaType=o("MAWMsg").MAWRavenMsgMediaType.IMAGE}else if((I==null||(We=I.obj)==null||(We=We.payload)==null||(We=We.content)==null||(We=We.ravenMessageMsgr)==null?void 0:We.videoMessage)!=null){if(d==null||!d){var Ue,Ve=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").VideoTransportSpec,I==null||(Ue=I.obj)==null||(Ue=Ue.payload)==null||(Ue=Ue.content)==null||(Ue=Ue.ravenMessageMsgr)==null||(Ue=Ue.videoMessage)==null?void 0:Ue.payload),He=o("WAParseMediaTransportProtocol").parseVideoMsg(Ve,o("WATimeUtils").castMilliSecondsToUnixTime(x.sortOrderMs),!1);He!=null?x.ravenUnstoredMedia=He:D.MUSTFIX(E||(E=babelHelpers.taggedTemplateLiteralLoose(["Decoded raven video unstored message is null - unable to restore"])))}x.ravenMsgMediaType=o("MAWMsg").MAWRavenMsgMediaType.VIDEO}return x.msgType=o("MAWMsgType").MSG_TYPE.RAVEN,x}else if((I==null||(v=I.obj)==null||(v=v.payload)==null||(v=v.content)==null?void 0:v.pollCreationMessage)!=null){x.msgType=o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE;var Ge=I.obj.payload.content.pollCreationMessage,ze=Ge.encKey,je=Ge.name,Ke=Ge.options,Qe=Ge.selectableOptionsCount;return ze!=null&&je!=null&&Ke!=null&&(x.groupPollInfo={encKey:ze,name:je,options:Ke.map(function(e){var t=e.optionName;return t}).filter(Boolean),selectableOptionsCount:Qe||0}),x}return I!=null&&U(x,I.obj),D.MUSTFIX(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve decoded protobuf from backup message - unsupported message type"]))),x}function U(e,t){var n,r,o,a,i,l,s,u,c,d,m,p,_,f;(t==null||(n=t.payload)==null||(n=n.content)==null?void 0:n.locationMessage)!=null&&(e.futureProofMessageType="locationMessage"),(t==null||(r=t.payload)==null||(r=r.content)==null?void 0:r.liveLocationMessage)!=null&&(e.futureProofMessageType="liveLocationMessage"),(t==null||(o=t.payload)==null||(o=o.content)==null?void 0:o.pollUpdateMessage)!=null&&(e.futureProofMessageType="pollUpdateMessage"),(t==null||(a=t.payload)==null||(a=a.content)==null?void 0:a.viewOnceMessage)!=null&&(e.futureProofMessageType="viewOnceMessage"),(t==null||(i=t.payload)==null||(i=i.content)==null?void 0:i.contactMessage)!=null&&(e.futureProofMessageType="contactMessage"),(t==null||(l=t.payload)==null||(l=l.content)==null?void 0:l.extendedTextMessage)!=null&&(e.futureProofMessageType="extendedTextMessage"),(t==null||(s=t.payload)==null||(s=s.content)==null?void 0:s.groupInviteMessage)!=null&&(e.futureProofMessageType="groupInviteMessage"),(t==null||(u=t.payload)==null||(u=u.content)==null?void 0:u.commonSticker)!=null&&(e.futureProofMessageType="commonSticker"),(t==null||(c=t.payload)==null||(c=c.content)==null?void 0:c.screenshotAction)!=null&&(e.futureProofMessageType="screenshotAction"),(t==null||(d=t.payload)==null||(d=d.content)==null?void 0:d.extendedMessageContentWithSear)!=null&&(e.futureProofMessageType="extendedMessageContentWithSear"),(t==null||(m=t.payload)==null||(m=m.content)==null?void 0:m.imageGalleryMessage)!=null&&(e.futureProofMessageType="imageGalleryMessage"),(t==null||(p=t.payload)==null||(p=p.content)==null?void 0:p.paymentsTransactionMessage)!=null&&(e.futureProofMessageType="paymentsTransactionMessage"),(t==null||(_=t.payload)==null||(_=_.applicationData)==null?void 0:_.metadataSync)!=null&&(e.futureProofMessageType="metadataSync"),(t==null||(f=t.payload)==null||(f=f.applicationData)==null?void 0:f.aiBotResponse)!=null&&(e.futureProofMessageType="aiBotResponse")}function V(e,t,n,r){var a,i=(a=e.metadata)==null?void 0:a.messageId,l=o("decodeProtobuf").decodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,e.encryptedTransportMessage),s=o("WAParseMessageApplication").parseMessageApplication(l);if(s.type==="error"){D.MUSTFIX(I||(I=babelHelpers.taggedTemplateLiteralLoose(["Message contains unparseable message application - unable to restore message"])));return}var u=l.metadata,c=u==null?void 0:u.quotedMessage,d=c==null?void 0:c.stanzaId;if(i!=null&&d!=null&&(n.has(d)||t.add(d),r.set(i,d)),s.subprotocolType==="armadillo"){var m=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAArmadilloApplication.pb").ArmadilloSpec,s.payload);return{metadata:u,obj:m}}else if(s.subprotocolType==="consumerMessage")return{metadata:u,obj:o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAConsumerApplication.pb").ConsumerApplicationSpec,s.payload)}}function H(e,t,n,r,o,a,i,l,s){return e.map(function(e){return G(e,t,n,r,o,a,i,l,s)})}function G(e,t,n,r,a,i,l,s,u){i===void 0&&(i=new Map);var c=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,e.toplevelProtobuf.decryptedProtobuf),d=q(c,e.toplevelProtobuf.protobufTimestampMS,t,e.otid,n,r,a,i,l,s,u),m=e.supplementalProtobufs;for(var p of m){var _=p[0],f=p[1],g=o("MessageBackupSupplementalKeyGenerator").parseIdentifierString(_);o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_EB_DECODE_MESSAGE_PROTOBUF_SUPPLEMENTAL,key:g.type});var h=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,f.decryptedProtobuf);if(h.encryptedTransportMessage!=null)switch(g.type){case"raven_action_message":{var y=V(h,r,a,i),C=g.senderJid,b=C===t?o("WAJids").AUTHOR_ME:C;if(y!=null){var v,S,R,L=y.obj,E=(v=L.payload)==null||(v=v.content)==null||(v=v.ravenActionNotifMessage)==null?void 0:v.actionTimestamp,k=(S=L.payload)==null||(S=S.content)==null||(S=S.ravenActionNotifMessage)==null?void 0:S.actionType;if(E!=null&&k!=null&&typeof E=="number"&&((R=L.payload)==null||(R=R.content)==null||(R=R.ravenActionNotifMessage)==null||(R=R.key)==null?void 0:R.id)!=null){var I,x,$,P,N=o("WAStanzaUtils").toStanzaId((I=L.payload)==null||(I=I.content)==null||(I=I.ravenActionNotifMessage)==null||(I=I.key)==null?void 0:I.id);if(((x=h.metadata)==null?void 0:x.timestampMs)!=null&&typeof(($=h.metadata)==null?void 0:$.timestampMs)=="number"&&((P=h.metadata)==null?void 0:P.messageId)!=null){var M,w,A=(M=h.metadata)==null?void 0:M.messageId,F=o("WATimeUtils").castMilliSecondsToUnixTime((w=h.metadata)==null?void 0:w.timestampMs),O=o("WAStanzaUtils").toStanzaId(A),B=k===0?o("MAWMsg").MAWRavenActionNotifType.PLAYED:k===1?o("MAWMsg").MAWRavenActionNotifType.SCREENSHOTTED:o("MAWMsg").MAWRavenActionNotifType.FORCE_DISABLED,W={ack:o("WAAckLevel").ACK.RECEIVED,actionTimestamp:o("WATimeUtils").castMilliSecondsToUnixTime(E),actionType:B,author:b,externalId:O,ravenActionToMsgExternalId:N,ts:F,type:o("MAWMsgType").MSG_TYPE.RAVEN_ACTION};d.ravenActionUnstoredMsg=W}}}break}case"reaction":{var U,H,G=(U=h.metadata)==null?void 0:U.messageId,z=(H=V(h,r,a,i))==null||(H=H.obj.payload)==null||(H=H.content)==null?void 0:H.reactionMessage,j=o("WAJids").extractUserId(g.senderJid);z!=null&&j!=null&&d.reactionData.push({reaction:z,reactionExternalId:G,senderId:j,ts:o("WATimeUtils").castMilliSecondsToUnixTime(f.protobufTimestampMS)});break}case"edit":{var K,Q,X=(K=V(h,r,a,i))==null||(K=K.obj.payload)==null||(K=K.content)==null?void 0:K.editMessage,Y=(Q=h.metadata)==null?void 0:Q.senderId;if(X!=null){var J,Z=(J=X.key)==null?void 0:J.id,ee=X.timestampMs;if(Z!=null&&ee!=null&&Y!=null&&typeof ee=="number"){var te=o("MAWJids").toUserJid(Y),ne=te===t?o("WAJids").AUTHOR_ME:te;d.editMsgData.push({author:ne,editMsgContent:X,externalId:o("WAStanzaUtils").toStanzaId(d.externalId),originalMsgExternalId:o("WAStanzaUtils").toStanzaId(Z),ts:o("WATimeUtils").castMilliSecondsToUnixTime(ee)})}}break}case"poll_update":{var re,oe=V(h,r,a,i);if(oe==null)continue;var ae=(re=oe.obj.payload)==null||(re=re.content)==null?void 0:re.pollUpdateMessage;if(ae!=null){var ie={externalId:o("WAStanzaUtils").toStanzaId(g.rawIdentifierString)};ae.addOption!=null&&(ie.addOption=ae.addOption),ae.vote!=null&&(ie.vote=ae.vote),ae.pollCreationMessageKey!=null&&(ie.pollCreationMessageKey=ae.pollCreationMessageKey),d.groupPollUpdateData!=null?d.groupPollUpdateData.push(ie):d.groupPollUpdateData=[ie]}break}case"unknown":{var le=_.split(":"),se=le[0];D.MUSTFIX(T||(T=babelHelpers.taggedTemplateLiteralLoose(["Unknown supplemental identifier. Identifier prefix: ",". Parts: ",""])),se||"null",le.length);break}default:g.type}}return a.add(e.otid),d}l.removeDeprecatedProtobufRestoreArgs=x,l.createUnstoredDbContentFromProtobufObject=N,l.decodeProtobufArray=H,l.decodeDecryptedMessageProtobuf=G}),98);
__d("MAWLoadDbMigrationVersion",["ExecutionEnvironment","MAWBridge","MAWCurrentUser","MAWDBMigrationUtils","MAWDbAppMeta","MAWDbObjEncryption","MAWIndexedDbMetadata","MAWUnrecoverableDbErrors","MWFBLogger","Promise","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g=o("MWFBLogger").MWLogger().tags(["db","MAWLoadDbMigrationVersion"]);function h(t){var a=o("MAWCurrentUser").getID(),i=o("MAWIndexedDbMetadata").dbName(a);return new(f||(f=n("Promise")))(function(n){if(!indexedDB){n();return}var a=indexedDB.open(i);a.onupgradeneeded=function(t){t.target.transaction.abort();var r=t.target.result;g.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," onupgradeneeded - closing db"])),i),r==null||r.close(),n()},a.onsuccess=function(e){var a=e.target.result;if(a==null){n();return}try{var i=a.transaction("appMeta","readonly");i.onerror=function(e){var t;g.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Transaction error: ",""])),(t=e.target.error)==null?void 0:t.message),a.close(),n()};var l=i.objectStore("appMeta"),m=l.get(o("MAWDbAppMeta").AppMetaKeysEnum.dbMigrationVersion);m.onerror=function(e){var t;g.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Request error: ",""])),(t=e.target.error)==null?void 0:t.message),a.close(),n()},m.onsuccess=function(e){a.close();var i=e.target.result;if(i!=null)try{var l=o("MAWDbObjEncryption").decryptDbObj(babelHelpers.extends({},i),"appMeta",t),s=l.value.dbMigrationVersion;s!=null&&(o("MAWDBMigrationUtils").mawDbMigrationVersion.version=s)}catch(e){var u=r("getErrorSafe")(e);g.catching(u).MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Failed to decrypt appMeta row"]))),(_||(_=r("ExecutionEnvironment"))).isInWorker&&o("MAWBridge").getBridge().fireAndForget("event","unrecoverableDbError",{error:new(o("MAWUnrecoverableDbErrors")).EarRuntimeError})}n()}}catch(e){var p=r("getErrorSafe")(e);g.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Error accessing appMeta: ",""])),p.message),a.close(),n()}},a.onerror=function(e){var t;g.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," error ",""])),i,e==null||(t=e.target)==null||(t=t.error)==null?void 0:t.message),n()},a.onblocked=function(e){var t=e.target.result;g.DEBUG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," blocked"])),i),t==null||t.close()}})}l.default=h}),98);
__d("MAWReStoreDbSetup",["FBLogger","MAWGetReStoreDBError","asyncToGeneratorRuntime","cr:10742","cr:2924","cr:3535"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e=(s=n("cr:3535"))!=null?s:n("cr:10742"))!=null?e:n("cr:2924"),c=u==null?void 0:u.createDB,d;function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield d;e==null||e.closeDb==null||e.closeDb(),d=null}),p.apply(this,arguments)}function _(){if(c==null)throw r("FBLogger")("messenger_web").mustfixThrow("Unexpected invocation of OneDB");return d==null&&(d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e=yield c();return yield e.runInTransaction(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){}),"readwrite",void 0,void 0,i.id+":44"),e}catch(e){throw new(r("MAWGetReStoreDBError"))("Failed to get ReStore DB: "+e)}})()),d}function f(){return c!=null}l.closeDB=m,l.getDB=_,l.shouldUseReStoreDb=f}),98);
__d("MAWReStoreDb",["FBLogger","MAWIndexedDb","MAWReStoreDbSetup","asyncToGeneratorRuntime","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(r("gkx")("3577"))try{var t=yield o("MAWReStoreDbSetup").getDB();return t}catch(e){var n=r("getErrorSafe")(e);throw r("FBLogger")("igd_web").blameToPreviousFrame().catching(n).mustfixThrow("Failed to get ReStore DB: %s",arguments[0])}return e==null&&(o("MAWIndexedDb").willSetupDB()?e=o("MAWIndexedDb").getDB().then(function(){return o("MAWReStoreDbSetup").getDB()}):e=o("MAWReStoreDbSetup").getDB()),e}),u.apply(this,arguments)}function c(){return o("MAWReStoreDbSetup").shouldUseReStoreDb()}l.getDB=s,l.shouldUseReStoreDb=c}),98);
__d("MAWUpdateClientRestoreStatusOperationType",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1;i.upsertClientRestoreStatus=e,i.markCompleteClientRestoreStatus=l}),66);
__d("MAWWorkerPersistedDataService",["FBLogger","MAWBridge","MAWCacheServiceUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="maw_persisted_data_service_broadcast",s=function(){return o("MAWCacheServiceUtils").globalScope.BroadcastChannel?new(o("MAWCacheServiceUtils")).globalScope.BroadcastChannel(e):(r("FBLogger")("messenger_e2ee_web").warn("BroadcastChannel is not supported in this browser"),null)},u=(function(){function t(){this.$1=s()}var n=t.prototype;return n.emitBroadcastChannelMessageToUI=function(n,r,a,i){var t={cache:r,instanceKey:i,namespace:n,source:a};this.$1==null?o("MAWBridge").getBridge().fireAndForget("event","broadcastChannelFallback",{event:{data:t},namespace:e}):this.$1.postMessage(t)},t})(),c=null,d=function(){return c==null&&(c=new u),c};l.MAW_PERSISTED_DATA_SERVICE_BROADCAST_CHANNEL=e,l.getMAWPersistedDataServiceBroadcastChannel=s,l.getMAWWorkerPersistedDataService=d}),98);
__d("MWPMiniSearch",["minisearch"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e={fuzzy:0,prefix:!0};return{fields:["content"],searchOptions:e}}function s(t){t===void 0&&(t=function(){return{}});var n;function o(){n=new(r("minisearch"))(babelHelpers.extends({},e(),t()))}return{getInstance:function(){return n==null&&o(),n}}}l.createMiniSearchSingleton=s}),98);
__d("MediaDownloadMediator",["asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t,n){e.set(t,n)}function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r;yield(r=e.get(t))==null?void 0:r.continue(n),e.delete(t)}),u.apply(this,arguments)}function c(t,n){var r;(r=e.get(t))==null||r.handleError(n),e.delete(t)}i.mapDeliveryObjectIdToMediaDownloader=l,i.handleNewCDNUrlFromMI=s,i.handleMIDownloadFailure=c}),66);
__d("ReStoreLocalStorageQuotaExceed",["FBLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e="Failed to execute 'setItem' on 'Storage'",s="ReStoreLocalStorageQuotaExceed";function u(){try{var t=window.localStorage,n=[],o=[];if(t!=null&&t.length!==0){for(var a in t)if(n.length===0&&o.length===0&&a.includes("falco_queue_log")&&o.push(a),!!Object.prototype.hasOwnProperty.call(t,a)){var i=((t[a]||"").length+a.length)*2;i/1024>2e3&&n.push(a)}}return r("FBLogger")("messenger_web").mustfix(e+": QuotaExceeded - trying to clean up %s or %s",n.join(","),o.join(",")),n.length!==0?n:o}catch(e){return r("FBLogger")("messenger_web").mustfix("Error getting local storage big values for cleanup."),[]}}function c(){try{var e=window.localStorage,t=u();t.forEach(function(t){e.removeItem(t)})}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("maw_db").mustfix("Couldn't remove vals from localStorage",n.message)}}var d=(function(t){function n(n){var r,o=e+": "+n+"; Keys to delete: "+u().join(",");return r=t.call(this,o)||this,r.message=o,r.name=s,r}return babelHelpers.inheritsLoose(n,t),n})(babelHelpers.wrapNativeSuper(Error));l.ERROR_NAME=s,l.getLocalStorageValuesToRemoveOnExceed=u,l.clearLocalStorageBigValues=c,l.ReStoreLocalStorageQuotaExceed=d}),98);
__d("SharedWorkerBootstrap",["CurrentSharedWorker","CurrentSharedWorkerAdapter"],(function(t,n,r,o,a,i,l){"use strict";function e(e){u(function(){return n.call(null,e)})}function s(e){u(function(){return e})}function u(e){o("CurrentSharedWorker").onInitComplete(function(){var t=e();if(typeof t=="function"||t!==null)try{t(new(o("CurrentSharedWorkerAdapter")).CurrentSharedWorkerAdapter)}catch(e){}})}l.start=e,l.startServerJS=s}),98);
__d("SharedOrWebWorkerBootstrapInit",["SharedWorkerBootstrap","WorkerBootstrap"],(function(t,n,r,o,a,i){"use strict";function e(e){"SharedWorkerGlobalScope"in self&&self instanceof self.SharedWorkerGlobalScope?n("SharedWorkerBootstrap").startServerJS(e):n("WorkerBootstrap").startServerJS(e)}i.startServerJS=e}),66);
__d("WAAPIMetrics",["WAGlobals","WAJids","WAPREList","WAPREMetrics"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return n===void 0&&(n={}),function(){for(var r=u(t,n),o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e.apply(void 0,[r].concat(a)).then(function(e){return r.endSuccess(),e}).catch(function(e){throw r.endFail("error",{string:{error:""+e.toString()}}),e})}}function s(e,t,n){return n===void 0&&(n={}),function(){var r=u(t,n);return e.apply(void 0,arguments).then(function(e){return r.endSuccess(),e}).catch(function(e){throw r.endFail("error",{string:{error:""+e.toString()}}),e})}}function u(e,t){var n,r;t===void 0&&(t={});var a=null;try{a=o("WAGlobals").getDependencies().isEmployee()&&o("WAGlobals").getDependencies().isUseridAnnotationEnabled()?o("WAJids").extractUserId(o("WAGlobals").getMyUserJid()).slice(-5):null}catch(e){}return o("WAPREMetrics").startMetric(o("WAPREList").PRE_METRIC.WA_JOB_MANAGER,babelHelpers.extends({},t,{string:babelHelpers.extends({},(n=(r=t)==null?void 0:r.string)!=null?n:{},{name:e,userHash:a})}))}l.withMetrics=e,l.withMetricWrapper=s}),98);
__d("WAAPIDeferred",["WAAPIMetrics","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=r("requireDeferred"))("WADbPersonalSenderKeyStatusTxns").__setRef("WAAPIDeferred"),u=e("WADbRegistrationApi").__setRef("WAAPIDeferred"),c=e("WADownloadMedia").__setRef("WAAPIDeferred"),d=e("WAGenerateAndUploadPreKeys").__setRef("WAAPIDeferred"),m=e("WAGetCurrentUserDeviceList").__setRef("WAAPIDeferred"),p=e("WAGetDevices").__setRef("WAAPIDeferred"),_=e("WAGetIdentityKeys").__setRef("WAAPIDeferred"),f=e("WANotifyDeviceChange").__setRef("WAAPIDeferred"),g=e("WAPublishAppDataProtocol").__setRef("WAAPIDeferred"),h=e("WAPublishMessage").__setRef("WAAPIDeferred"),y=e("WAQueryGroups").__setRef("WAAPIDeferred"),C=e("WARemoveCurrentDevice").__setRef("WAAPIDeferred"),b=e("WARemoveDevice").__setRef("WAAPIDeferred"),v=e("WASendAppDataFanoutProtocol").__setRef("WAAPIDeferred"),S=e("WASendMsgUtilV2").__setRef("WAAPIDeferred"),R=e("WASendPing").__setRef("WAAPIDeferred"),L=e("WASyncAbProps").__setRef("WAAPIDeferred"),E={getCurrentUserDeviceList:function(){return m.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.getCurrentUserDeviceList,"getCurrentUserDeviceList")()})},syncAbProps:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return L.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.syncAbProps,"syncAbProps").apply(void 0,t)})},generateAndUploadPreKeys:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.generateAndUploadPreKeys,"generateAndUploadPreKeys",{bool:{deferred_load:!0}}).apply(void 0,t)})},publishAppData:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.publishAppData,"publishAppData",{bool:{deferred_load:!0}}).apply(void 0,t)})},getDevicesBeforeSend:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S.load().then(function(e){var n=e.getDevicesBeforeSend;return o("WAAPIMetrics").withMetrics(n,"getDevicesBeforeSend",{bool:{deferred_load:!0}}).apply(void 0,t)})},getIdentityKeys:function(){return _.load().then(function(e){var t=e.getIdentityKeysInWorker;return o("WAAPIMetrics").withMetrics(t,"getIdentityKeys",{bool:{deferred_load:!0}})()})},publishMessage:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.load().then(function(e){var n=e.publishMessage;return o("WAAPIMetrics").withMetricWrapper(n,"publishMessage",{bool:{deferred_load:!0}}).apply(void 0,t)})},sendChatMessage:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S.load().then(function(e){var n=e.sendChatMessage;return o("WAAPIMetrics").withMetrics(n,"sendChatMessage",{bool:{deferred_load:!0}}).apply(void 0,t)})},updateClockSkew:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.updateClockSkew,"updateClockSkew",{bool:{deferred_load:!0}}).apply(void 0,t)})},queryGroups:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.queryGroups,"queryGroups",{bool:{deferred_load:!0}}).apply(void 0,t.concat([!1]))})},queryGroupsForce:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.queryGroups,"queryGroups",{bool:{deferred_load:!0}}).apply(void 0,t.concat([!0]))})},getDevices:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.getDevices,"getDevices",{bool:{deferred_load:!0}}).apply(void 0,t)})},removeDevice:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.removeDevice,"=>",{bool:{deferred_load:!0}}).apply(void 0,t)})},removeCurrentDevice:function(){return C.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.removeCurrentDevice,"removeCurrentDevice",{bool:{deferred_load:!0}})()})},notifyDeviceChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.notifyDeviceChange,"notifyDeviceChange",{bool:{deferred_load:!0}}).apply(void 0,t)})},saveLastSessionDeviceWasLinkedTo:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.saveLastSessionDeviceWasLinkedTo,"saveLastSessionDeviceWasLinkedTo").apply(void 0,t)})},sendAppData:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.sendAppDataToDevicesProtocol,"sendAppData",{bool:{deferred_load:!0}}).apply(void 0,t)})},setRotateSenderKeyToTrue:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.load().then(function(e){return o("WAAPIMetrics").withMetrics(function(t,n){return e.bulkSetRotateSenderKeyToTrue(n)},"setRotateSenderKeyToTrue").apply(void 0,t)})},downloadMedia:function(t){return c.load().then(function(e){return e.downloadMedia(t)})},cachedDownloadFullMediaOnly:function(t){return c.load().then(function(e){return e.cachedDownloadFullMediaOnly(t)})}},k=E;l.default=k}),98);
__d("WAAbPropsTypes",[],(function(t,n,r,o,a,i){"use strict";var e={noyb_opt_out_flag:[3488,"bool",!1,!1],service_improvement_opt_out_flag:[3664,"bool",!1,!1],msgrw_test_bool:[704,"bool",!1,!1],msgrw_test_int:[705,"int",0,0],msgrw_test_string:[706,"string","test_string","test_string"],msgrw_test_float:[707,"float",1,1],msgrw_icdc_alert_trigger_failure_count:[1233,"int",8,8],msgrw_icdc_cooldown_interval_in_minutes:[1234,"int",35,35],msgrw_icdc_interval_in_minutes:[1236,"int",1500,1500],msgrw_logger_entries:[1298,"int",0,0],msgrw_max_keys:[2453,"int",812,812],msgrw_job_manager_conf:[2667,"string",'{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}','{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}'],client_group_participants_limit:[618,"int",257,257],client_group_name_length_limit:[1200,"int",25,25]};i.ABPropConfigs=e}),66);
__d("WAAbPropsToUI",["WAAbPropsTypes"],(function(t,n,r,o,a,i,l){"use strict";var e=["client_group_participants_limit","client_group_name_length_limit"];function s(t){var n=t!=null?t:{},r={};return e.forEach(function(e){n[e]!=null?r[e]=n[e]:r[e]=o("WAAbPropsTypes").ABPropConfigs[e][2]}),r}l.prepareAbPropsForUI=s}),98);
__d("WARetryPromise",["Promise","WAAbortError","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a){return new(e||(e=n("Promise")))(function(i,l){var s=0,u,c=!1;if(a){var d=function(){a.removeEventListener("abort",d),c=!0,u!=null&&clearTimeout(u),l(new(o("WAAbortError")).AbortError)};if(a.aborted){d();return}a.addEventListener("abort",d)}function m(){var o=!1,a=!1;u=null;try{var d=t({retry:function(t){if(!(c||a)){if(o=!0,s++,t==null)return m();u=setTimeout(m,t)}},failCount:s});if(!(d instanceof(e||(e=n("Promise")))))throw r("err")("TypeError: task must return a promise");d.then(function(e){c||o||(a=!0,i(e))}).catch(function(e){c||o||(a=!0,l(e))})}catch(e){if(c||o)return;l(e)}}m()})}l.default=s}),98);
__d("WABackoff",["Promise","WARetryPromise","WARetryableError","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=Object.freeze({timeoutIncludesTaskDuration:!0});function u(t,o){var a=babelHelpers.extends({},s,t),i=a.signal,l=a.timeoutIterator,u=a.timeoutIncludesTaskDuration;return r("WARetryPromise")(function(t){var a=t.retry,i=t.failCount;return new(e||(e=n("Promise")))(function(t,s){var c=Date.now();try{o(d,i).then(t).catch(m)}catch(e){m(r("getErrorSafe")(e));return}function d(t){return(e||(e=n("Promise"))).reject(new(r("WARetryableError"))(t))}function m(e){if(!(e instanceof r("WARetryableError")))return void s(e);var t=l.next();if(t.done)return void s(e.source);var n=Date.now()-c,o=u?Math.max(t.value-n,0):t.value;a(o)}})},i)}l.defaults=s,l.backoff=u}),98);
__d("WAExponentialIterator",[],(function(t,n,r,o,a,i){"use strict";function*e(e){for(var t=1;;)yield t,t*=e}i.default=e}),66);
__d("WAExponentialBackoffIterator",["WAExponentialIterator"],(function(t,n,r,o,a,i,l){"use strict";var e={factor:2,jitter:0,maxTimeout:1/0};function*s(t){var n=babelHelpers.extends({},e,t),o=n.factor,a=n.jitter,i=n.maxTimeout,l=n.minTimeout,s=n.retries,u=0;for(var c of r("WAExponentialIterator")(o)){if(u++,u>s)return;var d=1+(Math.random()*a*2-a);yield Math.min(l*c*d,i)}}l.defaults=e,l.exponentialBackoffIterator=s}),98);
__d("WAExponentialBackoff",["WABackoff","WAExponentialBackoffIterator"],(function(t,n,r,o,a,i,l){"use strict";var e=["signal","timeoutIncludesTaskDuration"],s=babelHelpers.extends({},o("WAExponentialBackoffIterator").defaults,o("WABackoff").defaults);function u(t,n){var r=babelHelpers.extends({},s,t),a=r.signal,i=r.timeoutIncludesTaskDuration,l=babelHelpers.objectWithoutPropertiesLoose(r,e),u=o("WAExponentialBackoffIterator").exponentialBackoffIterator(l);return o("WABackoff").backoff({signal:a,timeoutIterator:u,timeoutIncludesTaskDuration:i},n)}l.exponentialBackoff=u}),98);
__d("WmiMessageSendService",["FBLogger","Promise","QPLFlow","WorkerScheduler","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(function(){function e(e){var t=this,o=e.pipeline,a=e.postSendPipeline;this.$3=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n,o){try{return yield f(e,n,o,t.$1)}catch(e){var a=r("getErrorSafe")(e);throw r("FBLogger")("wmi").catching(a).mustfixThrow("MSS: publish fails")}});return function(t,n,r){return e.apply(this,arguments)}})(),this.$1=o,this.$2=a}var t=e.prototype;return t.publish=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,o){var a=this,i=yield this.$3(e,t,o);(d||(d=n("Promise"))).resolve().then(function(){return p(e,i,a.$2)}).catch(function(e){var t=r("getErrorSafe")(e);throw r("FBLogger")("wmi").catching(t).mustfix("MSS: post-send pipeline fails")})});function t(t,n,r){return e.apply(this,arguments)}return t})(),e})();function p(e,t,n){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){var i=n,l=o("QPLFlow").startNoopQPLFlow();for(var u of a){r("FBLogger")("wmi").DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MSS: "," start"])),u.name);try{i=yield u.process(t,i,l)}catch(e){throw r("FBLogger")("wmi").DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["MSS: "," end"])),u.name),e}}return i}),_.apply(this,arguments)}function f(e,t,n,r){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,o){var a=t;for(var i of o){n.addPoint(i.name+"_start"),r("FBLogger")("wmi").DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["MSS: "," start"])),i.name);try{a=yield i.process(e,a,n)}catch(e){throw n.addPoint(i.name+"_fail"),e}r("FBLogger")("wmi").DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["MSS: "," end"])),i.name),n.addPoint(i.name+"_end")}return a}),g.apply(this,arguments)}function h(e,t,r,a){var i=o("WorkerScheduler").makeScheduler(e,a);return{name:"cticial-section-"+e,process:function(a,l,s){return t(a,l)?i.runTask({customFlags:{runtimeReliability:!0},fn:function(){return f(a,l,s,r)},name:"publish",priority:o("WorkerScheduler").BLOCKING_PRIORITY}):(d||(d=n("Promise"))).resolve(l)}}}l.MessageSendService=m,l.criticalSectionPipeline=h}),98);
__d("WorkerBanzaiLazyQueueChannelWorker",["BanzaiLazyQueue","WorkerFuncChannel"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("WorkerFuncChannel").importChannel({queuePost:null},e,"banzai_lazyqueue_channel");r("BanzaiLazyQueue").onQueue.add(function(){s(t)}),s(t)}function s(e){r("BanzaiLazyQueue").flushQueue().forEach(function(t){e.queuePost.apply(e,t)})}l.init=e}),98);
__d("WorkerSelf",["WorkerBanzaiLazyQueueChannelWorker","WorkerFuncChannel","WorkerQPLChannel"],(function(t,n,r,o,a,i,l){"use strict";function e(e){o("WorkerFuncChannel").activateChannels(e,"worker","client"),o("WorkerBanzaiLazyQueueChannelWorker").init(e),o("WorkerQPLChannel").setMessagePort(e)}l.init=e}),98);
__d("isMAWUniversalSearchWithEBEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("4741")}l.default=e}),98);